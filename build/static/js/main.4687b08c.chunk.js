(this.webpackJsonptsf=this.webpackJsonptsf||[]).push([[0],{675:function(e,t){},677:function(e,t){},707:function(e,t){},708:function(e,t){},819:function(e,t){},988:function(e,t,n){"use strict";n.r(t);var r=n(37),i=n.n(r),a=n(44),o=n(15),c=n(7),l=n(0),u=n.n(l),d=n(36),s=n(583),b=n.n(s),f=n(1137),j=n(1099),p=n(1062),m=Object(j.a)((function(){return Object(p.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),h=function(){return m(),null},v=n(602),O=n(29),x=["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],g={h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}},y=Object(v.a)({palette:{background:{default:"#F4F6F8",paper:O.a.common.white},primary:{contrastText:"#ffffff",main:"#5664d2"},text:{primary:"#172b4d",secondary:"#6b778c"}},shadows:x,typography:g}),w=n(4),S=n(1082),C=n(1111),P=n(1113),I=n(1009),T=n(1114),k=n(1115),A=n(1106),F=n(1074),D=n(1075),R=n(1),N=function(e){var t=e.idSociety;return Object(R.jsx)("img",{alt:"Logo",height:"60px",src:"".concat("http://104.131.28.211:3000/","public/").concat(null===t||void 0===t?void 0:t.logo)})},Q=n(1064),z=n(1066),E=n(1067),V=n(1068),U=n(1069),M=n(1070),L=n(1071),_=n(1072),B=[{path:"op",icon:Q.a,title:"OPs",acceso:"oppago"},{path:"AuthAdmOP",icon:Q.a,title:"OPs Auth ADM",acceso:"AuthAdmOP"},{path:"AuthObraOP",icon:Q.a,title:"OPs Auth Obra",acceso:"AuthObraOP"},{path:"factura",icon:z.a,title:"Facturas",acceso:"factura"},{path:"proveedores",icon:E.a,title:"Proveedores",acceso:"proveedores"},{path:"fideicomiso",icon:V.a,title:"Fideicomisos",acceso:"fideicomiso"},{path:"rubro",icon:U.a,title:"Rubros",acceso:"rubro"},{path:"cac",icon:M.a,title:"CAC",acceso:"cac"},{path:"dolar",icon:L.a,title:"D\xf3lar",acceso:"dolar"},{path:"banco",icon:L.a,title:"Bancos",acceso:"banco"},{path:"usuarios",icon:_.a,title:"Usuarios",acceso:"usuarios"}];function q(e){var t,n=e.setisMobileNavOpen,r=e.setLoggedUser,i=e.idSociety,o=e.loggedUser,c={avatar:"/static/images/avatars/"+o.avatar},l=Object(d.i)(),u=Object(d.h)().pathname,s=u.split("/")[u.split("/").length-1];o||f();var b=(null===(t=B.find((function(e){return e.path===s})))||void 0===t?void 0:t.title)||s;function f(){r(null),l("../".concat(null===i||void 0===i?void 0:i.nombre))}return Object(R.jsx)(C.a,{elevation:0,children:Object(R.jsxs)(P.a,{children:[Object(R.jsx)(a.b,{to:"/",children:Object(R.jsx)(N,{idSociety:i})}),Object(R.jsx)("div",{style:{marginLeft:50,fontSize:24},children:Object(R.jsx)(I.a,{align:"left",color:"white",variant:"h4",children:"0"===b||"1"===b?"OP Detalle":b.replace("-"," de ").replace("%20"," ").replace("%20"," ").replace("%20"," ").replace("_",": ")})}),Object(R.jsx)(T.a,{sx:{flexGrow:1}}),Object(R.jsx)("div",{children:Object(R.jsx)(I.a,{align:"left",color:"white",variant:"h4",children:null===o||void 0===o?void 0:o.user})}),Object(R.jsx)(k.a,{color:"inherit",children:Object(R.jsx)(A.a,{component:a.b,to:"/",src:c.avatar,sx:{cursor:"pointer",width:30,height:30}})}),Object(R.jsx)(k.a,{color:"inherit",sx:{display:{md:"block",lg:"none"}},onClick:n,children:Object(R.jsx)(F.a,{})}),Object(R.jsx)(k.a,{color:"inherit",onClick:f,children:Object(R.jsx)(D.a,{})})]})})}var H=n(1118),W=n(1119),G=n(13),J=n(603),Z=n(1107),Y=n(1117),$=["href","icon","title"];function K(e){var t=e.href,n=e.icon,r=e.title,i=Object(J.a)(e,$),o=Object(d.h)(),c=!!t&&!!Object(d.f)({path:t,end:!1},o.pathname);return Object(R.jsx)(Z.a,Object(G.a)(Object(G.a)({disableGutters:!0,sx:{display:"flex",py:0}},i),{},{children:Object(R.jsxs)(Y.a,{component:a.c,sx:Object(G.a)(Object(G.a)({color:"text.secondary",fontWeight:"medium",justifyContent:"flex-start",letterSpacing:0,py:1.25,textTransform:"none",width:"100%"},c&&{color:"primary.main"}),{},{"& svg":{mr:1}}),to:t,children:[n&&Object(R.jsx)(n,{size:"20"}),Object(R.jsx)("span",{children:r})]})}))}function X(e){var t=e.setisMobileNavOpen,n=e.setLoggedUser,r=e.isMobileNavOpen,i=e.idSociety,a=e.loggedUser,o=Object(d.i)();a||(n(null),o("../".concat(null===i||void 0===i?void 0:i.nombre)));var c=Object(R.jsx)(T.a,{sx:{display:"flex",flexDirection:"column",height:"100%",p:2},children:Object(R.jsx)(H.a,{children:ee(B,null===a||void 0===a?void 0:a["rol.accesoTXT"]).map((function(e){return Object(R.jsx)(K,{href:"/".concat(null===i||void 0===i?void 0:i.nombre,"/").concat(e.path),title:e.title,icon:e.icon},e.title)}))})});return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(W.a,{variant:"temporary",sx:{display:{xs:"block",lg:"none"}},anchor:"left",onClose:t,open:r,PaperProps:{sx:{width:256}},children:c}),Object(R.jsx)(W.a,{variant:"persistent",open:!0,sx:{display:{xs:"none",lg:"block"}},anchor:"left",PaperProps:{sx:{width:256,top:64,height:"calc(100% - 64px)"}},children:c})]})}function ee(e,t){var n=[{}];return e.forEach((function(e){-1!==t.indexOf(e.acceso)&&""!==e.acceso.trim()&&null!==e.acceso&&void 0!==e.acceso&&n.push(e)})),n.splice(0,1),n}var te=Object(S.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),ne=Object(S.a)("div")((function(e){var t=e.theme;return Object(w.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},t.breakpoints.up("lg"),{paddingLeft:256})})),re=Object(S.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),ie=Object(S.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"});function ae(e){var t=e.setLoggedUser,n=e.idSociety,r=e.loggedUser,i=Object(d.i)();r||(t(null),i("../".concat(null===n||void 0===n?void 0:n.nombre)));var a=Object(l.useState)(!1),o=Object(c.a)(a,2),u=o[0],s=o[1];return Object(R.jsxs)(te,{children:[Object(R.jsx)(q,{setisMobileNavOpen:function(){return s(!u)},setLoggedUser:t,idSociety:n,loggedUser:r}),Object(R.jsx)(X,{idSociety:n,loggedUser:r,setisMobileNavOpen:function(){return s(!u)},isMobileNavOpen:u}),Object(R.jsx)(ne,{children:Object(R.jsx)(re,{children:Object(R.jsx)(ie,{children:Object(R.jsx)(d.b,{})})})})]})}var oe=function(e){return Object(R.jsx)(C.a,Object(G.a)(Object(G.a)({elevation:0},e),{},{children:Object(R.jsx)(P.a,{sx:{height:64},children:Object(R.jsx)(a.b,{to:"/",children:Object(R.jsx)(N,{})})})}))},ce=Object(S.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),le=Object(S.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64}),ue=Object(S.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),de=Object(S.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),se=function(){return Object(R.jsxs)(ce,{children:[Object(R.jsx)(oe,{}),Object(R.jsx)(le,{children:Object(R.jsx)(ue,{children:Object(R.jsx)(de,{children:Object(R.jsx)(d.b,{})})})})]})},be=n(5),fe=n.n(be),je=n(14),pe=n(1120),me=n(1121),he=n(1101),ve=n(33),Oe=n(19),xe=n(270),ge=n.n(xe),ye="http://104.131.28.211:3000/",we=function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.get("".concat(ye).concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.post("".concat(ye).concat(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(je.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.delete("".concat(ye).concat(t),{data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Pe(e){var t,n,r=e.setLoggedUser,i=e.setIdSociety,a=Object(l.useContext)(pi),u=Object(d.j)().societyName,s=Object(d.i)();localStorage.setItem("loggedUserInfo",null),localStorage.setItem("bs",null),localStorage.setItem("co",null),localStorage.setItem("estados",null),localStorage.setItem("formaPagos",null);var b=Object(l.useState)("none"),f=Object(c.a)(b,2),j=f[0],p=f[1];Object(l.useEffect)((function(){!function(e,t){Ie.apply(this,arguments)}(u,i)}),[i,u]);var m=Object(o.useQuery)(["bancos",a],(function(){return we("banco/listar/".concat(a.id))})).data;localStorage.setItem("bs",JSON.stringify(m));var h=Object(o.useQuery)(["cuentasbanco",a],(function(){return we("cuentabanco/listar/".concat(a.id,"/0"))})).data;localStorage.setItem("co",JSON.stringify(h));localStorage.setItem("estados",JSON.stringify([{id:0,descripcion:"-"},{id:1,descripcion:"Para autorizar Obra"},{id:2,descripcion:"Para pagar"},{id:3,descripcion:"Pagada"},{id:4,descripcion:"Para autorizar AC"},{id:5,descripcion:"Pagado Parcial"},{id:6,descripcion:"Anulado"},{id:7,descripcion:"Cargada en Banco"}]));localStorage.setItem("retenciones",JSON.stringify([{id:0,descripcion:"-"},{id:1,descripcion:"No aplican"},{id:2,descripcion:"OK"},{id:3,descripcion:"Pendiente"}]));localStorage.setItem("fondos_s",JSON.stringify([{id:0,descripcion:"-"},{id:1,descripcion:"Sin fondos"},{id:2,descripcion:"OK cargado"}]));localStorage.setItem("tipos",JSON.stringify([{id:0,descripcion:"Factura"},{id:1,descripcion:"Nota d\xe9bito"},{id:2,descripcion:"Nota cr\xe9dito"},{id:3,descripcion:"Boleta Pago"}]));return localStorage.setItem("formaPagos","-,Transferencia ARS,Transferencia USD,Cheque,Efectivo ARS,Efectivo USD,Otra"),Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{onChangeClientState:function(){},children:Object(R.jsxs)("title",{children:["Login | ",null!==(t=null===a||void 0===a?void 0:a.nombreComercial)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(R.jsxs)(pe.a,{maxWidth:"sm",children:[Object(R.jsx)("div",{style:{width:"100%"},children:Object(R.jsx)("img",{style:{display:"block",margin:"auto",width:"50%",backgroundColor:"#777777"},src:"".concat("http://104.131.28.211:3000/","public/").concat(null===a||void 0===a?void 0:a.logo),alt:"logo"})}),Object(R.jsx)(Oe.c,{enableReinitialize:"true",initialValues:{email:"".concat(null!==(n=null===a||void 0===a?void 0:a.dominio)&&void 0!==n?n:""),password:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(a.id,t.email,t.password,r);case 2:if(!e.sent){e.next=6;break}s("/".concat(u),{replace:!0}),e.next=8;break;case 6:p("flex"),n.resetForm();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){return Object(R.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(R.jsx)(me.a,{fullWidth:!0,label:"Correo",margin:"normal",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.email,variant:"outlined"}),Object(R.jsx)(me.a,{fullWidth:!0,label:"Contrase\xf1a",margin:"normal",name:"password",autoComplete:"on",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password,variant:"outlined"}),Object(R.jsxs)(T.a,{sx:{py:2},children:[Object(R.jsx)(he.a,{style:{display:j},severity:"error",onClose:function(){p("none")},children:"Correo y/o contrase\xf1a inv\xe1lidos"}),Object(R.jsx)(Y.a,{color:"primary",disabled:e.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Ingresar"})]})]})}})]})})]})}function Ie(){return(Ie=Object(je.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Te(t);case 2:r=e.sent,n(Object(G.a)({},r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return ke.apply(this,arguments)}function ke(){return(ke=Object(je.a)(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("sociedad/mostrar/".concat(t));case 2:return n=e.sent,localStorage.removeItem("idSociety"),n&&localStorage.setItem("idSociety",JSON.stringify(Object(G.a)({},n))),e.next=7,n;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t,n,r){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(je.a)(fe.a.mark((function e(t,n,r,i){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Se,e.t1="usuario/login/",e.next=4,t;case 4:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),e.t4={mail:n,pass:r},e.next=9,(0,e.t0)(e.t3,e.t4);case 9:return a=e.sent,i(a),e.abrupt("return",null!==a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De=function(){return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsx)("title",{children:"404"})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(R.jsxs)(pe.a,{children:[Object(R.jsx)(I.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: La p\xe1gina no existe"}),Object(R.jsx)(T.a,{sx:{textAlign:"center"},children:Object(R.jsx)("img",{alt:"Under development",src:"/static/images/undraw_page_not_found_su7k.svg",style:{marginTop:50,display:"inline-block",width:560}})})]})})]})};var Re=n(22),Ne=n(1088),Qe=n(1097),ze=n(1096),Ee="3";function Ve(e){var t=new Date(e);return!isNaN(t.getTime())}function Ue(e){return void 0===e||null===e?null:new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC"})}function Me(e){return new Date(e).getDate()+" "+new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC",month:"short"})+" "+new Date(e).getFullYear()}function Le(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e),"-").concat((1+e.getMonth(e)).toString().padStart(2,"0"),"-").concat(e.getDate(e).toString().padStart(2,"0"))}function _e(e,t,n,r){return Be.apply(this,arguments)}function Be(){return(Be=Object(je.a)(fe.a.mark((function e(t,n,r,i){var a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=""+i).length>parseInt(Ee)&&(a=a.slice(a.length-parseInt(Ee))),o="".concat(t,"/checknumero/").concat(n,"/").concat(r,"/").concat(a),e.next=5,we(o);case 5:return c=e.sent,e.abrupt("return",!!c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(e,t,n){return He.apply(this,arguments)}function He(){return(He=Object(je.a)(fe.a.mark((function e(t,n,r){var i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/mostrar/").concat(n,"/").concat(r),e.next=3,we(i);case 3:return a=e.sent,e.abrupt("return",!!a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var We=n(1128),Ge=n(1087),Je=n(1129);function Ze(){var e=Object(l.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];return{Prompt:function(e){var t=e.ok,r=void 0!==t&&t,a=e.action,o=void 0===a?function(){}:a,c=e.message,l=void 0===c?"\xbfEst\xe1s seguro de eliminar este registro?":c;return Object(R.jsx)("div",{children:Object(R.jsxs)(We.a,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(R.jsx)(Ge.a,{id:"alert-dialog-title",children:l}),Object(R.jsx)(Je.a,{children:r?Object(R.jsx)(Y.a,{onClick:i,children:"Ok"}):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Y.a,{onClick:i,children:"No"}),Object(R.jsx)(Y.a,{onClick:function(){return function(e){e(),i()}(o)},autoFocus:!0,children:"S\xed"})]})})]})})},setIsPromptOpen:r};function i(){r(!1)}}function Ye(e){var t=e.loggedUser,n=Object(l.useContext)(pi),r=Ze(),i=r.setIsPromptOpen,a=r.Prompt,c=Object(o.useQueryClient)(),u=Object(o.useMutation)((function(e){return Se("dolar/agregar/".concat(n.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=t.id,e.next=3,c.invalidateQueries(["dolar",n]);case 3:return e.next=5,c.getQueryData(["dolar",n]);case 5:return i=e.sent,a=[].concat(Object(Re.a)(i),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),c.setQueryData(["dolar",n],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){return c.setQueryData(["dolar",n],r)},onSettled:function(){return c.invalidateQueries(["dolar",n])}}),d=u.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{fecha:new Date,mep:"",BCRA:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,r){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,o=r.resetForm,t.fecha=Le(t.fecha),e.next=4,qe("dolar",n.id,t.fecha);case 4:if(!e.sent){e.next=8;break}i(!0),e.next=9;break;case 8:d(t);case 9:o(),a(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{component:Ke,label:"Fecha",type:"date",name:"fecha"}),Object(R.jsx)(Oe.a,{as:me.a,label:"BCRA",size:"small",type:"float",maxLength:4,name:"BCRA",onChange:function(e){return $e(e,n,"BCRA")}}),Object(R.jsx)(Oe.a,{as:me.a,label:"MEP",size:"small",type:"float",name:"mep",onChange:function(e){return $e(e,n,"mep")}}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(a,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function $e(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,3}(\.\d{0,2})?$/.test(r.toString())&&t(n,r.toString())}function Ke(e){var t=e.field,n=e.form,r=t.name,i=t.value,a=n.setFieldValue;return Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:i,onChange:function(e){return a(r,e)},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({required:!0,size:"small"},e))}})})}var Xe=n(28),et=n(1089),tt=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return Ue(e.value)}},{field:"BCRA",preProcessEditCellProps:it,headerName:"BCRA",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mep",preProcessEditCellProps:it,headerName:"MEP",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]};function nt(){var e=Object(l.useContext)(pi),t=Ze(),n=t.Prompt,r=t.setIsPromptOpen,i=Object(l.useState)(),a=Object(c.a)(i,2),u=a[0],d=a[1],s=Object(o.useQuery)(["dolar",e],(function(){return we("dolar/listar/".concat(e.id))})),b=s.data,f=s.isLoading,j=s.error,p=Object(o.useQueryClient)(),m=Object(o.useMutation)(function(){var t=Object(je.a)(fe.a.mark((function t(n){return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ce("dolar/eliminar/".concat(e.id),{id:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(){var t=Object(je.a)(fe.a.mark((function t(n){var r,i;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.cancelQueries(["dolar",e]);case 2:return r=p.getQueryData(["dolar",e]),i=r.filter((function(e){return e.id!==n})),p.setQueryData(["dolar",e],i),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,n,r){return p.setQueryData(["dolar",e],r)},onSettled:function(){return p.invalidateQueries(["dolar",e])}}),h=m.mutate,v=Object(o.useMutation)(function(){var t=Object(je.a)(fe.a.mark((function t(n){var r,i,a;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.field,i=n.id,a=n.value,t.next=3,Se("dolar/modificar/".concat(e.id),Object(w.a)({id:i},r,a));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(){var t=Object(je.a)(fe.a.mark((function t(n){var r,i,a,o,c;return fe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.field,i=n.id,a=n.value,t.next=3,p.cancelQueries(["dolar",e]);case 3:return o=p.getQueryData(["dolar",e]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),p.setQueryData(["dolar",e],c),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,n,r){return p.setQueryData(["dolar",e],r)},onSettled:function(){return p.invalidateQueries(["dolar",e])}}),O=v.mutate;return f?"Cargando...":j?"Hubo un error: ".concat(j.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return h(u)}}),Object(R.jsx)(Xe.a,{rows:b.map((function(e){return{id:e.id,fecha:e.fecha,BCRA:e.BCRA,blue:e.blue,descripcion:e.descripcion,mep:e.mep,deleteId:e.id}})),onCellEditCommit:O,columns:tt(r,d),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:rt}})]})}function rt(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function it(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(G.a)(Object(G.a)({},e.props),{},{error:t})}function at(e){var t,n=e.loggedUser,r=Object(l.useContext)(pi);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["D\xf3lar | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Ye,{loggedUser:n})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(nt,{loggedUser:n})})]})})]})}function ot(e){var t=e.idSociety,n=e.loggedUser,r=Ze(),i=r.Prompt,a=r.setIsPromptOpen,c=Object(o.useQueryClient)(),l=Object(o.useMutation)((function(e){return Se("cac/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,c.cancelQueries(["cac",t]);case 3:return e.next=5,c.getQueryData(["cac",t]);case 5:return i=e.sent,a=[].concat(Object(Re.a)(i),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),c.setQueryData(["cac",t],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return c.setQueryData(["cac",t],r)},onSettled:function(){return c.invalidateQueries(["cac",t])}}),u=l.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{fecha:new Date,estimado:"",definitivo:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(n,r){var i,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.setSubmitting,o=r.resetForm,n.fecha=(c=n.fecha,"".concat(c.getFullYear(c),"-").concat((1+c.getMonth(c)).toString().padStart(2,"0"),"-01")),e.next=4,qe("cac",t.id,n.fecha);case 4:if(!e.sent){e.next=8;break}a(!0),e.next=9;break;case 8:u(n);case 9:o(),i(!1);case 11:case"end":return e.stop()}var c}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{component:s,label:"Fecha",type:"date",name:"fecha"}),Object(R.jsx)(Oe.a,{as:me.a,label:"Estimado",required:!0,type:"float",size:"small",maxLength:4,name:"estimado",onChange:function(e){return d(e,n,"estimado")}}),Object(R.jsx)(Oe.a,{as:me.a,label:"Definitivo",required:!0,type:"float",size:"small",name:"definitivo",onChange:function(e){return d(e,n,"definitivo")}}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(i,{message:"Ya hay un mes con informaci\xf3n, por favor editar el mes desde la grilla.",ok:!0})]});function d(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,4}(\.\d{0,2})?$/.test(r.toString())&&t(n,r.toString())}function s(e){var t=e.field,n=e.form,r=t.name,i=t.value,a=n.setFieldValue;return Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:i,onChange:function(e){return a(r,e)},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({required:!0,size:"small"},e))}})})}}var ct=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"estimado",headerName:"Estimado",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:ut,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"definitivo",headerName:"Definitivo",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:ut,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]};function lt(e){var t=e.idSociety,n=Ze(),r=n.Prompt,i=n.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],b=Object(o.useQuery)(["cac",t],(function(){return we("CAC/listar/".concat(t.id))})),f=b.data,j=b.isLoading,p=b.error,m=Object(o.useQueryClient)(),h=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("cac/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.cancelQueries(["cac",t]);case 2:return r=m.getQueryData(["cac",t]),i=r.filter((function(e){return e.id!==n})),m.setQueryData(["cac",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return m.setQueryData(["cac",t],r)},onSettled:function(){return m.invalidateQueries(["cac",t])}}),v=h.mutate,O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("cac/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,m.cancelQueries(["cac",t]);case 3:return o=m.getQueryData(["cac",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),m.setQueryData(["cac",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return m.setQueryData(["cac",t],r)},onSettled:function(){return m.invalidateQueries(["cac",t])}}),x=O.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return v(d)}}),Object(R.jsx)(Xe.a,{rows:f.map((function(e){return{id:e.id,fecha:e.fecha,estimado:e.estimado,definitivo:e.definitivo,deleteId:e.id}})),onCellEditCommit:x,columns:ct(i,s),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:function(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}}})]})}function ut(e){var t=!/^\d{0,4}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(G.a)(Object(G.a)({},e.props),{},{error:t})}function dt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["CAC | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(ot,{idSociety:n,loggedUser:r})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(lt,{idSociety:n,loggedUser:r})})]})})]})}function st(e){var t=e.idSociety,n=e.loggedUser,r=Ze().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Se("rubro/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["rubro",t]);case 3:return e.next=5,i.getQueryData(["rubro",t]);case 5:return a=e.sent,o=[].concat(Object(Re.a)(a),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["rubro",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["rubro",t],r)},onSettled:function(){return i.invalidateQueries(["rubro",t])}}),c=a.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{rubro:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"Rubro",required:!0,size:"small",type:"float",name:"rubro"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(r,{message:"El rubro no puede estar en blanco",ok:!0})]})}var bt=function(e,t){return[{field:"rubro",headerName:"Rubro",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]};function ft(e){var t=e.idSociety,n=Ze(),r=n.Prompt,i=n.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),s=u[0],b=u[1],f=Object(d.i)(),j=Object(o.useQuery)(["rubro",t],(function(){return we("rubro/listar/".concat(t.id))})),p=j.data,m=j.isLoading,h=j.error,v=Object(o.useQueryClient)(),O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("rubro/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["rubro",t]);case 2:return r=v.getQueryData(["rubro",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["rubro",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["rubro",t],r)},onSettled:function(){return v.invalidateQueries(["rubro",t])}}),x=O.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("rubro/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,v.cancelQueries(["rubro",t]);case 3:return o=v.getQueryData(["rubro",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),v.setQueryData(["rubro",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["rubro",t],r)},onSettled:function(){return v.invalidateQueries(["rubro",t])}}),y=g.mutate;return m?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(s)}}),Object(R.jsx)(Xe.a,{rows:p.map((function(e){return{id:e.id,rubro:e.rubro,deleteId:e.id}})),onCellEditCommit:y,onRowDoubleClick:function(e){var t;f("./".concat((t=e).row.id,"/Subrubros-").concat(t.row.rubro))},compone:!0,columns:bt(i,b),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:jt}})]})}function jt(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function pt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Rubro | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(st,{idSociety:n,loggedUser:r})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(ft,{idSociety:n,loggedUser:r})})]})})]})}function mt(e){var t=e.idSociety,n=e.idRubro,r=e.loggedUser,i=Ze().Prompt,a=Object(o.useQueryClient)(),c=Object(o.useMutation)((function(e){return Se("subrubro/agregar/".concat(t.id,"/").concat(n),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var i,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,a.invalidateQueries(["subrubro",t]);case 3:return e.next=5,a.getQueryData(["subrubro",t]);case 5:return i=e.sent,o=[].concat(Object(Re.a)(i),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),a.setQueryData(["subrubro",t],o),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return a.setQueryData(["subrubro",t],r)},onSettled:function(){return a.invalidateQueries(["subrubro",t])}}),l=c.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{subRubro:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,l(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"SubRubro",required:!0,size:"small",type:"float",name:"subRubro"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(i,{message:"El subrubro no puede estar en blanco",ok:!0})]})}var ht=function(e,t){return[{field:"subRubro",headerName:"SubRubro",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]};function vt(e){var t=e.idSociety,n=e.idRubro,r=Ze(),i=r.Prompt,a=r.setIsPromptOpen,u=Object(l.useState)(),d=Object(c.a)(u,2),s=d[0],b=d[1],f=Object(o.useQuery)(["subrubro",t],(function(){return we("subrubro/listar/".concat(t.id,"/").concat(n))})),j=f.data,p=f.isLoading,m=f.error,h=Object(o.useQueryClient)(),v=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("subrubro/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["subrubro",t]);case 2:return r=h.getQueryData(["subrubro",t]),i=r.filter((function(e){return e.id!==n})),h.setQueryData(["subrubro",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return h.setQueryData(["subrubro",t],r)},onSettled:function(){return h.invalidateQueries(["subrubro",t])}}),O=v.mutate,x=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("subrubro/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,h.cancelQueries(["subrubro",t]);case 3:return o=h.getQueryData(["subrubro",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),h.setQueryData(["subrubro",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return h.setQueryData(["subrubro",t],r)},onSettled:function(){return h.invalidateQueries(["subrubro",t])}}),g=x.mutate;return p?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(i,{message:"\xbfEliminar fila?",action:function(){return O(s)}}),Object(R.jsx)(Xe.a,{rows:j.map((function(e){return{id:e.id,subRubro:e.subRubro,deleteId:e.id}})),onCellEditCommit:g,compone:!0,columns:ht(a,b),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Ot}})]})}function Ot(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function xt(e){var t,n=e.idSociety,r=e.loggedUser,i=Object(d.j)().idRubro,a=parseInt(i);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["SubRubro | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(mt,{idSociety:n,idRubro:a,loggedUser:r})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(vt,{idSociety:n,idRubro:a,loggedUser:r})})]})})]})}function gt(e){var t=e.idSociety,n=e.loggedUser,r=Ze().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Se("banco/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["banco",t]);case 3:return e.next=5,i.getQueryData(["banco",t]);case 5:return a=e.sent,o=[].concat(Object(Re.a)(a),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["banco",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["banco",t],r)},onSettled:function(){return i.invalidateQueries(["banco",t])}}),c=a.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{banco:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"Banco",required:!0,size:"small",type:"float",name:"banco"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(r,{message:"El Banco no puede estar en blanco",ok:!0})]})}var yt=function(e,t){return[{field:"banco",headerName:"Banco",width:170,editable:!1,headerAlign:"center",align:"center",renderCell:Ct},{field:"descripcionLarga",headerName:"Descripcion",width:250,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]};function wt(e){var t=e.idSociety,n=Ze(),r=n.Prompt,i=n.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),s=u[0],b=u[1],f=Object(d.i)(),j=Object(o.useQuery)(["banco",t],(function(){return we("banco/listar/".concat(t.id))})),p=j.data,m=j.isLoading,h=j.error,v=Object(o.useQueryClient)(),O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("banco/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["banco",t]);case 2:return r=v.getQueryData(["banco",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["banco",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["banco",t],r)},onSettled:function(){return v.invalidateQueries(["banco",t])}}),x=O.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("banco/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,v.cancelQueries(["banco",t]);case 3:return o=v.getQueryData(["banco",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),v.setQueryData(["banco",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["banco",t],r)},onSettled:function(){return v.invalidateQueries(["banco",t])}}),y=g.mutate,S=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("./".concat(t.id,"/Cuentas de Banco-").concat(t.banco)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=S.mutate;return m?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(s)}}),Object(R.jsx)(Xe.a,{rows:p.map((function(e){return{id:e.id,banco:e.banco,descripcionLarga:e.descripcionLarga,deleteId:e.id,onIrDetalle:function(){return C(e)}}})),onCellEditCommit:y,compone:!0,columns:yt(i,b),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:St}}),Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function St(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function Ct(e){var t=e.row.onIrDetalle,n=e.row.banco;return Object(R.jsxs)(Y.a,{onClick:t,children:[n,"  "]})}function Pt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Banco | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(gt,{idSociety:n,loggedUser:r})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(wt,{idSociety:n,loggedUser:r})})]})})]})}function It(e){var t=e.idSociety,n=e.loggedUser,r=Ze().Prompt,i=Object(o.useQueryClient)(),a=Object(d.j)().idBanco,c=Object(o.useMutation)((function(e){return Se("cuentabanco/agregar/".concat(t.id,"/").concat(a),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["cuentabanco",t]);case 3:return e.next=5,i.getQueryData(["cuentabanco",t]);case 5:return a=e.sent,o=[].concat(Object(Re.a)(a),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["cuentabanco",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["cuentabanco",t],r)},onSettled:function(){return i.invalidateQueries(["cuentabanco",t])}}),l=c.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{cuentaBanco:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,l(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"Cuenta",required:!0,size:"small",type:"float",name:"cuentaBanco"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(r,{message:"El cuentabanco no puede estar en blanco",ok:!0})]})}var Tt=function(e,t){return[{field:"cuentaBanco",headerName:"Cuenta",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"descripcionLarga",headerName:"Descripcion",width:250,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]};function kt(e){var t=e.idSociety,n=Ze(),r=n.Prompt,i=n.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),s=u[0],b=u[1],f=Object(d.j)().idBanco,j=Object(o.useQuery)(["cuentabanco",t],(function(){return we("cuentabanco/listar/".concat(t.id,"/").concat(f))})),p=j.data,m=j.isLoading,h=j.error,v=Object(o.useQueryClient)(),O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("cuentabanco/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["cuentabanco",t]);case 2:return r=v.getQueryData(["cuentabanco",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["cuentabanco",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["cuentabanco",t],r)},onSettled:function(){return v.invalidateQueries(["cuentabanco",t])}}),x=O.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("cuentabanco/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,v.cancelQueries(["cuentabanco",t]);case 3:return o=v.getQueryData(["cuentabanco",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),v.setQueryData(["cuentabanco",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["cuentabanco",t],r)},onSettled:function(){return v.invalidateQueries(["cuentabanco",t])}}),y=g.mutate;return m?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(s)}}),Object(R.jsx)(Xe.a,{rows:p.map((function(e){return{id:e.id,cuentaBanco:e.cuentaBanco,descripcionLarga:e.descripcionLarga,deleteId:e.id}})),onCellEditCommit:y,compone:!0,columns:Tt(i,b),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:At}}),Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function At(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function Ft(e){var t,n=e.idSociety,r=e.loggedUser,i=Object(d.j)().idRubro,a=parseInt(i);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["CuentaBanco | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(It,{idSociety:n,idRubro:a,loggedUser:r})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(kt,{idSociety:n,idRubro:a,loggedUser:r})})]})})]})}function Dt(e){var t=e.idSociety,n=e.loggedUser,r=Ze().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Se("usuario/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["usuario",t]);case 3:return e.next=5,i.getQueryData(["usuario",t]);case 5:return a=e.sent,o=[].concat(Object(Re.a)(a),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["usuario",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["usuario",t],r)},onSettled:function(){return i.invalidateQueries(["usuario",t])}}),c=a.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{user:"",mail:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,required:!0,size:"small",label:"Usuario",type:"string",maxLength:30,name:"user"}),Object(R.jsx)(Oe.a,{as:me.a,required:!0,size:"small",label:"Mail",type:"mail",name:"mail"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(r,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}var Rt=n(1131),Nt=function(e,t){return[{field:"user",headerName:"Usuario",width:170,editable:!0,headerAlign:"center"},{field:"mail",headerName:"Mail",width:220,headerAlign:"center"},{field:"pass",headerName:"Clave",width:150,editable:!0,headerAlign:"center",renderCell:Ut},{field:"rolId",headerName:"Rol",width:150,editable:!0,renderCell:function(e){return e.value.rol_descripcion},renderEditCell:function(e){return Object(R.jsx)(Et,{roles:Qt,props:e})},headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(n){t(r),e(!0)}})}}]},Qt=[{id:1,rol_descripcion:"administrativo"},{id:2,rol_descripcion:"obra"},{id:3,rol_descripcion:"manager"},{id:4,rol_descripcion:"vista"}];function zt(e){var t=e.idSociety,n=Ze(),r=n.Prompt,i=n.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],b=Object(o.useQuery)(["usuario",t],(function(){return we("usuario/listar/".concat(t.id))})),f=b.data,j=b.isLoading,p=b.error,m=Object(o.useQueryClient)(),h=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("usuario/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.cancelQueries(["usuario",t]);case 2:return r=m.getQueryData(["usuario",t]),i=r.filter((function(e){return e.id!==n})),m.setQueryData(["usuario",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return m.setQueryData(["usuario",t],r)},onSettled:function(){return m.invalidateQueries(["usuario",t])}}),v=h.mutate,O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("usuario/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,m.cancelQueries(["usuario",t]);case 3:return o=m.getQueryData(["usuario",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),m.setQueryData(["usuario",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return m.setQueryData(["usuario",t],r)},onSettled:function(){return m.invalidateQueries(["usuario",t])}}),x=O.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(R.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(R.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return v(d)}}),Object(R.jsx)(Xe.a,{rows:f.map((function(e){var t;return{id:e.id,user:e.user,mail:e.mail,pass:e.pass,rolId:{id:e["rol.id"],rol_descripcion:null===Qt||void 0===Qt||null===(t=Qt.find((function(t){return t.id===e["rol.id"]})))||void 0===t?void 0:t.rol_descripcion},deleteId:e.id}})),onCellEditCommit:x,columns:Nt(i,s),pageSize:25,autoHeight:!0,disableSelectionOnClick:!0,density:"comfortable",scrollbarSize:!0,components:{Toolbar:Vt}})]})}function Et(e){var t=e.roles,n=e.props,r=n.id,i=n.api,a=n.field;t=[].concat(Object(Re.a)(t),[{rol_descripcion:""}]);var o=Object(l.useState)({rol_descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(R.jsx)(Rt.a,{value:d,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,o){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:r,field:a,value:o.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:i.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rol_descripcion===t.rol_descripcion},getOptionLabel:function(e){return e.rol_descripcion},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Rol"}))}})}function Vt(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function Ut(e){return"***********"}function Mt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Usuarios | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Dt,{idSociety:n,loggedUser:r})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(zt,{idSociety:n,loggedUser:r})})]})})]})}var Lt=n(1103);function _t(e){var t=e.idSociety,n=e.loggedUser,r=Ze().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Se("proveedor/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["proveedor",t]);case 3:return e.next=5,i.getQueryData(["proveedor",t]);case 5:return a=e.sent,o=[].concat(Object(Re.a)(a),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["proveedor",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["proveedor",t],r)},onSettled:function(){return i.invalidateQueries(["proveedor",t])}}),c=a.mutate;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{razonSocial:"",CUIT:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"CUIT",type:"string",required:!0,size:"small",maxLength:11,name:"CUIT",onChange:function(e){return function(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,11}$/.test(r.toString())&&t(n,r.toString())}(e,n,"CUIT")}}),Object(R.jsx)(Oe.a,{as:me.a,required:!0,size:"small",label:"Raz\xf3n Social",type:"string",name:"razonSocial"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(R.jsx)(r,{message:"El CUIT no puede estar en blanco",ok:!0})]})}var Bt=function(e,t,n,r){return[{field:"razonSocial",headerName:"Raz\xf3n Social",width:170,editable:!0,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:130,headerAlign:"center",valueFormatter:function(e){return function(e){try{return(e=e.split("")).splice(2,0,"-"),e.splice(13,0,"-"),e.join("")}catch(t){return console.log("hubo un error: ",t),null}}(e.value)}},{field:"telefono",headerName:"Tel\xe9fono",width:140,editable:!0,headerAlign:"center",valueFormatter:function(e){var t=e.value;if(t)return(t=t.split("")).splice(2,0,"-"),t.splice(7,0,"-"),t.join("")}},{field:"mail",headerName:"Mail",width:150,editable:!0,headerAlign:"center"},{field:"CBU",headerName:"CBU",width:200,editable:!0,headerAlign:"center"},{field:"banco",headerName:"Banco",width:120,editable:!0,headerAlign:"center"},{field:"nroCuenta",headerName:"# Cuenta",width:140,editable:!0,headerAlign:"center"},{field:"rubroID",headerName:"Rubro",width:140,editable:!0,renderCell:function(e){return e.value.nombre},renderEditCell:function(t){return Object(R.jsx)(Wt,{rubros:e,props:t})},headerAlign:"center"},{field:"subrubroID",headerName:"Sub Rubro",width:140,editable:!0,renderCell:function(e){return e.value.nombre},renderEditCell:function(e){return Object(R.jsx)(Gt,{subRubros:t,props:e})},headerAlign:"center"},{field:"enviar_OP_auto",headerName:"Enviar",type:"boolean",width:50,editable:!0,headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(R.jsx)(et.a,{onClick:function(e){r(t),n(!0)}})}}]};function qt(e){var t=e.idSociety,n=Ze(),r=n.Prompt,i=n.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],b=Object(o.useQuery)(["proveedor",t],(function(){return we("proveedor/listar/".concat(t.id))})),f=b.data,j=b.isLoading,p=b.error,m=Object(o.useQueryClient)(),h=Object(o.useQuery)(["rubros",t],(function(){return we("rubro/listar/".concat(t.id))})).data,v=Object(o.useQuery)(["subrubros",t],(function(){return we("subrubro/listar/".concat(t.id,"/0"))})).data,O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("proveedor/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.cancelQueries(["proveedor",t]);case 2:return r=m.getQueryData(["proveedor",t]),i=r.filter((function(e){return e.id!==n})),m.setQueryData(["proveedor",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return m.setQueryData(["proveedor",t],r)},onSettled:function(){return m.invalidateQueries(["proveedor",t])}}),x=O.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("proveedor/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,m.cancelQueries(["proveedor",t]);case 3:return o=m.getQueryData(["proveedor",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),m.setQueryData(["proveedor",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return m.setQueryData(["proveedor",t],r)},onSettled:function(){return m.invalidateQueries(["proveedor",t])}}),y=g.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(d)}}),Object(R.jsx)(Xe.a,{rows:f.map((function(e){var t,n;return{id:e.id,rubroID:{id:e.rubroId,nombre:null===h||void 0===h||null===(t=h.find((function(t){return t.id===e.rubroId})))||void 0===t?void 0:t.rubro},subrubroID:{id:e.subrubroId,nombre:null===v||void 0===v||null===(n=v.find((function(t){return t.id===e.subrubroId})))||void 0===n?void 0:n.subRubro},razonSocial:e.razonSocial,CUIT:e.CUIT,mail:e.mail,telefono:e.telefono,CBU:e.CBU,banco:e.banco,nroCuenta:e.nroCuenta,enviar_OP_auto:e.enviar_OP_auto,deleteId:e.id}})),onCellEditCommit:y,columns:Bt(h,v,i,s),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Ht}})]})}function Ht(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function Wt(e){var t=e.rubros,n=e.props,r=n.id,i=n.api,a=n.field;t=[].concat(Object(Re.a)(t),[{rubro:""}]);var o=Object(l.useState)({rubro:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(R.jsx)(Rt.a,{value:d,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,o){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:r,field:a,value:o.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:i.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Rubro"}))}})}function Gt(e,t){var n=e.subRubros,r=e.props,i=r.id,a=r.api,o=r.field;n=[].concat(Object(Re.a)(n.filter((function(e){var t;return e.rubroId===parseInt(null===r||void 0===r||null===(t=r.row)||void 0===t?void 0:t.rubroID.id)}))),[{subRubro:""}]);var u=Object(l.useState)({subRubro:""}),d=Object(c.a)(u,2),s=d[0],b=d[1];return Object(R.jsx)(Rt.a,{value:s,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(n),a.setEditCellValue({id:i,field:o,value:n.id},t),e.next=4,r.api.commitCellChange({id:i,field:o});case 4:a.setCellMode(i,o,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:n,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"subRubro"}))}})}function Jt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Proveedores | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(Lt.a,{smUp:"vista"===(null===r||void 0===r?void 0:r["rol.factura"]),children:Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(_t,{idSociety:n,loggedUser:r})})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(qt,{idSociety:n,loggedUser:r})})]})})]})}function Zt(e){var t=e.idSociety,n=Object(o.useQueryClient)(),r=Object(o.useMutation)((function(e){return Se("persona/agregar/".concat(t),e)}),{onSuccess:function(){n.refetchQueries(["persona",t])}}).mutate;return Object(R.jsx)(Oe.c,{initialValues:{nombre:"",mail:null,telefono:null},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(n,i){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,o=i.resetForm,e.next=3,Yt(t,n.nombre);case 3:e.sent?o():r(n),a(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"Nombre",type:"string",maxLength:40,name:"nombre"}),Object(R.jsx)(Oe.a,{as:me.a,label:"Email",type:"string",maxLength:100,name:"mail"}),Object(R.jsx)(Oe.a,{as:me.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}})}function Yt(e,t){return $t.apply(this,arguments)}function $t(){return($t=Object(je.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(""+n).trim()){e.next=3;break}return e.abrupt("return",!0);case 3:return r="persona/mostrar/".concat(t,"/").concat(n),e.t0=Boolean,e.next=7,we(r);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kt=n(50),Xt=(n(187),[{field:"nombre",headerName:"Nombre",width:170,editable:!0,headerAlign:"center"},{field:"mail",headerName:"Mail",width:150,editable:!0,headerAlign:"center"},{field:"telefono",headerName:"Tel\xe9fono",width:150,editable:!0,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:150,editable:!0,headerAlign:"center"},{field:"delete",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(R.jsx)(et.a,{onClick:function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"No quiero borrar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"S\xed quiero borrar"})]})}))}})}}]);function en(e){var t=e.idSociety,n=Object(o.useQueryClient)(),r=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("persona/eliminar/".concat(t),n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refetchQueries(["persona",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),i=r.mutate,a=Object(o.useQuery)(["persona",t],(function(){return we("persona/listar/".concat(t))})),c=a.data,l=a.isLoading,u=a.error;if(l)return"Cargando...";if(u)return"Hubo un error: ".concat(u.message);return Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(Kt.a,{}),Object(R.jsx)(Xe.a,{rows:c.map((function(e){return{id:e.id,nombre:e.nombre,mail:e.mail,telefono:e.telefono,CUIT:e.CUIT,onDelete:function(){i(e.id)}}})),columns:Xt,pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,onEditCellChange:function(e){var n=Object(w.a)({id:e.id},e.field,e.props.value);Se("persona/modificar/".concat(t),n)},components:{Toolbar:tn}})]})}function tn(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function nn(e){var t,n=e.idSociety;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Fiduciante | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Zt,{idSociety:n})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(en,{idSociety:n})})]})})]})}function rn(e){var t=e.idSociety,n=Object(o.useQueryClient)(),r=Object(o.useMutation)((function(e){return Se("empresa/agregar/".concat(t),e)}),{onSuccess:function(){return n.refetchQueries(["empresas",t])}}).mutate;return Object(R.jsx)(Oe.c,{initialValues:{razonSocial:"",mail:"",telefono:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(n,i){var a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,o=i.resetForm,e.next=3,an(t,n.CUIT);case 3:if(e.sent){e.next=7;break}r(n),e.next=8;break;case 7:o();case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"Raz\xf3n Social",type:"string",name:"razonSocial"}),Object(R.jsx)(Oe.a,{as:me.a,label:"Email",type:"string",name:"mail"}),Object(R.jsx)(Oe.a,{as:me.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono",onChange:function(e){return function(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,11}$/.test(r.toString())&&t(n,r.toString())}(e,n,"telefono")}}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}})}function an(e,t){return on.apply(this,arguments)}function on(){return(on=Object(je.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="empresa/mostrar/".concat(t,"/").concat(n),e.t0=Boolean,e.next=4,we(r);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cn=[{field:"razonSocial",headerName:"Raz\xf3n Social",width:170,editable:!0,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:150,headerAlign:"center",valueFormatter:function(e){var t=e.value;return(t=t.split("")).splice(2,0,"-"),t.splice(5,0,"."),t.splice(9,0,"."),t.splice(13,0,"-"),t.join("")}},{field:"telefono",headerName:"Tel\xe9fono",width:150,editable:!0,headerAlign:"center",valueFormatter:function(e){var t=e.value;if(t)return(t=t.split("")).splice(2,0,"-"),t.splice(7,0,"-"),t.join("")}},{field:"mail",headerName:"Mail",width:150,editable:!0,headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(R.jsx)(et.a,{onClick:function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"No quiero borrar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"S\xed quiero borrar"})]})}))}})}}];function ln(e){var t=e.idSociety,n=Object(o.useQueryClient)(),r=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("empresa/eliminar/".concat(t),n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.refetchQueries(["empresas",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),i=r.mutate,a=Object(o.useQuery)(["empresas",t],(function(){return we("empresa/listar/".concat(t))})),c=a.data,l=a.isLoading,u=a.error;if(l)return"Cargando...";if(u)return"Hubo un error: ".concat(u.message);return Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(Kt.a,{}),Object(R.jsx)(Xe.a,{rows:c.map((function(e){return{id:e.id,razonSocial:e.razonSocial,CUIT:e.CUIT,mail:e.mail,telefono:e.telefono,onDelete:function(){i(e.id)}}})),columns:cn,pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,onEditCellChange:function(e){var n=Object(w.a)({id:e.id},e.field,e.props.value);Se("empresa/modificar/".concat(t),n)},components:{Toolbar:un}})]})}function un(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function dn(e){var t,n=e.idSociety;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Empresas | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(rn,{idSociety:n})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(ln,{idSociety:n})})]})})]})}function sn(e){var t=e.idSociety,n=Object(o.useQueryClient)(),r=Object(o.useMutation)((function(e){return Se("fideicomiso/agregar/".concat(t.id),e)}),{onSuccess:function(){n.refetchQueries(["fideicomiso",t])}}).mutate;return Object(R.jsx)(Oe.c,{initialValues:{nombre:"",fechaInicio:null,fechaFin:null},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(n,i){var o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.setSubmitting,c=i.resetForm,e.next=3,a(t.id,n.nombre);case 3:!e.sent&&r(n),c(),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,required:!0,label:"Nombre Fideicomiso",size:"small",type:"string",maxLength:40,name:"nombre"}),Object(R.jsx)(Oe.a,{name:"fechaInicio",children:function(e){var t=e.field,n=t.value,r=t.name,a=e.form.setFieldValue;return Object(R.jsx)(i,{label:"Inicio",value:n,setFieldValue:a,name:r})}}),Object(R.jsx)(Oe.a,{name:"fechaFin",children:function(e){var t=e.field,n=t.value,r=t.name,a=e.form.setFieldValue;return Object(R.jsx)(i,{label:"Finalizacion",value:n,setFieldValue:a,name:r})}}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}});function i(e){var t=e.value,n=e.name,r=e.setFieldValue,i=e.label;return Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:i,value:t,inputFormat:"dd/MM/yyyy",renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({size:"small"},e))},onChange:function(e){return r(n,e)}})})}function a(e,t){return c.apply(this,arguments)}function c(){return c=Object(je.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Boolean,e.next=3,we("fideicomiso/mostrar/".concat(t,"/").concat(n));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}}var bn=function(e,t,n,r,i){return[{field:"nombre",headerName:"Nombre",width:200,headerAlign:"center",align:"left"},{field:"fechaInicio",headerName:"Inicio",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"fechaFin",headerName:"Finalizaci\xf3n",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"logo",headerName:"Logo",width:150,renderCell:function(e){return e.row.logo?Object(R.jsx)("img",{style:{display:"block",margin:"auto",width:"30%"},src:"".concat("http://104.131.28.211:3000/","sociedades/").concat(n,"/").concat(e.row.logo),alt:"logo"}):""}},{field:"colorElegido",headerName:"Color",width:150,editable:!1,renderCell:function(e){var t=e.row.colorElegido;return Object(R.jsx)("div",{style:{width:"100%",height:"100%",background:t}})},renderEditCell:function(n){var r=n.row.colorElegido;return Object(R.jsx)(mn,{originalColor:fn.filter((function(e){return e.css===r}))[0],color:e,setColor:t,colorOptions:fn})}}]},fn=[{label:"red",css:"red"},{label:"DarkGreen",css:"DarkGreen"},{label:"MidnightBlue",css:"MidnightBlue"},{label:"black",css:"black"},{label:"Salmon",css:"LightSalmon"},{label:"Khaki",css:"Khaki"},{label:"Bisque",css:"Bisque"},{label:"Plum",css:"Plum"},{label:"Orchid",css:"Orchid"},{label:"Chocolate",css:"Chocolate"},{label:"LightSteelBlue",css:"LightSteelBlue"},{label:"orange",css:"orange"},{label:"green",css:"green"}];function jn(e){var t=e.idSociety,n=Object(l.useState)(null),r=Object(c.a)(n,2),i=r[0],a=r[1],u=Ze(),d=u.Prompt,s=(u.setIsPromptOpen,Object(l.useState)()),b=Object(c.a)(s,2),f=b[0],j=(b[1],Object(o.useQuery)(["fideicomiso",t],(function(){return we("fideicomiso/listar/".concat(t.id))}))),p=j.data,m=j.isLoading,h=j.error,v=Object(o.useQueryClient)(),O=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("fideicomiso/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["fideicomiso",t]);case 2:return r=v.getQueryData(["fideicomiso",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["fideicomiso",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["fideicomiso",t],r)},onSettled:function(){return v.invalidateQueries(["fideicomiso",t])}}),x=O.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("fideicomiso/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,v.cancelQueries(["fideicomiso",t]);case 3:return o=v.getQueryData(["fideicomiso",t]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},r,a))]),v.setQueryData(["fideicomiso",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["fideicomiso",t],r)},onSettled:function(){return v.invalidateQueries(["fideicomiso",t])}}),y=g.mutate;return m?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(d,{message:"\xbfEliminar fila?",action:function(){return x(f)}}),Object(R.jsx)(Xe.a,{rows:p.map((function(e){return{id:e.id,nombre:e.nombre,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,colorElegido:e.color,logo:e.logo,cloud:e.cloud,deleteId:e.id}})),onCellEditCommit:y,columns:bn(i,a,null===t||void 0===t?void 0:t.id),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:pn}})]})}function pn(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function mn(e){var t=e.color,n=e.setColor,r=e.colorOptions,i=e.originalColor;return Object(l.useEffect)((function(){return n((function(e){return(null===i||void 0===i?void 0:i.css)!==(null===e||void 0===e?void 0:e.css)?i:e}))}),[i,n]),Object(R.jsx)(Rt.a,{value:t,onChange:function(e,t){n(t)},options:r,sx:{width:300},isOptionEqualToValue:function(e,t){return e.label===t.label},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({style:{background:null===t||void 0===t?void 0:t.css}},e))},renderOption:function(e,t,n){return Object(R.jsx)("div",Object(G.a)(Object(G.a)({},e),{},{style:{background:null===t||void 0===t?void 0:t.css},children:t.label}))}})}function hn(e){var t,n=e.idSociety;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Fideicomisos | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(sn,{idSociety:n})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(jn,{idSociety:n})})]})})]})}var vn=n(1094),On=n(1133),xn=Object(vn.a)();function gn(e){var t=e.selectedFideicomisoData,n=e.idSociety,r=Object(l.useState)(),i=Object(c.a)(r,2),a=i[0],u=i[1];Object(l.useEffect)((function(){return u(null===t||void 0===t?void 0:t.personaId)}),[t]);var d=Object(l.useState)(!1),s=Object(c.a)(d,2),b=s[0],f=s[1],j=Object(o.useQuery)(["persona",a],(function(){return we("persona/mostrar/".concat(n.id,"/").concat(a))})).data,p=Object(o.useQuery)(["localizaci\xf3n",null===t||void 0===t?void 0:t.localizacionId],(function(){return we("localizacion/mostrar/".concat(n.id,"/").concat(null===t||void 0===t?void 0:t.localizacionId))})).data,m=Object(o.useQuery)(["personas"],(function(){return we("persona/listar/".concat(n.id))})).data,h=Object(o.useMutation)((function(e){return Se("fideicomiso/modificar/".concat(n.id),e)})).mutate,v=Object(o.useMutation)((function(e){return Se("persona/agregar/".concat(n.id),e)}),{onSuccess:function(e){u(e.id),h({id:t.id,personaId:e.id})}}).mutate,O=[{id:1,contacto:null===j||void 0===j?void 0:j.nombre,fechaInicio:null===t||void 0===t?void 0:t.fechaInicio,fechaFin:null===t||void 0===t?void 0:t.fechaFin,direccion:null===p||void 0===p?void 0:p.direccion}],x=[{field:"contacto",headerName:"Contacto",width:350,headerAlign:"center",align:"center"},{field:"fechaInicio",headerName:"Inicio",width:160,headerAlign:"center",align:"center",type:"date",nameFormatter:function(e){var t=e.name;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})},editable:!0},{field:"fechaFin",headerName:"Fin",width:100,headerAlign:"center",align:"center",type:"date",nameFormatter:function(e){var t=e.name;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})},editable:!0},{field:"direccion",headerName:"Direcci\xf3n",width:200,editable:!1,headerAlign:"center",align:"center"}];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(g,{isDialogOpen:b,setIsDialogOpen:f}),Object(R.jsxs)(T.a,{width:"auto",children:[Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h3",children:null===t||void 0===t?void 0:t.nombre}),t&&Object(R.jsx)(Xe.a,{columns:x,rows:O,rowHeight:75,headerHeight:35,hideFooter:!0,autoHeight:"false",pageSize:1,onCellDoubleClick:function(e){"contacto"===e.field&&f(!0)}})]})]});function g(e){var t=e.isDialogOpen,n=e.setIsDialogOpen;return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(We.a,{open:t,onClose:function(){return n(!1)},fullWidth:!0,style:{transform:"translate(0, -200px)"},children:Object(R.jsx)(On.a,{children:Object(R.jsx)(y,{peopleInfo:m,closeDialog:function(){return n(!1)}})})})})}function y(e){var n=e.peopleInfo,r=e.closeDialog;return Object(R.jsx)(Rt.a,{value:null===j||void 0===j?void 0:j.nombre,onChange:function(e,n){"string"===typeof n?(v({nombre:n}),r()):n&&n.inputValue?(v({nombre:n.inputValue}),r()):(null===n||void 0===n?void 0:n.id)!==a&&(u(n.id),h({id:t.id,personaId:n.id}),r())},filterOptions:function(e,t){var n=xn(e,t),r=t.inputValue,i=e.some((function(e){return r===e.nombre}));return""===r||i||n.push({inputValue:r,nombre:"agregar ".concat(r)}),n},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:n,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.nombre},renderOption:function(e,t){return Object(R.jsx)("li",Object(G.a)(Object(G.a)({},e),{},{children:t.nombre}))},freeSolo:!0,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({},e))}})}}function yn(e){var t=e.idSociety,n=e.selectedFideicomisoData,r=Object(o.useQuery)(["typesOfProducts"],(function(){return we("configuracion/listar/".concat(t.id,"/tipo_producto"))}),{initialData:[{id:7,descripcion:"UF",codigo:1,descripcionLarga:"Unidad funcional"},{id:8,descripcion:"Cod. Nom.",codigo:2,descripcionLarga:"C\xf3digo de nomenclatura"},{id:9,descripcion:"Cochera",codigo:3,descripcionLarga:"Cochera Auto"},{id:10,descripcion:"Cochera Moto",codigo:4,descripcionLarga:"Cochera Moto"},{id:11,descripcion:"Baulera",codigo:5,descripcionLarga:"Baulera"},{id:12,descripcion:"Local",codigo:6,descripcionLarga:"Local comercial"},{id:13,descripcion:"Lote",codigo:7,descripcionLarga:"Lote, terreno"},{id:14,descripcion:"Casa",codigo:8,descripcionLarga:"Casa"},{id:15,descripcion:"Bungalo",codigo:9,descripcionLarga:"Bungalo"}]}).data,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Se("producto/agregar/".concat(t.id),e)}),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.refetchQueries(["productos",t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u=a.mutate,d=Object(l.useState)(null),s=Object(c.a)(d,2),b=s[0],f=s[1];return Object(R.jsx)(Oe.c,{initialValues:{code:"",type:"",description:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,r){var i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.setSubmitting,a=r.resetForm,u({fideicomisoId:n.id,codigo:t.code,descripcion:t.description,tipo:t.type.codigo}),a(),f(null),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:me.a,label:"C\xf3digo",type:"string",maxLength:40,size:"small",name:"code"}),Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Tipo",style:{width:"230px",display:"inline-flex"},onChange:function(e,t){f(t),n("type",t)},value:b,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},options:r,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Tipo"}))}}),Object(R.jsx)(Oe.a,{as:me.a,size:"small",label:"Descripcion",type:"string",maxLength:100,name:"description"}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}})}var wn=[{field:"codigo",headerName:"C\xf3digo",width:140,editable:!1,headerAlign:"center",align:"center"},{field:"metros",headerName:"Metros",type:"number",width:130,editable:!0,headerAlign:"center",align:"right"},{field:"precioULT",type:"number",headerName:"Precio",width:150,editable:!0,headerAlign:"center",align:"right"},{field:"deleteIcon",headerName:"",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(R.jsx)(et.a,{onClick:function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"No quiero borrar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"S\xed quiero borrar"})]})}))}})}}];function Sn(e){var t=e.idSociety,n=e.selectedFideicomisoData,r=Object(o.useQuery)(["productos",t,n],(function(){return we("producto/listar/".concat(null===t||void 0===t?void 0:t.id,"/").concat(null===n||void 0===n?void 0:n.id))})),i=r.data,a=r.isLoading,c=r.error,l=Object(o.useQueryClient)(),u=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("producto/eliminar/".concat(null===t||void 0===t?void 0:t.id),{fideicomisoId:null===n||void 0===n?void 0:n.id,id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.refetchQueries(["productos",t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),d=u.mutate;if(a)return"Cargando...";if(c)return"Hubo un error: ".concat(c.message);return Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(Kt.a,{}),Object(R.jsx)(Xe.a,{rows:i.map((function(e){return{id:e.id,codigo:e.codigo,metros:e.metros,precioULT:e.precioULT,onDelete:function(){return d(e.id)}}})),columns:wn,pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,sortModel:[{field:"codigo",sort:"asc"}],scrollbarSize:!0,onCellEditCommit:function(e){var r=Object(w.a)({id:e.id,idFideicomiso:null===n||void 0===n?void 0:n.id},e.field,e.value);Se("producto/modificar/".concat(null===t||void 0===t?void 0:t.id),r)},components:{Toolbar:Cn}})]})}function Cn(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function Pn(e){var t=e.idSociety,n=Object(d.j)().nombreFideicomiso,r=Object(o.useQuery)(["fideicomiso",t.id],(function(){return we("fideicomiso/listar/".concat(t.id))})).data,i=null===r||void 0===r?void 0:r.find((function(e){return e.nombre===n}));return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:[n," | ",null===t||void 0===t?void 0:t.nombre]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(gn,{idSociety:t,selectedFideicomisoData:i})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Grilla de Productos"})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(yn,{idSociety:t,selectedFideicomisoData:i})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Sn,{idSociety:t,selectedFideicomisoData:i})})]})})]})}var In=n(171),Tn=n.n(In),kn=n(1134),An=n(1104),Fn=n(1135);function Dn(e){var t=e.idSociety,n=e.loggedUser,r=e.fideicomisos,i=e.proveedores,a=e.ddfacturas,u=e.ddfacturasBlue,d=!1;"total"===(null===n||void 0===n?void 0:n["rol.factura"])&&(d=!0);var s=Object(l.useState)(!0),b=Object(c.a)(s,2),f=b[0],j=b[1],p=Object(o.useQueryClient)(),m=Object(o.useMutation)((function(e){return Se("OP/agregar/".concat(t.id),e)}),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.refetchQueries(["OP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),h=m.mutate,v=Object(l.useState)(null),O=Object(c.a)(v,2),x=O[0],g=O[1],y=Object(l.useState)(null),w=Object(c.a)(y,2),S=w[0],C=w[1],P=Object(l.useState)(null),I=Object(c.a)(P,2),A=I[0],F=I[1],D=Object(l.useState)(!1),N=Object(c.a)(D,2),Q=N[0],z=N[1];return Object(R.jsx)(Oe.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,r){var i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.setSubmitting,r.resetForm,h({fideicomisoId:t.fideicomiso.id,empresaId:t.empresa.id,rubroId:t.empresa.rubroId,subRubroId:t.empresa.subrubroId,facturaId:t.factura.id,blue:f?0:1,creador:n.id}),z(!0),i(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){g(t),n("fideicomiso",t)},value:x,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fideicomiso"}))}}),Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){C(t),n("empresa",t)},value:S,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Razon Social"}))}}),Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Factura N\u0970",disablePortal:!0,style:{width:"230px",display:f?"inline-flex":"none"},onChange:function(e,t){F(t),n("factura",t)},value:A,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a?null===a||void 0===a?void 0:a.filter((function(e){return(null===e||void 0===e?void 0:e.empresaId)===(null===S||void 0===S?void 0:S.id)})):[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Factura N\u0970"}))}}),Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Factura Blue N\u0970",disablePortal:!0,style:{width:"230px",display:f?"none":"inline-flex"},onChange:function(e,t){F(t),n("factura",t)},value:A,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:u?null===u||void 0===u?void 0:u.filter((function(e){return(null===e||void 0===e?void 0:e.empresaId)===(null===S||void 0===S?void 0:S.id)})):[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Factura Blue N\u0970"}))}}),"\xa0\xa0",Object(R.jsx)(Lt.a,{smUp:!d,children:Object(R.jsx)(kn.a,{control:Object(R.jsx)(An.a,{id:"blue",name:"blue",onChange:function(e){return function(e,t,n,r,i){e.preventDefault(),i(!r),t(n,r?"on":"off")}(e,n,"blue",f,j)}}),label:"Blue"})}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(R.jsx)(Y.a,{id:"bagregar",variant:"text",type:"submit",disabled:t,children:"Agregar"}),Object(R.jsx)(T.a,{sx:{width:"100%"},children:Object(R.jsx)(Fn.a,{in:Q,children:Object(R.jsx)(he.a,{action:Object(R.jsx)(k.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){z(!1)},children:Object(R.jsx)(Tn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}})}function Rn(e){var t=e.setFiltFide,n=e.setFiltRS,r=e.setFiltEst,i=(e.idSociety,e.loggedUser,e.fideicomisos),a=e.proveedores,o=(e.ddfacturas,e.ddfacturasBlue,JSON.parse(localStorage.getItem("estados"))),u=Object(l.useState)(null),d=Object(c.a)(u,2),s=d[0],b=d[1],f=Object(l.useState)(null),j=Object(c.a)(f,2),p=j[0],m=j[1],h=Object(l.useState)(null),v=Object(c.a)(h,2),O=v[0],x=v[1];function g(e,i){var a=-1;(null===i||void 0===i?void 0:i.id)&&(a=i.id),"fide"===e&&t(a),"rs"===e&&n(a),"estado"===e&&r(a)}return Object(R.jsx)(Oe.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Filtar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){b(t),g("fide",t)},value:s,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({variant:"standard"},e),{},{label:"Filtar por Fideicomiso"}))}}),"\xa0",Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Filtar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){m(t),g("rs",t)},value:p,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({variant:"standard"},e),{},{label:"Filtar por Razon Social"}))}}),"\xa0",Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Filtar por Estado",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){x(t),g("estado",t)},value:O,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({variant:"standard"},e),{},{label:"Filtar por Estado"}))}})]})}})}var Nn=n(10),Qn=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},description:{width:"35%",textAlign:"left",borderRightWidth:1,paddingLeft:8},qty:{width:"35%",borderRightWidth:1,textAlign:"left",paddingLeft:8},rate:{width:"15%",borderRightWidth:1,textAlign:"right",paddingRight:8},amount:{width:"15%"},amountRow:{width:"15%",textAlign:"right",paddingRight:8}}),zn=function(e){var t,n,r,i,a,o,c,l,u,d,s,b,f,j,p,m,h,v,O,x,g,y,w,S,C,P,I,T,k,A,F,D,N,Q,z,E,V,U,M,L,_,B,q,H,W,G,J,Z,Y,$,K,X,ee,te,ne,re,ie,ae,oe,ce,le,ue,de,se,be,fe,je,pe,me,he,ve,Oe,xe,ge=e.dataOP,ye=e.dataFacturas;return Object(R.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:ge?null===ge||void 0===ge||null===(t=ge.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(R.jsxs)(Nn.View,{style:[Qn.container,{borderBottomColor:ge?null===ge||void 0===ge||null===(n=ge.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",backgroundColor:ge?null===ge||void 0===ge||null===(r=ge.fideicomisos[0])||void 0===r?void 0:r.color2:"#ffffff"}],children:[Object(R.jsx)(Nn.Text,{style:[Qn.description,{borderRightColor:ge?null===ge||void 0===ge||null===(i=ge.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Proveedor"}),Object(R.jsx)(Nn.Text,{style:[Qn.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(a=ge.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Detalle"}),Object(R.jsx)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(o=ge.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"N\xba Factura"}),Object(R.jsx)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(c=ge.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"N\xba OC"}),Object(R.jsx)(Nn.Text,{style:[Qn.amount,{borderRightColor:ge?null===ge||void 0===ge||null===(l=ge.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Importe"})]}),Object(R.jsxs)(Nn.View,{style:[Qn.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(u=ge.fideicomisos[0])||void 0===u?void 0:u.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Qn.description,{borderRightColor:ge?null===ge||void 0===ge||null===(d=ge.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(s=ye.item[0])||void 0===s||null===(b=s.empresas[0])||void 0===b?void 0:b.razonSocial]}),Object(R.jsxs)(Nn.Text,{style:[Qn.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(f=ge.fideicomisos[0])||void 0===f?void 0:f.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(j=ye.item[0])||void 0===j?void 0:j.detalle]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(p=ge.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:["  ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(m=ye.item[0])||void 0===m?void 0:m.link,children:null===ye||void 0===ye||null===(h=ye.item[0])||void 0===h?void 0:h.numero})]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(v=ge.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(O=ye.item[0])||void 0===O?void 0:O.txtOC]}),Object(R.jsxs)(Nn.Text,{style:[Qn.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(x=ge.fideicomisos[0])||void 0===x?void 0:x.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[0])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(g=ye.item[0])||void 0===g?void 0:g.montoTotal)):""]})]}),Object(R.jsxs)(Nn.View,{style:[Qn.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(y=ge.fideicomisos[0])||void 0===y?void 0:y.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Qn.description,{borderRightColor:ge?null===ge||void 0===ge||null===(w=ge.fideicomisos[0])||void 0===w?void 0:w.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(S=ye.item[1])||void 0===S||null===(C=S.empresas[0])||void 0===C?void 0:C.razonSocial]}),Object(R.jsxs)(Nn.Text,{style:[Qn.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(P=ge.fideicomisos[0])||void 0===P?void 0:P.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(I=ye.item[1])||void 0===I?void 0:I.detalle]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(T=ge.fideicomisos[0])||void 0===T?void 0:T.color:"#ffffff"}],children:["  ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(k=ye.item[1])||void 0===k?void 0:k.link,children:null===ye||void 0===ye||null===(A=ye.item[1])||void 0===A?void 0:A.numero})]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(F=ge.fideicomisos[0])||void 0===F?void 0:F.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(D=ye.item[1])||void 0===D?void 0:D.txtOC]}),Object(R.jsxs)(Nn.Text,{style:[Qn.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(N=ge.fideicomisos[0])||void 0===N?void 0:N.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[1])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(Q=ye.item[1])||void 0===Q?void 0:Q.montoTotal)):""]})]}),Object(R.jsxs)(Nn.View,{style:[Qn.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(z=ge.fideicomisos[0])||void 0===z?void 0:z.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Qn.description,{borderRightColor:ge?null===ge||void 0===ge||null===(E=ge.fideicomisos[0])||void 0===E?void 0:E.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(V=ye.item[2])||void 0===V||null===(U=V.empresas[0])||void 0===U?void 0:U.razonSocial]}),Object(R.jsxs)(Nn.Text,{style:[Qn.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(M=ge.fideicomisos[0])||void 0===M?void 0:M.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(L=ye.item[2])||void 0===L?void 0:L.detalle]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(_=ge.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:["  ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(B=ye.item[2])||void 0===B?void 0:B.link,children:null===ye||void 0===ye||null===(q=ye.item[2])||void 0===q?void 0:q.numero})]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(H=ge.fideicomisos[0])||void 0===H?void 0:H.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(W=ye.item[2])||void 0===W?void 0:W.txtOC]}),Object(R.jsxs)(Nn.Text,{style:[Qn.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(G=ge.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[2])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(J=ye.item[2])||void 0===J?void 0:J.montoTotal)):""]})]}),Object(R.jsxs)(Nn.View,{style:[Qn.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(Z=ge.fideicomisos[0])||void 0===Z?void 0:Z.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Qn.description,{borderRightColor:ge?null===ge||void 0===ge||null===(Y=ge.fideicomisos[0])||void 0===Y?void 0:Y.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===($=ye.item[3])||void 0===$||null===(K=$.empresas[0])||void 0===K?void 0:K.razonSocial]}),Object(R.jsxs)(Nn.Text,{style:[Qn.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(X=ge.fideicomisos[0])||void 0===X?void 0:X.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(ee=ye.item[3])||void 0===ee?void 0:ee.detalle]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(te=ge.fideicomisos[0])||void 0===te?void 0:te.color:"#ffffff"}],children:["  ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(ne=ye.item[3])||void 0===ne?void 0:ne.link,children:null===ye||void 0===ye||null===(re=ye.item[3])||void 0===re?void 0:re.numero})]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(ie=ge.fideicomisos[0])||void 0===ie?void 0:ie.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(ae=ye.item[3])||void 0===ae?void 0:ae.txtOC]}),Object(R.jsxs)(Nn.Text,{style:[Qn.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(oe=ge.fideicomisos[0])||void 0===oe?void 0:oe.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[3])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(ce=ye.item[3])||void 0===ce?void 0:ce.montoTotal)):""]})]}),Object(R.jsxs)(Nn.View,{style:[Qn.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(le=ge.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Qn.description,{borderRightColor:ge?null===ge||void 0===ge||null===(ue=ge.fideicomisos[0])||void 0===ue?void 0:ue.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(de=ye.item[4])||void 0===de||null===(se=de.empresas[0])||void 0===se?void 0:se.razonSocial]}),Object(R.jsxs)(Nn.Text,{style:[Qn.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(be=ge.fideicomisos[0])||void 0===be?void 0:be.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(fe=ye.item[4])||void 0===fe?void 0:fe.detalle]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(je=ge.fideicomisos[0])||void 0===je?void 0:je.color:"#ffffff"}],children:["  ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(pe=ye.item[4])||void 0===pe?void 0:pe.link,children:null===ye||void 0===ye||null===(me=ye.item[4])||void 0===me?void 0:me.numero})]}),Object(R.jsxs)(Nn.Text,{style:[Qn.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(he=ge.fideicomisos[0])||void 0===he?void 0:he.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(ve=ye.item[4])||void 0===ve?void 0:ve.txtOC]}),Object(R.jsxs)(Nn.Text,{style:[Qn.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(Oe=ge.fideicomisos[0])||void 0===Oe?void 0:Oe.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[4])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(xe=ye.item[4])||void 0===xe?void 0:xe.montoTotal)):""]})]})]})},En=Nn.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},col1:{width:"11%",textAlign:"left",paddingLeft:8},col2:{width:"55%",textAlign:"left",paddingLeft:8},col3:{width:"33%",textAlign:"center",paddingLeft:8}}),Vn=function(e){var t,n,r,i,a,o=e.dataOP;return Object(R.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:o?null===o||void 0===o||null===(t=o.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(R.jsxs)(Nn.View,{style:En.espacio,children:[Object(R.jsx)(Nn.Text,{style:En.col1,children:" "}),Object(R.jsx)(Nn.Text,{style:En.col1,children:" "}),Object(R.jsx)(Nn.Text,{style:En.col1,children:" "})]}),Object(R.jsxs)(Nn.View,{style:En.row,children:[Object(R.jsx)(Nn.Text,{style:En.col1,children:"Detalles:"}),Object(R.jsx)(Nn.Text,{style:En.col2,children:null===o||void 0===o||null===(n=o.descripcion)||void 0===n?void 0:n.slice(0,44)}),Object(R.jsx)(Nn.Text,{style:En.col3})]}),Object(R.jsxs)(Nn.View,{style:En.row,children:[Object(R.jsx)(Nn.Text,{style:En.col1}),Object(R.jsx)(Nn.Text,{style:En.col2,children:null===o||void 0===o||null===(r=o.descripcion)||void 0===r?void 0:r.slice(45,99)}),Object(R.jsxs)(Nn.Text,{style:En.col3,children:["Aprobado por ",null===o||void 0===o||null===(i=o.auth_obra[0])||void 0===i||null===(a=i.usuarios[0])||void 0===a?void 0:a.user]})]})]})},Un=Nn.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},rowbis:{flexDirection:"row",alignItems:"left",height:24,fontSize:10,fontStyle:"bold"},col1:{width:"33%",textAlign:"right",paddingLeft:8},col1bis:{width:"33%",textAlign:"right",paddingTop:5,paddingLeft:8},col2bis:{width:"33%",textAlign:"center",backgroundColor:"#B4B4B4",paddingTop:5,paddingLeft:8},col3:{width:"33%",textAlign:"left",paddingLeft:8},col3bis:{width:"33%",textAlign:"center",paddingTop:5,paddingLeft:8}}),Mn=function(e){var t,n,r,i,a,o,c=e.dataOP;return Object(R.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:c?null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(R.jsxs)(Nn.View,{style:Un.espacio,children:[Object(R.jsx)(Nn.Text,{style:Un.col1,children:" "}),Object(R.jsx)(Nn.Text,{style:Un.col1,children:" "}),Object(R.jsx)(Nn.Text,{style:Un.col1,children:" "})]}),Object(R.jsxs)(Nn.View,{style:Un.row,children:[Object(R.jsx)(Nn.Text,{style:Un.col1,children:"FACTURAS:"}),Object(R.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.monto)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.monto)):""}),Object(R.jsx)(Nn.Text,{style:Un.col3})]}),Object(R.jsxs)(Nn.View,{style:Un.row,children:[Object(R.jsx)(Nn.Text,{style:Un.col1,children:"RET GAN:"}),Object(R.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_GAN)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_GAN)):""}),Object(R.jsxs)(Nn.Text,{style:Un.col3,children:[" ",Object(R.jsx)(Nn.Link,{src:null===c||void 0===c?void 0:c.COMP_GAN,children:(null===c||void 0===c?void 0:c.COMP_GAN)?" cert..":""}),"   "]})]}),Object(R.jsxs)(Nn.View,{style:Un.row,children:[Object(R.jsx)(Nn.Text,{style:Un.col1,children:"RET IVA:"}),Object(R.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_IVA)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_IVA)):""}),Object(R.jsxs)(Nn.Text,{style:Un.col3,children:[" ",Object(R.jsx)(Nn.Link,{src:null===c||void 0===c?void 0:c.COMP_IVA,children:(null===c||void 0===c?void 0:c.COMP_IVA)?" cert..":""})," "]})]}),Object(R.jsxs)(Nn.View,{style:Un.row,children:[Object(R.jsx)(Nn.Text,{style:Un.col1,children:"RET SUSS:"}),Object(R.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(a=c.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_SUSS)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_SUSS)):""}),Object(R.jsxs)(Nn.Text,{style:Un.col3,children:[" ",Object(R.jsx)(Nn.Link,{src:null===c||void 0===c?void 0:c.COMP_SUSS,children:(null===c||void 0===c?void 0:c.COMP_SUSS)?" cert..":""})]})]}),Object(R.jsxs)(Nn.View,{style:Un.rowbis,children:[Object(R.jsx)(Nn.Text,{style:Un.col1bis,children:"Monto a Abonar:"}),Object(R.jsxs)(Nn.Text,{style:Un.col2bis,children:["$",(null===c||void 0===c?void 0:c.monto_a_pagar)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.monto_a_pagar)):""]}),Object(R.jsxs)(Nn.Text,{style:Un.col3bis,children:["Aprobado por ",(null===c||void 0===c?void 0:c.auth_adm[0])?null===(o=c.auth_adm[0].usuarios[0])||void 0===o?void 0:o.user:""]})]})]})},Ln=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"16%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col2:{width:"20%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col3:{width:"20%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col4:{width:"12%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col5:{width:"12%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"88%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),_n=function(e){var t,n,r,i,a,o,c,l,u,d,s,b,f,j,p,m,h,v,O,x,g,y,w,S,C,P,I,T,k,A,F,D,N,Q,z,E,V,U,M,L,_,B,q,H,W,G,J,Z,Y,$,K,X,ee,te,ne,re,ie,ae,oe,ce,le,ue,de,se,be,fe,je,pe,me,he,ve,Oe,xe,ge,ye=e.dataOP,we=e.arr_id,Se=e.arr_banco,Ce=e.arr_cid,Pe=e.arr_cuenta;return Object(R.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:ye?null===ye||void 0===ye||null===(t=ye.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(R.jsxs)(Nn.View,{style:[Ln.container,{borderBottomColor:ye?null===ye||void 0===ye||null===(n=ye.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",backgroundColor:ye?null===ye||void 0===ye||null===(r=ye.fideicomisos[0])||void 0===r?void 0:r.color2:"#ffffff"}],children:[Object(R.jsx)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(i=ye.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Modo"}),Object(R.jsx)(Nn.Text,{style:[Ln.col1,{borderRightColor:ye?null===ye||void 0===ye||null===(a=ye.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Banco"}),Object(R.jsx)(Nn.Text,{style:[Ln.col2,{borderRightColor:ye?null===ye||void 0===ye||null===(o=ye.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"Cuenta Nro"}),Object(R.jsx)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(c=ye.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"Comprobante"}),Object(R.jsx)(Nn.Text,{style:[Ln.col4,{borderRightColor:ye?null===ye||void 0===ye||null===(l=ye.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Fecha"}),Object(R.jsx)(Nn.Text,{style:Ln.col5,children:"Monto"})]}),Object(R.jsxs)(Nn.View,{style:[Ln.row,{borderBottomColor:ye?null===ye||void 0===ye||null===(u=ye.fideicomisos[0])||void 0===u?void 0:u.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(d=ye.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(s=ye.OPpago)||void 0===s?void 0:s.modo1]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col1,{borderRightColor:ye?null===ye||void 0===ye||null===(b=ye.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:[" ",Se[we.indexOf(null===ye||void 0===ye||null===(f=ye.OPpago)||void 0===f?void 0:f.banco1)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col2,{borderRightColor:ye?null===ye||void 0===ye||null===(j=ye.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:[" ",Pe[Ce.indexOf(null===ye||void 0===ye||null===(p=ye.OPpago)||void 0===p?void 0:p.nro1)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(m=ye.fideicomisos[0])||void 0===m?void 0:m.color:"#ffffff"}],children:[" ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(h=ye.OPpago)||void 0===h?void 0:h.descri1,children:(null===ye||void 0===ye||null===(v=ye.OPpago)||void 0===v?void 0:v.descri1)?" comprobante..":""})]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col4,{borderRightColor:ye?null===ye||void 0===ye||null===(O=ye.fideicomisos[0])||void 0===O?void 0:O.color:"#ffffff"}],children:[" ",Ue(null===ye||void 0===ye||null===(x=ye.OPpago)||void 0===x?void 0:x.fecha1)]}),Object(R.jsx)(Nn.Text,{style:Ln.col5,children:(null===ye||void 0===ye||null===(g=ye.OPpago)||void 0===g?void 0:g.monto1)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(y=ye.OPpago)||void 0===y?void 0:y.monto1)):""})]}),Object(R.jsxs)(Nn.View,{style:[Ln.row,{borderBottomColor:ye?null===ye||void 0===ye||null===(w=ye.fideicomisos[0])||void 0===w?void 0:w.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(S=ye.fideicomisos[0])||void 0===S?void 0:S.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(C=ye.OPpago)||void 0===C?void 0:C.modo2]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col1,{borderRightColor:ye?null===ye||void 0===ye||null===(P=ye.fideicomisos[0])||void 0===P?void 0:P.color:"#ffffff"}],children:[" ",Se[we.indexOf(null===ye||void 0===ye||null===(I=ye.OPpago)||void 0===I?void 0:I.banco2)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col2,{borderRightColor:ye?null===ye||void 0===ye||null===(T=ye.fideicomisos[0])||void 0===T?void 0:T.color:"#ffffff"}],children:[" ",Pe[Ce.indexOf(null===ye||void 0===ye||null===(k=ye.OPpago)||void 0===k?void 0:k.nro2)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(A=ye.fideicomisos[0])||void 0===A?void 0:A.color:"#ffffff"}],children:[" ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(F=ye.OPpago)||void 0===F?void 0:F.descri2,children:(null===ye||void 0===ye||null===(D=ye.OPpago)||void 0===D?void 0:D.descri2)?" comprobante..":""})]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col4,{borderRightColor:ye?null===ye||void 0===ye||null===(N=ye.fideicomisos[0])||void 0===N?void 0:N.color:"#ffffff"}],children:[" ",Ue(null===ye||void 0===ye||null===(Q=ye.OPpago)||void 0===Q?void 0:Q.fecha2)]}),Object(R.jsx)(Nn.Text,{style:Ln.col5,children:(null===ye||void 0===ye||null===(z=ye.OPpago)||void 0===z?void 0:z.monto2)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(E=ye.OPpago)||void 0===E?void 0:E.monto2)):""})]}),Object(R.jsxs)(Nn.View,{style:[Ln.row,{borderBottomColor:ye?null===ye||void 0===ye||null===(V=ye.fideicomisos[0])||void 0===V?void 0:V.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(U=ye.fideicomisos[0])||void 0===U?void 0:U.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(M=ye.OPpago)||void 0===M?void 0:M.modo3]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col1,{borderRightColor:ye?null===ye||void 0===ye||null===(L=ye.fideicomisos[0])||void 0===L?void 0:L.color:"#ffffff"}],children:[" ",Se[we.indexOf(null===ye||void 0===ye||null===(_=ye.OPpago)||void 0===_?void 0:_.banco3)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col2,{borderRightColor:ye?null===ye||void 0===ye||null===(B=ye.fideicomisos[0])||void 0===B?void 0:B.color:"#ffffff"}],children:[" ",Pe[Ce.indexOf(null===ye||void 0===ye||null===(q=ye.OPpago)||void 0===q?void 0:q.nro3)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(H=ye.fideicomisos[0])||void 0===H?void 0:H.color:"#ffffff"}],children:[" ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(W=ye.OPpago)||void 0===W?void 0:W.descri3,children:(null===ye||void 0===ye||null===(G=ye.OPpago)||void 0===G?void 0:G.descri3)?" comprobante..":""})]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col4,{borderRightColor:ye?null===ye||void 0===ye||null===(J=ye.fideicomisos[0])||void 0===J?void 0:J.color:"#ffffff"}],children:[" ",Ue(null===ye||void 0===ye||null===(Z=ye.OPpago)||void 0===Z?void 0:Z.fecha3)]}),Object(R.jsx)(Nn.Text,{style:Ln.col5,children:(null===ye||void 0===ye||null===(Y=ye.OPpago)||void 0===Y?void 0:Y.monto3)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===($=ye.OPpago)||void 0===$?void 0:$.monto3)):""})]}),Object(R.jsxs)(Nn.View,{style:[Ln.row,{borderBottomColor:ye?null===ye||void 0===ye||null===(K=ye.fideicomisos[0])||void 0===K?void 0:K.color:"#ffffff"}],children:[Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(X=ye.fideicomisos[0])||void 0===X?void 0:X.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(ee=ye.OPpago)||void 0===ee?void 0:ee.modo4]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col1,{borderRightColor:ye?null===ye||void 0===ye||null===(te=ye.fideicomisos[0])||void 0===te?void 0:te.color:"#ffffff"}],children:[" ",Se[we.indexOf(null===ye||void 0===ye||null===(ne=ye.OPpago)||void 0===ne?void 0:ne.banco4)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col2,{borderRightColor:ye?null===ye||void 0===ye||null===(re=ye.fideicomisos[0])||void 0===re?void 0:re.color:"#ffffff"}],children:[" ",Pe[Ce.indexOf(null===ye||void 0===ye||null===(ie=ye.OPpago)||void 0===ie?void 0:ie.nro4)]]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col3,{borderRightColor:ye?null===ye||void 0===ye||null===(ae=ye.fideicomisos[0])||void 0===ae?void 0:ae.color:"#ffffff"}],children:[" ",Object(R.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(oe=ye.OPpago)||void 0===oe?void 0:oe.descri4,children:(null===ye||void 0===ye||null===(ce=ye.OPpago)||void 0===ce?void 0:ce.descri4)?" comprobante..":""})]}),Object(R.jsxs)(Nn.Text,{style:[Ln.col4,{borderRightColor:ye?null===ye||void 0===ye||null===(le=ye.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[" ",Ue(null===ye||void 0===ye||null===(ue=ye.OPpago)||void 0===ue?void 0:ue.fecha4)]}),Object(R.jsx)(Nn.Text,{style:Ln.col5,children:(null===ye||void 0===ye||null===(de=ye.OPpago)||void 0===de?void 0:de.monto4)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(se=ye.OPpago)||void 0===se?void 0:se.monto4)):""})]}),Object(R.jsxs)(Nn.View,{style:Ln.rowf,children:[Object(R.jsx)(Nn.Text,{style:[Ln.descriptionf,{borderRightColor:ye?null===ye||void 0===ye||null===(be=ye.fideicomisos[0])||void 0===be?void 0:be.color:"#ffffff"}],children:"TOTAL"}),Object(R.jsx)(Nn.Text,{style:Ln.col5,children:(null===ye||void 0===ye||null===(fe=ye.OPpago)||void 0===fe?void 0:fe.monto1)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(parseFloat((null===ye||void 0===ye||null===(je=ye.OPpago)||void 0===je?void 0:je.monto1)?null===ye||void 0===ye||null===(pe=ye.OPpago)||void 0===pe?void 0:pe.monto1:0)+parseFloat((null===ye||void 0===ye||null===(me=ye.OPpago)||void 0===me?void 0:me.monto2)?null===ye||void 0===ye||null===(he=ye.OPpago)||void 0===he?void 0:he.monto2:0)+parseFloat((null===ye||void 0===ye||null===(ve=ye.OPpago)||void 0===ve?void 0:ve.monto3)?null===ye||void 0===ye||null===(Oe=ye.OPpago)||void 0===Oe?void 0:Oe.monto3:0)+parseFloat((null===ye||void 0===ye||null===(xe=ye.OPpago)||void 0===xe?void 0:xe.monto4)?null===ye||void 0===ye||null===(ge=ye.OPpago)||void 0===ge?void 0:ge.monto4:0))):""})]})]})},Bn="#90e5fc",qn=Nn.StyleSheet.create({tableContainer:{flexDirection:"row",flexWrap:"wrap",marginTop:8},container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,textAlign:"center",fontStyle:"bold",flexGrow:1},description:{width:"60%",borderRightColor:Bn,borderRightWidth:1},qty:{width:"10%",borderRightColor:Bn,borderRightWidth:1},rate:{width:"15%",borderRightColor:Bn,borderRightWidth:1},amount:{width:"15%"},espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:15,fontSize:7,fontStyle:"bold"},col1:{width:"30%",textAlign:"right",paddingLeft:8},col2:{width:"30%",textAlign:"left",paddingLeft:8},col3:{width:"40%",textAlign:"left",paddingLeft:8}}),Hn=function(e){var t,n,r,i,a=e.dataOP;return Object(R.jsxs)(Nn.View,{style:qn.tableContainer,children:[Object(R.jsxs)(Nn.View,{style:qn.row,children:[Object(R.jsx)(Nn.Text,{style:qn.col1,children:"CBU:"}),Object(R.jsx)(Nn.Text,{style:qn.col2,children:null===a||void 0===a||null===(t=a.empresas[0])||void 0===t?void 0:t.CBU}),Object(R.jsxs)(Nn.Text,{style:qn.col3,children:["Cuenta Bancaria: ",null===a||void 0===a||null===(n=a.empresas[0])||void 0===n?void 0:n.nroCuenta]})]}),Object(R.jsxs)(Nn.View,{style:qn.row,children:[Object(R.jsx)(Nn.Text,{style:qn.col1,children:"CUIT:"}),Object(R.jsx)(Nn.Text,{style:qn.col2,children:null===a||void 0===a||null===(r=a.empresas[0])||void 0===r?void 0:r.CUIT}),Object(R.jsxs)(Nn.Text,{style:qn.col3,children:["Email:   ",null===a||void 0===a||null===(i=a.empresas[0])||void 0===i?void 0:i.mail]})]})]})},Wn=Nn.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:18,textAlign:"center",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),Gn=[],Jn=[],Zn=[],Yn=[];if(JSON.parse(localStorage.getItem("bs"))){var $n=JSON.parse(localStorage.getItem("bs"));$n.push({id:0,banco:"",descripcionLarga:""});for(var Kn=0;Kn<$n.length;Kn++)Gn.push($n[Kn].id),Jn.push($n[Kn].banco);var Xn=JSON.parse(localStorage.getItem("co"));Xn.push({id:0,bancoId:0,cuentaBanco:"",descripcionLarga:"",bancos:[{banco:""}]});for(var er=0;er<Xn.length;er++)Zn.push(Xn[er].id),Yn.push(Xn[er].cuentaBanco)}var tr=function(e){var t,n,r,i,a,o,c=e.dataOP,l=e.dataFacturas,u=e.apiServerUrl,d=e.idSociedad;return Object(R.jsx)(Nn.Document,{children:Object(R.jsxs)(Nn.Page,{size:"A4",style:Wn.page,children:[Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.saltolinea,children:" "})}),Object(R.jsxs)(Nn.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"},children:[Object(R.jsx)(Nn.Text,{style:[Wn.reportTitleFide,{width:c?100-(null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.ancho_logo)+"%":"75%",color:null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.color}],children:null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.titulo}),Object(R.jsx)(Nn.View,{style:{width:c?(null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.ancho_logo)+"%":"25%"},children:Object(R.jsx)(Nn.Image,{style:[Wn.logo,{backgroundColor:c?null===c||void 0===c||null===(a=c.fideicomisos[0])||void 0===a?void 0:a.color3:"#FFFFFF"}],src:{uri:"".concat(u,"/sociedades/").concat(d,"/").concat(c?null===c||void 0===c||null===(o=c.fideicomisos[0])||void 0===o?void 0:o.logo:"logo.png"),method:"GET",headers:{"Cache-Control":"no-cache"},body:""}})})]}),Object(R.jsx)(Nn.View,{style:Wn.titleContainer,children:Object(R.jsxs)(Nn.Text,{style:Wn.reportTitle,children:["SOLICITUD DE PAGO     N\xba ",null===c||void 0===c?void 0:c.numero]})}),Object(R.jsxs)(Nn.View,{style:Wn.invoiceDateContainer,children:[Object(R.jsx)(Nn.Text,{style:Wn.label,children:"Fecha: "}),Object(R.jsx)(Nn.Text,{children:Ue(null===c||void 0===c?void 0:c.createdAt)})]}),Object(R.jsx)(zn,{dataOP:c,dataFacturas:l}),Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.saltolinea,children:" "})}),Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.subreportTitle,children:"APROBACI\xd3N T\xc9CNICA"})}),Object(R.jsx)(Vn,{dataOP:c}),Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.saltolinea,children:" "})}),Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.subreportTitle,children:"APROBACI\xd3N ADMINISTRATIVA"})}),Object(R.jsx)(Mn,{dataOP:c}),Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.saltolinea,children:" "})}),Object(R.jsx)(Nn.View,{children:Object(R.jsx)(Nn.Text,{style:Wn.subreportTitle,children:"PAGO"})}),Object(R.jsx)(_n,{dataOP:c,arr_id:Gn,arr_banco:Jn,arr_cid:Zn,arr_cuenta:Yn}),Object(R.jsx)(Hn,{dataOP:c})]})})},nr=n(1063),rr=function(e,t){return"dark"===t?Object(nr.b)(e,.6):Object(nr.d)(e,.6)},ir=function(e,t){return"dark"===t?Object(nr.b)(e,.5):Object(nr.d)(e,.5)},ar={},or={},cr=0,lr=function(e,t,n,r,i,a){return[{field:"blue",headerName:"Blue",hide:!e,width:70,editable:!1,headerAlign:"center",renderCell:function(e){return 0===e.value?"":Object(R.jsx)(A.a,{sx:{bgcolor:"#3944BC"},children:"B"})}},{field:"createdAt",headerName:"Fecha",width:120,type:"date",editable:!1,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{timeZone:"UTC"})}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:xr},{field:"numero",headerName:"Numero",width:130,editable:!1,headerAlign:"center",align:"right",renderCell:gr},{field:"empresa",headerName:"Raz\xf3n Social",width:170,editable:!1,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:70,editable:!1,headerAlign:"center",align:"left"},{field:"estadoOP",headerName:"Estado",width:150,editable:t,renderCell:function(e){return e.value.descripcion},renderEditCell:function(e){return Object(R.jsx)(Cr,{estados:ur,props:e})},headerAlign:"center"},{field:"estadoRET",headerName:"Retenciones",width:150,editable:t,renderCell:function(e){return e.value.descripcion},renderEditCell:function(e){return Object(R.jsx)(Sr,{retenciones:dr,props:e})},headerAlign:"center"},{field:"facturas",headerName:"Facturas",width:140,editable:!1,headerAlign:"center",align:"center",renderCell:function(e){var t,n=e.row.misFacturas;return null===n||void 0===n||null===(t=n.map((function(e){return e.numero})))||void 0===t?void 0:t.join(", ")}},{field:"RET_GAN",headerName:"GAN",width:120,hide:!0,editable:t,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_IVA",headerName:"IVA",width:120,hide:!0,editable:t,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_SUSS",headerName:"SUSS",width:120,hide:!0,editable:t,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"retencion",hide:!0},{field:"aprobado_obra",hide:!0},{field:"aprobado obra",headerName:"Ap. Obra",width:140,headerAlign:"center",align:"center",renderCell:Ir},{field:"aprobado_adm",hide:!0},{field:"aprobado adm",headerName:"Ap. ADM",width:140,headerAlign:"center",align:"center",renderCell:Tr},{field:"estado",hide:!0},{field:"formaPago",headerName:"Forma Pago",width:160,editable:!1},{field:"fondos_",hide:!0},{field:"fondos",headerName:"Fondos",width:150,type:"singleSelect",editable:t,renderCell:function(e){return e.value.descripcion},renderEditCell:function(e){return Object(R.jsx)(Pr,{fondos_s:sr,props:e})},headerAlign:"center"},{field:"rubro",hide:!0},{field:"rubroID",headerName:"Rubro",width:140,hide:!0,editable:t,renderCell:function(e){return e.value.nombre},renderEditCell:function(e){return Object(R.jsx)(yr,{rubros:n,props:e})},headerAlign:"center"},{field:"subrubro",hide:!0},{field:"subrubroID",headerName:"Sub Rubro",width:140,hide:!0,editable:t,renderCell:function(e){return e.value.nombre},renderEditCell:function(e){return Object(R.jsx)(wr,{subRubros:r,props:e})},headerAlign:"center"},{field:"descripcion",headerName:"Detalle",width:140,editable:t,headerAlign:"center",align:"center"},{field:"archivada",headerName:"Generar",width:140,headerAlign:"center",align:"center",renderCell:kr},{field:"enviada",headerName:"Enviar",width:90,headerAlign:"center",align:"center",renderCell:Ar},{field:"confirmada",headerName:"Conf",type:"boolean",width:120,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:" ",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,n=t.deleteId;return t.confirmada?"":Object(R.jsx)(et.a,{onClick:function(e){a(n),i(!0)}})}}]},ur=JSON.parse(localStorage.getItem("estados")),dr=JSON.parse(localStorage.getItem("retenciones")),sr=JSON.parse(localStorage.getItem("fondos_s")),br="http://104.131.28.211:3000/";function fr(e){var t=e.filtFide,n=e.filtRS,r=e.filtEst,i=e.idSociety,a=e.loggedUser,u=e.opInformation,s=e.isLoading,b=e.error;cr=i.id;var f={},j=!0,p=null===a||void 0===a?void 0:a["rol.op"];"vista"===p&&(j=!1);var m=0,h=!1;"total"===(null===a||void 0===a?void 0:a["rol.op"])&&(m=-1,h=!0);var v=Object(d.i)(),O=Ze(),x=O.Prompt,g=O.setIsPromptOpen,y=Object(l.useState)(),S=Object(c.a)(y,2),C=S[0],P=S[1],I=Object(o.useQueryClient)(),A=Object(o.useQuery)(["rubros",i],(function(){return we("rubro/listar/".concat(i.id))})).data,F=Object(o.useQuery)(["subrubros",i],(function(){return we("subrubro/listar/".concat(i.id,"/0"))})).data,D=Object(o.useQuery)(["grfacturas",i.id],Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("factura/listar/".concat(i.id,"/todas/nada/").concat(m));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).data,N=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("op/mostrar/".concat(i.id,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSettled:function(e){var t;v("./".concat(e.id,"/").concat(e.createdAt,"/").concat(e.empresaId,"/").concat(e.numero,"/").concat(null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre,"/").concat(e.estadoOP,"/").concat(e.confirmada,"/").concat(e.blue))}}),Q=N.mutate,z=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("OP/eliminar/".concat(i.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.cancelQueries(["OP",i]);case 2:return n=I.getQueryData(["OP",i]),r=n.filter((function(e){return e.id!==t})),I.setQueryData(["OP",i],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return I.setQueryData(["OP",i],n)},onSettled:function(){return I.invalidateQueries(["OP",i])}}),E=z.mutate,V=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("op/mostrarConFacturas/".concat(i.id,"/").concat(t.id));case 2:return e.abrupt("return",f=e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){var t,n,r,i,a,o;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ar=f.op,or={item:f.item},M(null===(t=ar)||void 0===t?void 0:t.id,null===(n=ar)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.nombre,null===(i=ar)||void 0===i?void 0:i.numero,null===(a=ar)||void 0===a||null===(o=a.empresas[0])||void 0===o?void 0:o.razonSocial);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),U=V.mutate;function M(e,t,n,r){return L.apply(this,arguments)}function L(){return(L=Object(je.a)(fe.a.mark((function e(t,n,r,a){var o,c,l;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.pdf)(_()).toBlob();case 2:o=e.sent,c=new FormData,l=r+" OP-"+n+"-"+a+".pdf",c.append("logo",o),c.append("id",t),c.append("fideicomiso",n),c.append("numero",r),c.append("nombreArchivo",l),c.append("archivada",1),Se("op/modificar/".concat(i.id),c);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=function(){return Object(R.jsx)(tr,{dataOP:ar,dataFacturas:or,apiServerUrl:br,idSociedad:i.id})},B=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("autorizacion/eliminar/".concat(null===i||void 0===i?void 0:i.id),{id:t.authOBRA,tipoAutorizacion:"obra",opid:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.refetchQueries(["OP",i]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),q=B.mutate,H=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("autorizacion/eliminar/".concat(null===i||void 0===i?void 0:i.id),{id:t.authADM,tipoAutorizacion:"adm",opid:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.refetchQueries(["OP",i]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),W=H.mutate,J=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("OP/enviarMail/".concat(null===i||void 0===i?void 0:i.id),{mailTo:null===i||void 0===i?void 0:i.mailOP,mailaccount:null===i||void 0===i?void 0:i.mailaccount,mailfromname:null===i||void 0===i?void 0:i.mailfromname,mailConstructora:null===i||void 0===i?void 0:i.mailConstructora,fideicomiso:null===(n=t.fideicomisos[0])||void 0===n?void 0:n.nombre,razonSocial:null===(r=t.empresas[0])||void 0===r?void 0:r.razonSocial,enviar_OP_auto:null===(a=t.empresas[0])||void 0===a?void 0:a.enviar_OP_auto,numero:t.numero,id:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.refetchQueries(["OP",i]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Z=J.mutate,$=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,a=t.value,e.next=3,Se("OP/modificar/".concat(i.id),Object(w.a)({id:r},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,a=t.value,e.next=3,I.cancelQueries(["OP",i]);case 3:return o=I.getQueryData(["OP",i]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==r}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===r}))),{},Object(w.a)({},n,a))]),I.setQueryData(["OP",i],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return I.setQueryData(["OP",i],n)},onSettled:function(){return I.invalidateQueries(["OP",i])}}),K=$.mutate,X=Object(l.useState)([]),ee=Object(c.a)(X,2),te=ee[0],ne=ee[1],re=Object(l.useState)(!1),ie=Object(c.a)(re,2),ae=ie[0],oe=ie[1];return s?"Cargando...":b?"Hubo un error: ".concat(b.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(x,{message:"\xbfEliminar fila?",action:function(){return E(C)}}),Object(R.jsx)(Kt.a,{}),Object(R.jsxs)(T.a,{sx:{height:400,width:1,"& .super-app-theme--true":{bgcolor:function(e){return rr(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return ir(e.palette.success.main,e.palette.mode)}}},"& .super-app-theme--otra":{bgcolor:function(e){return rr(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return ir(e.palette.error.main,e.palette.mode)}}}},children:[Object(R.jsx)(Xe.a,{rows:u.filter((function(e){return function(e,t,n,r){return-1===t&&-1===n&&-1===r||(t>-1&&-1===n&&-1===r?e.fideicomisoId===t:-1===t&&n>-1&&-1===r?e.empresaId===n:-1===t&&-1===n&&r>-1?e.estadoOP===r:t>-1&&n>-1&&-1===r?e.fideicomisoId===t&&e.empresaId===n:t>-1&&-1===n&&r>-1?e.fideicomisoId===t&&e.estadoOP===r:-1===t&&n>-1&&r>-1?e.empresaId===n&&e.estadoOP===r:t>-1&&n>-1&&r>-1?e.fideicomisoId===t&&e.empresaId===n&&e.estadoOP===r:void 0)}(e,t,n,r)})).map((function(e){var t,n,r,i,a,o,c,l,u,d,s,b;return{id:e.id,acceso:p,numero:e.numero,empresa:null===(t=e.empresas[0])||void 0===t?void 0:t.razonSocial,empresaId:e.empresaId,monto:e.monto,moneda:e.moneda,RET_SUSS:e.RET_SUSS,RET_GAN:e.RET_GAN,RET_IVA:e.RET_IVA,rubroId:e.rubroId,estadoRET:{id:e.estadoRET,descripcion:null===dr||void 0===dr||null===(n=dr.find((function(t){return t.id===e.estadoRET})))||void 0===n?void 0:n.descripcion},estadoOP:{id:e.estadoOP,descripcion:null===ur||void 0===ur||null===(r=ur.find((function(t){return t.id===e.estadoOP})))||void 0===r?void 0:r.descripcion},blue:e.blue,confirmada:0!==e.confirmada,fondos:{id:e.fondos,descripcion:null===sr||void 0===sr||null===(i=sr.find((function(t){return t.id===e.fondos})))||void 0===i?void 0:i.descripcion},fideicomiso:null===(a=e.fideicomisos[0])||void 0===a?void 0:a.nombre,archivada:e.archivada,enviada:e.enviada,descripcion:e.descripcion,createdAt:e.createdAt,rubroID:{id:e.rubroId,nombre:null===A||void 0===A||null===(o=A.find((function(t){return t.id===e.rubroId})))||void 0===o?void 0:o.rubro},subrubroID:{id:e.subrubroId,nombre:null===F||void 0===F||null===(c=F.find((function(t){return t.id===e.subRubroId})))||void 0===c?void 0:c.subRubro},apr_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",apr_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",misFacturas:null===D||void 0===D?void 0:D.filter((function(t){return(null===t||void 0===t?void 0:t.OPId)===e.id})),deleteId:e.id,retencion:null===dr||void 0===dr||null===(l=dr.find((function(t){return t.id===e.estadoRET})))||void 0===l?void 0:l.descripcion,aprobado_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",aprobado_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",estado:null===ur||void 0===ur||null===(u=ur.find((function(t){return t.id===e.estadoOP})))||void 0===u?void 0:u.descripcion,fondos_:null===sr||void 0===sr||null===(d=sr.find((function(t){return t.id===e.fondos})))||void 0===d?void 0:d.descripcion,formaPago:e.formaPago,rubro:null===A||void 0===A||null===(s=A.find((function(t){return t.id===e.rubroId})))||void 0===s?void 0:s.rubro,subrubro:null===F||void 0===F||null===(b=F.find((function(t){return t.id===e.subRubroId})))||void 0===b?void 0:b.subRubro,onAuthObra:function(){return q(e)},onAuthAdm:function(){return W(e)},onEnviar:function(){return Z(e)},cargarOP:function(){return U(e)},esEditable:function(){return e},onIrDetalle:function(){return Q(e)}}})),onCellEditCommit:K,columns:lr(h,j,A,F,g,P),isCellEditable:function(e){return!e.row.confirmada||"total"===p},checkboxSelection:!0,onSelectionModelChange:ne,autoHeight:!0,density:"comfortable",scrollbarSize:!0,components:{Toolbar:Or},getRowClassName:function(e){return"super-app-theme--".concat(e.row.confirmada)}}),Object(R.jsx)(Lt.a,{smUp:"vista"===a["rol.op"],children:Object(R.jsx)(Y.a,{onClick:function(){return function(e,t,n){!function(e,t,n){jr.apply(this,arguments)}(e,t,n)}(te,i,oe)},children:"Generar y Enviar OPs Seleccionadas"})}),Object(R.jsx)(Fn.a,{in:ae,children:Object(R.jsx)(he.a,{action:Object(R.jsx)(k.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){oe(!1)},children:Object(R.jsx)(Tn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function jr(){return(jr=Object(je.a)(fe.a.mark((function e(t,n,r){var i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.length)){e.next=12;break}return e.prev=2,e.delegateYield(fe.a.mark((function e(){var a,o,c,l,u,d,s,b,f,j;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("op/mostrarConFacturas/".concat(n.id,"/").concat(t[i]));case 2:if(a=e.sent,o=a.op,c={item:a.item},3!==o.estadoOP||0!==o.blue){e.next=13;break}return console.log("AAi=",i,"res: ",o.numero),d=function(){return Object(R.jsx)(tr,{dataOP:o,dataFacturas:c,apiServerUrl:br,idSociedad:n.id})},e.next=10,pr(d,o.id,null===o||void 0===o||null===(l=o.fideicomisos[0])||void 0===l?void 0:l.nombre,o.numero,null===o||void 0===o||null===(u=o.empresas[0])||void 0===u?void 0:u.razonSocial,n);case 10:s=e.sent,console.log(s),s&&(hr(o.id,null===o||void 0===o||null===(b=o.fideicomisos[0])||void 0===b?void 0:b.nombre,o.numero,null===(f=o.empresas[0])||void 0===f?void 0:f.razonSocial,null===(j=o.empresas[0])||void 0===j?void 0:j.enviar_OP_auto,n),r(!0));case 13:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:e.next=9;break;case 6:e.prev=6,e.t1=e.catch(2),console.log(e.t1);case 9:i++,e.next=1;break;case 12:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function pr(e,t,n,r,i,a){return mr.apply(this,arguments)}function mr(){return(mr=Object(je.a)(fe.a.mark((function e(t,n,r,i,a,o){var c,l,u,d;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i+" OP-"+r+"-"+a+".pdf",e.next=3,Object(Nn.pdf)(t()).toBlob();case 3:return l=e.sent,(u=new FormData).append("logo",l),u.append("id",n),u.append("fideicomiso",r),u.append("numero",i),u.append("nombreArchivo",c),u.append("archivada",1),e.next=13,Se("op/modificar/".concat(o.id),u);case 13:return d=e.sent,e.abrupt("return",!!d);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hr(e,t,n,r,i,a){return vr.apply(this,arguments)}function vr(){return(vr=Object(je.a)(fe.a.mark((function e(t,n,r,i,a,o){var c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("OP/enviarMail/".concat(null===o||void 0===o?void 0:o.id),{mailTo:null===o||void 0===o?void 0:o.mailOP,mailaccount:null===o||void 0===o?void 0:o.mailaccount,mailfromname:null===o||void 0===o?void 0:o.mailfromname,mailConstructora:null===o||void 0===o?void 0:o.mailConstructora,fideicomiso:n,razonSocial:i,enviar_OP_auto:a,numero:r,id:t});case 2:return c=e.sent,e.abrupt("return",!!c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Or(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{csvOptions:{fields:["createdAt","fideicomiso","numero","empresa","monto","moneda","RET_SUSS","RET_GAN","RET_IVA","fondos_","retencion","aprobado_obra","aprobado_adm","estado","fondos_","rubro","subrubro","descripcion"]}})})}function xr(e){var t=e.row.onIrDetalle,n=e.row.fideicomiso;return Object(R.jsxs)(Y.a,{onClick:t,children:[n,"  "]})}function gr(e){var t=e.row.onIrDetalle,n=e.row.numero;return Object(R.jsxs)(Y.a,{onClick:t,children:[n,"  "]})}function yr(e){var t=e.rubros,n=e.props,r=n.id,i=n.api,a=n.field;t=[].concat(Object(Re.a)(t),[{rubro:""}]);var o=Object(l.useState)({rubro:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(R.jsx)(Rt.a,{value:d,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,o){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:r,field:a,value:o.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:i.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Rubro"}))}})}function wr(e,t){var n=e.subRubros,r=e.props,i=r.id,a=r.api,o=r.field;n=[].concat(Object(Re.a)(n.filter((function(e){var t;return e.rubroId===parseInt(null===r||void 0===r||null===(t=r.row)||void 0===t?void 0:t.rubroID.id)}))),[{subRubro:""}]);var u=Object(l.useState)({subRubro:""}),d=Object(c.a)(u,2),s=d[0],b=d[1];return Object(R.jsx)(Rt.a,{value:s,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(n),a.setEditCellValue({id:i,field:o,value:n.id},t),e.next=4,r.api.commitCellChange({id:i,field:o});case 4:a.setCellMode(i,o,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:n,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"subRubro"}))}})}function Sr(e){var t=e.retenciones,n=e.props,r=n.id,i=n.api,a=n.field;t=[].concat(Object(Re.a)(t),[{descripcion:""}]);var o=Object(l.useState)({descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(R.jsx)(Rt.a,{value:d,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,o){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:r,field:a,value:o.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:i.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Retencion"}))}})}function Cr(e){var t=e.estados,n=e.props,r=n.id,i=n.api,a=n.field;t=[].concat(Object(Re.a)(t),[{descripcion:""}]);var o=Object(l.useState)({descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return n.row.confirmada?Object(R.jsx)(me.a,{defaultValue:n.row.estadoOP.descripcion,InputProps:{readOnly:!0}}):Object(R.jsx)(Rt.a,{value:d,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,o){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:r,field:a,value:o.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:i.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Estado"}))}})}function Pr(e){var t=e.fondos_s,n=e.props,r=n.id,i=n.api,a=n.field;t=[].concat(Object(Re.a)(t),[{descripcion:""}]);var o=Object(l.useState)({descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return n.row.confirmada?Object(R.jsx)(me.a,{defaultValue:n.row.fondos.descripcion,InputProps:{readOnly:!0}}):Object(R.jsx)(Rt.a,{value:d,onChange:function(){var e=Object(je.a)(fe.a.mark((function e(t,o){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!((null===o||void 0===o?void 0:o.id)>0)){e.next=6;break}return i.setEditCellValue({id:r,field:a,value:o.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:i.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fondos"}))}})}function Ir(e){var t=e.row.onAuthObra,n=e.row.apr_obra;return""!==n?"total"===e.row.acceso?Object(R.jsxs)(Y.a,{onClick:function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"Cancelar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"Desaprobar Obra"})]})}))},children:[n,"  "]}):""+(""+n).toUpperCase():""}function Tr(e){var t=e.row.onAuthAdm,n=e.row.apr_adm;return""!==n?"total"===e.row.acceso?Object(R.jsxs)(Y.a,{onClick:function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"Cancelar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"Desaprobar Adm"})]})}))},children:[n,"  "]}):""+(""+n).toUpperCase():""}function kr(e){var t=e.row.cargarOP,n=e.row.fideicomiso,r=e.row.empresa,i=e.row.numero+" OP-"+n+"-"+r+".pdf",a=e.row.archivada,o=function(){t(),setTimeout((function(){Object(Kt.b)((function(e){var t=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(R.jsx)(Nn.PDFDownloadLink,{document:Object(R.jsx)(tr,{dataOP:ar,dataFacturas:or,apiServerUrl:"http://104.131.28.211:3000/",idSociedad:cr}),fileName:i,children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Descargar"}})]})}))}),800)};return 0===a?Object(R.jsx)(Y.a,{onClick:o,children:"Para Generar"}):Object(R.jsx)(Y.a,{onClick:o,children:"Generada"})}function Ar(e){var t=e.row.onEnviar,n=e.row.enviada,r=function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"Cancelar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"Enviar"})]})}))};return 0===e.row.archivada?"":0===n?Object(R.jsx)(Y.a,{onClick:r,children:"Enviar"}):Object(R.jsx)(Y.a,{onClick:r,children:"Re enviar"})}function Fr(e){var t=e.idSociety,n=e.loggedUser,r=0;"total"===(null===n||void 0===n?void 0:n["rol.op"])&&(r=-1);var i=Object(o.useQuery)(["OP",t],(function(){return we("OP/listar/".concat(t.id,"/todas/nulo/").concat(r,"/0/0/0"))})),a=i.data,u=i.isLoading,d=i.error,s=Object(o.useQuery)(["fideicomisos"],(function(){return we("fideicomiso/listar/".concat(t.id))})).data,b=Object(o.useQuery)(["proveedores"],(function(){return we("proveedor/listar/".concat(t.id))})).data,f=Object(o.useQuery)(["ddfacturas"],(function(){return we("factura/listar/".concat(t.id,"/opid/0/0"))})).data,j=Object(o.useQuery)(["ddfacturasBlue"],(function(){return we("factura/listar/".concat(t.id,"/opid/0/1"))})).data,p=Object(l.useState)(-1),m=Object(c.a)(p,2),h=m[0],v=m[1],O=Object(l.useState)(-1),x=Object(c.a)(O,2),g=x[0],y=x[1],w=Object(l.useState)(-1),S=Object(c.a)(w,2),C=S[0],P=S[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(Lt.a,{smUp:"vista"===(null===n||void 0===n?void 0:n["rol.factura"]),children:Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Dn,{idSociety:t,loggedUser:n,fideicomisos:s,proveedores:b,ddfacturas:f,ddfacturasBlue:j})})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Rn,{idSociety:t,loggedUser:n,fideicomisos:s,setFiltFide:v,setFiltRS:y,setFiltEst:P,proveedores:b,ddfacturas:f,ddfacturasBlue:j})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(fr,{idSociety:t,loggedUser:n,opInformation:a,filtFide:h,filtRS:g,filtEst:C,isLoading:u,error:d})})]})})]})}var Dr=n(601),Rr=n.n(Dr),Nr=function(e,t){return[{field:"createdAt",headerName:"Fecha",editable:!1,width:120,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return Ue(e.value)}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:Vr},{field:"numero",headerName:"Numero",width:130,editable:!1,headerAlign:"center",align:"right",renderCell:Ur},{field:"empresa",headerName:"Raz\xf3n Social",editable:!1,width:160,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",editable:!1,width:125,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",editable:!1,width:60,headerAlign:"center",align:"left"},{field:"formaPago",headerName:"Forma Pago",width:160,editable:!0},{field:"PriceCheckIcon",headerName:"Autorizar",width:160,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.authId;return Object(R.jsx)(Rr.a,{onClick:function(n){t(r),e(!0)}})}}]},Qr=[];function zr(e){var t=e.idSociety,n=e.loggedUser,r=e.tipo,i=Ze(),a=i.Prompt,u=i.setIsPromptOpen,s=Object(l.useState)(),b=Object(c.a)(s,2),f=b[0],j=b[1],p=Object(d.i)(),m="";m="adm"===r?"OP/listar/".concat(t.id,"/authADM/nulo/").concat(0,"/0/0/0"):"OP/listar/".concat(t.id,"/authObra/nulo/").concat(0,"/0/0/0");var h=Object(o.useQuery)(["OP"+r,t],(function(){return we(m)})),v=h.data,O=h.isLoading,x=h.error,g=Object(o.useQueryClient)(),y=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(i){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:i,documento:"op",tipoAutorizacion:r,creador:n.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.refetchQueries(["OP"+r,t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),S=y.mutate,C=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("./".concat(t.id,"/").concat(t.createdAt,"/").concat(t.empresaId,"/").concat(t.numero,"/").concat(null===(n=t.fideicomisos[0])||void 0===n?void 0:n.nombre,"/").concat(t.estadoOP,"/").concat(t.confirmada,"/").concat(t.blue)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=C.mutate,I=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var r,i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,a=n.value,e.next=3,Se("OP/modificar/".concat(t.id),Object(w.a)({id:i},r,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(n){var i,a,o,c,l;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.field,a=n.id,o=n.value,e.next=3,g.cancelQueries(["OP"+r,t]);case 3:return c=g.getQueryData(["OP"+r,t]),l=[].concat(Object(Re.a)(c.filter((function(e){return e.id!==a}))),[Object(G.a)(Object(G.a)({},c.find((function(e){return e.id===a}))),{},Object(w.a)({},i,o))]),g.setQueryData(["OP"+r,t],l),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,i){return g.setQueryData(["OP"+r,t],i)},onSettled:function(){return g.invalidateQueries(["OP"+r,t])}}),T=I.mutate;return O?"Cargando...":x?"Hubo un error: ".concat(x.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(a,{message:"\xbfAutorizar fila?",action:function(){return S(f)}}),Object(R.jsx)(Xe.a,{rows:v.map((function(e){return{id:e.id,numero:e.numero,empresa:e.empresas[0].razonSocial,monto:e.monto,moneda:e.moneda,formaPago:e.formaPago,fideicomiso:e.fideicomisos[0].nombre,apr_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",apr_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",createdAt:e.createdAt,authId:e.id,onIrDetalle:function(){return P(e)}}})),onCellEditCommit:T,columns:Nr(u,j),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Er}})]})}function Er(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function Vr(e){var t=e.row.onIrDetalle,n=e.row.fideicomiso;return Object(R.jsxs)(Y.a,{onClick:t,children:[n,"  "]})}function Ur(e){var t=e.row.onIrDetalle,n=e.row.numero;return Object(R.jsxs)(Y.a,{onClick:t,children:[n,"  "]})}function Mr(e){var t=e.idSociety,n=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsx)(pe.a,{children:Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(zr,{idSociety:t,loggedUser:n,tipo:"adm"})})})})]})}function Lr(e){var t=e.idSociety,n=e.loggedUser;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsx)(pe.a,{children:Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(zr,{idSociety:t,loggedUser:n,tipo:"obra"})})})})]})}localStorage.getItem("formaPagos")?Qr=localStorage.getItem("formaPagos").split(","):Qr[0]="Otra";var _r=n(1109);function Br(e){var t=e.idSociety,n=e.empresaId,r=e.OPId,i=e.refetch,a=Object(d.j)().blue,u=Ze().Prompt,s=Object(o.useQueryClient)(),b=Object(o.useQuery)(["facturas"],(function(){return we("factura/listar/".concat(t.id,"/opid/0/").concat(a))})).data,f=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){var i;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("factura/modificar/".concat(t.id),{id:null===n||void 0===n||null===(i=n.factura)||void 0===i?void 0:i.id,OPId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.refetchQueries(["facturas",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),j=f.mutate,p=Object(l.useState)(null),m=Object(c.a)(p,2),h=m[0],v=m[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{factura:""},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,a=n.resetForm,j(t),setTimeout((function(){i(),console.log("refetch")}),750),a(),r(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"N\xfamero Factura",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){v(t),r("factura",t)},value:h,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:b?null===b||void 0===b?void 0:b.filter((function(e){return(null===e||void 0===e?void 0:e.empresaId)===parseInt(n)})):[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"N\xfamero Factura"}))}}),Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar Factura"})]})}}),Object(R.jsx)(u,{message:"...error",ok:!0})]})}var qr=n(1136);function Hr(e){var t=e.idSociety,n=e.OPId,r=e.loggedUser,i=e.estadoOP,a=e.confirmada,u=e.formOP,d=e.isLoading,s=e.error,b=e.refetch,f=Ze().Prompt,j=Object(o.useQueryClient)(),p=!0;"vista"===(null===r||void 0===r?void 0:r["rol.op"])&&(p=!1);var m=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("op/modificar/".concat(t.id),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.refetchQueries(["formOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),h=m.mutate,v=JSON.parse(localStorage.getItem("estados")),O=JSON.parse(localStorage.getItem("retenciones")),x=JSON.parse(localStorage.getItem("fondos_s")),g=Object(l.useState)(parseInt(a)),y=Object(c.a)(g,2),w=y[0],S=y[1],C=Object(l.useState)(v[parseInt(i)]),P=Object(c.a)(C,2),T=P[0],k=P[1],A=Object(l.useState)(O[parseInt(null===u||void 0===u?void 0:u.estadoRET)]),F=Object(c.a)(A,2),D=F[0],N=F[1],Q=Object(l.useState)(x[parseInt(null===u||void 0===u?void 0:u.fondos)]),z=Object(c.a)(Q,2),E=z[0],V=z[1],U=JSON.parse(localStorage.getItem("bs"));U.push({id:0,banco:"",descripcionLarga:""});var M=JSON.parse(localStorage.getItem("co"));M.push({id:0,bancoId:0,cuentaBanco:"",descripcionLarga:"",bancos:[{banco:""}]});var L=localStorage.getItem("formaPagos").split(","),_="total"!==r["rol.op"]||1!==w;return d?"Cargando...":s?"Hubo un error: ".concat(s.message):Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{id:n,flagPago:1},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,h(t),r(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting;var i,a,o,c,l=e.setFieldValue;return Object(R.jsx)(Oe.b,{children:Object(R.jsxs)(_r.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(R.jsx)(_r.a,{item:!0,md:12,children:Object(R.jsx)(_r.a,{item:!0,md:12,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n T\xe9cnica"})})}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:6,children:Object(R.jsx)(me.a,{sx:{width:"68ch"},label:"Detalle",defaultValue:(null===u||void 0===u?void 0:u.descripcion)||"",type:"float",name:"descripcion",onChange:function(e){return Jr(e,l,b,"descripcion",t.id,n,0,0)},InputProps:{maxLength:90,readOnly:!p||1===w}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(R.jsx)(_r.a,{item:!0,md:4,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===u||void 0===u?void 0:u.auth_obra)?null===(i=u.auth_obra[0])||void 0===i||null===(a=i.usuarios[0])||void 0===a?void 0:a.user:""})}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:12,children:Object(R.jsx)(_r.a,{item:!0,md:12,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n Administrativa"})})}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Estado:\xa0\xa0\xa0"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Estado",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Wr(e,l,k,b,"estadoOP",t.id,n,0,r)},value:T,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:v,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Estado"}))}})}),Object(R.jsxs)(_r.a,{item:!0,md:2,children:[Object(R.jsx)(Lt.a,{smUp:"total"===r["rol.op"]||1!==w,children:Object(R.jsx)(I.a,{align:"center",color:"green",variant:"h5",children:1===w?"Confirmada!":""})}),Object(R.jsx)(Lt.a,{smUp:!p||3!==T.id||1===w,children:Object(R.jsxs)(I.a,{align:"left",color:"blue",variant:"h5",children:[Object(R.jsx)(qr.a,{onChange:function(e){return Zr(e,S,"confirmada",t.id,n,0,1)}})," Confirmar"]})}),Object(R.jsx)(Lt.a,{smUp:_,children:Object(R.jsxs)(I.a,{align:"left",color:"blue",variant:"h5",children:[Object(R.jsx)(qr.a,{defaultChecked:!0,onChange:function(e){return Zr(e,S,"confirmada",t.id,n,0,0)}})," Desconfirmar"]})})]}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(R.jsx)(_r.a,{item:!0,md:4,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===u||void 0===u?void 0:u.auth_adm)?null===(o=u.auth_adm[0])||void 0===o||null===(c=o.usuarios[0])||void 0===c?void 0:c.user:""})}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Est. Retenci\xf3n, Fondos:\xa0\xa0\xa0"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Estado Retenci\xf3n",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Wr(e,l,N,b,"estadoRET",t.id,n,0,r)},value:D,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:O,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Retenci\xf3n"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Fondos",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Wr(e,l,V,b,"fondos",t.id,n,0,r)},value:E,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:x,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fondos"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:6,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Sumatoria Facturas:\xa0\xa0\xa0"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===u||void 0===u?void 0:u.monto))]})}),Object(R.jsx)(_r.a,{item:!0,md:4,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Forma de Pago:"})}),Object(R.jsx)(_r.a,{item:!0,md:4,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:null===u||void 0===u?void 0:u.formaPago})}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:2}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"RET GAN",type:"number",defaultValue:null===u||void 0===u?void 0:u.RET_GAN,name:"RET_GAN",onChange:function(e){return Gr(e,l,b,"RET_GAN",t.id,n,0,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.RET_GAN)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Certificado GAN",defaultValue:null===u||void 0===u?void 0:u.COMP_GAN,name:"COMP_GAN",onChange:function(e){return Jr(e,l,b,"COMP_GAN",t.id,n,0,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.COMP_GAN)}),Object(R.jsx)(_r.a,{item:!0,md:6}),Object(R.jsx)(_r.a,{item:!0,md:2}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"RET IVA",type:"number",defaultValue:null===u||void 0===u?void 0:u.RET_IVA,name:"RET_IVA",onChange:function(e){return Gr(e,l,b,"RET_IVA",t.id,n,0,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.RET_IVA)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Certificado IVA",defaultValue:null===u||void 0===u?void 0:u.COMP_IVA,name:"COMP_IVA",onChange:function(e){return Jr(e,l,b,"COMP_IVA",t.id,n,0,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.COMP_IVA)}),Object(R.jsx)(_r.a,{item:!0,md:6}),Object(R.jsx)(_r.a,{item:!0,md:2}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"RET SUSS",type:"number",defaultValue:null===u||void 0===u?void 0:u.RET_SUSS,name:"RET_SUSS",onChange:function(e){return Gr(e,l,b,"RET_SUSS",t.id,n,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.RET_SUSS)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Certificado SUSS",defaultValue:null===u||void 0===u?void 0:u.COMP_SUSS,name:"COMP_SUSS",onChange:function(e){return Jr(e,l,b,"COMP_SUSS",t.id,n,0,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.COMP_SUSS)}),Object(R.jsx)(_r.a,{item:!0,md:6}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Monto a Abonar:\xa0\xa0\xa0"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsxs)(I.a,{align:"left",color:"green",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===u||void 0===u?void 0:u.monto_a_pagar))+" "+(null===u||void 0===u?void 0:u.moneda)]})}),Object(R.jsx)(_r.a,{item:!0,md:6,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:12,children:Object(R.jsx)(_r.a,{item:!0,md:12,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Pago"})})}),Object(R.jsx)(_r.a,{item:!0,md:12,children:"\xa0"}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Modo"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Banco"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Nro Cuenta"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Comprobante"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Fecha"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Monto"})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Modo",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Gr(e,l,b,"modo1",t.id,n,1,r)},value:(null===u||void 0===u?void 0:u.OPpago.modo1)||L[0],getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:L,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Modo"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Banco",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){l("banco1",r),Gr(e,l,b,"banco1",t.id,n,1,r.id)},value:U.find((function(e){var t;return e.id===((null===u||void 0===u||null===(t=u.OPpago)||void 0===t?void 0:t.banco1)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:U,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"banco"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"NRO",disabled:!p||1===w,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,r){l("nro1",r),Gr(e,l,b,"nro1",t.id,n,1,r.id)},value:M.find((function(e){return e.id===((null===u||void 0===u?void 0:u.OPpago.nro1)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:M.filter((function(e){return e.bancoId===parseInt((null===u||void 0===u?void 0:u.OPpago.banco1)||0)})),renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Cuenta"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Descripci\xf3n",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.descri1,name:"descri1",onChange:function(e){return Jr(e,l,b,"descri1",t.id,n,1,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.OPpago.descri1)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:Ve(null===u||void 0===u?void 0:u.OPpago.fecha1)?null===u||void 0===u?void 0:u.OPpago.fecha1:null,name:"fecha1",InputProps:{readOnly:!p||1===w},onChange:function(e){return Jr(e,l,b,"fecha1",t.id,n,2,0)},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({required:!0,size:"small"},e))}})})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{name:"monto1",size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.monto1,onChange:function(e){return Gr(e,l,b,"monto1",t.id,n,1,0)},inputProps:{readOnly:!p||1===w,min:0,style:{textAlign:"center"}}},null===u||void 0===u?void 0:u.OPpago.monto1)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Modo",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Gr(e,l,b,"modo2",t.id,n,1,r)},value:(null===u||void 0===u?void 0:u.OPpago.modo2)||L[0],getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:L,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Modo"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Banco",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){l("banco2",r),Gr(e,l,b,"banco2",t.id,n,1,r.id)},value:U.find((function(e){var t;return e.id===((null===u||void 0===u||null===(t=u.OPpago)||void 0===t?void 0:t.banco2)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:U,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"banco"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"NRO",disabled:!p||1===w,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,r){l("nro2",r),Gr(e,l,b,"nro2",t.id,n,1,r.id)},value:M.find((function(e){return e.id===((null===u||void 0===u?void 0:u.OPpago.nro2)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:M.filter((function(e){return e.bancoId===parseInt((null===u||void 0===u?void 0:u.OPpago.banco2)||0)})),renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Cuenta"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Descripci\xf3n",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.descri2,name:"descri2",onChange:function(e){return Jr(e,l,b,"descri2",t.id,n,1,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.OPpago.descri2)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:Ve(null===u||void 0===u?void 0:u.OPpago.fecha2)?null===u||void 0===u?void 0:u.OPpago.fecha2:null,name:"fecha2",InputProps:{readOnly:!p||1===w},onChange:function(e){return Jr(e,l,b,"fecha2",t.id,n,2,0)},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({required:!0,size:"small"},e))}})})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{name:"monto2",size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.monto2,onChange:function(e){return Gr(e,l,b,"monto2",t.id,n,1,0)},inputProps:{readOnly:!p||1===w,min:0,style:{textAlign:"center"}}},null===u||void 0===u?void 0:u.OPpago.monto2)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Modo",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Gr(e,l,b,"modo3",t.id,n,1,r)},value:(null===u||void 0===u?void 0:u.OPpago.modo3)||L[0],getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:L,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Modo"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Banco",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){l("banco3",r),Gr(e,l,b,"banco3",t.id,n,1,r.id)},value:U.find((function(e){var t;return e.id===((null===u||void 0===u||null===(t=u.OPpago)||void 0===t?void 0:t.banco3)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:U,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"banco"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"NRO",disabled:!p||1===w,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,r){l("nro3",r),Gr(e,l,b,"nro3",t.id,n,1,r.id)},value:M.find((function(e){return e.id===((null===u||void 0===u?void 0:u.OPpago.nro3)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:M.filter((function(e){return e.bancoId===parseInt((null===u||void 0===u?void 0:u.OPpago.banco3)||0)})),renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Cuenta"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Descripci\xf3n",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.descri3,name:"descri3",onChange:function(e){return Jr(e,l,b,"descri3",t.id,n,1,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.OPpago.descri3)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:Ve(null===u||void 0===u?void 0:u.OPpago.fecha3)?null===u||void 0===u?void 0:u.OPpago.fecha3:null,name:"fecha3",InputProps:{readOnly:!p||1===w},onChange:function(e){return Jr(e,l,b,"fecha3",t.id,n,2,0)},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({required:!0,size:"small"},e))}})})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{name:"monto3",size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.monto3,onChange:function(e){return Gr(e,l,b,"monto3",t.id,n,1,0)},inputProps:{readOnly:!p||1===w,min:0,style:{textAlign:"center"}}},null===u||void 0===u?void 0:u.OPpago.monto3)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Modo",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){Gr(e,l,b,"modo4",t.id,n,1,r)},value:(null===u||void 0===u?void 0:u.OPpago.modo4)||L[0],getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:L,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Modo"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Banco",disabled:!p||1===w,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,r){l("banco4",r),Gr(e,l,b,"banco4",t.id,n,1,r.id)},value:U.find((function(e){var t;return e.id===((null===u||void 0===u||null===(t=u.OPpago)||void 0===t?void 0:t.banco4)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:U,renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"banco"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"NRO",disabled:!p||1===w,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,r){l("nro4",r),Gr(e,l,b,"nro4",t.id,n,1,r.id)},value:M.find((function(e){return e.id===((null===u||void 0===u?void 0:u.OPpago.nro4)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:M.filter((function(e){return e.bancoId===parseInt((null===u||void 0===u?void 0:u.OPpago.banco4)||0)})),renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Cuenta"}))}})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{size:"small",sx:{width:"20ch"},label:"Descripci\xf3n",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.descri4,name:"descri4",onChange:function(e){return Jr(e,l,b,"descri4",t.id,n,1,0)},InputProps:{readOnly:!p||1===w}},null===u||void 0===u?void 0:u.OPpago.descri4)}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(Ne.b,{dateAdapter:ze.a,children:Object(R.jsx)(Qe.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:Ve(null===u||void 0===u?void 0:u.OPpago.fecha4)?null===u||void 0===u?void 0:u.OPpago.fecha4:null,name:"fecha4",InputProps:{readOnly:!p||1===w},onChange:function(e){return Jr(e,l,b,"fecha4",t.id,n,2,0)},renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)({required:!0,size:"small"},e))}})})}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(me.a,{name:"monto4",size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===u||void 0===u?void 0:u.OPpago.monto4,onChange:function(e){return Gr(e,l,b,"monto4",t.id,n,1,0)},inputProps:{readOnly:!p||1===w,min:0,style:{textAlign:"center"}}},null===u||void 0===u?void 0:u.OPpago.monto4)}),Object(R.jsx)(_r.a,{item:!0,md:10}),Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsxs)(I.a,{align:"center",color:"textPrimary",variant:"h5",children:[Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Math.round(100*(null===u||void 0===u?void 0:u.OPpago.monto1))/100+Math.round(100*(null===u||void 0===u?void 0:u.OPpago.monto2))/100+Math.round(100*(null===u||void 0===u?void 0:u.OPpago.monto3))/100+Math.round(100*(null===u||void 0===u?void 0:u.OPpago.monto4))/100)),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"]})})]})})}}),Object(R.jsx)(f,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function Wr(e,t,n,r,i,a,o,c,l){var u=e.target.value;if(console.log(u,null===l||void 0===l?void 0:l.id),0===u){console.log(11),e.preventDefault();if(!/^\d{0,7}(\.\d{0,2})?$/.test(u.toString()))return!1;console.log(22,i),n(l),t(i,u.toString()),Jr(e,t,r,i,a,o,c,null===l||void 0===l?void 0:l.id)}}function Gr(e,t,n,r,i,a,o,c){e.preventDefault();var l=e.target.value;if(!/^\d{0,7}(\.\d{0,2})?$/.test(l.toString()))return!1;t(r,l.toString()),Jr(e,t,n,r,i,a,o,c)}function Jr(e,t,n,r,i,a,o,c){var l=null;if(console.log(333,e.target,c,r),2===o)l=Le(e)+" 03:00:00";else{e.preventDefault();var u=e.target.value;t(r,u.toString()),l=u,"estadoOP"!==r&&"estadoRET"!==r&&"fondos"!==r||(l=c),"banco1"!==r&&"banco2"!==r&&"banco3"!==r&&"banco4"!==r||(l=c),"nro1"!==r&&"nro2"!==r&&"nro3"!==r&&"nro4"!==r||(l=c),"modo1"!==r&&"modo2"!==r&&"modo3"!==r&&"modo4"!==r||(l=c)}var d=Object(w.a)({id:a},r,l);o>0&&(d.flagPago=1),Se("op/modificar/".concat(i),d),setTimeout((function(){n(),console.log("refetch")}),2e3)}function Zr(e,t,n,r,i,a,o){e.preventDefault(),t(o);var c=Object(w.a)({id:i},n,o);1===a&&(c.flagPago=1),Se("op/modificar/".concat(r),c)}var Yr=function(e,t){return[{field:"tipo",headerName:"Tipo de Comp.",width:170,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"empresa",headerName:"Proveedor",width:170,editable:!1,headerAlign:"center"},{field:"detalle",headerName:"Detalle",width:175,editable:e,headerAlign:"center"},{field:"numero",headerName:"Nro Factura",width:185,editable:!1,headerAlign:"center",align:"center"},{field:"txtOC",headerName:"Nro OC",width:130,editable:e,headerAlign:"center",align:"center"},{field:"montoTotal",headerName:"Importe",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"link2",headerName:"",width:20,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(R.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"deleteIcon",headerName:"",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:Kr}]};function $r(e){var t=e.idSociety,n=e.OPId,r=e.loggedUser,i=e.selectedFacturaData,a=e.refetch,c=Object(o.useQueryClient)(),l=JSON.parse(localStorage.getItem("tipos")),u=!0,d=null===r||void 0===r?void 0:r["rol.op"];"vista"===d&&(u=!1);var s=!0;"parcial"!==(null===r||void 0===r?void 0:r["rol.op"])&&"vista"!==(null===r||void 0===r?void 0:r["rol.op"])||(s=!1);var b=Object(o.useQuery)(["facturas",t,i],(function(){return we("factura/listar/".concat(null===t||void 0===t?void 0:t.id,"/opid/").concat(n,"/").concat(-1))})),f=b.data,j=b.isLoading,p=b.error,m=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(n){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),{id:n,OPId:null});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.id>0)){e.next=3;break}return e.next=3,c.refetchQueries(["facturas",t,i]);case 3:a();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),h=m.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(Kt.a,{}),Object(R.jsx)(Xe.a,{rows:f.map((function(e){var t;return{id:e.id,empresa:e.empresas[0]?e.empresas[0].razonSocial:"",confirmada:e.OPs[0]?e.OPs[0].confirmada:0,numero:e.numero,tipo:{id:e.tipo,descripcion:null===l||void 0===l||null===(t=l.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion},link:e.link,link2:e.link,montoTotal:e.montoTotal,moneda:e.moneda,detalle:e.detalle,txtOC:e.txtOC,fechaIngreso:e.fechaIngreso,fechaVTO:e.fechaVTO,onDelete:function(){return h(e.id)}}})),columns:Yr(u,s),isCellEditable:function(e){return!e.row.confirmada||"total"===d},disableSelectionOnClick:!0,autoHeight:!0,onCellEditCommit:function(e){var n=Object(w.a)({id:e.id},e.field,e.value);Se("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),n)}})]})}function Kr(e){var t=e.row.onDelete;return Object(R.jsx)(et.a,{onClick:function(){return Object(Kt.b)((function(e){var n=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"No quiero borrar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"S\xed quiero borrar"})]})}))}})}var Xr="http://104.131.28.211:3000/";function ei(e){var t=e.idSociety,n=e.loggedUser,r=u.a.useState(!1),i=Object(c.a)(r,2),a=i[0],s=i[1],b=Object(d.j)(),f=b.idOP,j=b.fecha,p=b.empresaId,m=b.numero,h=b.fideicomiso,v=b.estadoOP,O=b.confirmada,x=b.blue,g=t.id,y=Object(l.useRef)(),w=Object(o.useQuery)(["formOP",t.id],(function(){return we("op/mostrarConFacturas/".concat(t.id,"/").concat(f))})),S=w.data,C=w.isLoading,P=w.error,k=w.refetch,A=function(){var e=Object(je.a)(fe.a.mark((function e(){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.pdf)(N()).toBlob();case 2:n=e.sent,(r=new FormData).append("logo",n),r.append("id",f),r.append("fideicomiso",h),r.append("numero",m),Se("op/modificar/".concat(t.id),r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function F(e){return e?{item:e}:null}function D(e){return e||null}var N=function(){return Object(R.jsx)(tr,{dataOP:D(null===S||void 0===S?void 0:S.op),dataFacturas:F(null===S||void 0===S?void 0:S.item),apiServerUrl:Xr,idSociedad:g})},Q=Object(o.useQueryClient)(),z=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:r,documento:"op",tipoAutorizacion:"obra",creador:n.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.refetchQueries(["formOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),E=z.mutate,V=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(r){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:r,documento:"op",tipoAutorizacion:"adm",creador:n.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(fe.a.mark((function e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.refetchQueries(["formOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),U=V.mutate,M=ti("adm",S,"Autorizar en Obra",null===n||void 0===n?void 0:n["rol.descripcion"]),L=Object(l.useState)(M),_=Object(c.a)(L,2),B=_[0],q=_[1],H=ti("obra",S,"Autorizar en Obra",null===n||void 0===n?void 0:n["rol.descripcion"]),W=Object(l.useState)(H),G=Object(c.a)(W,2),J=G[0],Z=G[1],$="vista"===(null===n||void 0===n?void 0:n["rol.op"]);$||!!S&&1===(null===S||void 0===S?void 0:S.confirmada)&&($="total"!==(null===n||void 0===n?void 0:n["rol.op"]));return Object(R.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(R.jsxs)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:[Object(R.jsx)(T.a,{mt:2,display:J,sx:{pt:1},children:Object(R.jsx)(Y.a,{onClick:function(){Object(Kt.b)((function(e){var t=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){Z("none"),E(f),t()},children:"Autorizar"})]})}))},children:"Autorizar en Obra"})}),Object(R.jsx)(T.a,{mt:2,display:B,sx:{pt:1},children:Object(R.jsx)(Y.a,{ref:y,onClick:function(){Object(Kt.b)((function(e){var t=e.closeToast;return Object(R.jsxs)(T.a,{children:[Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(R.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){q("none"),U(f),t()},children:"Autorizar"})]})}))},children:"Autorizar ADM"})}),Object(R.jsxs)(T.a,{mt:2,sx:{pt:1},children:[Object(R.jsx)(Y.a,{onClick:function(){s(!a)},children:a?"Ocultar PDF":"Ver PDF"}),Object(R.jsx)(Nn.PDFDownloadLink,{document:!1===C?Object(R.jsx)(tr,{dataOP:D(null===S||void 0===S?void 0:S.op),dataFacturas:F(null===S||void 0===S?void 0:S.item),apiServerUrl:Xr,idSociedad:g}):null,fileName:function(e,t,n){var r;return e&&e.empresas[0]?t+" OP-"+n+"-"+(null===e||void 0===e||null===(r=e.empresas[0])||void 0===r?void 0:r.razonSocial)+".pdf":"-"}(null===S||void 0===S?void 0:S.op,m,h),children:Object(R.jsx)(Y.a,{variant:"info",onClick:function(){setTimeout((function(){A()}),300)},children:"Descargar"})})]})]}),Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["op:",m.replace("OP_","")," | ",null===t||void 0===t?void 0:t.nombre]})}),Object(R.jsx)(R.Fragment,{children:a?Object(R.jsx)(Nn.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(R.jsx)(tr,{dataOP:D(null===S||void 0===S?void 0:S.op),dataFacturas:F(null===S||void 0===S?void 0:S.item),apiServerUrl:Xr,idSociedad:g})}):Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{children:[Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsxs)(_r.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(R.jsx)(_r.a,{item:!0,md:2,children:Object(R.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Solicitud de Pago:"})}),Object(R.jsxs)(_r.a,{item:!0,md:5,children:[Object(R.jsx)(Lt.a,{smUp:!(1===parseInt(x)),children:Object(R.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:[m.replace("OP_","")," (Blue) \xa0\xa0 ",h]})}),Object(R.jsx)(Lt.a,{smUp:!(0===parseInt(x)),children:Object(R.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:[m.replace("OP_",""),"\xa0\xa0\xa0\xa0 ",h]})})]}),Object(R.jsx)(_r.a,{item:!0,md:5,children:Object(R.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:Me(j)})})]})}),Object(R.jsx)(Lt.a,{smUp:$,children:Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Br,{OPId:f,fecha:j,empresaId:p,idSociety:t,refetch:k,loggedUser:n})})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)($r,{OPId:f,fecha:j,empresaId:p,idSociety:t,refetch:k,loggedUser:n})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(Hr,{OPId:f,estadoOP:v,confirmada:O,idSociety:t,loggedUser:n,formOP:null===S||void 0===S?void 0:S.op,isLoading:C,error:P,refetch:k})})]})})})]})}function ti(e,t,n,r){var i="";return"manager"===e&&(i=n),e===r&&(i=n),"adm"===e?(null===t||void 0===t?void 0:t.auth_adm)&&t.auth_adm[0]&&void 0!==t.auth_adm[0].usuarios[0].user&&(i=""):(null===t||void 0===t?void 0:t.auth_obra)&&t.auth_obra[0]&&void 0!==t.auth_obra[0].usuarios[0].user&&(i=""),""===i?"none":""}function ni(e){var t=e.idSociety,n=e.loggedUser,r=e.fideicomisos,i=e.proveedores,a=Ze(),u=a.setIsPromptOpen,d=a.Prompt,s=Object(o.useQueryClient)(),b=!1;"total"===(null===n||void 0===n?void 0:n["rol.factura"])&&(b=!0);var f=Object(o.useMutation)((function(e){return Se("factura/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(r){var i,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,s.invalidateQueries(["factura",t]);case 3:return e.next=5,s.getQueryData(["factura",t]);case 5:return i=e.sent,a=[].concat(Object(Re.a)(i),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),s.setQueryData(["factura",t],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return s.setQueryData(["factura",t],r)},onSettled:function(){return s.invalidateQueries(["factura",t])}}),j=f.mutate,p=JSON.parse(localStorage.getItem("tipos")),m=Object(l.useState)(p[0]),h=Object(c.a)(m,2),v=h[0],O=h[1],x=Object(l.useState)(null),g=Object(c.a)(x,2),y=g[0],w=g[1],S=Object(l.useState)(null),C=Object(c.a)(S,2),P=C[0],I=C[1],A=Object(l.useState)(!1),F=Object(c.a)(A,2),D=F[0],N=F[1],Q=Object(l.useState)(!0),z=Object(c.a)(Q,2),E=z[0],V=z[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(Oe.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(r,i){var a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,i.resetForm,e.next=3,_e("factura",t.id,r.empresa.id,r.numero);case 3:e.sent||""===r.numero?u(!0):(j({numero:r.numero,montoTotal:2===r.tipo.id?-1*r.montoTotal:r.montoTotal,fechaIngreso:r.fechaIngreso,tipo:r.tipo.id,empresaId:r.empresa.id,fideicomisoId:r.fideicomiso.id,moneda:"ARS",blue:"on"===r.blue?1:0,creador:n.id}),a(!1));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Tipo",title:"Tipo de comprobante",disablePortal:!0,required:!0,style:{width:"180px",display:"inline-flex"},onChange:function(e,t){O(t),n("tipo",t),ii(3===(null===t||void 0===t?void 0:t.id),n)},value:v,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:p||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Tipo de comprobante"}))}}),Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Fideicomiso",title:"Seleccione un fideicomiso.",disablePortal:!0,required:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){w(t),n("fideicomiso",t)},value:y,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fideicomiso"}))}}),Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Razon Social",title:"Seleccione un proveedor.",disablePortal:!0,required:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){I(t),n("empresa",t)},value:P,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.razonSocial},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===t.id},options:i||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({},e),{},{label:"Razon Social"}))}}),Object(R.jsx)(Oe.a,{as:me.a,title:"Cargar n\xfamero completo de la factura.",label:"Numero",type:"float",required:!0,maxLength:11,size:"small",sx:{width:"20ch"},name:"numero",onChange:function(e){return ri(e,n,"numero")}}),Object(R.jsx)(Oe.a,{as:me.a,label:"Monto",title:"Monto total, solo numeros.",required:!0,maxLength:9,type:"float",size:"small",sx:{width:"20ch"},name:"montoTotal",onChange:function(e){return ri(e,n,"montoTotal")}}),"\xa0\xa0",Object(R.jsx)(Lt.a,{smUp:!b,children:Object(R.jsx)(kn.a,{control:Object(R.jsx)(An.a,{id:"blue",name:"blue",onChange:function(e){return function(e,t,n,r,i,a){e.preventDefault(),i(!r),r?(ii(!0,t),t(n,"on")):(t(n,"off"),ii(!1,t))}(e,n,"blue",E,V)}}),label:"Blue"})}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(R.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"}),Object(R.jsx)(T.a,{sx:{width:"100%"},children:Object(R.jsx)(Fn.a,{in:D,children:Object(R.jsx)(he.a,{action:Object(R.jsx)(k.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){N(!1)},children:Object(R.jsx)(Tn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}}),Object(R.jsx)(d,{message:"Ya existe ese n\xfamero de factura para esa razon social.",ok:!0})]})}function ri(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,11}(\.\d{0,2})?$/.test(r.toString())&&t(n,r.toString())}function ii(e,t){if(e){var n=new Date,r=(void 0===(i=n)||null===i?null:"".concat(i.getFullYear(i)).concat((1+i.getMonth(i)).toString().padStart(2,"0")).concat(i.getDate(i).toString().padStart(2,"0")))+"01";t("numero",parseInt(r))}else t("numero","");var i}function ai(e){var t=e.setFiltComp,n=e.setFiltFide,r=e.setFiltRS,i=(e.idSociety,e.fideicomisos),a=e.proveedores,o=JSON.parse(localStorage.getItem("tipos")),u=Object(l.useState)(null),d=Object(c.a)(u,2),s=d[0],b=d[1],f=Object(l.useState)(null),j=Object(c.a)(f,2),p=j[0],m=j[1],h=Object(l.useState)(null),v=Object(c.a)(h,2),O=v[0],x=v[1];function g(e,i){var a=-1;(null===i||void 0===i?void 0:i.id)&&(a=i.id),"comp"===e&&t(a),"fide"===e&&n(a),"rs"===e&&r(a),console.log(2222,a)}return Object(R.jsx)(Oe.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(je.a)(fe.a.mark((function e(t,n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(R.jsxs)(Oe.b,{children:[Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Filtar por Tipo Comprobante",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){x(t),g("comp",t)},value:O,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({variant:"standard"},e),{},{label:"Filtar por Tipo Comprobante"}))}}),"\xa0",Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Filtar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){b(t),g("fide",t)},value:s,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({variant:"standard"},e),{},{label:"Filtar por Fideicomiso"}))}}),"\xa0",Object(R.jsx)(Oe.a,{as:Rt.a,size:"small",label:"Filtar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){m(t),g("rs",t)},value:p,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(R.jsx)(me.a,Object(G.a)(Object(G.a)({variant:"standard"},e),{},{label:"Filtar por Razon Social"}))}}),"\xa0"]})}})}var oi=function(e,t,n,r){return[{field:"blue",headerName:"Blue",hide:!e,width:70,editable:!1,headerAlign:"center",renderCell:function(e){return 0===e.value?"":Object(R.jsx)(A.a,{sx:{bgcolor:"#3944BC"},children:"B"})}},{field:"tipo",headerName:"Tipo de Comp.",width:170,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"left"},{field:"empresa",headerName:"Razon Social",width:170,editable:!1,headerAlign:"center"},{field:"numero",headerName:"N\xfamero",width:155,editable:!1,headerAlign:"center"},{field:"montoTotal",headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:t,headerAlign:"center"},{field:"link",headerName:"Link",width:110,editable:t,headerAlign:"center"},{field:"link2",headerName:"",width:20,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(R.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"fechaIngreso",headerName:"Fecha",width:155,type:"date",editable:t,headerAlign:"center",align:"center",renderCell:si},{field:"diasVTO",headerName:"D\xedas VTO",width:140,editable:t,type:"singleSelect",valueOptions:[0,1,2,3,4,5,6,7,10,14,15,20,21,28,30,40,50,60,70,80,90,100,120,150]},{field:"id",headerName:"VTO",width:155,type:"date",editable:!1,headerAlign:"center",align:"center",renderCell:di},{field:"OPnumero",headerName:"OP",width:100,editable:!1,headerAlign:"center",renderCell:bi},{field:"estadoOP",headerName:"Estado OP",width:160,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:" ",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,i=t.deleteId;return t.OPnumero>0?"":Object(R.jsx)(et.a,{onClick:function(e){r(i),n(!0)}})}}]},ci=JSON.parse(localStorage.getItem("estados"));function li(e){var t=e.filtComp,n=e.filtFide,r=e.filtRS,i=e.idSociety,a=e.loggedUser,u=Object(d.i)(),s=Ze(),b=s.Prompt,f=s.setIsPromptOpen,j=Object(l.useState)(),p=Object(c.a)(j,2),m=p[0],h=p[1],v=JSON.parse(localStorage.getItem("tipos")),O=0,x=!1;"total"===(null===a||void 0===a?void 0:a["rol.factura"])&&(O=-1,x=!0);var g=!0;"vista"===(null===a||void 0===a?void 0:a["rol.factura"])&&(g=!1);var y=Object(o.useQuery)(["factura",i],(function(){return we("factura/listar/".concat(i.id,"/todas/nada/").concat(O))})),S=y.data,C=y.isLoading,P=y.error,I=Object(o.useQueryClient)(),T=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("factura/eliminar/".concat(i.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.cancelQueries(["factura",i]);case 2:return n=I.getQueryData(["factura",i]),r=n.filter((function(e){return e.id!==t})),I.setQueryData(["factura",i],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return I.setQueryData(["factura",i],n)},onSettled:function(){return I.invalidateQueries(["factura",i])}}),k=T.mutate,A=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r,a;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,a=t.value,e.next=3,Se("factura/modificar/".concat(i.id),Object(w.a)({id:r},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r,a,o,c;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,a=t.value,e.next=3,I.cancelQueries(["factura",i]);case 3:return o=I.getQueryData(["factura",i]),c=[].concat(Object(Re.a)(o.filter((function(e){return e.id!==r}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===r}))),{},Object(w.a)({},n,a))]),I.setQueryData(["factura",i],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return I.setQueryData(["factura",i],n)},onSettled:function(){return I.invalidateQueries(["factura",i])}}),F=A.mutate,D=Object(o.useMutation)(function(){var e=Object(je.a)(fe.a.mark((function e(t){var n,r,i,a,o,c,l;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",u("./".concat(null===t||void 0===t||null===(n=t.OPs[0])||void 0===n?void 0:n.id,"/").concat(null===t||void 0===t||null===(r=t.OPs[0])||void 0===r?void 0:r.createdAt,"/").concat(t.empresaId,"/").concat(null===t||void 0===t||null===(i=t.OPs[0])||void 0===i?void 0:i.numero,"/").concat(null===(a=t.fideicomisos[0])||void 0===a?void 0:a.nombre,"/").concat(null===t||void 0===t||null===(o=t.OPs[0])||void 0===o?void 0:o.estadoOP,"/").concat(null===t||void 0===t||null===(c=t.OPs[0])||void 0===c?void 0:c.confirmada,"/").concat(null===t||void 0===t||null===(l=t.OPs[0])||void 0===l?void 0:l.blue)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=D.mutate;return C?"Cargando...":P?"Hubo un error: ".concat(P.message):Object(R.jsxs)("div",{style:{width:"100%"},children:[Object(R.jsx)(b,{message:"\xbfEliminar fila?",action:function(){return k(m)}}),Object(R.jsx)(Xe.a,{rows:S.filter((function(e){return function(e,t,n,r){return-1===n&&-1===r&&-1===t||(n>-1&&-1===r&&-1===t?e.fideicomisoId===n:-1===n&&r>-1&&-1===t?e.empresaId===r:-1===n&&-1===r&&t>-1?e.tipo===t:n>-1&&r>-1&&-1===t?e.fideicomisoId===n&&e.empresaId===r:n>-1&&-1===r&&t>-1?e.fideicomisoId===n&&e.tipo===t:-1===n&&r>-1&&t>-1?e.empresaId===r&&e.tipo===t:n>-1&&r>-1&&t>-1?e.fideicomisoId===n&&e.empresaId===r&&e.tipo===t:void 0)}(e,t,n,r)})).map((function(e){var t,n,r,i,a,o;return{id:null===e||void 0===e?void 0:e.id,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",empresaId:null===e||void 0===e?void 0:e.empresaId,empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(n=e.empresas[0])||void 0===n?void 0:n.razonSocial:"",blue:null===e||void 0===e?void 0:e.blue,numero:null===e||void 0===e?void 0:e.numero,tipo:{id:e.tipo,descripcion:null===v||void 0===v||null===(r=v.find((function(t){return t.id===e.tipo})))||void 0===r?void 0:r.descripcion},link:null===e||void 0===e?void 0:e.link,link2:null===e||void 0===e?void 0:e.link,montoTotal:2===parseInt(e.tipo)?-1*e.montoTotal:e.montoTotal,moneda:null===e||void 0===e?void 0:e.moneda,fechaIngreso:null===e||void 0===e?void 0:e.fechaIngreso,diasVTO:null===e||void 0===e?void 0:e.diasVTO,fechaVTO:null===e||void 0===e?void 0:e.fechaVTO,OPnumero:(null===e||void 0===e?void 0:e.OPs)?null===e||void 0===e||null===(i=e.OPs[0])||void 0===i?void 0:i.numero:"",estadoOP:(null===e||void 0===e?void 0:e.OPs)?null===(a=ci[null===e||void 0===e||null===(o=e.OPs[0])||void 0===o?void 0:o.estado])||void 0===a?void 0:a.descripcion:"",deleteId:null===e||void 0===e?void 0:e.id,onIrDetalle:function(){return N(e)}}})),OPs:!0,onCellEditCommit:F,columns:oi(x,g,f,h),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:ui}})]})}function ui(){return Object(R.jsx)(Xe.b,{children:Object(R.jsx)(Xe.c,{})})}function di(e){var t=new Date(e.row.fechaIngreso),n=0;return e.row.diasVTO&&e.row.diasVTO>0&&(n=e.row.diasVTO),t.setDate(t.getDate()+n),Ue(t)}function si(e){return e.row.fechaIngreso?Ue(e.row.fechaIngreso):""}function bi(e){var t=e.row.onIrDetalle,n=e.row.OPnumero;return Object(R.jsxs)(Y.a,{onClick:t,children:[n,"  "]})}function fi(e){var t,n=e.idSociety,r=e.loggedUser,i=Object(l.useState)(-1),a=Object(c.a)(i,2),u=a[0],d=a[1],s=Object(l.useState)(-1),b=Object(c.a)(s,2),f=b[0],j=b[1],p=Object(l.useState)(-1),m=Object(c.a)(p,2),h=m[0],v=m[1],O=Object(o.useQuery)(["fideicomisos"],(function(){return we("fideicomiso/listar/".concat(n.id))})).data,x=Object(o.useQuery)(["proveedores"],(function(){return we("proveedor/listar/".concat(n.id))})).data;return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(ve.a,{children:Object(R.jsxs)("title",{children:["Facturas | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(R.jsx)(T.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(R.jsxs)(pe.a,{maxWidth:!1,children:[Object(R.jsx)(Lt.a,{smUp:"vista"===(null===r||void 0===r?void 0:r["rol.factura"]),children:Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(ni,{idSociety:n,loggedUser:r,fideicomisos:O,proveedores:x})})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(ai,{idSociety:n,fideicomisos:O,setFiltComp:d,setFiltFide:j,setFiltRS:v,proveedores:x})}),Object(R.jsx)(T.a,{sx:{pt:3},children:Object(R.jsx)(li,{idSociety:n,loggedUser:r,filtComp:u,filtFide:f,filtRS:h})})]})})]})}function ji(e){var t=e.idSociety.id,n={id:35,numero:56,empresaId:1,monto:"94000",monto_a_pagar:"93445",RET_SUSS:"222",RET_GAN:"333",RET_IVA:"0",estadoRET:2,fideicomisoId:1,certificadoId:null,estado:1,estadoOP:2,fondos:2,archivada:0,descripcion:"wwww",authADM:33,authOBRA:31,createdAt:"01/03/2021",auth_obra:[{id:31,usuarios:[{user:"martin",id:1}]}],auth_adm:[{id:33,usuarios:[{user:"martin",id:1}]}],empresas:[{razonSocial:"Abelson s.a.",CUIT:"30652000076",mail:"test@verelmail.com",CBU:"0070088720000002642004",banco:"Galicia",nroCuenta:"2642-0088-0"}],OPpago:{id:3,OPId:35,banco1:"bna",nro1:"0070088720000002642004",descri1:"123",fecha1:"01/06/2021",monto1:"234.00",banco2:"bna",nro2:"0070088720000002642004",descri2:"asd",fecha2:"01/06/2021",monto2:"444.00",banco3:"",nro3:"",descri3:"",fecha3:"",monto3:"0.00",banco4:null,nro4:null,descri4:null,fecha4:null,monto4:null,usuarioId:1,sociedadId:1,createdAt:"2021-12-05T04:32:09.000Z",updatedAt:"2021-12-18T01:32:01.000Z"},fideicomisos:[{nombre:"Barlovento",logo:"logo_fide_1.png",color:"green",color2:"#D0F0C0"}],items:[{sno:1,desc:"ad sunt culpa occaecat qui",qty:5,rate:405.89},{sno:2,desc:"cillum quis sunt qui aute",qty:5,rate:373.11},{sno:3,desc:"ea commodo labore culpa irure",qty:5,rate:458.61},{sno:4,desc:"nisi consequat et adipisicing dolor",qty:10,rate:725.24},{sno:5,desc:"proident cillum anim elit esse",qty:4,rate:141.02}]},r=u.a.useState(!1),i=Object(c.a)(r,2),a=i[0],o=i[1],l=u.a.useState(!1),d=Object(c.a)(l,2),s=d[0],b=d[1],f=function(){var e=Object(je.a)(fe.a.mark((function e(){var t,r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.pdf)(Object(R.jsx)(tr,{dataOP:n})).toBlob();case 2:t=e.sent,(r=new FormData).append("logo",t),r.append("id",15),Se("op/modificar/1",r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){setTimeout((function(){f()}),300)},p=function(){return Object(R.jsxs)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"space-around"},children:[Object(R.jsx)(Y.a,{variant:"dark",onClick:function(){o(!a),b(!1)},children:a?"Ocultar Web":"Ver Web"}),Object(R.jsx)(Y.a,{variant:"dark",onClick:function(){b(!s),o(!1)},children:s?"Ocultar PDF":"Ver PDF"}),Object(R.jsx)(Nn.PDFDownloadLink,{document:Object(R.jsx)(tr,{dataOP:n}),fileName:"miReporte.pdf",children:Object(R.jsx)(Y.a,{variant:"info",onClick:j,children:"Crear y Descargar"})})]})};return Object(R.jsxs)("div",{style:{minHeight:"100vh"},children:[Object(R.jsx)(p,{}),Object(R.jsx)(R.Fragment,{children:s?Object(R.jsx)(Nn.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(R.jsx)(tr,{dataOP:n,dataFacturas:{item:[{id:31,OPId:35,numero:"333",fechaIngreso:"2021-12-17T00:00:00.000Z",fechaVTO:null,path:null,link:null,empresaId:1,montoTotal:"47000",moneda:"ARS",detalle:null,txtOC:null,estadoFactura:null,fideicomisoId:null,rubroId:null,subRubroId:null,usuarioId:1,empresas:[{razonSocial:"Abelson s.a."}]},{id:19,OPId:35,numero:"1919",fechaIngreso:"2021-11-04T00:00:00.000Z",fechaVTO:null,path:null,link:"aaaa",empresaId:1,montoTotal:"47000",moneda:"ARS",detalle:null,txtOC:null,estadoFactura:null,fideicomisoId:1,rubroId:null,subRubroId:null,usuarioId:1,empresas:[{razonSocial:"Abelson s.a."}]}]},apiServerUrl:"http://104.131.28.211:3000/",idSociedad:t})}):null})]})}var pi=Object(l.createContext)({});function mi(){var e=function(){var e=Object(l.useState)((function(){var e=localStorage.getItem("loggedUserInfo");return e?JSON.parse(e):null})),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(l.useEffect)((function(){localStorage.setItem("loggedUserInfo",JSON.stringify(n))}),[n]),{loggedUser:n,setLoggedUser:r}}(),t=e.loggedUser,n=e.setLoggedUser,r=Object(l.useState)((function(){var e=localStorage.getItem("idSociety");return e?JSON.parse(e):null})),i=Object(c.a)(r,2),a=i[0],o=i[1];return Object(R.jsx)(pi.Provider,{value:a,children:Object(R.jsxs)(f.a,{theme:y,children:[Object(R.jsx)(h,{}),Object(R.jsx)(d.e,{children:t?Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(d.c,{path:"/",element:Object(R.jsx)(d.a,{to:"".concat(null===a||void 0===a?void 0:a.nombre)})}),Object(R.jsxs)(d.c,{path:":societyName",element:Object(R.jsx)(ae,{setLoggedUser:n,idSociety:a,loggedUser:t}),children:[Object(R.jsx)(d.c,{path:"dolar",element:Object(R.jsx)(at,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:"cac",element:Object(R.jsx)(dt,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:"OT",element:Object(R.jsx)(ji,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:"empresa",element:Object(R.jsx)(dn,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:"persona",element:Object(R.jsx)(nn,{idSociety:a,loggedUser:t})}),Object(R.jsxs)(d.c,{path:"factura",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(fi,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:confirmada/:blue",element:Object(R.jsx)(ei,{idSociety:a,loggedUser:t})})]}),Object(R.jsxs)(d.c,{path:"OP",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(Fr,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:confirmada/:blue",element:Object(R.jsx)(ei,{idSociety:a,loggedUser:t})})]}),Object(R.jsxs)(d.c,{path:"AuthAdmOP",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(Mr,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:confirmada/:blue",element:Object(R.jsx)(ei,{idSociety:a,loggedUser:t})})]}),Object(R.jsxs)(d.c,{path:"AuthObraOP",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(Lr,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:confirmada/:blue",element:Object(R.jsx)(ei,{idSociety:a,loggedUser:t})})]}),Object(R.jsx)(d.c,{path:"proveedores",element:Object(R.jsx)(Jt,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:"usuarios",element:Object(R.jsx)(Mt,{idSociety:a,loggedUser:t})}),Object(R.jsxs)(d.c,{path:"rubro",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(pt,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":idRubro/:rubro",element:Object(R.jsx)(xt,{idSociety:a,loggedUser:t})})]}),Object(R.jsxs)(d.c,{path:"banco",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(Pt,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":idBanco/:banco",element:Object(R.jsx)(Ft,{idSociety:a,loggedUser:t})})]}),Object(R.jsxs)(d.c,{path:"fideicomiso",children:[Object(R.jsx)(d.c,{path:"",element:Object(R.jsx)(hn,{idSociety:a,loggedUser:t})}),Object(R.jsx)(d.c,{path:":nombreFideicomiso",element:Object(R.jsx)(Pn,{idSociety:a,loggedUser:t})})]}),Object(R.jsx)(d.c,{path:"*",element:Object(R.jsx)(De,{})})]})]}):Object(R.jsxs)(se,{children:[Object(R.jsx)(d.c,{path:":societyName/login",element:Object(R.jsx)(Pe,{setLoggedUser:n,setIdSociety:o})}),Object(R.jsx)(d.c,{path:":societyName",element:Object(R.jsx)(d.a,{to:"login"})}),Object(R.jsx)(d.c,{path:"*",element:Object(R.jsx)(d.a,{to:"/"})})]})})]})})}b.a.config();var hi=new o.QueryClient;i.a.render(Object(R.jsx)(a.a,{children:Object(R.jsx)(o.QueryClientProvider,{client:hi,children:Object(R.jsx)(mi,{})})}),document.getElementById("root"))}},[[988,1,2]]]);
//# sourceMappingURL=main.4687b08c.chunk.js.map