(this.webpackJsonptsf=this.webpackJsonptsf||[]).push([[0],{673:function(e,t){},675:function(e,t){},705:function(e,t){},706:function(e,t){},817:function(e,t){},986:function(e,t,r){"use strict";r.r(t);var n=r(36),i=r.n(n),a=r(48),o=r(13),c=r(7),l=r(0),u=r.n(l),d=r(35),s=r(580),f=r.n(s),b=r(1130),j=r(1096),p=r(1060),h=Object(j.a)((function(){return Object(p.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),m=function(){return h(),null},O=r(600),v=r(30),x=["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],g={h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}},y=Object(O.a)({palette:{background:{default:"#F4F6F8",paper:v.a.common.white},primary:{contrastText:"#ffffff",main:"#5664d2"},text:{primary:"#172b4d",secondary:"#6b778c"}},shadows:x,typography:g}),w=r(4),C=r(1080),S=r(1106),T=r(1108),k=r(1007),A=r(1109),I=r(1110),P=r(1101),D=r(1072),R=r(1073),F=r(2),Q=function(e){var t=e.idSociety;return Object(F.jsx)("img",{alt:"Logo",height:"60px",src:"".concat("http://104.131.28.211:3000/","public/").concat(null===t||void 0===t?void 0:t.logo)})},N=r(1062),z=r(1064),V=r(1065),E=r(1066),U=r(1067),M=r(1068),L=r(1069),_=r(1070),B=[{path:"op",icon:N.a,title:"OPs",acceso:"oppago"},{path:"AuthAdmOP",icon:N.a,title:"OPs Auth ADM",acceso:"AuthAdmOP"},{path:"AuthObraOP",icon:N.a,title:"OPs Auth Obra",acceso:"AuthObraOP"},{path:"factura",icon:z.a,title:"Facturas",acceso:"factura"},{path:"proveedores",icon:V.a,title:"Proveedores",acceso:"proveedores"},{path:"fideicomiso",icon:E.a,title:"Fideicomisos",acceso:"fideicomiso"},{path:"rubro",icon:U.a,title:"Rubros",acceso:"rubro"},{path:"cac",icon:M.a,title:"CAC",acceso:"cac"},{path:"dolar",icon:L.a,title:"D\xf3lar",acceso:"dolar"},{path:"usuarios",icon:_.a,title:"Usuarios",acceso:"usuarios"}];function q(e){var t,r=e.setisMobileNavOpen,n=e.setLoggedUser,i=e.idSociety,o=e.loggedUser,c={avatar:"/static/images/avatars/"+o.avatar},l=Object(d.i)(),u=Object(d.h)().pathname,s=u.split("/")[u.split("/").length-1],f=(null===(t=B.find((function(e){return e.path===s})))||void 0===t?void 0:t.title)||s;return Object(F.jsx)(S.a,{elevation:0,children:Object(F.jsxs)(T.a,{children:[Object(F.jsx)(a.b,{to:"/",children:Object(F.jsx)(Q,{idSociety:i})}),Object(F.jsx)("div",{style:{marginLeft:50,fontSize:24},children:Object(F.jsx)(k.a,{align:"left",color:"white",variant:"h4",children:f.replace("-"," de ").replace("%20"," ").replace("%20"," ").replace("%20"," ").replace("_",": ")})}),Object(F.jsx)(A.a,{sx:{flexGrow:1}}),Object(F.jsx)("div",{children:Object(F.jsx)(k.a,{align:"left",color:"white",variant:"h4",children:null===o||void 0===o?void 0:o.user})}),Object(F.jsx)(I.a,{color:"inherit",children:Object(F.jsx)(P.a,{component:a.b,to:"/",src:c.avatar,sx:{cursor:"pointer",width:30,height:30}})}),Object(F.jsx)(I.a,{color:"inherit",sx:{display:{md:"block",lg:"none"}},onClick:r,children:Object(F.jsx)(D.a,{})}),Object(F.jsx)(I.a,{color:"inherit",onClick:function(){n(null),l("../".concat(null===i||void 0===i?void 0:i.nombre))},children:Object(F.jsx)(R.a,{})})]})})}var W=r(1113),H=r(1114),G=r(18),Z=r(601),$=r(1102),Y=r(1112),J=["href","icon","title"];function K(e){var t=e.href,r=e.icon,n=e.title,i=Object(Z.a)(e,J),o=Object(d.h)(),c=!!t&&!!Object(d.f)({path:t,end:!1},o.pathname);return Object(F.jsx)($.a,Object(G.a)(Object(G.a)({disableGutters:!0,sx:{display:"flex",py:0}},i),{},{children:Object(F.jsxs)(Y.a,{component:a.c,sx:Object(G.a)(Object(G.a)({color:"text.secondary",fontWeight:"medium",justifyContent:"flex-start",letterSpacing:0,py:1.25,textTransform:"none",width:"100%"},c&&{color:"primary.main"}),{},{"& svg":{mr:1}}),to:t,children:[r&&Object(F.jsx)(r,{size:"20"}),Object(F.jsx)("span",{children:n})]})}))}function X(e){var t=e.setisMobileNavOpen,r=e.isMobileNavOpen,n=e.idSociety,i=e.loggedUser,a=Object(F.jsx)(A.a,{sx:{display:"flex",flexDirection:"column",height:"100%",p:2},children:Object(F.jsx)(W.a,{children:ee(B,null===i||void 0===i?void 0:i["rol.accesoTXT"]).map((function(e){return Object(F.jsx)(K,{href:"/".concat(null===n||void 0===n?void 0:n.nombre,"/").concat(e.path),title:e.title,icon:e.icon},e.title)}))})});return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(H.a,{variant:"temporary",sx:{display:{xs:"block",lg:"none"}},anchor:"left",onClose:t,open:r,PaperProps:{sx:{width:256}},children:a}),Object(F.jsx)(H.a,{variant:"persistent",open:!0,sx:{display:{xs:"none",lg:"block"}},anchor:"left",PaperProps:{sx:{width:256,top:64,height:"calc(100% - 64px)"}},children:a})]})}function ee(e,t){var r=[{}];return e.forEach((function(e){-1!==t.indexOf(e.acceso)&&""!==e.acceso.trim()&&null!==e.acceso&&void 0!==e.acceso&&r.push(e)})),r.splice(0,1),r}var te=Object(C.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),re=Object(C.a)("div")((function(e){var t=e.theme;return Object(w.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},t.breakpoints.up("lg"),{paddingLeft:256})})),ne=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),ie=Object(C.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"});function ae(e){var t=e.setLoggedUser,r=e.idSociety,n=e.loggedUser,i=Object(l.useState)(!1),a=Object(c.a)(i,2),o=a[0],u=a[1];return Object(F.jsxs)(te,{children:[Object(F.jsx)(q,{setisMobileNavOpen:function(){return u(!o)},setLoggedUser:t,idSociety:r,loggedUser:n}),Object(F.jsx)(X,{idSociety:r,loggedUser:n,setisMobileNavOpen:function(){return u(!o)},isMobileNavOpen:o}),Object(F.jsx)(re,{children:Object(F.jsx)(ne,{children:Object(F.jsx)(ie,{children:Object(F.jsx)(d.b,{})})})})]})}var oe=function(e){return Object(F.jsx)(S.a,Object(G.a)(Object(G.a)({elevation:0},e),{},{children:Object(F.jsx)(T.a,{sx:{height:64},children:Object(F.jsx)(a.b,{to:"/",children:Object(F.jsx)(Q,{})})})}))},ce=Object(C.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),le=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64}),ue=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),de=Object(C.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),se=function(){return Object(F.jsxs)(ce,{children:[Object(F.jsx)(oe,{}),Object(F.jsx)(le,{children:Object(F.jsx)(ue,{children:Object(F.jsx)(de,{children:Object(F.jsx)(d.b,{})})})})]})},fe=r(6),be=r.n(fe),je=r(14),pe=r(1115),he=r(1116),me=r(1098),Oe=r(38),ve=r(24),xe=r(268),ge=r.n(xe),ye="http://104.131.28.211:3000/",we=function(){var e=Object(je.a)(be.a.mark((function e(t){var r,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.get("".concat(ye).concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.post("".concat(ye).concat(t),r);case 2:return n=e.sent,i=n.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Se=function(){var e=Object(je.a)(be.a.mark((function e(t,r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ge.a.delete("".concat(ye).concat(t),{data:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();function Te(e){var t,r,n=e.setLoggedUser,i=e.idSociety,a=e.setIdSociety,o=Object(d.j)().societyName,u=Object(d.i)(),s=Object(l.useState)("none"),f=Object(c.a)(s,2),b=f[0],j=f[1];return Object(l.useEffect)((function(){!function(e,t){ke.apply(this,arguments)}(o,a)}),[a,o]),Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{onChangeClientState:function(){},children:Object(F.jsxs)("title",{children:["Login | ",null!==(t=null===i||void 0===i?void 0:i.nombreComercial)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(F.jsxs)(pe.a,{maxWidth:"sm",children:[Object(F.jsx)("div",{style:{width:"100%"},children:Object(F.jsx)("img",{style:{display:"block",margin:"auto",width:"30%"},src:"".concat("http://104.131.28.211:3000/","public/").concat(null===i||void 0===i?void 0:i.logo),alt:"logo"})}),Object(F.jsx)(ve.c,{enableReinitialize:"true",initialValues:{email:"".concat(null!==(r=null===i||void 0===i?void 0:i.dominio)&&void 0!==r?r:""),password:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe(i.id,t.email,t.password,n);case 2:if(!e.sent){e.next=6;break}u("/".concat(o),{replace:!0}),e.next=8;break;case 6:j("flex"),r.resetForm();case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){return Object(F.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(F.jsx)(he.a,{fullWidth:!0,label:"Correo",margin:"normal",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.email,variant:"outlined"}),Object(F.jsx)(he.a,{fullWidth:!0,label:"Contrase\xf1a",margin:"normal",name:"password",autoComplete:"on",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password,variant:"outlined"}),Object(F.jsxs)(A.a,{sx:{py:2},children:[Object(F.jsx)(me.a,{style:{display:b},severity:"error",onClose:function(){j("none")},children:"Correo y/o contrase\xf1a inv\xe1lidos"}),Object(F.jsx)(Y.a,{color:"primary",disabled:e.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Ingresar"})]})]})}})]})})]})}function ke(){return(ke=Object(je.a)(be.a.mark((function e(t,r){var n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ae(t);case 2:n=e.sent,r(Object(G.a)({},n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(je.a)(be.a.mark((function e(t){var r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("sociedad/mostrar/".concat(t));case 2:return r=e.sent,localStorage.removeItem("idSociety"),r&&localStorage.setItem("idSociety",JSON.stringify(Object(G.a)({},r))),e.next=7,r;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t,r,n){return De.apply(this,arguments)}function De(){return(De=Object(je.a)(be.a.mark((function e(t,r,n,i){var a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ce,e.t1="usuario/login/",e.next=4,t;case 4:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),e.t4={mail:r,pass:n},e.next=9,(0,e.t0)(e.t3,e.t4);case 9:return a=e.sent,i(a),e.abrupt("return",null!==a);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Re=function(){return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsx)("title",{children:"404"})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(k.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: La p\xe1gina no existe"}),Object(F.jsx)(A.a,{sx:{textAlign:"center"},children:Object(F.jsx)("img",{alt:"Under development",src:"/static/images/undraw_page_not_found_su7k.svg",style:{marginTop:50,display:"inline-block",width:560}})})]})})]})};var Fe=r(21),Qe=r(1086),Ne=r(1094),ze=r(1093);function Ve(e){return new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC"})}function Ee(e){return new Date(e).getDate()+" "+new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC",month:"short"})+" "+new Date(e).getFullYear()}function Ue(e,t,r){return Me.apply(this,arguments)}function Me(){return(Me=Object(je.a)(be.a.mark((function e(t,r,n){var i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/mostrar/").concat(r,"/").concat(n),e.next=3,we(i);case 3:return a=e.sent,e.abrupt("return",!!a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Le=r(1123),_e=r(1085),Be=r(1124);function qe(){var e=Object(l.useState)(!1),t=Object(c.a)(e,2),r=t[0],n=t[1];return{Prompt:function(e){var t=e.ok,n=void 0!==t&&t,a=e.action,o=void 0===a?function(){}:a,c=e.message,l=void 0===c?"\xbfEst\xe1s seguro de eliminar este registro?":c;return Object(F.jsx)("div",{children:Object(F.jsxs)(Le.a,{open:r,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(F.jsx)(_e.a,{id:"alert-dialog-title",children:l}),Object(F.jsx)(Be.a,{children:n?Object(F.jsx)(Y.a,{onClick:i,children:"Ok"}):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Y.a,{onClick:i,children:"No"}),Object(F.jsx)(Y.a,{onClick:function(){return function(e){e(),i()}(o)},autoFocus:!0,children:"S\xed"})]})})]})})},setIsPromptOpen:n};function i(){n(!1)}}function We(e){var t=e.idSociety,r=e.loggedUser,n=qe(),i=n.setIsPromptOpen,a=n.Prompt,c=Object(o.useQueryClient)(),l=Object(o.useMutation)((function(e){return Ce("dolar/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(n){var i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,c.invalidateQueries(["dolar",t]);case 3:return e.next=5,c.getQueryData(["dolar",t]);case 5:return i=e.sent,a=[].concat(Object(Fe.a)(i),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),c.setQueryData(["dolar",t],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return c.setQueryData(["dolar",t],n)},onSettled:function(){return c.invalidateQueries(["dolar",t])}}),u=l.mutate;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{fecha:new Date,mep:"",BCRA:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(r,n){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setSubmitting,o=n.resetForm,r.fecha=(c=r.fecha,"".concat(c.getFullYear(c),"-").concat((1+c.getMonth(c)).toString().padStart(2,"0"),"-").concat(c.getDate(c).toString().padStart(2,"0"))),e.next=4,Ue("dolar",t.id,r.fecha);case 4:if(!e.sent){e.next=8;break}i(!0),e.next=9;break;case 8:u(r);case 9:o(),a(!1);case 11:case"end":return e.stop()}var c}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{component:Ge,label:"Fecha",type:"date",name:"fecha"}),Object(F.jsx)(ve.a,{as:he.a,label:"BCRA",size:"small",type:"float",maxLength:4,name:"BCRA",onChange:function(e){return He(e,r,"BCRA")}}),Object(F.jsx)(ve.a,{as:he.a,label:"MEP",size:"small",type:"float",name:"mep",onChange:function(e){return He(e,r,"mep")}}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(F.jsx)(a,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function He(e,t,r){e.preventDefault();var n=e.target.value;/^\d{0,3}(\.\d{0,2})?$/.test(n.toString())&&t(r,n.toString())}function Ge(e){var t=e.field,r=e.form,n=t.name,i=t.value,a=r.setFieldValue;return Object(F.jsx)(Qe.b,{dateAdapter:ze.a,children:Object(F.jsx)(Ne.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:i,onChange:function(e){return a(n,e)},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)({required:!0,size:"small"},e))}})})}var Ze=r(28),$e=r(1087),Ye=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return Ve(e.value)}},{field:"BCRA",preProcessEditCellProps:Xe,headerName:"BCRA",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mep",preProcessEditCellProps:Xe,headerName:"MEP",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(r){t(n),e(!0)}})}}]};function Je(e){var t=e.idSociety,r=qe(),n=r.Prompt,i=r.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],f=Object(o.useQuery)(["dolar",t],(function(){return we("dolar/listar/".concat(t.id))})),b=f.data,j=f.isLoading,p=f.error,h=Object(o.useQueryClient)(),m=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("dolar/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["dolar",t]);case 2:return n=h.getQueryData(["dolar",t]),i=n.filter((function(e){return e.id!==r})),h.setQueryData(["dolar",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["dolar",t],n)},onSettled:function(){return h.invalidateQueries(["dolar",t])}}),O=m.mutate,v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("dolar/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,h.cancelQueries(["dolar",t]);case 3:return o=h.getQueryData(["dolar",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),h.setQueryData(["dolar",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["dolar",t],n)},onSettled:function(){return h.invalidateQueries(["dolar",t])}}),x=v.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(d)}}),Object(F.jsx)(Ze.a,{rows:b.map((function(e){return{id:e.id,fecha:e.fecha,BCRA:e.BCRA,blue:e.blue,descripcion:e.descripcion,mep:e.mep,deleteId:e.id}})),onCellEditCommit:x,columns:Ye(i,s),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Ke}})]})}function Ke(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function Xe(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(G.a)(Object(G.a)({},e.props),{},{error:t})}function et(e){var t,r=e.idSociety,n=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["D\xf3lar | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(We,{idSociety:r,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Je,{idSociety:r,loggedUser:n})})]})})]})}function tt(e){var t=e.idSociety,r=e.loggedUser,n=qe(),i=n.Prompt,a=n.setIsPromptOpen,c=Object(o.useQueryClient)(),l=Object(o.useMutation)((function(e){return Ce("cac/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(n){var i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,c.cancelQueries(["cac",t]);case 3:return e.next=5,c.getQueryData(["cac",t]);case 5:return i=e.sent,a=[].concat(Object(Fe.a)(i),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),c.setQueryData(["cac",t],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return c.setQueryData(["cac",t],n)},onSettled:function(){return c.invalidateQueries(["cac",t])}}),u=l.mutate;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{fecha:new Date,estimado:"",definitivo:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(r,n){var i,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.setSubmitting,o=n.resetForm,r.fecha=(c=r.fecha,"".concat(c.getFullYear(c),"-").concat((1+c.getMonth(c)).toString().padStart(2,"0"),"-01")),e.next=4,Ue("cac",t.id,r.fecha);case 4:if(!e.sent){e.next=8;break}a(!0),e.next=9;break;case 8:u(r);case 9:o(),i(!1);case 11:case"end":return e.stop()}var c}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{component:s,label:"Fecha",type:"date",name:"fecha"}),Object(F.jsx)(ve.a,{as:he.a,label:"Estimado",required:!0,type:"float",size:"small",maxLength:4,name:"estimado",onChange:function(e){return d(e,r,"estimado")}}),Object(F.jsx)(ve.a,{as:he.a,label:"Definitivo",required:!0,type:"float",size:"small",name:"definitivo",onChange:function(e){return d(e,r,"definitivo")}}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(F.jsx)(i,{message:"Ya hay un mes con informaci\xf3n, por favor editar el mes desde la grilla.",ok:!0})]});function d(e,t,r){e.preventDefault();var n=e.target.value;/^\d{0,4}(\.\d{0,2})?$/.test(n.toString())&&t(r,n.toString())}function s(e){var t=e.field,r=e.form,n=t.name,i=t.value,a=r.setFieldValue;return Object(F.jsx)(Qe.b,{dateAdapter:ze.a,children:Object(F.jsx)(Ne.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:i,onChange:function(e){return a(n,e)},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)({required:!0,size:"small"},e))}})})}}var rt=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"estimado",headerName:"Estimado",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:it,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"definitivo",headerName:"Definitivo",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:it,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(r){t(n),e(!0)}})}}]};function nt(e){var t=e.idSociety,r=qe(),n=r.Prompt,i=r.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],f=Object(o.useQuery)(["cac",t],(function(){return we("CAC/listar/".concat(t.id))})),b=f.data,j=f.isLoading,p=f.error,h=Object(o.useQueryClient)(),m=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("cac/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["cac",t]);case 2:return n=h.getQueryData(["cac",t]),i=n.filter((function(e){return e.id!==r})),h.setQueryData(["cac",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["cac",t],n)},onSettled:function(){return h.invalidateQueries(["cac",t])}}),O=m.mutate,v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("cac/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,h.cancelQueries(["cac",t]);case 3:return o=h.getQueryData(["cac",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),h.setQueryData(["cac",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["cac",t],n)},onSettled:function(){return h.invalidateQueries(["cac",t])}}),x=v.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(d)}}),Object(F.jsx)(Ze.a,{rows:b.map((function(e){return{id:e.id,fecha:e.fecha,estimado:e.estimado,definitivo:e.definitivo,deleteId:e.id}})),onCellEditCommit:x,columns:rt(i,s),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:function(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}}})]})}function it(e){var t=!/^\d{0,4}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(G.a)(Object(G.a)({},e.props),{},{error:t})}function at(e){var t,r=e.idSociety,n=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["CAC | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(tt,{idSociety:r,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(nt,{idSociety:r,loggedUser:n})})]})})]})}function ot(e){var t=e.idSociety,r=e.loggedUser,n=qe().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Ce("rubro/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(n){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,i.invalidateQueries(["rubro",t]);case 3:return e.next=5,i.getQueryData(["rubro",t]);case 5:return a=e.sent,o=[].concat(Object(Fe.a)(a),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),i.setQueryData(["rubro",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return i.setQueryData(["rubro",t],n)},onSettled:function(){return i.invalidateQueries(["rubro",t])}}),c=a.mutate;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{rubro:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.setSubmitting,i=r.resetForm,c(t),i(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,label:"Rubro",required:!0,size:"small",type:"float",name:"rubro"}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(F.jsx)(n,{message:"El rubro no puede estar en blanco",ok:!0})]})}var ct=function(e,t){return[{field:"rubro",headerName:"Rubro",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(r){t(n),e(!0)}})}}]};function lt(e){var t=e.idSociety,r=qe(),n=r.Prompt,i=r.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),s=u[0],f=u[1],b=Object(d.i)(),j=Object(o.useQuery)(["rubro",t],(function(){return we("rubro/listar/".concat(t.id))})),p=j.data,h=j.isLoading,m=j.error,O=Object(o.useQueryClient)(),v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("rubro/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.cancelQueries(["rubro",t]);case 2:return n=O.getQueryData(["rubro",t]),i=n.filter((function(e){return e.id!==r})),O.setQueryData(["rubro",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return O.setQueryData(["rubro",t],n)},onSettled:function(){return O.invalidateQueries(["rubro",t])}}),x=v.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("rubro/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,O.cancelQueries(["rubro",t]);case 3:return o=O.getQueryData(["rubro",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),O.setQueryData(["rubro",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return O.setQueryData(["rubro",t],n)},onSettled:function(){return O.invalidateQueries(["rubro",t])}}),y=g.mutate;return h?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return x(s)}}),Object(F.jsx)(Ze.a,{rows:p.map((function(e){return{id:e.id,rubro:e.rubro,deleteId:e.id}})),onCellEditCommit:y,onRowDoubleClick:function(e){var t;b("./".concat((t=e).row.id,"/Subrubros-").concat(t.row.rubro))},compone:!0,columns:ct(i,f),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:ut}})]})}function ut(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function dt(e){var t,r=e.idSociety,n=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Rubro | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(ot,{idSociety:r,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(lt,{idSociety:r,loggedUser:n})})]})})]})}function st(e){var t=e.idSociety,r=e.idRubro,n=e.loggedUser,i=qe().Prompt,a=Object(o.useQueryClient)(),c=Object(o.useMutation)((function(e){return Ce("subrubro/agregar/".concat(t.id,"/").concat(r),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var i,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,a.invalidateQueries(["subrubro",t]);case 3:return e.next=5,a.getQueryData(["subrubro",t]);case 5:return i=e.sent,o=[].concat(Object(Fe.a)(i),[Object(G.a)(Object(G.a)({},r),{},{id:(new Date).getTime()})]),a.setQueryData(["subrubro",t],o),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return a.setQueryData(["subrubro",t],n)},onSettled:function(){return a.invalidateQueries(["subrubro",t])}}),l=c.mutate;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{subRubro:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.setSubmitting,i=r.resetForm,l(t),i(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,label:"SubRubro",required:!0,size:"small",type:"float",name:"subRubro"}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(F.jsx)(i,{message:"El subrubro no puede estar en blanco",ok:!0})]})}var ft=function(e,t){return[{field:"subRubro",headerName:"SubRubro",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(r){t(n),e(!0)}})}}]};function bt(e){var t=e.idSociety,r=e.idRubro,n=qe(),i=n.Prompt,a=n.setIsPromptOpen,u=Object(l.useState)(),d=Object(c.a)(u,2),s=d[0],f=d[1],b=Object(o.useQuery)(["subrubro",t],(function(){return we("subrubro/listar/".concat(t.id,"/").concat(r))})),j=b.data,p=b.isLoading,h=b.error,m=Object(o.useQueryClient)(),O=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("subrubro/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.cancelQueries(["subrubro",t]);case 2:return n=m.getQueryData(["subrubro",t]),i=n.filter((function(e){return e.id!==r})),m.setQueryData(["subrubro",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return m.setQueryData(["subrubro",t],n)},onSettled:function(){return m.invalidateQueries(["subrubro",t])}}),v=O.mutate,x=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("subrubro/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,m.cancelQueries(["subrubro",t]);case 3:return o=m.getQueryData(["subrubro",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),m.setQueryData(["subrubro",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return m.setQueryData(["subrubro",t],n)},onSettled:function(){return m.invalidateQueries(["subrubro",t])}}),g=x.mutate;return p?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(i,{message:"\xbfEliminar fila?",action:function(){return v(s)}}),Object(F.jsx)(Ze.a,{rows:j.map((function(e){return{id:e.id,subRubro:e.subRubro,deleteId:e.id}})),onCellEditCommit:g,compone:!0,columns:ft(a,f),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:jt}})]})}function jt(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function pt(e){var t,r=e.idSociety,n=e.loggedUser,i=Object(d.j)().idRubro,a=parseInt(i);return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["SubRubro | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(st,{idSociety:r,idRubro:a,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(bt,{idSociety:r,idRubro:a,loggedUser:n})})]})})]})}function ht(e){var t=e.idSociety,r=e.loggedUser,n=qe().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Ce("usuario/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(n){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,i.invalidateQueries(["usuario",t]);case 3:return e.next=5,i.getQueryData(["usuario",t]);case 5:return a=e.sent,o=[].concat(Object(Fe.a)(a),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),i.setQueryData(["usuario",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return i.setQueryData(["usuario",t],n)},onSettled:function(){return i.invalidateQueries(["usuario",t])}}),c=a.mutate;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{user:"",mail:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.setSubmitting,i=r.resetForm,c(t),i(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,required:!0,size:"small",label:"Usuario",type:"string",maxLength:30,name:"user"}),Object(F.jsx)(ve.a,{as:he.a,required:!0,size:"small",label:"Mail",type:"mail",name:"mail"}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(F.jsx)(n,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}var mt=r(1126),Ot=function(e,t){return[{field:"user",headerName:"Usuario",width:170,editable:!0,headerAlign:"center"},{field:"mail",headerName:"Mail",width:220,headerAlign:"center"},{field:"pass",headerName:"Clave",width:150,editable:!0,headerAlign:"center",renderCell:wt},{field:"rolId",headerName:"Rol",width:150,editable:!0,renderCell:function(e){return e.value.rol_descripcion},renderEditCell:function(e){return Object(F.jsx)(gt,{roles:vt,props:e})},headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(r){t(n),e(!0)}})}}]},vt=[{id:1,rol_descripcion:"administrativo"},{id:2,rol_descripcion:"obra"},{id:3,rol_descripcion:"manager"}];function xt(e){var t=e.idSociety,r=qe(),n=r.Prompt,i=r.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],f=Object(o.useQuery)(["usuario",t],(function(){return we("usuario/listar/".concat(t.id))})),b=f.data,j=f.isLoading,p=f.error,h=Object(o.useQueryClient)(),m=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("usuario/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["usuario",t]);case 2:return n=h.getQueryData(["usuario",t]),i=n.filter((function(e){return e.id!==r})),h.setQueryData(["usuario",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["usuario",t],n)},onSettled:function(){return h.invalidateQueries(["usuario",t])}}),O=m.mutate,v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("usuario/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,h.cancelQueries(["usuario",t]);case 3:return o=h.getQueryData(["usuario",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),h.setQueryData(["usuario",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["usuario",t],n)},onSettled:function(){return h.invalidateQueries(["usuario",t])}}),x=v.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(F.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(F.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(d)}}),Object(F.jsx)(Ze.a,{rows:b.map((function(e){var t;return{id:e.id,user:e.user,mail:e.mail,pass:e.pass,rolId:{id:e["rol.id"],rol_descripcion:null===vt||void 0===vt||null===(t=vt.find((function(t){return t.id===e["rol.id"]})))||void 0===t?void 0:t.rol_descripcion},deleteId:e.id}})),onCellEditCommit:x,columns:Ot(i,s),pageSize:25,autoHeight:!0,disableSelectionOnClick:!0,density:"comfortable",scrollbarSize:!0,components:{Toolbar:yt}})]})}function gt(e){var t=e.roles,r=e.props,n=r.id,i=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{rol_descripcion:""}]);var o=Object(l.useState)({rol_descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(F.jsx)(mt.a,{value:d,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,o){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:n,field:a,value:o.id},t),e.next=5,r.api.commitCellChange({id:n,field:a});case 5:i.setCellMode(n,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rol_descripcion===t.rol_descripcion},getOptionLabel:function(e){return e.rol_descripcion},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Rol"}))}})}function yt(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function wt(e){return"***********"}function Ct(e){var t,r=e.idSociety,n=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Usuarios | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(ht,{idSociety:r,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(xt,{idSociety:r,loggedUser:n})})]})})]})}function St(e){var t=e.idSociety,r=e.loggedUser,n=qe().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Ce("proveedor/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(n){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,i.invalidateQueries(["proveedor",t]);case 3:return e.next=5,i.getQueryData(["proveedor",t]);case 5:return a=e.sent,o=[].concat(Object(Fe.a)(a),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),i.setQueryData(["proveedor",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return i.setQueryData(["proveedor",t],n)},onSettled:function(){return i.invalidateQueries(["proveedor",t])}}),c=a.mutate;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{razonSocial:"",CUIT:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.setSubmitting,i=r.resetForm,c(t),i(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,label:"CUIT",type:"string",required:!0,size:"small",maxLength:11,name:"CUIT",onChange:function(e){return function(e,t,r){e.preventDefault();var n=e.target.value;/^\d{0,11}$/.test(n.toString())&&t(r,n.toString())}(e,r,"CUIT")}}),Object(F.jsx)(ve.a,{as:he.a,required:!0,size:"small",label:"Raz\xf3n Social",type:"string",name:"razonSocial"}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(F.jsx)(n,{message:"El CUIT no puede estar en blanco",ok:!0})]})}var Tt=function(e,t,r,n){return[{field:"razonSocial",headerName:"Raz\xf3n Social",width:170,editable:!0,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:130,headerAlign:"center",valueFormatter:function(e){return function(e){try{return(e=e.split("")).splice(2,0,"-"),e.splice(5,0,"."),e.splice(9,0,"."),e.splice(13,0,"-"),e.join("")}catch(t){return console.log("hubo un error: ",t),null}}(e.value)}},{field:"telefono",headerName:"Tel\xe9fono",width:140,editable:!0,headerAlign:"center",valueFormatter:function(e){var t=e.value;if(t)return(t=t.split("")).splice(2,0,"-"),t.splice(7,0,"-"),t.join("")}},{field:"mail",headerName:"Mail",width:150,editable:!0,headerAlign:"center"},{field:"CBU",headerName:"CBU",width:200,editable:!0,headerAlign:"center"},{field:"banco",headerName:"Banco",width:120,editable:!0,headerAlign:"center"},{field:"nroCuenta",headerName:"# Cuenta",width:140,editable:!0,headerAlign:"center"},{field:"rubroID",headerName:"Rubro",width:140,editable:!0,renderCell:function(e){return e.value.nombre},renderEditCell:function(t){return Object(F.jsx)(It,{rubros:e,props:t})},headerAlign:"center"},{field:"subrubroID",headerName:"Sub Rubro",width:140,editable:!0,renderCell:function(e){return e.value.nombre},renderEditCell:function(e){return Object(F.jsx)(Pt,{subRubros:t,props:e})},headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(e){n(t),r(!0)}})}}]};function kt(e){var t=e.idSociety,r=qe(),n=r.Prompt,i=r.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],f=Object(o.useQuery)(["proveedor",t],(function(){return we("proveedor/listar/".concat(t.id))})),b=f.data,j=f.isLoading,p=f.error,h=Object(o.useQueryClient)(),m=Object(o.useQuery)(["rubros",t],(function(){return we("rubro/listar/".concat(t.id))})).data,O=Object(o.useQuery)(["subrubros",t],(function(){return we("subrubro/listar/".concat(t.id,"/0"))})).data,v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("proveedor/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["proveedor",t]);case 2:return n=h.getQueryData(["proveedor",t]),i=n.filter((function(e){return e.id!==r})),h.setQueryData(["proveedor",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["proveedor",t],n)},onSettled:function(){return h.invalidateQueries(["proveedor",t])}}),x=v.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("proveedor/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,h.cancelQueries(["proveedor",t]);case 3:return o=h.getQueryData(["proveedor",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),h.setQueryData(["proveedor",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["proveedor",t],n)},onSettled:function(){return h.invalidateQueries(["proveedor",t])}}),y=g.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return x(d)}}),Object(F.jsx)(Ze.a,{rows:b.map((function(e){var t,r;return{id:e.id,rubroID:{id:e.rubroId,nombre:null===m||void 0===m||null===(t=m.find((function(t){return t.id===e.rubroId})))||void 0===t?void 0:t.rubro},subrubroID:{id:e.subrubroId,nombre:null===O||void 0===O||null===(r=O.find((function(t){return t.id===e.subrubroId})))||void 0===r?void 0:r.subRubro},razonSocial:e.razonSocial,CUIT:e.CUIT,mail:e.mail,telefono:e.telefono,CBU:e.CBU,banco:e.banco,nroCuenta:e.nroCuenta,deleteId:e.id}})),onCellEditCommit:y,columns:Tt(m,O,i,s),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:At}})]})}function At(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function It(e){var t=e.rubros,r=e.props,n=r.id,i=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{rubro:""}]);var o=Object(l.useState)({rubro:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(F.jsx)(mt.a,{value:d,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,o){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:n,field:a,value:o.id},t),e.next=5,r.api.commitCellChange({id:n,field:a});case 5:i.setCellMode(n,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Rubro"}))}})}function Pt(e,t){var r=e.subRubros,n=e.props,i=n.id,a=n.api,o=n.field;r=[].concat(Object(Fe.a)(r.filter((function(e){var t;return e.rubroId===parseInt(null===n||void 0===n||null===(t=n.row)||void 0===t?void 0:t.rubroID.id)}))),[{subRubro:""}]);var u=Object(l.useState)({subRubro:""}),d=Object(c.a)(u,2),s=d[0],f=d[1];return Object(F.jsx)(mt.a,{value:s,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(r),a.setEditCellValue({id:i,field:o,value:r.id},t),e.next=4,n.api.commitCellChange({id:i,field:o});case 4:a.setCellMode(i,o,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:r,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"subRubro"}))}})}function Dt(e){var t,r=e.idSociety,n=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Proveedores | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(St,{idSociety:r,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(kt,{idSociety:r,loggedUser:n})})]})})]})}function Rt(e){var t=e.idSociety,r=Object(o.useQueryClient)(),n=Object(o.useMutation)((function(e){return Ce("persona/agregar/".concat(t),e)}),{onSuccess:function(){r.refetchQueries(["persona",t])}}).mutate;return Object(F.jsx)(ve.c,{initialValues:{nombre:"",mail:null,telefono:null},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(r,i){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,o=i.resetForm,e.next=3,Ft(t,r.nombre);case 3:e.sent?o():n(r),a(!1);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,label:"Nombre",type:"string",maxLength:40,name:"nombre"}),Object(F.jsx)(ve.a,{as:he.a,label:"Email",type:"string",maxLength:100,name:"mail"}),Object(F.jsx)(ve.a,{as:he.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono"}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}})}function Ft(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=Object(je.a)(be.a.mark((function e(t,r){var n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(""+r).trim()){e.next=3;break}return e.abrupt("return",!0);case 3:return n="persona/mostrar/".concat(t,"/").concat(r),e.t0=Boolean,e.next=7,we(n);case 7:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Nt=r(50),zt=(r(185),[{field:"nombre",headerName:"Nombre",width:170,editable:!0,headerAlign:"center"},{field:"mail",headerName:"Mail",width:150,editable:!0,headerAlign:"center"},{field:"telefono",headerName:"Tel\xe9fono",width:150,editable:!0,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:150,editable:!0,headerAlign:"center"},{field:"delete",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(F.jsx)($e.a,{onClick:function(){return Object(Nt.b)((function(e){var r=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:r,children:"No quiero borrar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),r()},children:"S\xed quiero borrar"})]})}))}})}}]);function Vt(e){var t=e.idSociety,r=Object(o.useQueryClient)(),n=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("persona/eliminar/".concat(t),r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.refetchQueries(["persona",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),i=n.mutate,a=Object(o.useQuery)(["persona",t],(function(){return we("persona/listar/".concat(t))})),c=a.data,l=a.isLoading,u=a.error;if(l)return"Cargando...";if(u)return"Hubo un error: ".concat(u.message);return Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(Nt.a,{}),Object(F.jsx)(Ze.a,{rows:c.map((function(e){return{id:e.id,nombre:e.nombre,mail:e.mail,telefono:e.telefono,CUIT:e.CUIT,onDelete:function(){i(e.id)}}})),columns:zt,pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,onEditCellChange:function(e){var r=Object(w.a)({id:e.id},e.field,e.props.value);Ce("persona/modificar/".concat(t),r)},components:{Toolbar:Et}})]})}function Et(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function Ut(e){var t,r=e.idSociety;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Fiduciante | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Rt,{idSociety:r})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Vt,{idSociety:r})})]})})]})}function Mt(e){var t=e.idSociety,r=Object(o.useQueryClient)(),n=Object(o.useMutation)((function(e){return Ce("empresa/agregar/".concat(t),e)}),{onSuccess:function(){return r.refetchQueries(["empresas",t])}}).mutate;return Object(F.jsx)(ve.c,{initialValues:{razonSocial:"",mail:"",telefono:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(r,i){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,o=i.resetForm,e.next=3,Lt(t,r.CUIT);case 3:if(e.sent){e.next=7;break}n(r),e.next=8;break;case 7:o();case 8:a(!1);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,label:"Raz\xf3n Social",type:"string",name:"razonSocial"}),Object(F.jsx)(ve.a,{as:he.a,label:"Email",type:"string",name:"mail"}),Object(F.jsx)(ve.a,{as:he.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono",onChange:function(e){return function(e,t,r){e.preventDefault();var n=e.target.value;/^\d{0,11}$/.test(n.toString())&&t(r,n.toString())}(e,r,"telefono")}}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}})}function Lt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=Object(je.a)(be.a.mark((function e(t,r){var n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="empresa/mostrar/".concat(t,"/").concat(r),e.t0=Boolean,e.next=4,we(n);case 4:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bt=[{field:"razonSocial",headerName:"Raz\xf3n Social",width:170,editable:!0,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:150,headerAlign:"center",valueFormatter:function(e){var t=e.value;return(t=t.split("")).splice(2,0,"-"),t.splice(5,0,"."),t.splice(9,0,"."),t.splice(13,0,"-"),t.join("")}},{field:"telefono",headerName:"Tel\xe9fono",width:150,editable:!0,headerAlign:"center",valueFormatter:function(e){var t=e.value;if(t)return(t=t.split("")).splice(2,0,"-"),t.splice(7,0,"-"),t.join("")}},{field:"mail",headerName:"Mail",width:150,editable:!0,headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(F.jsx)($e.a,{onClick:function(){return Object(Nt.b)((function(e){var r=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:r,children:"No quiero borrar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),r()},children:"S\xed quiero borrar"})]})}))}})}}];function qt(e){var t=e.idSociety,r=Object(o.useQueryClient)(),n=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("empresa/eliminar/".concat(t),r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.refetchQueries(["empresas",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),i=n.mutate,a=Object(o.useQuery)(["empresas",t],(function(){return we("empresa/listar/".concat(t))})),c=a.data,l=a.isLoading,u=a.error;if(l)return"Cargando...";if(u)return"Hubo un error: ".concat(u.message);return Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(Nt.a,{}),Object(F.jsx)(Ze.a,{rows:c.map((function(e){return{id:e.id,razonSocial:e.razonSocial,CUIT:e.CUIT,mail:e.mail,telefono:e.telefono,onDelete:function(){i(e.id)}}})),columns:Bt,pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,onEditCellChange:function(e){var r=Object(w.a)({id:e.id},e.field,e.props.value);Ce("empresa/modificar/".concat(t),r)},components:{Toolbar:Wt}})]})}function Wt(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function Ht(e){var t,r=e.idSociety;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Empresas | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Mt,{idSociety:r})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(qt,{idSociety:r})})]})})]})}function Gt(e){var t=e.idSociety,r=Object(o.useQueryClient)(),n=Object(o.useMutation)((function(e){return Ce("fideicomiso/agregar/".concat(t.id),e)}),{onSuccess:function(){r.refetchQueries(["fideicomiso",t])}}).mutate;return Object(F.jsx)(ve.c,{initialValues:{nombre:"",fechaInicio:null,fechaFin:null},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(r,i){var o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.setSubmitting,c=i.resetForm,e.next=3,a(t.id,r.nombre);case 3:!e.sent&&n(r),c(),o(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,required:!0,label:"Nombre Fideicomiso",size:"small",type:"string",maxLength:40,name:"nombre"}),Object(F.jsx)(ve.a,{name:"fechaInicio",children:function(e){var t=e.field,r=t.value,n=t.name,a=e.form.setFieldValue;return Object(F.jsx)(i,{label:"Inicio",value:r,setFieldValue:a,name:n})}}),Object(F.jsx)(ve.a,{name:"fechaFin",children:function(e){var t=e.field,r=t.value,n=t.name,a=e.form.setFieldValue;return Object(F.jsx)(i,{label:"Finalizacion",value:r,setFieldValue:a,name:n})}}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}});function i(e){var t=e.value,r=e.name,n=e.setFieldValue,i=e.label;return Object(F.jsx)(Qe.b,{dateAdapter:ze.a,children:Object(F.jsx)(Ne.a,{label:i,value:t,inputFormat:"dd/MM/yyyy",renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)({size:"small"},e))},onChange:function(e){return n(r,e)}})})}function a(e,t){return c.apply(this,arguments)}function c(){return c=Object(je.a)(be.a.mark((function e(t,r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Boolean,e.next=3,we("fideicomiso/mostrar/".concat(t,"/").concat(r));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}}var Zt=function(e,t,r,n,i){return[{field:"nombre",headerName:"Nombre",width:200,headerAlign:"center",align:"left"},{field:"fechaInicio",headerName:"Inicio",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"fechaFin",headerName:"Finalizaci\xf3n",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"logo",headerName:"Logo",width:150,renderCell:function(e){return e.row.logo?Object(F.jsx)("img",{style:{display:"block",margin:"auto",width:"30%"},src:"".concat("http://104.131.28.211:3000/","sociedades/").concat(r,"/").concat(e.row.logo),alt:"logo"}):""}},{field:"colorElegido",headerName:"Color",width:150,editable:!1,renderCell:function(e){var t=e.row.colorElegido;return Object(F.jsx)("div",{style:{width:"100%",height:"100%",background:t}})},renderEditCell:function(r){var n=r.row.colorElegido;return Object(F.jsx)(Kt,{originalColor:$t.filter((function(e){return e.css===n}))[0],color:e,setColor:t,colorOptions:$t})}}]},$t=[{label:"red",css:"red"},{label:"DarkGreen",css:"DarkGreen"},{label:"MidnightBlue",css:"MidnightBlue"},{label:"black",css:"black"},{label:"Salmon",css:"LightSalmon"},{label:"Khaki",css:"Khaki"},{label:"Bisque",css:"Bisque"},{label:"Plum",css:"Plum"},{label:"Orchid",css:"Orchid"},{label:"Chocolate",css:"Chocolate"},{label:"LightSteelBlue",css:"LightSteelBlue"},{label:"orange",css:"orange"},{label:"green",css:"green"}];function Yt(e){var t=e.idSociety,r=Object(l.useState)(null),n=Object(c.a)(r,2),i=n[0],a=n[1],u=qe(),d=u.Prompt,s=(u.setIsPromptOpen,Object(l.useState)()),f=Object(c.a)(s,2),b=f[0],j=(f[1],Object(o.useQuery)(["fideicomiso",t],(function(){return we("fideicomiso/listar/".concat(t.id))}))),p=j.data,h=j.isLoading,m=j.error,O=Object(o.useQueryClient)(),v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("fideicomiso/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.cancelQueries(["fideicomiso",t]);case 2:return n=O.getQueryData(["fideicomiso",t]),i=n.filter((function(e){return e.id!==r})),O.setQueryData(["fideicomiso",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return O.setQueryData(["fideicomiso",t],n)},onSettled:function(){return O.invalidateQueries(["fideicomiso",t])}}),x=v.mutate,g=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("fideicomiso/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,O.cancelQueries(["fideicomiso",t]);case 3:return o=O.getQueryData(["fideicomiso",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),O.setQueryData(["fideicomiso",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return O.setQueryData(["fideicomiso",t],n)},onSettled:function(){return O.invalidateQueries(["fideicomiso",t])}}),y=g.mutate;return h?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(d,{message:"\xbfEliminar fila?",action:function(){return x(b)}}),Object(F.jsx)(Ze.a,{rows:p.map((function(e){return{id:e.id,nombre:e.nombre,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,colorElegido:e.color,logo:e.logo,cloud:e.cloud,deleteId:e.id}})),onCellEditCommit:y,columns:Zt(i,a,null===t||void 0===t?void 0:t.id),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Jt}})]})}function Jt(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function Kt(e){var t=e.color,r=e.setColor,n=e.colorOptions,i=e.originalColor;return Object(l.useEffect)((function(){return r((function(e){return(null===i||void 0===i?void 0:i.css)!==(null===e||void 0===e?void 0:e.css)?i:e}))}),[i,r]),Object(F.jsx)(mt.a,{value:t,onChange:function(e,t){r(t)},options:n,sx:{width:300},isOptionEqualToValue:function(e,t){return e.label===t.label},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)({style:{background:null===t||void 0===t?void 0:t.css}},e))},renderOption:function(e,t,r){return Object(F.jsx)("div",Object(G.a)(Object(G.a)({},e),{},{style:{background:null===t||void 0===t?void 0:t.css},children:t.label}))}})}function Xt(e){var t,r=e.idSociety;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Fideicomisos | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Gt,{idSociety:r})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Yt,{idSociety:r})})]})})]})}var er=r(1092),tr=r(1128),rr=Object(er.a)();function nr(e){var t=e.selectedFideicomisoData,r=e.idSociety,n=Object(l.useState)(),i=Object(c.a)(n,2),a=i[0],u=i[1];Object(l.useEffect)((function(){return u(null===t||void 0===t?void 0:t.personaId)}),[t]);var d=Object(l.useState)(!1),s=Object(c.a)(d,2),f=s[0],b=s[1],j=Object(o.useQuery)(["persona",a],(function(){return we("persona/mostrar/".concat(r.id,"/").concat(a))})).data,p=Object(o.useQuery)(["localizaci\xf3n",null===t||void 0===t?void 0:t.localizacionId],(function(){return we("localizacion/mostrar/".concat(r.id,"/").concat(null===t||void 0===t?void 0:t.localizacionId))})).data,h=Object(o.useQuery)(["personas"],(function(){return we("persona/listar/".concat(r.id))})).data,m=Object(o.useMutation)((function(e){return Ce("fideicomiso/modificar/".concat(r.id),e)})).mutate,O=Object(o.useMutation)((function(e){return Ce("persona/agregar/".concat(r.id),e)}),{onSuccess:function(e){u(e.id),m({id:t.id,personaId:e.id})}}).mutate,v=[{id:1,contacto:null===j||void 0===j?void 0:j.nombre,fechaInicio:null===t||void 0===t?void 0:t.fechaInicio,fechaFin:null===t||void 0===t?void 0:t.fechaFin,direccion:null===p||void 0===p?void 0:p.direccion}],x=[{field:"contacto",headerName:"Contacto",width:350,headerAlign:"center",align:"center"},{field:"fechaInicio",headerName:"Inicio",width:160,headerAlign:"center",align:"center",type:"date",nameFormatter:function(e){var t=e.name;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})},editable:!0},{field:"fechaFin",headerName:"Fin",width:100,headerAlign:"center",align:"center",type:"date",nameFormatter:function(e){var t=e.name;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})},editable:!0},{field:"direccion",headerName:"Direcci\xf3n",width:200,editable:!1,headerAlign:"center",align:"center"}];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(g,{isDialogOpen:f,setIsDialogOpen:b}),Object(F.jsxs)(A.a,{width:"auto",children:[Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h3",children:null===t||void 0===t?void 0:t.nombre}),t&&Object(F.jsx)(Ze.a,{columns:x,rows:v,rowHeight:75,headerHeight:35,hideFooter:!0,autoHeight:"false",pageSize:1,onCellDoubleClick:function(e){"contacto"===e.field&&b(!0)}})]})]});function g(e){var t=e.isDialogOpen,r=e.setIsDialogOpen;return Object(F.jsx)(F.Fragment,{children:Object(F.jsx)(Le.a,{open:t,onClose:function(){return r(!1)},fullWidth:!0,style:{transform:"translate(0, -200px)"},children:Object(F.jsx)(tr.a,{children:Object(F.jsx)(y,{peopleInfo:h,closeDialog:function(){return r(!1)}})})})})}function y(e){var r=e.peopleInfo,n=e.closeDialog;return Object(F.jsx)(mt.a,{value:null===j||void 0===j?void 0:j.nombre,onChange:function(e,r){"string"===typeof r?(O({nombre:r}),n()):r&&r.inputValue?(O({nombre:r.inputValue}),n()):(null===r||void 0===r?void 0:r.id)!==a&&(u(r.id),m({id:t.id,personaId:r.id}),n())},filterOptions:function(e,t){var r=rr(e,t),n=t.inputValue,i=e.some((function(e){return n===e.nombre}));return""===n||i||r.push({inputValue:n,nombre:"agregar ".concat(n)}),r},selectOnFocus:!0,clearOnBlur:!0,handleHomeEndKeys:!0,options:r,getOptionLabel:function(e){return"string"===typeof e?e:e.inputValue?e.inputValue:e.nombre},renderOption:function(e,t){return Object(F.jsx)("li",Object(G.a)(Object(G.a)({},e),{},{children:t.nombre}))},freeSolo:!0,renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)({},e))}})}}function ir(e){var t=e.idSociety,r=e.selectedFideicomisoData,n=Object(o.useQuery)(["typesOfProducts"],(function(){return we("configuracion/listar/".concat(t.id,"/tipo_producto"))}),{initialData:[{id:7,descripcion:"UF",codigo:1,descripcionLarga:"Unidad funcional"},{id:8,descripcion:"Cod. Nom.",codigo:2,descripcionLarga:"C\xf3digo de nomenclatura"},{id:9,descripcion:"Cochera",codigo:3,descripcionLarga:"Cochera Auto"},{id:10,descripcion:"Cochera Moto",codigo:4,descripcionLarga:"Cochera Moto"},{id:11,descripcion:"Baulera",codigo:5,descripcionLarga:"Baulera"},{id:12,descripcion:"Local",codigo:6,descripcionLarga:"Local comercial"},{id:13,descripcion:"Lote",codigo:7,descripcionLarga:"Lote, terreno"},{id:14,descripcion:"Casa",codigo:8,descripcionLarga:"Casa"},{id:15,descripcion:"Bungalo",codigo:9,descripcionLarga:"Bungalo"}]}).data,i=Object(o.useQueryClient)(),a=Object(o.useMutation)((function(e){return Ce("producto/agregar/".concat(t.id),e)}),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.refetchQueries(["productos",t,r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),u=a.mutate,d=Object(l.useState)(null),s=Object(c.a)(d,2),f=s[0],b=s[1];return Object(F.jsx)(ve.c,{initialValues:{code:"",type:"",description:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,n){var i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.setSubmitting,a=n.resetForm,u({fideicomisoId:r.id,codigo:t.code,descripcion:t.description,tipo:t.type.codigo}),a(),b(null),i(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:he.a,label:"C\xf3digo",type:"string",maxLength:40,size:"small",name:"code"}),Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"Tipo",style:{width:"230px",display:"inline-flex"},onChange:function(e,t){b(t),r("type",t)},value:f,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},options:n,renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Tipo"}))}}),Object(F.jsx)(ve.a,{as:he.a,size:"small",label:"Descripcion",type:"string",maxLength:100,name:"description"}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"})]})}})}var ar=[{field:"codigo",headerName:"C\xf3digo",width:140,editable:!1,headerAlign:"center",align:"center"},{field:"metros",headerName:"Metros",type:"number",width:130,editable:!0,headerAlign:"center",align:"right"},{field:"precioULT",type:"number",headerName:"Precio",width:150,editable:!0,headerAlign:"center",align:"right"},{field:"deleteIcon",headerName:"",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(F.jsx)($e.a,{onClick:function(){return Object(Nt.b)((function(e){var r=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:r,children:"No quiero borrar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),r()},children:"S\xed quiero borrar"})]})}))}})}}];function or(e){var t=e.idSociety,r=e.selectedFideicomisoData,n=Object(o.useQuery)(["productos",t,r],(function(){return we("producto/listar/".concat(null===t||void 0===t?void 0:t.id,"/").concat(null===r||void 0===r?void 0:r.id))})),i=n.data,a=n.isLoading,c=n.error,l=Object(o.useQueryClient)(),u=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("producto/eliminar/".concat(null===t||void 0===t?void 0:t.id),{fideicomisoId:null===r||void 0===r?void 0:r.id,id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.refetchQueries(["productos",t,r]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),d=u.mutate;if(a)return"Cargando...";if(c)return"Hubo un error: ".concat(c.message);return Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(Nt.a,{}),Object(F.jsx)(Ze.a,{rows:i.map((function(e){return{id:e.id,codigo:e.codigo,metros:e.metros,precioULT:e.precioULT,onDelete:function(){return d(e.id)}}})),columns:ar,pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,sortModel:[{field:"codigo",sort:"asc"}],scrollbarSize:!0,onCellEditCommit:function(e){var n=Object(w.a)({id:e.id,idFideicomiso:null===r||void 0===r?void 0:r.id},e.field,e.value);Ce("producto/modificar/".concat(null===t||void 0===t?void 0:t.id),n)},components:{Toolbar:cr}})]})}function cr(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function lr(e){var t=e.idSociety,r=Object(d.j)().nombreFideicomiso,n=Object(o.useQuery)(["fideicomiso",t.id],(function(){return we("fideicomiso/listar/".concat(t.id))})).data,i=null===n||void 0===n?void 0:n.find((function(e){return e.nombre===r}));return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:[r," | ",null===t||void 0===t?void 0:t.nombre]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(nr,{idSociety:t,selectedFideicomisoData:i})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Grilla de Productos"})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(ir,{idSociety:t,selectedFideicomisoData:i})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(or,{idSociety:t,selectedFideicomisoData:i})})]})})]})}var ur=r(265),dr=r.n(ur),sr=r(1129);function fr(e){var t=e.idSociety,r=e.loggedUser,n=Object(o.useQuery)(["fideicomisos"],(function(){return we("fideicomiso/listar/".concat(t.id))})).data,i=Object(o.useQuery)(["proveedores"],(function(){return we("proveedor/listar/".concat(t.id))})).data,a=Object(o.useQuery)(["ddfacturas"],(function(){return we("factura/listar/".concat(t.id,"/opid/0"))})).data,u=Object(o.useQueryClient)(),d=Object(o.useMutation)((function(e){return Ce("OP/agregar/".concat(t.id),e)}),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.refetchQueries(["OP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),s=d.mutate,f=Object(l.useState)(null),b=Object(c.a)(f,2),j=b[0],p=b[1],h=Object(l.useState)(null),m=Object(c.a)(h,2),O=m[0],v=m[1],x=Object(l.useState)(null),g=Object(c.a)(x,2),y=g[0],w=g[1],C=Object(l.useState)(!1),S=Object(c.a)(C,2),T=S[0],k=S[1];return Object(F.jsx)(ve.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,n){var i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.setSubmitting,n.resetForm,s({fideicomisoId:t.fideicomiso.id,empresaId:t.empresa.id,rubroId:t.empresa.rubroId,subRubroId:t.empresa.subrubroId,facturaId:t.factura.id,creador:r.id}),k(!0),i(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),r("fideicomiso",t)},value:j,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:n||[],renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fideicomiso"}))}}),Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){v(t),r("empresa",t)},value:O,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Razon Social"}))}}),Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"Factura N\u0970",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){w(t),r("factura",t)},value:y,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a?null===a||void 0===a?void 0:a.filter((function(e){return(null===e||void 0===e?void 0:e.empresaId)===(null===O||void 0===O?void 0:O.id)})):[],renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Factura N\u0970"}))}}),Object(F.jsx)(Y.a,{id:"bagregar",variant:"text",type:"submit",disabled:t,children:"Agregar"}),Object(F.jsx)(A.a,{sx:{width:"100%"},children:Object(F.jsx)(sr.a,{in:T,children:Object(F.jsx)(me.a,{action:Object(F.jsx)(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){k(!1)},children:Object(F.jsx)(dr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}})}var br=r(12),jr=br.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},description:{width:"55%",textAlign:"left",borderRightWidth:1,paddingLeft:8},qty:{width:"15%",borderRightWidth:1,textAlign:"right",paddingRight:8},rate:{width:"15%",borderRightWidth:1,textAlign:"right",paddingRight:8},amount:{width:"15%"},amountRow:{width:"15%",textAlign:"right",paddingRight:8}}),pr=function(e){var t,r,n,i,a,o,c,l,u,d,s,f,b,j,p,h,m,O,v,x,g,y,w,C,S,T,k,A,I,P,D,R,Q,N,z,V,E,U,M,L,_,B,q,W,H,G,Z,$,Y,J,K,X,ee,te,re,ne,ie,ae,oe,ce,le,ue,de,se,fe,be,je,pe,he=e.dataOP,me=e.dataFacturas;return Object(F.jsxs)(br.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:he?null===he||void 0===he||null===(t=he.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(F.jsxs)(br.View,{style:[jr.container,{borderBottomColor:he?null===he||void 0===he||null===(r=he.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",backgroundColor:he?null===he||void 0===he||null===(n=he.fideicomisos[0])||void 0===n?void 0:n.color2:"#ffffff"}],children:[Object(F.jsx)(br.Text,{style:[jr.description,{borderRightColor:he?null===he||void 0===he||null===(i=he.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Proveedor"}),Object(F.jsx)(br.Text,{style:[jr.qty,{borderRightColor:he?null===he||void 0===he||null===(a=he.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Detalle"}),Object(F.jsx)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(o=he.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"N\xba Factura"}),Object(F.jsx)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(c=he.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"N\xba OC"}),Object(F.jsx)(br.Text,{style:[jr.amount,{borderRightColor:he?null===he||void 0===he||null===(l=he.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Importe"})]}),Object(F.jsxs)(br.View,{style:[jr.row,{borderBottomColor:he?null===he||void 0===he||null===(u=he.fideicomisos[0])||void 0===u?void 0:u.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[jr.description,{borderRightColor:he?null===he||void 0===he||null===(d=he.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(s=me.item[0])||void 0===s||null===(f=s.empresas[0])||void 0===f?void 0:f.razonSocial]}),Object(F.jsxs)(br.Text,{style:[jr.qty,{borderRightColor:he?null===he||void 0===he||null===(b=he.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(j=me.item[0])||void 0===j?void 0:j.detalle]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(p=he.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(h=me.item[0])||void 0===h?void 0:h.numero]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(m=he.fideicomisos[0])||void 0===m?void 0:m.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(O=me.item[0])||void 0===O?void 0:O.txtOC]}),Object(F.jsxs)(br.Text,{style:[jr.amountRow,{borderRightColor:he?null===he||void 0===he||null===(v=he.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(x=me.item[0])||void 0===x?void 0:x.montoTotal]})]}),Object(F.jsxs)(br.View,{style:[jr.row,{borderBottomColor:he?null===he||void 0===he||null===(g=he.fideicomisos[0])||void 0===g?void 0:g.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[jr.description,{borderRightColor:he?null===he||void 0===he||null===(y=he.fideicomisos[0])||void 0===y?void 0:y.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(w=me.item[1])||void 0===w||null===(C=w.empresas[0])||void 0===C?void 0:C.razonSocial]}),Object(F.jsxs)(br.Text,{style:[jr.qty,{borderRightColor:he?null===he||void 0===he||null===(S=he.fideicomisos[0])||void 0===S?void 0:S.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(T=me.item[1])||void 0===T?void 0:T.detalle]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(k=he.fideicomisos[0])||void 0===k?void 0:k.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(A=me.item[1])||void 0===A?void 0:A.numero]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(I=he.fideicomisos[0])||void 0===I?void 0:I.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(P=me.item[1])||void 0===P?void 0:P.txtOC]}),Object(F.jsxs)(br.Text,{style:[jr.amountRow,{borderRightColor:he?null===he||void 0===he||null===(D=he.fideicomisos[0])||void 0===D?void 0:D.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(R=me.item[1])||void 0===R?void 0:R.montoTotal]})]}),Object(F.jsxs)(br.View,{style:[jr.row,{borderBottomColor:he?null===he||void 0===he||null===(Q=he.fideicomisos[0])||void 0===Q?void 0:Q.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[jr.description,{borderRightColor:he?null===he||void 0===he||null===(N=he.fideicomisos[0])||void 0===N?void 0:N.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(z=me.item[2])||void 0===z||null===(V=z.empresas[0])||void 0===V?void 0:V.razonSocial]}),Object(F.jsxs)(br.Text,{style:[jr.qty,{borderRightColor:he?null===he||void 0===he||null===(E=he.fideicomisos[0])||void 0===E?void 0:E.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(U=me.item[2])||void 0===U?void 0:U.detalle]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(M=he.fideicomisos[0])||void 0===M?void 0:M.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(L=me.item[2])||void 0===L?void 0:L.numero]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(_=he.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(B=me.item[2])||void 0===B?void 0:B.txtOC]}),Object(F.jsxs)(br.Text,{style:[jr.amountRow,{borderRightColor:he?null===he||void 0===he||null===(q=he.fideicomisos[0])||void 0===q?void 0:q.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(W=me.item[2])||void 0===W?void 0:W.montoTotal]})]}),Object(F.jsxs)(br.View,{style:[jr.row,{borderBottomColor:he?null===he||void 0===he||null===(H=he.fideicomisos[0])||void 0===H?void 0:H.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[jr.description,{borderRightColor:he?null===he||void 0===he||null===(G=he.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(Z=me.item[3])||void 0===Z||null===($=Z.empresas[0])||void 0===$?void 0:$.razonSocial]}),Object(F.jsxs)(br.Text,{style:[jr.qty,{borderRightColor:he?null===he||void 0===he||null===(Y=he.fideicomisos[0])||void 0===Y?void 0:Y.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(J=me.item[3])||void 0===J?void 0:J.detalle]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(K=he.fideicomisos[0])||void 0===K?void 0:K.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(X=me.item[3])||void 0===X?void 0:X.numero]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(ee=he.fideicomisos[0])||void 0===ee?void 0:ee.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(te=me.item[3])||void 0===te?void 0:te.txtOC]}),Object(F.jsxs)(br.Text,{style:[jr.amountRow,{borderRightColor:he?null===he||void 0===he||null===(re=he.fideicomisos[0])||void 0===re?void 0:re.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(ne=me.item[3])||void 0===ne?void 0:ne.montoTotal]})]}),Object(F.jsxs)(br.View,{style:[jr.row,{borderBottomColor:he?null===he||void 0===he||null===(ie=he.fideicomisos[0])||void 0===ie?void 0:ie.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[jr.description,{borderRightColor:he?null===he||void 0===he||null===(ae=he.fideicomisos[0])||void 0===ae?void 0:ae.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(oe=me.item[4])||void 0===oe||null===(ce=oe.empresas[0])||void 0===ce?void 0:ce.razonSocial]}),Object(F.jsxs)(br.Text,{style:[jr.qty,{borderRightColor:he?null===he||void 0===he||null===(le=he.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(ue=me.item[4])||void 0===ue?void 0:ue.detalle]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(de=he.fideicomisos[0])||void 0===de?void 0:de.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(se=me.item[4])||void 0===se?void 0:se.numero]}),Object(F.jsxs)(br.Text,{style:[jr.rate,{borderRightColor:he?null===he||void 0===he||null===(fe=he.fideicomisos[0])||void 0===fe?void 0:fe.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(be=me.item[4])||void 0===be?void 0:be.txtOC]}),Object(F.jsxs)(br.Text,{style:[jr.amountRow,{borderRightColor:he?null===he||void 0===he||null===(je=he.fideicomisos[0])||void 0===je?void 0:je.color:"#ffffff"}],children:[" ",null===me||void 0===me||null===(pe=me.item[4])||void 0===pe?void 0:pe.montoTotal]})]})]})},hr=br.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},col1:{width:"11%",textAlign:"left",paddingLeft:8},col2:{width:"55%",textAlign:"left",paddingLeft:8},col3:{width:"33%",textAlign:"center",paddingLeft:8}}),mr=function(e){var t,r,n,i=e.dataOP;return Object(F.jsxs)(br.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:i?null===i||void 0===i||null===(t=i.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(F.jsxs)(br.View,{style:hr.espacio,children:[Object(F.jsx)(br.Text,{style:hr.col1,children:" "}),Object(F.jsx)(br.Text,{style:hr.col1,children:" "}),Object(F.jsx)(br.Text,{style:hr.col1,children:" "})]}),Object(F.jsxs)(br.View,{style:hr.row,children:[Object(F.jsx)(br.Text,{style:hr.col1,children:"Detalles:"}),Object(F.jsx)(br.Text,{style:hr.col2}),Object(F.jsx)(br.Text,{style:hr.col3})]}),Object(F.jsxs)(br.View,{style:hr.row,children:[Object(F.jsx)(br.Text,{style:hr.col1}),Object(F.jsx)(br.Text,{style:hr.col2,children:null===i||void 0===i?void 0:i.descripcion}),Object(F.jsxs)(br.Text,{style:hr.col3,children:["Aprobado por ",null===i||void 0===i||null===(r=i.auth_obra[0])||void 0===r||null===(n=r.usuarios[0])||void 0===n?void 0:n.user]})]})]})},Or=br.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},rowbis:{flexDirection:"row",alignItems:"left",height:24,fontSize:10,fontStyle:"bold"},col1:{width:"33%",textAlign:"right",paddingLeft:8},col1bis:{width:"33%",textAlign:"right",paddingTop:5,paddingLeft:8},col2bis:{width:"33%",textAlign:"center",backgroundColor:"#B4B4B4",paddingTop:5,paddingLeft:8},col3:{width:"33%",textAlign:"center",paddingLeft:8},col3bis:{width:"33%",textAlign:"center",paddingTop:5,paddingLeft:8}}),vr=function(e){var t,r,n,i,a,o,c=e.dataOP;return Object(F.jsxs)(br.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:c?null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(F.jsxs)(br.View,{style:Or.espacio,children:[Object(F.jsx)(br.Text,{style:Or.col1,children:" "}),Object(F.jsx)(br.Text,{style:Or.col1,children:" "}),Object(F.jsx)(br.Text,{style:Or.col1,children:" "})]}),Object(F.jsxs)(br.View,{style:Or.row,children:[Object(F.jsx)(br.Text,{style:Or.col1,children:"FACTURAS:"}),Object(F.jsx)(br.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:null===c||void 0===c?void 0:c.monto}),Object(F.jsx)(br.Text,{style:Or.col3})]}),Object(F.jsxs)(br.View,{style:Or.row,children:[Object(F.jsx)(br.Text,{style:Or.col1,children:"RET SUSS:"}),Object(F.jsx)(br.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:null===c||void 0===c?void 0:c.RET_SUSS}),Object(F.jsx)(br.Text,{style:Or.col3})]}),Object(F.jsxs)(br.View,{style:Or.row,children:[Object(F.jsx)(br.Text,{style:Or.col1,children:"RET GAN:"}),Object(F.jsx)(br.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:null===c||void 0===c?void 0:c.RET_GAN}),Object(F.jsx)(br.Text,{style:Or.col3})]}),Object(F.jsxs)(br.View,{style:Or.row,children:[Object(F.jsx)(br.Text,{style:Or.col1,children:"RET IVA:"}),Object(F.jsx)(br.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(a=c.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:null===c||void 0===c?void 0:c.RET_IVA}),Object(F.jsx)(br.Text,{style:Or.col3})]}),Object(F.jsxs)(br.View,{style:Or.rowbis,children:[Object(F.jsx)(br.Text,{style:Or.col1bis,children:"Monto a Abonar:"}),Object(F.jsxs)(br.Text,{style:Or.col2bis,children:["$",null===c||void 0===c?void 0:c.monto_a_pagar]}),Object(F.jsxs)(br.Text,{style:Or.col3bis,children:["Aprobado por ",(null===c||void 0===c?void 0:c.auth_adm[0])?null===(o=c.auth_adm[0].usuarios[0])||void 0===o?void 0:o.user:""]})]})]})},xr=br.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"20%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col2:{width:"25%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col3:{width:"25%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col4:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col5:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"15%",textAlign:"right",paddingRight:8}}),gr=function(e){var t,r,n,i,a,o,c,l,u,d,s,f,b,j,p,h,m,O,v,x,g,y,w,C,S,T,k,A,I,P,D,R,Q,N,z,V,E,U,M,L,_,B,q,W,H,G,Z,$,Y,J,K,X,ee,te,re,ne,ie,ae,oe,ce,le=e.dataOP;return Object(F.jsxs)(br.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:le?null===le||void 0===le||null===(t=le.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(F.jsxs)(br.View,{style:[xr.container,{borderBottomColor:le?null===le||void 0===le||null===(r=le.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",backgroundColor:le?null===le||void 0===le||null===(n=le.fideicomisos[0])||void 0===n?void 0:n.color2:"#ffffff"}],children:[Object(F.jsx)(br.Text,{style:[xr.col1,{borderRightColor:le?null===le||void 0===le||null===(i=le.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Banco"}),Object(F.jsx)(br.Text,{style:[xr.col2,{borderRightColor:le?null===le||void 0===le||null===(a=le.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Nro"}),Object(F.jsx)(br.Text,{style:[xr.col3,{borderRightColor:le?null===le||void 0===le||null===(o=le.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:" "}),Object(F.jsx)(br.Text,{style:[xr.col4,{borderRightColor:le?null===le||void 0===le||null===(c=le.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"Fecha"}),Object(F.jsx)(br.Text,{style:xr.col5,children:"Monto"})]}),Object(F.jsxs)(br.View,{style:[xr.row,{borderBottomColor:le?null===le||void 0===le||null===(l=le.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[xr.col1,{borderRightColor:le?null===le||void 0===le||null===(u=le.fideicomisos[0])||void 0===u?void 0:u.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(d=le.OPpago)||void 0===d?void 0:d.banco1]}),Object(F.jsxs)(br.Text,{style:[xr.col2,{borderRightColor:le?null===le||void 0===le||null===(s=le.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(f=le.OPpago)||void 0===f?void 0:f.nro1]}),Object(F.jsxs)(br.Text,{style:[xr.col3,{borderRightColor:le?null===le||void 0===le||null===(b=le.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(j=le.OPpago)||void 0===j?void 0:j.descri1]}),Object(F.jsxs)(br.Text,{style:[xr.col4,{borderRightColor:le?null===le||void 0===le||null===(p=le.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(h=le.OPpago)||void 0===h?void 0:h.fecha1]}),Object(F.jsx)(br.Text,{style:xr.col5,children:0===parseInt(null===le||void 0===le||null===(m=le.OPpago)||void 0===m?void 0:m.monto1)?"":null===le||void 0===le||null===(O=le.OPpago)||void 0===O?void 0:O.monto1})]}),Object(F.jsxs)(br.View,{style:[xr.row,{borderBottomColor:le?null===le||void 0===le||null===(v=le.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[xr.col1,{borderRightColor:le?null===le||void 0===le||null===(x=le.fideicomisos[0])||void 0===x?void 0:x.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(g=le.OPpago)||void 0===g?void 0:g.banco2]}),Object(F.jsxs)(br.Text,{style:[xr.col2,{borderRightColor:le?null===le||void 0===le||null===(y=le.fideicomisos[0])||void 0===y?void 0:y.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(w=le.OPpago)||void 0===w?void 0:w.nro2]}),Object(F.jsxs)(br.Text,{style:[xr.col3,{borderRightColor:le?null===le||void 0===le||null===(C=le.fideicomisos[0])||void 0===C?void 0:C.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(S=le.OPpago)||void 0===S?void 0:S.descri2]}),Object(F.jsxs)(br.Text,{style:[xr.col4,{borderRightColor:le?null===le||void 0===le||null===(T=le.fideicomisos[0])||void 0===T?void 0:T.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(k=le.OPpago)||void 0===k?void 0:k.fecha2]}),Object(F.jsx)(br.Text,{style:xr.col5,children:0===parseInt(null===le||void 0===le||null===(A=le.OPpago)||void 0===A?void 0:A.monto2)?"":null===le||void 0===le||null===(I=le.OPpago)||void 0===I?void 0:I.monto2})]}),Object(F.jsxs)(br.View,{style:[xr.row,{borderBottomColor:le?null===le||void 0===le||null===(P=le.fideicomisos[0])||void 0===P?void 0:P.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[xr.col1,{borderRightColor:le?null===le||void 0===le||null===(D=le.fideicomisos[0])||void 0===D?void 0:D.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(R=le.OPpago)||void 0===R?void 0:R.banco3]}),Object(F.jsxs)(br.Text,{style:[xr.col2,{borderRightColor:le?null===le||void 0===le||null===(Q=le.fideicomisos[0])||void 0===Q?void 0:Q.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(N=le.OPpago)||void 0===N?void 0:N.nro3]}),Object(F.jsxs)(br.Text,{style:[xr.col3,{borderRightColor:le?null===le||void 0===le||null===(z=le.fideicomisos[0])||void 0===z?void 0:z.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(V=le.OPpago)||void 0===V?void 0:V.descri3]}),Object(F.jsxs)(br.Text,{style:[xr.col4,{borderRightColor:le?null===le||void 0===le||null===(E=le.fideicomisos[0])||void 0===E?void 0:E.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(U=le.OPpago)||void 0===U?void 0:U.fecha3]}),Object(F.jsx)(br.Text,{style:xr.col5,children:0===parseInt(null===le||void 0===le||null===(M=le.OPpago)||void 0===M?void 0:M.monto3)?"":null===le||void 0===le||null===(L=le.OPpago)||void 0===L?void 0:L.monto3})]}),Object(F.jsxs)(br.View,{style:[xr.row,{borderBottomColor:le?null===le||void 0===le||null===(_=le.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:[Object(F.jsxs)(br.Text,{style:[xr.col1,{borderRightColor:le?null===le||void 0===le||null===(B=le.fideicomisos[0])||void 0===B?void 0:B.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(q=le.OPpago)||void 0===q?void 0:q.banco4]}),Object(F.jsxs)(br.Text,{style:[xr.col2,{borderRightColor:le?null===le||void 0===le||null===(W=le.fideicomisos[0])||void 0===W?void 0:W.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(H=le.OPpago)||void 0===H?void 0:H.nro4]}),Object(F.jsxs)(br.Text,{style:[xr.col3,{borderRightColor:le?null===le||void 0===le||null===(G=le.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(Z=le.OPpago)||void 0===Z?void 0:Z.descri4]}),Object(F.jsxs)(br.Text,{style:[xr.col4,{borderRightColor:le?null===le||void 0===le||null===($=le.fideicomisos[0])||void 0===$?void 0:$.color:"#ffffff"}],children:[" ",null===le||void 0===le||null===(Y=le.OPpago)||void 0===Y?void 0:Y.fecha4]}),Object(F.jsx)(br.Text,{style:xr.col5,children:0===parseInt(null===le||void 0===le||null===(J=le.OPpago)||void 0===J?void 0:J.monto4)?"":null===le||void 0===le||null===(K=le.OPpago)||void 0===K?void 0:K.monto4})]}),Object(F.jsxs)(br.View,{style:xr.rowf,children:[Object(F.jsx)(br.Text,{style:[xr.descriptionf,{borderRightColor:le?null===le||void 0===le||null===(X=le.fideicomisos[0])||void 0===X?void 0:X.color:"#ffffff"}],children:"TOTAL"}),Object(F.jsx)(br.Text,{style:xr.totalf,children:parseInt((null===le||void 0===le||null===(ee=le.OPpago)||void 0===ee?void 0:ee.monto1)?null===le||void 0===le||null===(te=le.OPpago)||void 0===te?void 0:te.monto1:0)+parseInt((null===le||void 0===le||null===(re=le.OPpago)||void 0===re?void 0:re.monto2)?null===le||void 0===le||null===(ne=le.OPpago)||void 0===ne?void 0:ne.monto2:0)+parseInt((null===le||void 0===le||null===(ie=le.OPpago)||void 0===ie?void 0:ie.monto3)?null===le||void 0===le||null===(ae=le.OPpago)||void 0===ae?void 0:ae.monto3:0)+parseInt((null===le||void 0===le||null===(oe=le.OPpago)||void 0===oe?void 0:oe.monto4)?null===le||void 0===le||null===(ce=le.OPpago)||void 0===ce?void 0:ce.monto4:0)})]})]})},yr="#90e5fc",wr=br.StyleSheet.create({tableContainer:{flexDirection:"row",flexWrap:"wrap",marginTop:8},container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,textAlign:"center",fontStyle:"bold",flexGrow:1},description:{width:"60%",borderRightColor:yr,borderRightWidth:1},qty:{width:"10%",borderRightColor:yr,borderRightWidth:1},rate:{width:"15%",borderRightColor:yr,borderRightWidth:1},amount:{width:"15%"},espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:15,fontSize:7,fontStyle:"bold"},col1:{width:"30%",textAlign:"right",paddingLeft:8},col2:{width:"30%",textAlign:"left",paddingLeft:8},col3:{width:"40%",textAlign:"left",paddingLeft:8}}),Cr=function(e){var t,r,n,i,a=e.dataOP;return Object(F.jsxs)(br.View,{style:wr.tableContainer,children:[Object(F.jsxs)(br.View,{style:wr.row,children:[Object(F.jsx)(br.Text,{style:wr.col1,children:"CBU:"}),Object(F.jsx)(br.Text,{style:wr.col2,children:null===a||void 0===a||null===(t=a.empresas[0])||void 0===t?void 0:t.CBU}),Object(F.jsxs)(br.Text,{style:wr.col3,children:["Cuenta Bancaria: ",null===a||void 0===a||null===(r=a.empresas[0])||void 0===r?void 0:r.nroCuenta]})]}),Object(F.jsxs)(br.View,{style:wr.row,children:[Object(F.jsx)(br.Text,{style:wr.col1,children:"CUIT:"}),Object(F.jsx)(br.Text,{style:wr.col2,children:null===a||void 0===a||null===(n=a.empresas[0])||void 0===n?void 0:n.CUIT}),Object(F.jsxs)(br.Text,{style:wr.col3,children:["Email:   ",null===a||void 0===a||null===(i=a.empresas[0])||void 0===i?void 0:i.mail]})]})]})},Sr=br.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:18,textAlign:"center",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),Tr=function(e){var t,r,n,i,a,o,c=e.dataOP,l=e.dataFacturas,u=e.apiServerUrl,d=e.idSociedad;return Object(F.jsx)(br.Document,{children:Object(F.jsxs)(br.Page,{size:"A4",style:Sr.page,children:[Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.saltolinea,children:" "})}),Object(F.jsxs)(br.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"},children:[Object(F.jsx)(br.Text,{style:[Sr.reportTitleFide,{width:100-parseInt(null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.ancho_logo)+"%",color:null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.color}],children:null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.titulo}),Object(F.jsx)(br.View,{style:{width:(null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.ancho_logo)+"%"},children:Object(F.jsx)(br.Image,{style:[Sr.logo,{backgroundColor:null===c||void 0===c||null===(a=c.fideicomisos[0])||void 0===a?void 0:a.color3}],src:{uri:"".concat(u,"/sociedades/").concat(d,"/").concat(c?null===c||void 0===c||null===(o=c.fideicomisos[0])||void 0===o?void 0:o.logo:"logo.png"),method:"GET",headers:{"Cache-Control":"no-cache"},body:""}})})]}),Object(F.jsx)(br.View,{style:Sr.titleContainer,children:Object(F.jsxs)(br.Text,{style:Sr.reportTitle,children:["SOLICITUD DE PAGO     N\xba ",null===c||void 0===c?void 0:c.numero]})}),Object(F.jsxs)(br.View,{style:Sr.invoiceDateContainer,children:[Object(F.jsx)(br.Text,{style:Sr.label,children:"Fecha: "}),Object(F.jsx)(br.Text,{children:Ve(null===c||void 0===c?void 0:c.createdAt)})]}),Object(F.jsx)(pr,{dataOP:c,dataFacturas:l}),Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.saltolinea,children:" "})}),Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.subreportTitle,children:"APROBACI\xd3N T\xc9CNICA"})}),Object(F.jsx)(mr,{dataOP:c}),Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.saltolinea,children:" "})}),Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.subreportTitle,children:"APROBACI\xd3N ADMINISTRATIVA"})}),Object(F.jsx)(vr,{dataOP:c}),Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.saltolinea,children:" "})}),Object(F.jsx)(br.View,{children:Object(F.jsx)(br.Text,{style:Sr.subreportTitle,children:"PAGO"})}),Object(F.jsx)(gr,{dataOP:c}),Object(F.jsx)(Cr,{dataOP:c})]})})},kr={},Ar={},Ir=0,Pr=function(e,t,r,n){return[{field:"createdAt",headerName:"Fecha",width:120,type:"date",editable:!1,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{timeZone:"UTC"})}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:zr},{field:"numero",headerName:"Numero",width:130,editable:!1,headerAlign:"center",align:"right",renderCell:Vr},{field:"empresa",headerName:"Raz\xf3n Social",width:170,editable:!1,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:70,editable:!1,headerAlign:"center",align:"left"},{field:"facturas",headerName:"Facturas",width:140,editable:!1,headerAlign:"center",align:"center",renderCell:function(e){var t,r=e.row.misFacturas;return null===r||void 0===r||null===(t=r.map((function(e){return e.numero})))||void 0===t?void 0:t.join(", ")}},{field:"RET_SUSS",headerName:"SUSS",width:120,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_GAN",headerName:"GAN",width:120,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_IVA",headerName:"IVA",width:120,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"retencion",hide:!0},{field:"estadoRET",headerName:"Retenciones",width:150,editable:!0,renderCell:function(e){return e.value.descripcion},renderEditCell:function(e){return Object(F.jsx)(Mr,{retenciones:Dr,props:e})},headerAlign:"center"},{field:"aprobado_obra",hide:!0},{field:"aprobado obra",headerName:"Ap. Obra",width:140,headerAlign:"center",align:"center",renderCell:Br},{field:"aprobado_adm",hide:!0},{field:"aprobado adm",headerName:"Ap. ADM",width:140,headerAlign:"center",align:"center",renderCell:qr},{field:"estado",hide:!0},{field:"estadoOP",headerName:"Estado",width:150,editable:!0,renderCell:function(e){return e.value.descripcion},renderEditCell:function(e){return Object(F.jsx)(Lr,{estados:Rr,props:e})},headerAlign:"center"},{field:"fondos_",hide:!0},{field:"fondos",headerName:"Fondos",width:150,type:"singleSelect",editable:!0,renderCell:function(e){return e.value.descripcion},renderEditCell:function(e){return Object(F.jsx)(_r,{fondos_s:Fr,props:e})},headerAlign:"center"},{field:"archivada",headerName:"Generar",width:140,headerAlign:"center",align:"center",renderCell:Wr},{field:"rubro",hide:!0},{field:"rubroID",headerName:"Rubro",width:140,editable:!0,renderCell:function(e){return e.value.nombre},renderEditCell:function(t){return Object(F.jsx)(Er,{rubros:e,props:t})},headerAlign:"center"},{field:"subrubro",hide:!0},{field:"subrubroID",headerName:"Sub Rubro",width:140,editable:!0,renderCell:function(e){return e.value.nombre},renderEditCell:function(e){return Object(F.jsx)(Ur,{subRubros:t,props:e})},headerAlign:"center"},{field:"descripcion",headerName:"Detalle",width:140,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(e){n(t),r(!0)}})}}]},Dr=[{id:1,descripcion:"-"},{id:2,descripcion:"OK"},{id:3,descripcion:"Pendiente"}],Rr=[{id:0,descripcion:"-"},{id:1,descripcion:"Para autorizar Obra"},{id:2,descripcion:"Para pagar"},{id:3,descripcion:"Pagada"},{id:4,descripcion:"Para autorizar AC"},{id:5,descripcion:"Pagado Parcial"},{id:6,descripcion:"Anulado"},{id:7,descripcion:"Cargada en Banco"}],Fr=[{id:1,descripcion:"-"},{id:2,descripcion:"OK cargado"}];function Qr(e){var t=e.idSociety;Ir=t.id;var r={},n=Object(d.i)(),i=qe(),a=i.Prompt,u=i.setIsPromptOpen,s=Object(l.useState)(),f=Object(c.a)(s,2),b=f[0],j=f[1],p=Object(o.useQuery)(["OP",t],(function(){return we("OP/listar/".concat(t.id,"/todas/nulo"))})),h=p.data,m=p.isLoading,O=p.error,v=Object(o.useQueryClient)(),x=Object(o.useQuery)(["rubros",t],(function(){return we("rubro/listar/".concat(t.id))})).data,g=Object(o.useQuery)(["subrubros",t],(function(){return we("subrubro/listar/".concat(t.id,"/0"))})).data,y=Object(o.useQuery)(["grfacturas",t.id],Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("factura/listar/".concat(t.id,"/todas/nada"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).data,C=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(t){var r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n("./".concat(t.id,"/").concat(t.createdAt,"/").concat(t.empresaId,"/").concat(t.numero,"/").concat(null===(r=t.fideicomisos[0])||void 0===r?void 0:r.nombre)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=C.mutate,T=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("OP/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["OP",t]);case 2:return n=v.getQueryData(["OP",t]),i=n.filter((function(e){return e.id!==r})),v.setQueryData(["OP",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return v.setQueryData(["OP",t],n)},onSettled:function(){return v.invalidateQueries(["OP",t])}}),k=T.mutate,A=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we("op/mostrarConFacturas/".concat(t.id,"/").concat(n.id));case 2:return e.abrupt("return",r=e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){var t,n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:kr=r.op,Ar={item:r.item},P(null===(t=kr)||void 0===t?void 0:t.id,null===(n=kr)||void 0===n||null===(i=n.fideicomisos[0])||void 0===i?void 0:i.nombre,null===(a=kr)||void 0===a?void 0:a.numero);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),I=A.mutate;function P(e,t,r){return D.apply(this,arguments)}function D(){return(D=Object(je.a)(be.a.mark((function e(r,n,i){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(br.pdf)(R()).toBlob();case 2:a=e.sent,(o=new FormData).append("logo",a),o.append("id",r),o.append("fideicomiso",n),o.append("numero",i),o.append("archivada",1),Ce("op/modificar/".concat(t.id),o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=function(){return Object(F.jsx)(Tr,{dataOP:kr,dataFacturas:Ar,apiServerUrl:"http://104.131.28.211:3000/",idSociedad:t.id})},Q=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("autorizacion/eliminar/".concat(null===t||void 0===t?void 0:t.id),{id:r.authOBRA,tipoAutorizacion:"obra",opid:r.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.refetchQueries(["OP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),N=Q.mutate,z=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("autorizacion/eliminar/".concat(null===t||void 0===t?void 0:t.id),{id:r.authADM,tipoAutorizacion:"adm",opid:r.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.refetchQueries(["OP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),V=z.mutate,E=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("OP/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,v.cancelQueries(["OP",t]);case 3:return o=v.getQueryData(["OP",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),v.setQueryData(["OP",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return v.setQueryData(["OP",t],n)},onSettled:function(){return v.invalidateQueries(["OP",t])}}),U=E.mutate;return m?"Cargando...":O?"Hubo un error: ".concat(O.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(a,{message:"\xbfEliminar fila?",action:function(){return k(b)}}),Object(F.jsx)(Nt.a,{}),Object(F.jsx)(Ze.a,{rows:h.map((function(e){var t,r,n,i,a,o,c,l,u,d,s,f;return{id:e.id,numero:e.numero,empresa:null===(t=e.empresas[0])||void 0===t?void 0:t.razonSocial,empresaId:e.empresaId,monto:e.monto,moneda:e.moneda,RET_SUSS:e.RET_SUSS,RET_GAN:e.RET_GAN,RET_IVA:e.RET_IVA,rubroId:e.rubroId,estadoRET:{id:e.estadoRET,descripcion:null===Dr||void 0===Dr||null===(r=Dr.find((function(t){return t.id===e.estadoRET})))||void 0===r?void 0:r.descripcion},estadoOP:{id:e.estadoOP,descripcion:null===Rr||void 0===Rr||null===(n=Rr.find((function(t){return t.id===e.estadoOP})))||void 0===n?void 0:n.descripcion},fondos:{id:e.fondos,descripcion:null===Fr||void 0===Fr||null===(i=Fr.find((function(t){return t.id===e.fondos})))||void 0===i?void 0:i.descripcion},fideicomiso:null===(a=e.fideicomisos[0])||void 0===a?void 0:a.nombre,archivada:e.archivada,descripcion:e.descripcion,createdAt:e.createdAt,rubroID:{id:e.rubroId,nombre:null===x||void 0===x||null===(o=x.find((function(t){return t.id===e.rubroId})))||void 0===o?void 0:o.rubro},subrubroID:{id:e.subrubroId,nombre:null===g||void 0===g||null===(c=g.find((function(t){return t.id===e.subRubroId})))||void 0===c?void 0:c.subRubro},apr_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",apr_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",misFacturas:null===y||void 0===y?void 0:y.filter((function(t){return(null===t||void 0===t?void 0:t.OPId)===e.id})),deleteId:e.id,retencion:null===Dr||void 0===Dr||null===(l=Dr.find((function(t){return t.id===e.estadoRET})))||void 0===l?void 0:l.descripcion,aprobado_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",aprobado_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",estado:null===Rr||void 0===Rr||null===(u=Rr.find((function(t){return t.id===e.estadoOP})))||void 0===u?void 0:u.descripcion,fondos_:null===Fr||void 0===Fr||null===(d=Fr.find((function(t){return t.id===e.fondos})))||void 0===d?void 0:d.descripcion,rubro:null===x||void 0===x||null===(s=x.find((function(t){return t.id===e.rubroId})))||void 0===s?void 0:s.rubro,subrubro:null===g||void 0===g||null===(f=g.find((function(t){return t.id===e.subRubroId})))||void 0===f?void 0:f.subRubro,onAuthObra:function(){return N(e)},onAuthAdm:function(){return V(e)},cargarOP:function(){return I(e)},onIrDetalle:function(){return S(e)}}})),onCellEditCommit:U,columns:Pr(x,g,u,j),disableSelectionOnClick:!0,autoHeight:!0,density:"comfortable",scrollbarSize:!0,components:{Toolbar:Nr}})]})}function Nr(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{csvOptions:{fields:["createdAt","fideicomiso","numero","empresa","monto","moneda","RET_SUSS","RET_GAN","RET_IVA","fondos_","retencion","aprobado_obra","aprobado_adm","estado","fondos_","rubro","subrubro","descripcion"]}})})}function zr(e){var t=e.row.onIrDetalle,r=e.row.fideicomiso;return Object(F.jsxs)(Y.a,{onClick:t,children:[r,"  "]})}function Vr(e){var t=e.row.onIrDetalle,r=e.row.numero;return Object(F.jsxs)(Y.a,{onClick:t,children:[r,"  "]})}function Er(e){var t=e.rubros,r=e.props,n=r.id,i=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{rubro:""}]);var o=Object(l.useState)({rubro:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(F.jsx)(mt.a,{value:d,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,o){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:n,field:a,value:o.id},t),e.next=5,r.api.commitCellChange({id:n,field:a});case 5:i.setCellMode(n,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Rubro"}))}})}function Ur(e,t){var r=e.subRubros,n=e.props,i=n.id,a=n.api,o=n.field;r=[].concat(Object(Fe.a)(r.filter((function(e){var t;return e.rubroId===parseInt(null===n||void 0===n||null===(t=n.row)||void 0===t?void 0:t.rubroID.id)}))),[{subRubro:""}]);var u=Object(l.useState)({subRubro:""}),d=Object(c.a)(u,2),s=d[0],f=d[1];return Object(F.jsx)(mt.a,{value:s,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(r),a.setEditCellValue({id:i,field:o,value:r.id},t),e.next=4,n.api.commitCellChange({id:i,field:o});case 4:a.setCellMode(i,o,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:r,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"subRubro"}))}})}function Mr(e){var t=e.retenciones,r=e.props,n=r.id,i=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var o=Object(l.useState)({descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(F.jsx)(mt.a,{value:d,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,o){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:n,field:a,value:o.id},t),e.next=5,r.api.commitCellChange({id:n,field:a});case 5:i.setCellMode(n,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Retencion"}))}})}function Lr(e){var t=e.estados,r=e.props,n=r.id,i=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var o=Object(l.useState)({descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(F.jsx)(mt.a,{value:d,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,o){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!(null===o||void 0===o?void 0:o.id)){e.next=6;break}return i.setEditCellValue({id:n,field:a,value:o.id},t),e.next=5,r.api.commitCellChange({id:n,field:a});case 5:i.setCellMode(n,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Estado"}))}})}function _r(e){var t=e.fondos_s,r=e.props,n=r.id,i=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var o=Object(l.useState)({descripcion:""}),u=Object(c.a)(o,2),d=u[0],s=u[1];return Object(F.jsx)(mt.a,{value:d,onChange:function(){var e=Object(je.a)(be.a.mark((function e(t,o){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s(o),!((null===o||void 0===o?void 0:o.id)>0)){e.next=6;break}return i.setEditCellValue({id:n,field:a,value:o.id},t),e.next=5,r.api.commitCellChange({id:n,field:a});case 5:i.setCellMode(n,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fondos"}))}})}function Br(e){var t=e.row.onAuthObra,r=e.row.apr_obra;return""!==r?Object(F.jsxs)(Y.a,{onClick:function(){return Object(Nt.b)((function(e){var r=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:r,children:"Cancelar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),r()},children:"Desaprobar Obra"})]})}))},children:[r,"  "]}):""}function qr(e){var t=e.row.onAuthAdm,r=e.row.apr_adm;return""!==r?Object(F.jsxs)(Y.a,{onClick:function(){return Object(Nt.b)((function(e){var r=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:r,children:"Cancelar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),r()},children:"Desaprobar Adm"})]})}))},children:[r,"  "]}):""}function Wr(e){var t=e.row.cargarOP,r="OP_"+e.row.fideicomiso+"_"+e.row.numero+".pdf",n=e.row.archivada,i=function(){t(),setTimeout((function(){Object(Nt.b)((function(e){var t=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(F.jsx)(br.PDFDownloadLink,{document:Object(F.jsx)(Tr,{dataOP:kr,dataFacturas:Ar,apiServerUrl:"http://104.131.28.211:3000/",idSociedad:Ir}),fileName:r,children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Descargar"}})]})}))}),800)};return 0===n?Object(F.jsx)(Y.a,{onClick:i,children:"Para Generar"}):Object(F.jsx)(Y.a,{onClick:i,children:"Generada"})}function Hr(e){var t=e.idSociety,r=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(fr,{idSociety:t,loggedUser:r})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Qr,{idSociety:t,loggedUser:r})})]})})]})}var Gr=r(599),Zr=r.n(Gr),$r=function(e,t){return[{field:"createdAt",headerName:"Fecha",editable:!1,width:120,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return Ve(e.value)}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:Kr},{field:"numero",headerName:"Numero",width:130,editable:!1,headerAlign:"center",align:"right",renderCell:Xr},{field:"empresa",headerName:"Raz\xf3n Social",editable:!1,width:160,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",editable:!1,width:125,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",editable:!1,width:60,headerAlign:"center",align:"left"},{field:"PriceCheckIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.authId;return Object(F.jsx)(Zr.a,{onClick:function(r){t(n),e(!0)}})}}]};function Yr(e){var t=e.idSociety,r=e.loggedUser,n=e.tipo,i=qe(),a=i.Prompt,u=i.setIsPromptOpen,s=Object(l.useState)(),f=Object(c.a)(s,2),b=f[0],j=f[1],p=Object(d.i)(),h="";h="OP/listar/".concat(t.id,"adm"===n?"/authADM/nulo":"/authObra/nulo");var m=Object(o.useQuery)(["OP"+n,t],(function(){return we(h)})),O=m.data,v=m.isLoading,x=m.error,g=Object(o.useQueryClient)(),y=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(i){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:i,documento:"op",tipoAutorizacion:n,creador:r.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.refetchQueries(["OP"+n,t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),C=y.mutate,S=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(t){var r;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p("./".concat(t.id,"/").concat(t.createdAt,"/").concat(t.empresaId,"/").concat(t.numero,"/").concat(null===(r=t.fideicomisos[0])||void 0===r?void 0:r.nombre)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T=S.mutate,k=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("OP/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var i,a,o,c,l;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.field,a=r.id,o=r.value,e.next=3,g.cancelQueries(["OP"+n,t]);case 3:return c=g.getQueryData(["OP"+n,t]),l=[].concat(Object(Fe.a)(c.filter((function(e){return e.id!==a}))),[Object(G.a)(Object(G.a)({},c.find((function(e){return e.id===a}))),{},Object(w.a)({},i,o))]),g.setQueryData(["OP"+n,t],l),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,i){return g.setQueryData(["OP"+n,t],i)},onSettled:function(){return g.invalidateQueries(["OP"+n,t])}}),A=k.mutate;return v?"Cargando...":x?"Hubo un error: ".concat(x.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(a,{message:"\xbfAutorizar fila?",action:function(){return C(b)}}),Object(F.jsx)(Ze.a,{rows:O.map((function(e){return{id:e.id,numero:e.numero,empresa:e.empresas[0].razonSocial,monto:e.monto,moneda:e.moneda,fideicomiso:e.fideicomisos[0].nombre,apr_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",apr_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",createdAt:e.createdAt,authId:e.id,onIrDetalle:function(){return T(e)}}})),onCellEditCommit:A,columns:$r(u,j),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Jr}})]})}function Jr(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function Kr(e){var t=e.row.onIrDetalle,r=e.row.fideicomiso;return Object(F.jsxs)(Y.a,{onClick:t,children:[r,"  "]})}function Xr(e){var t=e.row.onIrDetalle,r=e.row.numero;return Object(F.jsxs)(Y.a,{onClick:t,children:[r,"  "]})}function en(e){var t=e.idSociety,r=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsx)(pe.a,{children:Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Yr,{idSociety:t,loggedUser:r,tipo:"adm"})})})})]})}function tn(e){var t=e.idSociety,r=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsx)(pe.a,{children:Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(Yr,{idSociety:t,loggedUser:r,tipo:"obra"})})})})]})}var rn=r(1104);function nn(e){var t=e.idSociety,r=e.empresaId,n=e.OPId,i=qe().Prompt,a=Object(o.useQueryClient)(),u=Object(o.useQuery)(["facturas"],(function(){return we("factura/listar/".concat(t.id,"/opid/0"))})).data,d=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("factura/modificar/".concat(t.id),{id:null===r||void 0===r||null===(i=r.factura)||void 0===i?void 0:i.id,OPId:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.refetchQueries(["facturas",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),s=d.mutate,f=Object(l.useState)(null),b=Object(c.a)(f,2),j=b[0],p=b[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{factura:""},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.setSubmitting,i=r.resetForm,s(t),i(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"N\xfamero Factura",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),n("factura",t)},value:j,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:u?null===u||void 0===u?void 0:u.filter((function(e){return(null===e||void 0===e?void 0:e.empresaId)===parseInt(r)})):[],renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"N\xfamero Factura"}))}}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar Factura"})]})}}),Object(F.jsx)(i,{message:"...error",ok:!0})]})}function an(e){var t=e.idSociety,r=e.OPId,n=qe().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useQuery)(["formOP",t.id],(function(){return we("op/mostrar/".concat(t.id,"/").concat(r))})),c=a.data,l=a.isLoading,u=a.error,d=a.refetch;var s=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("op/modificar/".concat(t.id),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.refetchQueries(["formOP",t]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),f=s.mutate;return l?"Cargando...":u?"Hubo un error: ".concat(u.message):Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{id:r,flagPago:1},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,r){var n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.setSubmitting,r.resetForm,f(t),n(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting;var n,i,a,o,l=e.setFieldValue;return Object(F.jsx)(ve.b,{children:Object(F.jsxs)(rn.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(F.jsx)(rn.a,{item:!0,md:12,children:Object(F.jsx)(rn.a,{item:!0,md:12,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n T\xe9cnica"})})}),Object(F.jsx)(rn.a,{item:!0,md:12,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:6,children:Object(F.jsx)(he.a,{onClick:void setTimeout((function(){d(),console.log("refetch")}),8e3),sx:{width:"61ch"},label:"Detalle",defaultValue:(null===c||void 0===c?void 0:c.descripcion)||"",type:"float",name:"descripcion",onFocus:function(e){return!!c.descripcion&&on(e,l,"descripcion",t.id,r,0)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===c||void 0===c?void 0:c.auth_obra)?null===(n=c.auth_obra[0])||void 0===n||null===(i=n.usuarios[0])||void 0===i?void 0:i.user:""})}),Object(F.jsx)(rn.a,{item:!0,md:12,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:12,children:Object(F.jsx)(rn.a,{item:!0,md:12,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n Administrativa"})})}),Object(F.jsx)(rn.a,{item:!0,md:12,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Sumatoria Facturas:"})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsxs)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:["\xa0",null===c||void 0===c?void 0:c.monto]})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(k.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===c||void 0===c?void 0:c.auth_adm)?null===(a=c.auth_adm[0])||void 0===a||null===(o=a.usuarios[0])||void 0===o?void 0:o.user:""})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Monto a Abonar:"})}),Object(F.jsx)(rn.a,{item:!0,md:10,children:Object(F.jsxs)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:["\xa0",null===c||void 0===c?void 0:c.monto_a_pagar]})}),Object(F.jsx)(rn.a,{item:!0,md:12,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"RET GAN",type:"float",defaultValue:(null===c||void 0===c?void 0:c.RET_GAN)||"",name:"RET_GAN",onChange:function(e){return cn(e,l,"RET_GAN",t.id,r,0)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"RET IVA",type:"float",defaultValue:(null===c||void 0===c?void 0:c.RET_IVA)||"",name:"RET_IVA",onChange:function(e){return cn(e,l,"RET_IVA",t.id,r,0)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"RET SUSS",type:"float",defaultValue:(null===c||void 0===c?void 0:c.RET_SUSS)||"",name:"RET_SUSS",onChange:function(e){return cn(e,l,"RET_SUSS",t.id,r,0)}})}),Object(F.jsx)(rn.a,{item:!0,md:6,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:12,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:12,children:Object(F.jsx)(rn.a,{item:!0,md:12,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h4",children:"Pago"})})}),Object(F.jsx)(rn.a,{item:!0,md:12,children:"\xa0"}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Banco"})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"NRO Cuenta"})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Descripci\xf3n"})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Fecha"})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(k.a,{align:"left",color:"textPrimary",variant:"h5",children:"Monto"})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Banco",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.banco1)||"",name:"banco1",onChange:function(e){return on(e,l,"banco1",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"NRO",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.nro1)||"",name:"nro1",onChange:function(e){return on(e,l,"nro1",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(he.a,{sx:{width:"40ch"},label:"Descripci\xf3n",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.descri1)||"",name:"descri1",onChange:function(e){return on(e,l,"descri1",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Fecha",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.fecha1)||"",name:"fecha1",onChange:function(e){return on(e,l,"fecha1",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.monto1)||"",name:"monto1",onChange:function(e){return cn(e,l,"monto1",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Banco",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.banco2)||"",name:"banco2",onChange:function(e){return on(e,l,"banco2",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"NRO",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.nro2)||"",name:"nro2",onChange:function(e){return on(e,l,"nro2",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(he.a,{sx:{width:"40ch"},label:"Descripci\xf3n",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.descri2)||"",name:"descri2",onChange:function(e){return on(e,l,"descri2",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Fecha",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.fecha2)||"",name:"fecha2",onChange:function(e){return on(e,l,"fecha2",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.monto2)||"",name:"monto2",onChange:function(e){return cn(e,l,"monto2",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Banco",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.banco3)||"",name:"banco3",onChange:function(e){return on(e,l,"banco3",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"NRO",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.nro3)||"",name:"nro3",onChange:function(e){return on(e,l,"nro3",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(he.a,{sx:{width:"40ch"},label:"Descripci\xf3n",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.descri3)||"",name:"descri3",onChange:function(e){return on(e,l,"descri3",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Fecha",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.fecha3)||"",name:"fecha3",onChange:function(e){return on(e,l,"fecha3",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.monto3)||"",name:"monto3",onChange:function(e){return cn(e,l,"monto3",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Banco",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.banco4)||"",name:"banco4",onChange:function(e){return on(e,l,"banco4",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"NRO",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.nro4)||"",name:"nro4",onChange:function(e){return on(e,l,"nro4",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:4,children:Object(F.jsx)(he.a,{sx:{width:"40ch"},label:"Descripci\xf3n",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.descri4)||"",name:"descri4",onChange:function(e){return on(e,l,"descri4",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Fecha",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.fecha4)||"",name:"fecha4",onChange:function(e){return on(e,l,"fecha4",t.id,r,1)}})}),Object(F.jsx)(rn.a,{item:!0,md:2,children:Object(F.jsx)(he.a,{sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:(null===c||void 0===c?void 0:c.OPpago.monto4)||"",name:"monto4",onChange:function(e){return cn(e,l,"monto4",t.id,r,1)}})})]})})}}),Object(F.jsx)(n,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function on(e,t,r,n,i,a){e.preventDefault();var o=e.target.value;t(r,o.toString());var c=Object(w.a)({id:i},r,o);1===a&&(c.flagPago=1),Ce("op/modificar/".concat(n),c)}function cn(e,t,r,n,i,a){e.preventDefault();var o=e.target.value;/^\d{0,7}(\.\d{0,2})?$/.test(o.toString())&&(t(r,o.toString()),on(e,t,r,n,i,a))}var ln=[{field:"empresa",headerName:"Proveedor",width:170,editable:!1,headerAlign:"center"},{field:"detalle",headerName:"Detalle",width:175,editable:!0,headerAlign:"center"},{field:"numero",headerName:"Nro Factura",width:185,editable:!1,headerAlign:"center",align:"center"},{field:"txtOC",headerName:"Nro OC",width:130,editable:!0,headerAlign:"center",align:"center"},{field:"montoTotal",headerName:"Importe",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"link2",headerName:"",width:20,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(F.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"deleteIcon",headerName:"",width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.onDelete;return Object(F.jsx)($e.a,{onClick:function(){return Object(Nt.b)((function(e){var r=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:r,children:"No quiero borrar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),r()},children:"S\xed quiero borrar"})]})}))}})}}];function un(e){var t=e.idSociety,r=e.OPId,n=(e.loggedUser,e.selectedFacturaData),i=Object(o.useQuery)(["facturas",t,n],(function(){return we("factura/listar/".concat(null===t||void 0===t?void 0:t.id,"/opid/").concat(r))})),a=i.data,c=i.isLoading,l=i.error,u=Object(o.useQueryClient)(),d=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),{id:r,OPId:null});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.refetchQueries(["facturas",t,n]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),s=d.mutate;if(c)return"Cargando...";if(l)return"Hubo un error: ".concat(l.message);return Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(Nt.a,{}),Object(F.jsx)(Ze.a,{rows:a.map((function(e){return{id:e.id,empresa:e.empresas[0]?e.empresas[0].razonSocial:"",numero:e.numero,link:e.link,link2:e.link,montoTotal:e.montoTotal,moneda:e.moneda,detalle:e.detalle,txtOC:e.txtOC,fechaIngreso:e.fechaIngreso,fechaVTO:e.fechaVTO,onDelete:function(){return s(e.id)}}})),columns:ln,disableSelectionOnClick:!0,autoHeight:!0,onCellEditCommit:function(e){var r=Object(w.a)({id:e.id},e.field,e.value);Ce("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),r)}})]})}var dn="http://104.131.28.211:3000/";function sn(e){var t=e.idSociety,r=e.loggedUser,n=u.a.useState(!1),i=Object(c.a)(n,2),a=i[0],s=i[1],f=Object(d.j)().idOP,b=Object(d.j)().fecha,j=Object(d.j)().empresaId,p=Object(d.j)().numero,h=Object(d.j)().fideicomiso,m=t.id,O="OP_"+h+"_"+p+".pdf",v=Object(l.useRef)(),x=function(){var e=Object(je.a)(be.a.mark((function e(){var r,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(br.pdf)(g()).toBlob();case 2:r=e.sent,(n=new FormData).append("logo",r),n.append("id",f),n.append("fideicomiso",h),n.append("numero",p),Ce("op/modificar/".concat(t.id),n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){return Object(F.jsx)(Tr,{dataOP:B(C),dataFacturas:w(y),apiServerUrl:dn,idSociedad:m})},y=Object(o.useQuery)(["fa"],(function(){return we("factura/listar/".concat(t.id,"/opid/").concat(f))})).data;function w(e){return e?{item:e}:null}var C=Object(o.useQuery)(["dataOP",t.id],(function(){return we("op/mostrar/".concat(t.id,"/").concat(f))})).data,S=Object(o.useQueryClient)(),T=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:n,documento:"op",tipoAutorizacion:"obra",creador:r.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.refetchQueries(["dataOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),I=T.mutate,P=fn("adm",C,"Autorizar en Obra",null===r||void 0===r?void 0:r["rol.descripcion"]),D=Object(l.useState)(P),R=Object(c.a)(D,2),Q=R[0],N=R[1],z=fn("obra",C,"Autorizar en Obra",null===r||void 0===r?void 0:r["rol.descripcion"]),V=Object(l.useState)(z),E=Object(c.a)(V,2),U=E[0],M=E[1],L=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ce("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:n,documento:"op",tipoAutorizacion:"adm",creador:r.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(je.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.refetchQueries(["dataOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),_=L.mutate;function B(e){return e||null}return Object(F.jsxs)("div",{style:{minHeight:"100vh"},children:[Object(F.jsxs)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:[Object(F.jsx)(A.a,{display:U,sx:{pt:1},children:Object(F.jsx)(Y.a,{onClick:function(){Object(Nt.b)((function(e){var t=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){M("none"),I(f),t()},children:"Autorizar"})]})}))},children:"Autorizar en Obra"})}),Object(F.jsx)(A.a,{display:Q,sx:{pt:1},children:Object(F.jsx)(Y.a,{ref:v,onClick:function(){Object(Nt.b)((function(e){var t=e.closeToast;return Object(F.jsxs)(A.a,{children:[Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(F.jsx)(Y.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){N("none"),_(f),t()},children:"Autorizar"})]})}))},children:"Autorizar ADM"})}),Object(F.jsxs)(A.a,{sx:{pt:1},children:[Object(F.jsx)(Y.a,{onClick:function(){s(!a)},children:a?"Ocultar PDF":"Ver PDF"}),Object(F.jsx)(br.PDFDownloadLink,{document:Object(F.jsx)(Tr,{dataOP:B(C),dataFacturas:w(y),apiServerUrl:dn,idSociedad:m}),fileName:O,children:Object(F.jsx)(Y.a,{variant:"info",onClick:function(){setTimeout((function(){x()}),300)},children:"Descargar"})})]})]}),Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["op:",p.replace("OP_","")," | ",null===t||void 0===t?void 0:t.nombre]})}),Object(F.jsx)(F.Fragment,{children:a?Object(F.jsx)(br.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(F.jsx)(Tr,{dataOP:B(C),dataFacturas:w(y),apiServerUrl:dn,idSociedad:m})}):Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsxs)(rn.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(F.jsx)(rn.a,{item:!0,md:7,children:Object(F.jsxs)(k.a,{align:"left",color:"textPrimary",variant:"h4",children:["Solicitud de Pago: ",p.replace("OP_","")]})}),Object(F.jsx)(rn.a,{item:!0,md:5,children:Object(F.jsx)(k.a,{align:"right",color:"textPrimary",variant:"h5",children:Ee(b)})})]})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(nn,{OPId:f,fecha:b,empresaId:j,idSociety:t,loggedUser:r})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(un,{OPId:f,fecha:b,empresaId:j,idSociety:t,loggedUser:r})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(an,{OPId:f,idSociety:t,loggedUser:r})})]})})})]})}function fn(e,t,r,n){var i=function(e,t,r){var n="";return"manager"===e&&(n=t),e===r&&(n=t),n}("manager",r,n);return"adm"===e?(null===t||void 0===t?void 0:t.auth_adm)&&t.auth_adm[0]&&void 0!==t.auth_adm[0].usuarios[0].user&&(i=""):(null===t||void 0===t?void 0:t.auth_obra)&&t.auth_obra[0]&&void 0!==t.auth_obra[0].usuarios[0].user&&(i=""),""===i?"none":""}function bn(e){var t=e.idSociety,r=e.loggedUser,n=qe().Prompt,i=Object(o.useQueryClient)(),a=Object(o.useQuery)(["fideicomisos"],(function(){return we("fideicomiso/listar/".concat(t.id))})).data,u=Object(o.useQuery)(["proveedores"],(function(){return we("proveedor/listar/".concat(t.id))})).data,d=Object(o.useMutation)((function(e){return Ce("factura/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(n){var a,o;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,i.invalidateQueries(["factura",t]);case 3:return e.next=5,i.getQueryData(["factura",t]);case 5:return a=e.sent,o=[].concat(Object(Fe.a)(a),[Object(G.a)(Object(G.a)({},n),{},{id:(new Date).getTime()})]),i.setQueryData(["factura",t],o),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return i.setQueryData(["factura",t],n)},onSettled:function(){return i.invalidateQueries(["factura",t])}}),s=d.mutate,f=Object(l.useState)(null),b=Object(c.a)(f,2),j=b[0],p=b[1],h=Object(l.useState)(null),m=Object(c.a)(h,2),O=m[0],v=m[1],x=Object(l.useState)(!1),g=Object(c.a)(x,2),y=g[0],w=g[1];return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(ve.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(je.a)(be.a.mark((function e(t,n){var i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n.setSubmitting,n.resetForm,s({numero:t.numero,montoTotal:t.montoTotal,fechaIngreso:t.fechaIngreso,empresaId:t.empresa.id,fideicomisoId:t.fideicomiso.id,moneda:"ARS",creador:r.id}),i(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(F.jsxs)(ve.b,{children:[Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"Fideicomiso",disablePortal:!0,required:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),r("fideicomiso",t)},value:j,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Fideicomiso"}))}}),Object(F.jsx)(ve.a,{as:mt.a,size:"small",label:"Razon Social",disablePortal:!0,required:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){v(t),r("empresa",t)},value:O,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.razonSocial},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===t.id},options:u||[],renderInput:function(e){return Object(F.jsx)(he.a,Object(G.a)(Object(G.a)({},e),{},{label:"Razon Social"}))}}),Object(F.jsx)(ve.a,{as:he.a,label:"Numero",type:"float",required:!0,maxLength:8,size:"small",sx:{width:"20ch"},name:"numero",onChange:function(e){return jn(e,r,"numero")}}),Object(F.jsx)(ve.a,{as:he.a,label:"Monto",required:!0,type:"float",size:"small",sx:{width:"20ch"},name:"montoTotal",onChange:function(e){return jn(e,r,"montoTotal")}}),Object(F.jsx)(Y.a,{type:"submit",disabled:t,children:"Agregar"}),Object(F.jsx)(A.a,{sx:{width:"100%"},children:Object(F.jsx)(sr.a,{in:y,children:Object(F.jsx)(me.a,{action:Object(F.jsx)(I.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){w(!1)},children:Object(F.jsx)(dr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}}),Object(F.jsx)(n,{message:"...error",ok:!0})]})}function jn(e,t,r){e.preventDefault();var n=e.target.value;/^\d{0,9}(\.\d{0,2})?$/.test(n.toString())&&t(r,n.toString())}var pn=function(e,t){return[{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center"},{field:"empresa",headerName:"Razon Social",width:170,editable:!1,headerAlign:"center"},{field:"numero",headerName:"N\xfamero",width:155,editable:!1,headerAlign:"center"},{field:"montoTotal",headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:!0,headerAlign:"center"},{field:"link",headerName:"Link",width:110,editable:!0,headerAlign:"center"},{field:"link2",headerName:"",width:20,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(F.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"fechaIngreso",headerName:"Fecha",width:155,type:"date",editable:!0,headerAlign:"center",align:"center",renderCell:vn},{field:"diasVTO",headerName:"D\xedas VTO",width:140,editable:!0,type:"singleSelect",valueOptions:[0,1,2,3,4,5,6,7,10,14,15,20,21,28,30,40,50,60,70,80,90,100,120,150]},{field:"id",headerName:"VTO",width:155,type:"date",editable:!1,headerAlign:"center",align:"center",renderCell:On},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(r){var n=r.row.deleteId;return Object(F.jsx)($e.a,{onClick:function(r){t(n),e(!0)}})}}]};function hn(e){var t=e.idSociety,r=qe(),n=r.Prompt,i=r.setIsPromptOpen,a=Object(l.useState)(),u=Object(c.a)(a,2),d=u[0],s=u[1],f=Object(o.useQuery)(["factura",t],(function(){return we("factura/listar/".concat(t.id,"/todas/nada"))})),b=f.data,j=f.isLoading,p=f.error,h=Object(o.useQueryClient)(),m=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se("factura/eliminar/".concat(t.id),{id:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["factura",t]);case 2:return n=h.getQueryData(["factura",t]),i=n.filter((function(e){return e.id!==r})),h.setQueryData(["factura",t],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["factura",t],n)},onSettled:function(){return h.invalidateQueries(["factura",t])}}),O=m.mutate,v=Object(o.useMutation)(function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,Ce("factura/modificar/".concat(t.id),Object(w.a)({id:i},n,a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(je.a)(be.a.mark((function e(r){var n,i,a,o,c;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.field,i=r.id,a=r.value,e.next=3,h.cancelQueries(["factura",t]);case 3:return o=h.getQueryData(["factura",t]),c=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==i}))),[Object(G.a)(Object(G.a)({},o.find((function(e){return e.id===i}))),{},Object(w.a)({},n,a))]),h.setQueryData(["factura",t],c),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,r,n){return h.setQueryData(["factura",t],n)},onSettled:function(){return h.invalidateQueries(["factura",t])}}),x=v.mutate;return j?"Cargando...":p?"Hubo un error: ".concat(p.message):Object(F.jsxs)("div",{style:{width:"100%"},children:[Object(F.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(d)}}),Object(F.jsx)(Ze.a,{rows:b.map((function(e){var t,r;return{id:e.id,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",empresaId:e.empresaId,empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(r=e.empresas[0])||void 0===r?void 0:r.razonSocial:"",numero:e.numero,link:e.link,link2:e.link,montoTotal:e.montoTotal,moneda:e.moneda,fechaIngreso:e.fechaIngreso,diasVTO:e.diasVTO,fechaVTO:e.fechaVTO,deleteId:e.id}})),onCellEditCommit:x,columns:pn(i,s),pageSize:25,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:mn}})]})}function mn(){return Object(F.jsx)(Ze.b,{children:Object(F.jsx)(Ze.c,{})})}function On(e){var t=new Date(e.row.fechaIngreso),r=0;return e.row.diasVTO&&e.row.diasVTO>0&&(r=e.row.diasVTO),t.setDate(t.getDate()+r),Ve(t)}function vn(e){return e.row.fechaIngreso?Ve(e.row.fechaIngreso):""}function xn(e){var t,r=e.idSociety,n=e.loggedUser;return Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(Oe.a,{children:Object(F.jsxs)("title",{children:["Facturas | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(F.jsx)(A.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(F.jsxs)(pe.a,{maxWidth:!1,children:[Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(bn,{idSociety:r,loggedUser:n})}),Object(F.jsx)(A.a,{sx:{pt:3},children:Object(F.jsx)(hn,{idSociety:r,loggedUser:n})})]})})]})}function gn(e){var t=e.idSociety.id,r={id:35,numero:56,empresaId:1,monto:"94000",monto_a_pagar:"93445",RET_SUSS:"222",RET_GAN:"333",RET_IVA:"0",estadoRET:2,fideicomisoId:1,certificadoId:null,estado:1,estadoOP:2,fondos:2,archivada:0,descripcion:"wwww",authADM:33,authOBRA:31,createdAt:"01/03/2021",auth_obra:[{id:31,usuarios:[{user:"martin",id:1}]}],auth_adm:[{id:33,usuarios:[{user:"martin",id:1}]}],empresas:[{razonSocial:"Abelson s.a.",CUIT:"30652000076",mail:"test@verelmail.com",CBU:"0070088720000002642004",banco:"Galicia",nroCuenta:"2642-0088-0"}],OPpago:{id:3,OPId:35,banco1:"bna",nro1:"0070088720000002642004",descri1:"123",fecha1:"01/06/2021",monto1:"234.00",banco2:"bna",nro2:"0070088720000002642004",descri2:"asd",fecha2:"01/06/2021",monto2:"444.00",banco3:"",nro3:"",descri3:"",fecha3:"",monto3:"0.00",banco4:null,nro4:null,descri4:null,fecha4:null,monto4:null,usuarioId:1,sociedadId:1,createdAt:"2021-12-05T04:32:09.000Z",updatedAt:"2021-12-18T01:32:01.000Z"},fideicomisos:[{nombre:"Barlovento",logo:"logo_fide_1.png",color:"green",color2:"#D0F0C0"}],items:[{sno:1,desc:"ad sunt culpa occaecat qui",qty:5,rate:405.89},{sno:2,desc:"cillum quis sunt qui aute",qty:5,rate:373.11},{sno:3,desc:"ea commodo labore culpa irure",qty:5,rate:458.61},{sno:4,desc:"nisi consequat et adipisicing dolor",qty:10,rate:725.24},{sno:5,desc:"proident cillum anim elit esse",qty:4,rate:141.02}]},n=u.a.useState(!1),i=Object(c.a)(n,2),a=i[0],o=i[1],l=u.a.useState(!1),d=Object(c.a)(l,2),s=d[0],f=d[1],b=function(){var e=Object(je.a)(be.a.mark((function e(){var t,n;return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(br.pdf)(Object(F.jsx)(Tr,{dataOP:r})).toBlob();case 2:t=e.sent,(n=new FormData).append("logo",t),n.append("id",15),Ce("op/modificar/1",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(){setTimeout((function(){b()}),300)},p=function(){return Object(F.jsxs)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"space-around"},children:[Object(F.jsx)(Y.a,{variant:"dark",onClick:function(){o(!a),f(!1)},children:a?"Ocultar Web":"Ver Web"}),Object(F.jsx)(Y.a,{variant:"dark",onClick:function(){f(!s),o(!1)},children:s?"Ocultar PDF":"Ver PDF"}),Object(F.jsx)(br.PDFDownloadLink,{document:Object(F.jsx)(Tr,{dataOP:r}),fileName:"miReporte.pdf",children:Object(F.jsx)(Y.a,{variant:"info",onClick:j,children:"Crear y Descargar"})})]})};return Object(F.jsxs)("div",{style:{minHeight:"100vh"},children:[Object(F.jsx)(p,{}),Object(F.jsx)(F.Fragment,{children:s?Object(F.jsx)(br.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(F.jsx)(Tr,{dataOP:r,dataFacturas:{item:[{id:31,OPId:35,numero:"333",fechaIngreso:"2021-12-17T00:00:00.000Z",fechaVTO:null,path:null,link:null,empresaId:1,montoTotal:"47000",moneda:"ARS",detalle:null,txtOC:null,estadoFactura:null,fideicomisoId:null,rubroId:null,subRubroId:null,usuarioId:1,empresas:[{razonSocial:"Abelson s.a."}]},{id:19,OPId:35,numero:"1919",fechaIngreso:"2021-11-04T00:00:00.000Z",fechaVTO:null,path:null,link:"aaaa",empresaId:1,montoTotal:"47000",moneda:"ARS",detalle:null,txtOC:null,estadoFactura:null,fideicomisoId:1,rubroId:null,subRubroId:null,usuarioId:1,empresas:[{razonSocial:"Abelson s.a."}]}]},apiServerUrl:"http://104.131.28.211:3000/",idSociedad:t})}):null})]})}function yn(){var e=function(){var e=Object(l.useState)((function(){var e=localStorage.getItem("loggedUserInfo");return e?JSON.parse(e):null})),t=Object(c.a)(e,2),r=t[0],n=t[1];return Object(l.useEffect)((function(){localStorage.setItem("loggedUserInfo",JSON.stringify(r))}),[r]),{loggedUser:r,setLoggedUser:n}}(),t=e.loggedUser,r=e.setLoggedUser,n=Object(l.useState)((function(){var e=localStorage.getItem("idSociety");return e?JSON.parse(e):null})),i=Object(c.a)(n,2),a=i[0],o=i[1];return Object(F.jsxs)(b.a,{theme:y,children:[Object(F.jsx)(m,{}),Object(F.jsx)(d.e,{children:t?Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(d.c,{path:"/",element:Object(F.jsx)(d.a,{to:"".concat(null===a||void 0===a?void 0:a.nombre)})}),Object(F.jsxs)(d.c,{path:":societyName",element:Object(F.jsx)(ae,{setLoggedUser:r,idSociety:a,loggedUser:t}),children:[Object(F.jsx)(d.c,{path:"dolar",element:Object(F.jsx)(et,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:"cac",element:Object(F.jsx)(at,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:"OT",element:Object(F.jsx)(gn,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:"empresa",element:Object(F.jsx)(Ht,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:"persona",element:Object(F.jsx)(Ut,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:"factura",element:Object(F.jsx)(xn,{idSociety:a,loggedUser:t})}),Object(F.jsxs)(d.c,{path:"OP",children:[Object(F.jsx)(d.c,{path:"",element:Object(F.jsx)(Hr,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso",element:Object(F.jsx)(sn,{idSociety:a,loggedUser:t})})]}),Object(F.jsxs)(d.c,{path:"AuthAdmOP",children:[Object(F.jsx)(d.c,{path:"",element:Object(F.jsx)(en,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso",element:Object(F.jsx)(sn,{idSociety:a,loggedUser:t})})]}),Object(F.jsxs)(d.c,{path:"AuthObraOP",children:[Object(F.jsx)(d.c,{path:"",element:Object(F.jsx)(tn,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso",element:Object(F.jsx)(sn,{idSociety:a,loggedUser:t})})]}),Object(F.jsx)(d.c,{path:"proveedores",element:Object(F.jsx)(Dt,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:"usuarios",element:Object(F.jsx)(Ct,{idSociety:a,loggedUser:t})}),Object(F.jsxs)(d.c,{path:"rubro",children:[Object(F.jsx)(d.c,{path:"",element:Object(F.jsx)(dt,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:":idRubro/:rubro",element:Object(F.jsx)(pt,{idSociety:a,loggedUser:t})})]}),Object(F.jsxs)(d.c,{path:"fideicomiso",children:[Object(F.jsx)(d.c,{path:"",element:Object(F.jsx)(Xt,{idSociety:a,loggedUser:t})}),Object(F.jsx)(d.c,{path:":nombreFideicomiso",element:Object(F.jsx)(lr,{idSociety:a,loggedUser:t})})]}),Object(F.jsx)(d.c,{path:"*",element:Object(F.jsx)(Re,{})})]})]}):Object(F.jsxs)(se,{children:[Object(F.jsx)(d.c,{path:":societyName/login",element:Object(F.jsx)(Te,{setLoggedUser:r,idSociety:a,setIdSociety:o})}),Object(F.jsx)(d.c,{path:":societyName",element:Object(F.jsx)(d.a,{to:"login"})}),Object(F.jsx)(d.c,{path:"*",element:Object(F.jsx)(d.a,{to:"/"})})]})})]})}f.a.config();var wn=new o.QueryClient;i.a.render(Object(F.jsx)(a.a,{children:Object(F.jsx)(o.QueryClientProvider,{client:wn,children:Object(F.jsx)(yn,{})})}),document.getElementById("root"))}},[[986,1,2]]]);
//# sourceMappingURL=main.7719fbb7.chunk.js.map