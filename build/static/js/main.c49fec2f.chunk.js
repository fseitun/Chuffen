(this.webpackJsonptsf=this.webpackJsonptsf||[]).push([[0],{1056:function(e,t,i){"use strict";i.r(t);var n=i(43),r=i.n(n),o=i(33),a=i(10),c=i(7),l=i(1),d=i.n(l),s=i(42),u=i(625),b=i.n(u),f=i(1268),j=i(1265),m=i(1238),v=Object(j.a)((function(){return Object(m.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),h=function(){return v(),null},p=i(653),x=i(25),O=["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],g={h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}},y=Object(p.a)({palette:{background:{default:"#F4F6F8",paper:x.a.common.white},primary:{contrastText:"#ffffff",main:"#5664d2"},text:{primary:"#172b4d",secondary:"#6b778c"}},shadows:O,typography:g}),w=i(6),C=i(1256),S=i(1073),A=i(1074),I=i(214),P=i(1075),F=i(1076),T=i(1067),D=i(1251),R=i(1252),N=i(0),k=function(e){var t=e.idSociety;return Object(N.jsx)("img",{alt:"Logo",height:"60px",src:"".concat("http://104.131.28.211:3000/","public/").concat(null===t||void 0===t?void 0:t.logo)})},z=i(1239),_=i(1241),V=i(1242),U=i(1243),M=i(1244),Q=i(1245),E=i(1246),L=i(1247),B=i(1248),W=i(1249),q=i(632),H=i.n(q),G=i(630),$=i.n(G),Y=i(629),Z=i.n(Y),J=i(631),K=i.n(J),X=[{path:"op",icon:z.a,title:"OPs",acceso:"oppago"},{path:"AuthAdmOP",icon:z.a,title:"OPs Auth ADM",acceso:"AuthAdmOP"},{path:"AuthObraOP",icon:z.a,title:"OPs Auth Obra",acceso:"AuthObraOP"},{path:"factura",icon:_.a,title:"Facturas",acceso:"factura"},{path:"OC",icon:V.a,title:"OCs",acceso:"orden_compra"},{path:"contrato",icon:Z.a,title:"Adhesiones",acceso:"contrato"},{path:"cuotas",icon:$.a,title:"Cuotas",acceso:"cuotas"},{path:"cobros",icon:K.a,title:"Cobros",acceso:"cobros"},{path:"proveedores",icon:U.a,title:"Proveedores",acceso:"proveedores"},{path:"fideicomiso",icon:M.a,title:"Fideicomisos",acceso:"fideicomiso"},{path:"fiduciantes",icon:Q.a,title:"Fiduciantes",acceso:"fiduciante"},{path:"banco",icon:E.a,title:"Bancos",acceso:"banco"},{path:"cac",icon:L.a,title:"CAC",acceso:"cac"},{path:"categoria",icon:H.a,title:"Categoria",acceso:"categoria"},{path:"dolar",icon:E.a,title:"D\xf3lar",acceso:"dolar"},{path:"rubro",icon:B.a,title:"Rubros",acceso:"rubro"},{path:"usuarios",icon:W.a,title:"Usuarios",acceso:"usuarios"}];function ee(e){var t,i=e.setisMobileNavOpen,n=e.setLoggedUser,r=e.idSociety,a=e.loggedUser,c={avatar:"/static/images/avatars/"+a.avatar},l=Object(s.i)(),d=Object(s.h)().pathname,u=d.split("/")[d.split("/").length-1];a||f();var b=(null===(t=X.find((function(e){return e.path===u})))||void 0===t?void 0:t.title)||u;function f(){n(null),l("../".concat(null===r||void 0===r?void 0:r.nombre))}return Object(N.jsx)(S.a,{elevation:0,children:Object(N.jsxs)(A.a,{children:[Object(N.jsx)(o.b,{to:"DashBoard",children:Object(N.jsx)(k,{idSociety:r})}),Object(N.jsx)("div",{style:{marginLeft:50,fontSize:24},children:Object(N.jsx)(I.a,{align:"left",color:"white",variant:"h4",children:b.replace("-"," de ").replace("%20"," ").replace("%20"," ").replace("%20"," ").replace("_",": ")})}),Object(N.jsx)(P.a,{sx:{flexGrow:1}}),Object(N.jsx)("div",{children:Object(N.jsx)(I.a,{align:"left",color:"white",variant:"h4",children:null===a||void 0===a?void 0:a.user})}),Object(N.jsx)(F.a,{color:"inherit",children:Object(N.jsx)(T.a,{component:o.b,to:"/",src:c.avatar,sx:{cursor:"pointer",width:30,height:30}})}),Object(N.jsx)(F.a,{color:"inherit",sx:{display:{md:"block",lg:"none"}},onClick:i,children:Object(N.jsx)(D.a,{})}),Object(N.jsx)(F.a,{color:"inherit",onClick:f,children:Object(N.jsx)(R.a,{})})]})})}var te=i(1079),ie=i(1080),ne=i(9),re=i(312),oe=i(1068),ae=i(1078),ce=["href","icon","title"];function le(e){var t=e.href,i=e.icon,n=e.title,r=Object(re.a)(e,ce),a=Object(s.h)(),c=!!t&&!!Object(s.f)({path:t,end:!1},a.pathname);return Object(N.jsx)(oe.a,Object(ne.a)(Object(ne.a)({disableGutters:!0,sx:{display:"flex",py:0}},r),{},{children:Object(N.jsxs)(ae.a,{component:o.c,sx:Object(ne.a)(Object(ne.a)({color:"text.secondary",fontWeight:"medium",justifyContent:"flex-start",letterSpacing:0,py:1.25,textTransform:"none",width:"100%"},c&&{color:"primary.main"}),{},{"& svg":{mr:1}}),to:t,children:[i&&Object(N.jsx)(i,{size:"20"}),Object(N.jsx)("span",{children:n})]})}))}function de(e){var t=e.setisMobileNavOpen,i=e.setLoggedUser,n=e.isMobileNavOpen,r=e.idSociety,o=e.loggedUser,a=Object(s.i)();o||(i(null),a("../".concat(null===r||void 0===r?void 0:r.nombre)));var c=Object(N.jsx)(P.a,{sx:{display:"flex",flexDirection:"column",height:"100%",p:2},children:Object(N.jsx)(te.a,{children:se(X,null===o||void 0===o?void 0:o["rol.accesoTXT"]).map((function(e){return Object(N.jsx)(le,{href:"/".concat(null===r||void 0===r?void 0:r.nombre,"/").concat(e.path),title:e.title,icon:e.icon},e.title)}))})});return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ie.a,{variant:"temporary",sx:{display:{xs:"block",lg:"none"}},anchor:"left",onClose:t,open:n,PaperProps:{sx:{width:256}},children:c}),Object(N.jsx)(ie.a,{variant:"persistent",open:!0,sx:{display:{xs:"none",lg:"block"}},anchor:"left",PaperProps:{sx:{width:256,top:64,height:"calc(100% - 64px)"}},children:c})]})}function se(e,t){var i=[{}];return e.forEach((function(e){-1!==t.indexOf(e.acceso)&&""!==e.acceso.trim()&&null!==e.acceso&&void 0!==e.acceso&&i.push(e)})),i.splice(0,1),i}var ue=Object(C.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),be=Object(C.a)("div")((function(e){var t=e.theme;return Object(w.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},t.breakpoints.up("lg"),{paddingLeft:256})})),fe=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),je=Object(C.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"});function me(e){var t=e.setLoggedUser,i=e.idSociety,n=e.loggedUser,r=Object(s.i)();n||(t(null),r("../".concat(null===i||void 0===i?void 0:i.nombre)));var o=Object(l.useState)(!1),a=Object(c.a)(o,2),d=a[0],u=a[1];return Object(N.jsxs)(ue,{children:[Object(N.jsx)(ee,{setisMobileNavOpen:function(){return u(!d)},setLoggedUser:t,idSociety:i,loggedUser:n}),Object(N.jsx)(de,{idSociety:i,loggedUser:n,setisMobileNavOpen:function(){return u(!d)},isMobileNavOpen:d}),Object(N.jsx)(be,{children:Object(N.jsx)(fe,{children:Object(N.jsx)(je,{children:Object(N.jsx)(s.b,{})})})})]})}var ve=function(e){return Object(N.jsx)(S.a,Object(ne.a)(Object(ne.a)({elevation:0},e),{},{children:Object(N.jsx)(A.a,{sx:{height:64},children:Object(N.jsx)(o.b,{to:"/",children:Object(N.jsx)(k,{})})})}))},he=Object(C.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),pe=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64}),xe=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),Oe=Object(C.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),ge=function(){return Object(N.jsxs)(he,{children:[Object(N.jsx)(ve,{}),Object(N.jsx)(pe,{children:Object(N.jsx)(xe,{children:Object(N.jsx)(Oe,{children:Object(N.jsx)(s.b,{})})})})]})},ye=i(36),we=i(1084),Ce=i(1066),Se=i(1081),Ae=i(1082),Ie=i(1257),Pe=function(e){var t=e.props;return Object(N.jsx)(Se.a,Object(ne.a)(Object(ne.a)({sx:{height:"100%"}},t),{},{children:Object(N.jsxs)(Ae.a,{children:[Object(N.jsxs)(Ce.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(N.jsxs)(Ce.a,{item:!0,children:[Object(N.jsx)(I.a,{color:"textSecondary",gutterBottom:!0,variant:"overline",children:t.nombre}),Object(N.jsx)(I.a,{color:"textPrimary",variant:"h4",children:t.valor})]}),Object(N.jsx)(Ce.a,{item:!0,children:Object(N.jsx)(T.a,{sx:{backgroundColor:t.color,height:56,width:56},children:"LocalShipping"===t.avatar?Object(N.jsx)(U.a,{}):"Business"===t.avatar?Object(N.jsx)(Ie.a,{}):"TrendingUp"===t.avatar?Object(N.jsx)(L.a,{}):Object(N.jsx)(W.a,{})})})]}),Object(N.jsx)(P.a,{sx:{pt:2,display:"flex",alignItems:"center"}})]})}))},Fe=i(20),Te=i(60),De=i(292),Re=i(54),Ne=i(1083),ke=i(709);Te.d.register.apply(Te.d,Object(Fe.a)(Te.m));var ze=function(e){var t=Object(Re.a)(),i={animation:!1,cornerRadius:20,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,xAxes:[{ticks:{fontColor:t.palette.text.secondary},gridLines:{display:!1,drawBorder:!1}}],yAxes:[{ticks:{fontColor:t.palette.text.secondary,beginAtZero:!0,min:0},gridLines:{borderDash:[2],borderDashOffset:[2],color:t.palette.divider,drawBorder:!1,zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2],zeroLineColor:t.palette.divider}}],tooltips:{backgroundColor:t.palette.background.paper,bodyFontColor:t.palette.text.secondary,borderColor:t.palette.divider,borderWidth:1,enabled:!0,footerFontColor:t.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:t.palette.text.primary}};return Object(N.jsxs)(Se.a,Object(ne.a)(Object(ne.a)({},e),{},{children:[Object(N.jsx)(Ne.a,{title:"Unidades vendidas vs por vender por fideicomiso"}),Object(N.jsx)(ke.a,{}),Object(N.jsx)(Ae.a,{children:Object(N.jsx)(P.a,{sx:{height:400,position:"relative"},children:Object(N.jsx)(De.a,{data:{datasets:[{backgroundColor:"#3F51B5",barPercentage:.5,barThickness:12,borderRadius:4,categoryPercentage:.5,data:[18,5,19,27,29,19,20],label:"Unidades vendidas",maxBarThickness:10},{backgroundColor:"#EEEEEE",barPercentage:.5,barThickness:12,borderRadius:4,categoryPercentage:.5,data:[11,20,12,29,30,25,13],label:"Unidades por vender",maxBarThickness:10}],labels:["Barlovento","La Heras","Garden","DV Park","Bouchard","STD","STURIZA"]},options:i})})}),Object(N.jsx)(ke.a,{}),Object(N.jsx)(P.a,{sx:{display:"flex",justifyContent:"flex-end",p:2}})]}))};Te.d.register(Te.a,Te.l,Te.f);var _e=function(e){var t=e.props,i=[{title:null===t||void 0===t?void 0:t.data.labels[0],value:null===t||void 0===t?void 0:t.data.datasets[0].data[0],color:"#3F51B5"},{title:null===t||void 0===t?void 0:t.data.labels[1],value:null===t||void 0===t?void 0:t.data.datasets[0].data[1],color:"#E53935"},{title:null===t||void 0===t?void 0:t.data.labels[2],value:null===t||void 0===t?void 0:t.data.datasets[0].data[2],color:"#FB8C00"}];return Object(N.jsxs)(Se.a,Object(ne.a)(Object(ne.a)({},t),{},{children:[Object(N.jsx)(Ne.a,{title:t.nombre}),Object(N.jsx)(ke.a,{}),Object(N.jsxs)(Ae.a,{children:[Object(N.jsx)(P.a,{sx:{height:300,position:"relative"},children:Object(N.jsx)(De.b,{data:null===t||void 0===t?void 0:t.data,options:{}})}),Object(N.jsx)(P.a,{sx:{display:"flex",justifyContent:"center",pt:2},children:i.map((function(e){var i=e.color,n=e.title,r=e.value;return Object(N.jsxs)(P.a,{sx:{p:1,textAlign:"center"},children:[Object(N.jsx)(I.a,{color:null===t||void 0===t?void 0:t.color,variant:"body1",children:n}),Object(N.jsx)(I.a,{style:{color:i},variant:"h4",children:r})]},n)}))})]})]}))};function Ve(e){e.loggedUser;var t={nombre:"Estado de Fiduciantes",valor:99,color:"gray",avatar:"LocalShipping",data:{datasets:[{data:[666,111,111],backgroundColor:["#3F51B5","#e53935","#FB8C00"],borderWidth:8,borderColor:"#FFFFFF",hoverBorderColor:"#FFFFFF"}],labels:["Pago en termino","Mora + 2 meses","Mora < 2 meses"]}},i={nombre:"Ordenes de Pagos",valor:99,color:"gray",avatar:"LocalShipping",data:{datasets:[{data:[333,333,333],backgroundColor:["#3F51B5","#e53935","#FB8C00"],borderWidth:8,borderColor:"#FFFFFF",hoverBorderColor:"#FFFFFF"}],labels:["Para Autor. Adm","Para Autor. Obra","Para pagar"]}};return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsx)("title",{children:"Dashboard "})}),Object(N.jsx)(P.a,{component:"main",sx:{flexGrow:1,py:8},children:Object(N.jsx)(we.a,{maxWidth:!1,children:Object(N.jsxs)(Ce.a,{container:!0,spacing:3,children:[Object(N.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(N.jsx)(Pe,{props:{nombre:"Proveedores",valor:99,color:"warning.main",avatar:"LocalShipping"}})}),Object(N.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(N.jsx)(Pe,{props:{nombre:"Fiduciantes",valor:99,color:"warning.main",avatar:"People"}})}),Object(N.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(N.jsx)(Pe,{props:{nombre:"Fideicomisos",valor:99,color:"primary.main",avatar:"Business"}})}),Object(N.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(N.jsx)(Pe,{props:{nombre:"CAC",valor:99,color:"error.main",avatar:"TrendingUp"}})}),Object(N.jsx)(Ce.a,{item:!0,lg:6,sm:12,xl:6,xs:12,children:Object(N.jsx)(ze,{})}),Object(N.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(N.jsx)(_e,{props:t,sx:{height:"100%"}})}),Object(N.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(N.jsx)(_e,{props:i,sx:{height:"100%"}})})]})})})]})}var Ue=i(5),Me=i.n(Ue),Qe=i(11),Ee=i(1085),Le=i(1059),Be=i(15),We=i(317),qe=i.n(We),He="http://104.131.28.211:3000/",Ge=function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.get("".concat(He).concat(t));case 2:return i=e.sent,n=i.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.post("".concat(He).concat(t),i);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qe.a.delete("".concat(He).concat(t),{data:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();function Ze(e){var t,i,n=e.setLoggedUser,r=e.setIdSociety,o=Object(l.useContext)(uc),a=Object(s.j)().societyName,d=Object(s.i)(),u=Object(l.useState)("none"),b=Object(c.a)(u,2),f=b[0],j=b[1];return Object(l.useEffect)((function(){!function(e,t){Je.apply(this,arguments)}(a,r)}),[r,a]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{onChangeClientState:function(){},children:Object(N.jsxs)("title",{children:["Login | ",null!==(t=null===o||void 0===o?void 0:o.nombreComercial)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(N.jsxs)(we.a,{maxWidth:"sm",children:[Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsx)("img",{style:{display:"block",margin:"auto",width:"50%",backgroundColor:"#777777"},src:"".concat("http://104.131.28.211:3000/","public/").concat(null===o||void 0===o?void 0:o.logo),alt:"logo"})}),Object(N.jsx)(Be.c,{enableReinitialize:"true",initialValues:{email:"".concat(null!==(i=null===o||void 0===o?void 0:o.dominio)&&void 0!==i?i:""),password:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(o.id,t.email,t.password,n);case 2:if(!e.sent){e.next=6;break}d("/".concat(a,"/DashBoard"),{replace:!0}),e.next=8;break;case 6:j("flex"),i.resetForm();case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){return Object(N.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(N.jsx)(Ee.a,{fullWidth:!0,label:"Correo",margin:"normal",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.email,variant:"outlined"}),Object(N.jsx)(Ee.a,{fullWidth:!0,label:"Contrase\xf1a",margin:"normal",name:"password",autoComplete:"on",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password,variant:"outlined"}),Object(N.jsxs)(P.a,{sx:{py:2},children:[Object(N.jsx)(Le.a,{style:{display:f},severity:"error",onClose:function(){j("none")},children:"Correo y/o contrase\xf1a inv\xe1lidos"}),Object(N.jsx)(ae.a,{color:"primary",disabled:e.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Ingresar"})]})]})}})]})})]})}function Je(){return(Je=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ke(t);case 2:n=e.sent,i(Object(ne.a)({},n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("sociedad/mostrar/".concat(t));case 2:return i=e.sent,localStorage.removeItem("idSociety"),i&&localStorage.setItem("idSociety",JSON.stringify(Object(ne.a)({},i))),e.next=7,i;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,i,n){return tt.apply(this,arguments)}function tt(){return(tt=Object(Qe.a)(Me.a.mark((function e(t,i,n,r){var o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=$e,e.t1="usuario/login/",e.next=4,t;case 4:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),e.t4={mail:i,pass:n},e.next=9,(0,e.t0)(e.t3,e.t4);case 9:return o=e.sent,r(o),e.abrupt("return",null!==o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var it=function(){return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsx)("title",{children:"404"})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(N.jsxs)(we.a,{children:[Object(N.jsx)(I.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: La p\xe1gina no existe"}),Object(N.jsx)(P.a,{sx:{textAlign:"center"},children:Object(N.jsx)("img",{alt:"Under development",src:"/static/images/undraw_page_not_found_su7k.svg",style:{marginTop:50,display:"inline-block",width:560}})})]})})]})};var nt=i(1110),rt=i(1267),ot=i(1264);function at(e){var t=new Date(e);return!isNaN(t.getTime())}function ct(e){try{return(e=e.split("")).splice(2,0,"-"),e.splice(11,0,"-"),e.join("")}catch(t){return console.log("hubo un error: ",t),null}}function lt(e){return void 0===e||null===e?null:new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC"})}function dt(e){return new Date(e).getDate()+" "+new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC",month:"short"})+" "+new Date(e).getFullYear()}function st(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e),"-").concat((1+e.getMonth(e)).toString().padStart(2,"0"),"-").concat(e.getDate(e).toString().padStart(2,"0"))}function ut(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e)).concat((1+e.getMonth(e)).toString().padStart(2,"0")).concat(e.getDate(e).toString().padStart(2,"0"))}function bt(e,t,i,n){return ft.apply(this,arguments)}function ft(){return(ft=Object(Qe.a)(Me.a.mark((function e(t,i,n,r){var o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=""+r,a="".concat(t,"/checknumero/").concat(i,"/").concat(n,"/").concat(o),e.next=4,Ge(a);case 4:return c=e.sent,e.abrupt("return",!!c);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t,i){return mt.apply(this,arguments)}function mt(){return(mt=Object(Qe.a)(Me.a.mark((function e(t,i,n){var r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(t,"/mostrar/").concat(i,"/").concat(n),e.next=3,Ge(r);case 3:return o=e.sent,e.abrupt("return",!!o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){return new Date(e).getDate()+"-"+new Date(e).getMonth()+"-"+new Date(e).getFullYear()}function ht(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e),"-").concat((1+e.getMonth(e)).toString().padStart(2,"0"),"-").concat(e.getDate(e).toString().padStart(2,"0"))}function pt(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e)).concat((1+e.getMonth(e)).toString().padStart(2,"0")).concat(e.getDate(e).toString().padStart(2,"0"))}function xt(e){return void 0===e||null===e?null:new Date(e)}function Ot(e){return Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e))}function gt(e,t,i){var n=0;if(t){var r,o;if("Construci\xf3n"===i){if((n=null===e||void 0===e||null===(r=e.find((function(e){return e.fecha.slice(0,7)===(null===t||void 0===t?void 0:t.slice(0,7))})))||void 0===r?void 0:r.definitivo)<1||null===n)n=null===e||void 0===e||null===(o=e.find((function(e){return e.fecha.slice(0,7)===(null===t||void 0===t?void 0:t.slice(0,7))})))||void 0===o?void 0:o.estimado}else if("Materiales"===i){var a;n=null===e||void 0===e||null===(a=e.find((function(e){return e.fecha.slice(0,7)===(null===t||void 0===t?void 0:t.slice(0,7))})))||void 0===a?void 0:a.materiales}else if("Mano de Obra"===i){var c;n=null===e||void 0===e||null===(c=e.find((function(e){return e.fecha.slice(0,7)===(null===t||void 0===t?void 0:t.slice(0,7))})))||void 0===c?void 0:c.manodeobra}if(!n){var l,d,s=new Date(t.slice(0,10)+" "+t.slice(12,5));if(s.setMonth(s.getMonth()-1),"Construci\xf3n"===i)n=null===e||void 0===e||null===(l=e.find((function(e){return e.fecha.slice(0,7)===ht(s).slice(0,7)})))||void 0===l?void 0:l.definitivo;else if("Materiales"===i){var u;n=null===e||void 0===e||null===(u=e.find((function(e){return e.fecha.slice(0,7)===ht(s).slice(0,7)})))||void 0===u?void 0:u.materiales}else if("Mano de Obra"===i){var b;n=null===e||void 0===e||null===(b=e.find((function(e){return e.fecha.slice(0,7)===ht(s).slice(0,7)})))||void 0===b?void 0:b.manodeobra}if(!n)if(s.setMonth(s.getMonth()-1),"Construci\xf3n"===i)n=null===e||void 0===e||null===(d=e.find((function(e){return e.fecha.slice(0,7)===ht(s).slice(0,7)})))||void 0===d?void 0:d.definitivo;else if("Materiales"===i){var f;n=null===e||void 0===e||null===(f=e.find((function(e){return e.fecha.slice(0,7)===ht(s).slice(0,7)})))||void 0===f?void 0:f.materiales}else if("Mano de Obra"===i){var j;n=null===e||void 0===e||null===(j=e.find((function(e){return e.fecha.slice(0,7)===ht(s).slice(0,7)})))||void 0===j?void 0:j.manodeobra}}}return n}var yt=i(733),wt=i(734),Ct=i(1092);function St(){var e=Object(l.useState)(!1),t=Object(c.a)(e,2),i=t[0],n=t[1];return{Prompt:function(e){var t=e.ok,n=void 0!==t&&t,o=e.action,a=void 0===o?function(){}:o,c=e.message,l=void 0===c?"\xbfEst\xe1s seguro de eliminar este registro?":c;return Object(N.jsx)("div",{children:Object(N.jsxs)(yt.a,{open:i,onClose:r,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(N.jsx)(wt.a,{id:"alert-dialog-title",children:l}),Object(N.jsx)(Ct.a,{children:n?Object(N.jsx)(ae.a,{onClick:r,children:"Ok"}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ae.a,{onClick:r,children:"No"}),Object(N.jsx)(ae.a,{onClick:function(){return function(e){e(),r()}(a)},autoFocus:!0,children:"S\xed"})]})})]})})},setIsPromptOpen:n};function r(){n(!1)}}function At(e){var t=e.loggedUser,i=Object(l.useContext)(uc),n=St(),r=n.setIsPromptOpen,o=n.Prompt,c=Object(a.useQueryClient)(),d=Object(a.useMutation)((function(e){return $e("dolar/agregar/".concat(i.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=t.id,e.next=3,c.invalidateQueries(["dolar",i]);case 3:return e.next=5,c.getQueryData(["dolar",i]);case 5:return r=e.sent,o=[].concat(Object(Fe.a)(r),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),c.setQueryData(["dolar",i],o),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return c.setQueryData(["dolar",i],n)},onSettled:function(){return c.invalidateQueries(["dolar",i])}}),s=d.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{fecha:new Date,mep:"",BCRA:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.setSubmitting,a=n.resetForm,t.fecha=st(t.fecha),e.next=4,jt("dolar",i.id,t.fecha);case 4:if(!e.sent){e.next=8;break}r(!0),e.next=9;break;case 8:s(t);case 9:a(),o(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{component:Pt,label:"Fecha",type:"date",name:"fecha"}),Object(N.jsx)(Be.a,{as:Ee.a,label:"BCRA",size:"small",type:"float",maxLength:4,name:"BCRA",onChange:function(e){return It(e,i,"BCRA")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"MEP",size:"small",type:"float",name:"mep",onChange:function(e){return It(e,i,"mep")}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(o,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function It(e,t,i){e.preventDefault();var n=e.target.value;/^\d{0,3}(\.\d{0,2})?$/.test(n.toString())&&t(i,n.toString())}function Pt(e){var t=e.field,i=e.form,n=t.name,r=t.value,o=i.setFieldValue;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:r,onChange:function(e){return o(n,e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}var Ft=i(22),Tt=i(1258),Dt=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return lt(e.value)}},{field:"BCRA",preProcessEditCellProps:kt,headerName:"BCRA",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mep",preProcessEditCellProps:kt,headerName:"MEP",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function Rt(){var e=Object(l.useContext)(uc),t=St(),i=t.Prompt,n=t.setIsPromptOpen,r=Object(l.useState)(),o=Object(c.a)(r,2),d=o[0],s=o[1],u=Object(a.useQuery)(["dolar",e],(function(){return Ge("dolar/listar/".concat(e.id))})),b=u.data,f=u.isLoading,j=u.error,m=Object(a.useQueryClient)(),v=Object(a.useMutation)(function(){var t=Object(Qe.a)(Me.a.mark((function t(i){return Me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye("dolar/eliminar/".concat(e.id),{id:i});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(){var t=Object(Qe.a)(Me.a.mark((function t(i){var n,r;return Me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.cancelQueries(["dolar",e]);case 2:return n=m.getQueryData(["dolar",e]),r=n.filter((function(e){return e.id!==i})),m.setQueryData(["dolar",e],r),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,i,n){return m.setQueryData(["dolar",e],n)},onSettled:function(){return m.invalidateQueries(["dolar",e])}}),h=v.mutate,p=Object(a.useMutation)(function(){var t=Object(Qe.a)(Me.a.mark((function t(i){var n,r,o;return Me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.field,r=i.id,o=i.value,t.next=3,$e("dolar/modificar/".concat(e.id),Object(w.a)({id:r},n,o));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(){var t=Object(Qe.a)(Me.a.mark((function t(i){var n,r,o,a,c;return Me.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.field,r=i.id,o=i.value,t.next=3,m.cancelQueries(["dolar",e]);case 3:return a=m.getQueryData(["dolar",e]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),m.setQueryData(["dolar",e],c),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,i,n){return m.setQueryData(["dolar",e],n)},onSettled:function(){return m.invalidateQueries(["dolar",e])}}),x=p.mutate,O=l.useState([{field:"fecha",sort:"desc"}]),g=Object(c.a)(O,2),y=g[0],C=g[1],S=Object(l.useState)(25),A=Object(c.a)(S,2),I=A[0],P=A[1];return f?"Cargando...":j?"Hubo un error: ".concat(j.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(i,{message:"\xbfEliminar fila?",action:function(){return h(d)}}),Object(N.jsx)(Ft.a,{rows:b.map((function(e){return{id:e.id,fecha:e.fecha,BCRA:e.BCRA,blue:e.blue,mep:e.mep,descripcion:e.descripcion,deleteId:e.id}})),onCellEditCommit:x,columns:Dt(n,s),sortModel:y,onSortModelChange:function(e){return e[0]!==y[0]&&function(e){var t;0===e.length&&(e.push(y[0]),"asc"===(null===(t=y[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),C(e)}(e)},pageSize:I,onPageSizeChange:function(e){return P(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Nt}})]})}function Nt(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["fecha","BCRA","blue","mep"]}})]})}function kt(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(ne.a)(Object(ne.a)({},e.props),{},{error:t})}function zt(e){var t,i=e.loggedUser,n=Object(l.useContext)(uc);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["D\xf3lar | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(At,{loggedUser:i})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Rt,{loggedUser:i})})]})})]})}function _t(e){var t=e.idSociety,i=e.loggedUser,n=St(),r=n.Prompt,o=n.setIsPromptOpen,c=Object(a.useQueryClient)(),l=Object(a.useMutation)((function(e){return $e("cac/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,c.cancelQueries(["cac",t]);case 3:return e.next=5,c.getQueryData(["cac",t]);case 5:return r=e.sent,o=[].concat(Object(Fe.a)(r),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),c.setQueryData(["cac",t],o),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return c.setQueryData(["cac",t],n)},onSettled:function(){return c.invalidateQueries(["cac",t])}}),d=l.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{fecha:new Date,estimado:"",definitivo:"",materiales:"",manodeobra:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(i,n){var r,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,a=n.resetForm,i.fecha=(c=i.fecha,"".concat(c.getFullYear(c),"-").concat((1+c.getMonth(c)).toString().padStart(2,"0"),"-01")),e.next=4,jt("cac",t.id,i.fecha);case 4:if(!e.sent){e.next=8;break}o(!0),e.next=9;break;case 8:d(i);case 9:a(),r(!1);case 11:case"end":return e.stop()}var c}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{component:u,label:"Fecha",type:"date",name:"fecha"}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Estimado",required:!0,type:"float",style:{width:"140px"},size:"small",maxLength:4,name:"estimado",onChange:function(e){return s(e,i,"estimado")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Definitivo",required:!0,type:"float",size:"small",style:{width:"140px"},name:"definitivo",onChange:function(e){return s(e,i,"definitivo")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Materiales",required:!0,type:"float",size:"small",style:{width:"140px"},name:"materiales",onChange:function(e){return s(e,i,"materiales")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Mano de obra",required:!0,type:"float",size:"small",style:{width:"140px"},name:"manodeobra",onChange:function(e){return s(e,i,"manodeobra")}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(r,{message:"Ya hay un mes con informaci\xf3n, por favor editar el mes desde la grilla.",ok:!0})]});function s(e,t,i){e.preventDefault();var n=e.target.value;/^\d{0,4}(\.\d{0,2})?$/.test(n.toString())&&t(i,n.toString())}function u(e){var t=e.field,i=e.form,n=t.name,r=t.value,o=i.setFieldValue;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:r,onChange:function(e){return o(n,e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}}var Vt=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"estimado",headerName:"Estimado",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Mt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"definitivo",headerName:"Definitivo",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Mt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"materiales",headerName:"Materiales",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Mt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"manodeobra",headerName:"Mano de Obra",width:180,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Mt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function Ut(e){var t=e.idSociety,i=St(),n=i.Prompt,r=i.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),s=d[0],u=d[1],b=Object(a.useQuery)(["cac",t],(function(){return Ge("CAC/listar/".concat(t.id))})),f=b.data,j=b.isLoading,m=b.error,v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cac/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["cac",t]);case 2:return n=v.getQueryData(["cac",t]),r=n.filter((function(e){return e.id!==i})),v.setQueryData(["cac",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return v.setQueryData(["cac",t],n)},onSettled:function(){return v.invalidateQueries(["cac",t])}}),p=h.mutate,x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("cac/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,v.cancelQueries(["cac",t]);case 3:return a=v.getQueryData(["cac",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),v.setQueryData(["cac",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return v.setQueryData(["cac",t],n)},onSettled:function(){return v.invalidateQueries(["cac",t])}}),O=x.mutate,g=l.useState([{field:"fecha",sort:"desc"}]),y=Object(c.a)(g,2),C=y[0],S=y[1],A=Object(l.useState)(25),I=Object(c.a)(A,2),P=I[0],F=I[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return p(s)}}),Object(N.jsx)(Ft.a,{rows:f.map((function(e){return{id:e.id,fecha:e.fecha,estimado:e.estimado,definitivo:e.definitivo,materiales:e.materiales,manodeobra:e.manodeobra,deleteId:e.id}})),onCellEditCommit:O,columns:Vt(r,u),sortModel:C,onSortModelChange:function(e){return e[0]!==C[0]&&function(e){var t;0===e.length&&(e.push(C[0]),"asc"===(null===(t=C[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),S(e)}(e)},pageSize:P,onPageSizeChange:function(e){return F(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:function(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["fecha","estimado","definitivo"]}})]})}}})]})}function Mt(e){var t=!/^\d{0,4}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(ne.a)(Object(ne.a)({},e.props),{},{error:t})}function Qt(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["CAC | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(_t,{idSociety:i,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ut,{idSociety:i,loggedUser:n})})]})})]})}function Et(e){var t=e.idSociety,i=e.loggedUser,n=St().Prompt,r=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("rubro/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,r.invalidateQueries(["rubro",t]);case 3:return e.next=5,r.getQueryData(["rubro",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),r.setQueryData(["rubro",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return r.setQueryData(["rubro",t],n)},onSettled:function(){return r.invalidateQueries(["rubro",t])}}),c=o.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{rubro:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,c(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,label:"Rubro",required:!0,size:"small",type:"float",name:"rubro"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(n,{message:"El rubro no puede estar en blanco",ok:!0})]})}var Lt=function(e,t){return[{field:"rubro",headerName:"Rubro",width:260,editable:!1,headerAlign:"center",align:"left",renderCell:qt},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function Bt(e){var t=e.idSociety,i=St(),n=i.Prompt,r=i.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),u=d[0],b=d[1],f=Object(s.i)(),j=Object(a.useQuery)(["rubro",t],(function(){return Ge("rubro/listar/".concat(t.id))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("rubro/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["rubro",t]);case 2:return n=p.getQueryData(["rubro",t]),r=n.filter((function(e){return e.id!==i})),p.setQueryData(["rubro",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["rubro",t],n)},onSettled:function(){return p.invalidateQueries(["rubro",t])}}),O=x.mutate,g=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("rubro/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,p.cancelQueries(["rubro",t]);case 3:return a=p.getQueryData(["rubro",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),p.setQueryData(["rubro",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["rubro",t],n)},onSettled:function(){return p.invalidateQueries(["rubro",t])}}),y=g.mutate,C=l.useState([{field:"rubro",sort:"asc"}]),S=Object(c.a)(C,2),A=S[0],I=S[1],P=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("./".concat(t.id,"/Subrubros-").concat(t.rubro)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=P.mutate,T=Object(l.useState)(25),D=Object(c.a)(T,2),R=D[0],k=D[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(u)}}),Object(N.jsx)(Ft.a,{rows:m.map((function(e){return{id:e.id,rubro:e.rubro,deleteId:e.id,onIrDetalle:function(){return F(e)}}})),onCellEditCommit:y,columns:Lt(r,b),sortModel:A,onSortModelChange:function(e){return e[0]!==A[0]&&function(e){var t;0===e.length&&(e.push(A[0]),"asc"===(null===(t=A[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),I(e)}(e)},pageSize:R,onPageSizeChange:function(e){return k(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Wt}})]})}function Wt(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["rubro"]}})]})}function qt(e){var t=e.row.onIrDetalle,i=e.row.rubro;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function Ht(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Rubro | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Et,{idSociety:i,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Bt,{idSociety:i,loggedUser:n})})]})})]})}function Gt(e){var t=e.idSociety,i=e.loggedUser,n=St().Prompt,r=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("categoria/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,r.invalidateQueries(["categoria",t]);case 3:return e.next=5,r.getQueryData(["categoria",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),r.setQueryData(["categoria",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return r.setQueryData(["categoria",t],n)},onSettled:function(){return r.invalidateQueries(["categoria",t])}}),c=o.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{codigo:"",concepto:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,c(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,label:"C\xf3digo",required:!0,size:"small",type:"number",name:"codigo"}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Concepto",required:!0,size:"small",name:"concepto"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(n,{message:"El C\xf3digo no puede estar en blanco",ok:!0})]})}var $t=function(e,t){return[{field:"id",headerName:"id",width:90,editable:!1,hide:!0,headerAlign:"center",align:"left"},{field:"codigo",headerName:"C\xf3digo",width:130,editable:!0,headerAlign:"center",align:"left"},{field:"anexo",headerName:"Impuesto de",width:120,editable:!0,headerAlign:"center",align:"left"},{field:"concepto",headerName:"Concepto",width:200,editable:!0,headerAlign:"center",align:"left"},{field:"regimen",headerName:"R\xe9gimen",width:200,editable:!0,headerAlign:"center",align:"left"},{field:"inscriptos",headerName:"Inscriptos %",width:180,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"noInscriptos",headerName:"No Inscr. HUM y SUC %",width:230,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"noInscrptoResto",headerName:"No Inscr. Resto %",width:200,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"inscriptosNoRet",headerName:"Inscriptos No Ret. $",width:220,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"escalaMonto",headerName:"Escala Monto",width:220,editable:!0,headerAlign:"center",align:"left"},{field:"escalaPorcentaje",headerName:"Escala %",width:220,editable:!0,headerAlign:"center",align:"left"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function Yt(e){var t=e.idSociety,i=St(),n=i.Prompt,r=i.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),s=d[0],u=d[1],b=Object(a.useQuery)(["categoria",t],(function(){return Ge("categoria/listar/".concat(t.id))})),f=b.data,j=b.isLoading,m=b.error,v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("categoria/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["categoria",t]);case 2:return n=v.getQueryData(["categoria",t]),r=n.filter((function(e){return e.id!==i})),v.setQueryData(["categoria",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return v.setQueryData(["categoria",t],n)},onSettled:function(){return v.invalidateQueries(["categoria",t])}}),p=h.mutate,x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("categoria/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,v.cancelQueries(["categoria",t]);case 3:return a=v.getQueryData(["categoria",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),v.setQueryData(["categoria",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return v.setQueryData(["categoria",t],n)},onSettled:function(){return v.invalidateQueries(["categoria",t])}}),O=x.mutate,g=l.useState([{field:"id",sort:"asc"}]),y=Object(c.a)(g,2),C=y[0],S=y[1],A=Object(l.useState)(25),P=Object(c.a)(A,2),F=P[0],T=P[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return p(s)}}),Object(N.jsx)(Ft.a,{rows:f.map((function(e){return{id:e.id,codigo:e.codigo,anexo:e.anexo,concepto:e.concepto,regimen:e.regimen,inscriptos:e.inscriptos,noInscriptos:e.noInscriptos,noInscrptoResto:e.noInscrptoResto,inscriptosNoRet:e.inscriptosNoRet,escalaMonto:e.escalaMonto,escalaPorcentaje:e.escalaPorcentaje,deleteId:e.id}})),onCellEditCommit:O,columns:$t(r,u),sortModel:C,onSortModelChange:function(e){return e[0]!==C[0]&&function(e){var t;0===e.length&&(e.push(C[0]),"asc"===(null===(t=C[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),S(e)}(e)},pageSize:F,onPageSizeChange:function(e){return T(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Zt}}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function Zt(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["categoria"]}})]})}function Jt(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Categoria | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Gt,{idSociety:i,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Yt,{idSociety:i,loggedUser:n})})]})})]})}function Kt(e){var t=e.idSociety,i=e.idRubro,n=e.loggedUser,r=St().Prompt,o=Object(a.useQueryClient)(),c=Object(a.useMutation)((function(e){return $e("subrubro/agregar/".concat(t.id,"/").concat(i),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var r,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.creador=n.id,e.next=3,o.invalidateQueries(["subrubro",t]);case 3:return e.next=5,o.getQueryData(["subrubro",t]);case 5:return r=e.sent,a=[].concat(Object(Fe.a)(r),[Object(ne.a)(Object(ne.a)({},i),{},{id:(new Date).getTime()})]),o.setQueryData(["subrubro",t],a),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return o.setQueryData(["subrubro",t],n)},onSettled:function(){return o.invalidateQueries(["subrubro",t])}}),l=c.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{subRubro:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,l(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,label:"SubRubro",required:!0,size:"small",type:"float",name:"subRubro"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(r,{message:"El subrubro no puede estar en blanco",ok:!0})]})}var Xt=function(e,t){return[{field:"subRubro",headerName:"SubRubro",width:260,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function ei(e){var t=e.idSociety,i=e.idRubro,n=St(),r=n.Prompt,o=n.setIsPromptOpen,d=Object(l.useState)(),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(a.useQuery)(["subrubro",t],(function(){return Ge("subrubro/listar/".concat(t.id,"/").concat(i))})),j=f.data,m=f.isLoading,v=f.error,h=Object(a.useQueryClient)(),p=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("subrubro/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["subrubro",t]);case 2:return n=h.getQueryData(["subrubro",t]),r=n.filter((function(e){return e.id!==i})),h.setQueryData(["subrubro",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return h.setQueryData(["subrubro",t],n)},onSettled:function(){return h.invalidateQueries(["subrubro",t])}}),x=p.mutate,O=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("subrubro/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,h.cancelQueries(["subrubro",t]);case 3:return a=h.getQueryData(["subrubro",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),h.setQueryData(["subrubro",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return h.setQueryData(["subrubro",t],n)},onSettled:function(){return h.invalidateQueries(["subrubro",t])}}),g=O.mutate,y=l.useState([{field:"subRubro",sort:"asc"}]),C=Object(c.a)(y,2),S=C[0],A=C[1],I=Object(l.useState)(25),P=Object(c.a)(I,2),F=P[0],T=P[1];return m?"Cargando...":v?"Hubo un error: ".concat(v.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(u)}}),Object(N.jsx)(Ft.a,{rows:j.map((function(e){return{id:e.id,subRubro:e.subRubro,deleteId:e.id}})),onCellEditCommit:g,compone:!0,columns:Xt(o,b),sortModel:S,onSortModelChange:function(e){return e[0]!==S[0]&&function(e){var t;0===e.length&&(e.push(S[0]),"asc"===(null===(t=S[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),A(e)}(e)},pageSize:F,onPageSizeChange:function(e){return T(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:ti}})]})}function ti(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["subRubro"]}})]})}function ii(e){var t,i=e.idSociety,n=e.loggedUser,r=Object(s.j)().idRubro,o=parseInt(r);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["SubRubro | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Kt,{idSociety:i,idRubro:o,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ei,{idSociety:i,idRubro:o,loggedUser:n})})]})})]})}function ni(e){var t=e.idSociety,i=e.loggedUser,n=St().Prompt,r=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("banco/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,r.invalidateQueries(["banco",t]);case 3:return e.next=5,r.getQueryData(["banco",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),r.setQueryData(["banco",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return r.setQueryData(["banco",t],n)},onSettled:function(){return r.invalidateQueries(["banco",t])}}),c=o.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{banco:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,c(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,label:"Banco",required:!0,size:"small",type:"float",name:"banco"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(n,{message:"El Banco no puede estar en blanco",ok:!0})]})}var ri=function(e,t){return[{field:"banco",headerName:"Banco",width:170,editable:!1,headerAlign:"center",align:"center",renderCell:ci},{field:"descripcionLarga",headerName:"Descripcion",width:250,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function oi(e){var t=e.idSociety,i=St(),n=i.Prompt,r=i.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),u=d[0],b=d[1],f=Object(s.i)(),j=Object(a.useQuery)(["banco",t],(function(){return Ge("banco/listar/".concat(t.id))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("banco/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["banco",t]);case 2:return n=p.getQueryData(["banco",t]),r=n.filter((function(e){return e.id!==i})),p.setQueryData(["banco",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["banco",t],n)},onSettled:function(){return p.invalidateQueries(["banco",t])}}),O=x.mutate,g=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("banco/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,p.cancelQueries(["banco",t]);case 3:return a=p.getQueryData(["banco",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),p.setQueryData(["banco",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["banco",t],n)},onSettled:function(){return p.invalidateQueries(["banco",t])}}),y=g.mutate,C=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("./".concat(t.id,"/Cuentas de Banco-").concat(t.banco)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=C.mutate,A=l.useState([{field:"banco",sort:"asc"}]),P=Object(c.a)(A,2),F=P[0],T=P[1],D=Object(l.useState)(25),R=Object(c.a)(D,2),k=R[0],z=R[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(u)}}),Object(N.jsx)(Ft.a,{rows:m.map((function(e){return{id:e.id,banco:e.banco,descripcionLarga:e.descripcionLarga,deleteId:e.id,onIrDetalle:function(){return S(e)}}})),onCellEditCommit:y,columns:ri(r,b),sortModel:F,onSortModelChange:function(e){return e[0]!==F[0]&&function(e){var t;0===e.length&&(e.push(F[0]),"asc"===(null===(t=F[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),T(e)}(e)},pageSize:k,onPageSizeChange:function(e){return z(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:ai}}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function ai(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["banco","descripcionLarga"]}})]})}function ci(e){var t=e.row.onIrDetalle,i=e.row.banco;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function li(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Banco | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ni,{idSociety:i,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(oi,{idSociety:i,loggedUser:n})})]})})]})}function di(e){var t=e.idSociety,i=e.loggedUser,n=St().Prompt,r=Object(a.useQueryClient)(),o=Object(s.j)().idBanco,c=Object(a.useMutation)((function(e){return $e("cuentabanco/agregar/".concat(t.id,"/").concat(o),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,r.invalidateQueries(["cuentabanco",t]);case 3:return e.next=5,r.getQueryData(["cuentabanco",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),r.setQueryData(["cuentabanco",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return r.setQueryData(["cuentabanco",t],n)},onSettled:function(){return r.invalidateQueries(["cuentabanco",t])}}),l=c.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{cuentaBanco:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,l(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,label:"Cuenta",required:!0,size:"small",type:"float",name:"cuentaBanco"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(n,{message:"El cuentabanco no puede estar en blanco",ok:!0})]})}var si=function(e,t){return[{field:"cuentaBanco",headerName:"Cuenta",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"descripcionLarga",headerName:"Descripcion",width:250,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]};function ui(e){var t=e.idSociety,i=St(),n=i.Prompt,r=i.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),u=d[0],b=d[1],f=Object(s.j)().idBanco,j=Object(a.useQuery)(["cuentabanco",t],(function(){return Ge("cuentabanco/listar/".concat(t.id,"/").concat(f))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cuentabanco/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["cuentabanco",t]);case 2:return n=p.getQueryData(["cuentabanco",t]),r=n.filter((function(e){return e.id!==i})),p.setQueryData(["cuentabanco",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["cuentabanco",t],n)},onSettled:function(){return p.invalidateQueries(["cuentabanco",t])}}),O=x.mutate,g=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("cuentabanco/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,p.cancelQueries(["cuentabanco",t]);case 3:return a=p.getQueryData(["cuentabanco",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),p.setQueryData(["cuentabanco",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["cuentabanco",t],n)},onSettled:function(){return p.invalidateQueries(["cuentabanco",t])}}),y=g.mutate,C=l.useState([{field:"cuentaBanco",sort:"asc"}]),S=Object(c.a)(C,2),A=S[0],P=S[1],F=Object(l.useState)(25),T=Object(c.a)(F,2),D=T[0],R=T[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return O(u)}}),Object(N.jsx)(Ft.a,{sortModel:A,rows:m.map((function(e){return{id:e.id,cuentaBanco:e.cuentaBanco,descripcionLarga:e.descripcionLarga,deleteId:e.id}})),onCellEditCommit:y,columns:si(r,b),onSortModelChange:function(e){return e[0]!==A[0]&&function(e){var t;0===e.length&&(e.push(A[0]),"asc"===(null===(t=A[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),P(e)}(e)},pageSize:D,onPageSizeChange:function(e){return R(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:bi}}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function bi(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["cuentaBanco","descripcionLarga"]}})]})}function fi(e){var t,i=e.idSociety,n=e.loggedUser,r=Object(s.j)().idRubro,o=parseInt(r);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["CuentaBanco | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(di,{idSociety:i,idRubro:o,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ui,{idSociety:i,idRubro:o,loggedUser:n})})]})})]})}function ji(e){var t=e.idSociety,i=e.loggedUser,n=St().Prompt,r=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("usuario/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,r.invalidateQueries(["usuario",t]);case 3:return e.next=5,r.getQueryData(["usuario",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),r.setQueryData(["usuario",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return r.setQueryData(["usuario",t],n)},onSettled:function(){return r.invalidateQueries(["usuario",t])}}),c=o.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{user:"",mail:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,c(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,required:!0,size:"small",label:"Usuario",type:"string",maxLength:30,name:"user"}),Object(N.jsx)(Be.a,{as:Ee.a,required:!0,size:"small",label:"Mail",type:"mail",name:"mail"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(n,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}var mi=i(1094),vi=function(e,t){return[{field:"user",headerName:"Usuario",width:170,editable:!0,headerAlign:"center"},{field:"mail",headerName:"Mail",width:220,headerAlign:"center"},{field:"pass",headerName:"Clave",width:150,editable:!0,sortable:!1,filterable:!1,headerAlign:"center",renderCell:gi},{field:"rolId",headerName:"Rol",editable:!0,width:160,renderEditCell:function(e){return Object(N.jsx)(xi,{roles:hi,props:e})},headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,sortable:!1,filterable:!1,headerAlign:"center",align:"center",renderCell:function(i){var n=i.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(i){t(n),e(!0)}})}}]},hi=[{id:1,rol_descripcion:"administrativo"},{id:2,rol_descripcion:"obra"},{id:3,rol_descripcion:"manager"},{id:4,rol_descripcion:"vista"},{id:5,rol_descripcion:"blue"}];function pi(e){var t=e.idSociety,i=St(),n=i.Prompt,r=i.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),s=d[0],u=d[1],b=Object(a.useQuery)(["usuario",t],(function(){return Ge("usuario/listar/".concat(t.id))})),f=b.data,j=b.isLoading,m=b.error,v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("usuario/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["usuario",t]);case 2:return n=v.getQueryData(["usuario",t]),r=n.filter((function(e){return e.id!==i})),v.setQueryData(["usuario",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return v.setQueryData(["usuario",t],n)},onSettled:function(){return v.invalidateQueries(["usuario",t])}}),p=h.mutate,x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("usuario/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,v.cancelQueries(["usuario",t]);case 3:return a=v.getQueryData(["usuario",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),v.setQueryData(["usuario",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return v.setQueryData(["usuario",t],n)},onSettled:function(){return v.invalidateQueries(["usuario",t])}}),O=x.mutate,g=l.useState([{field:"user",sort:"asc"}]),y=Object(c.a)(g,2),C=y[0],S=y[1],A=Object(l.useState)(25),I=Object(c.a)(A,2),F=I[0],T=I[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(N.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(N.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return p(s)}}),Object(N.jsx)(P.a,{children:Object(N.jsx)(Ft.a,{sortModel:C,rows:f.map((function(e){return{id:e.id,user:e.user,mail:e.mail,pass:e.pass,rolId:e["rol.descripcion"],deleteId:e.id}})),onCellEditCommit:O,columns:vi(r,u),onSortModelChange:function(e){return e[0]!==C[0]&&function(e){var t;0===e.length&&(e.push(C[0]),"asc"===(null===(t=C[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),S(e)}(e)},pageSize:F,onPageSizeChange:function(e){return T(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,autoHeight:!0,disableSelectionOnClick:!0,scrollbarSize:!0,components:{Toolbar:Oi}})})]})}function xi(e){var t=e.roles,i=e.props,n=i.id,r=i.api,o=i.field;t=[].concat(Object(Fe.a)(t),[{rol_descripcion:""}]);var a=Object(l.useState)({rol_descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(N.jsx)(mi.a,{value:s,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,a){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return r.setEditCellValue({id:n,field:o,value:a.id},t),e.next=5,i.api.commitCellChange({id:n,field:o});case 5:r.setCellMode(n,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rol_descripcion===t.rol_descripcion},getOptionLabel:function(e){return e.rol_descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Rol"}))}})}function Oi(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["user","mail","rolId"]}})]})}function gi(e){return"***********"}function yi(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Usuarios | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ji,{idSociety:i,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(pi,{idSociety:i,loggedUser:n})})]})})]})}var wi=i(1062);function Ci(e){var t=e.idSociety,i=e.loggedUser,n=e.tipo,r=St().Prompt,o=Object(a.useQueryClient)(),c=Object(a.useMutation)((function(e){return $e("empresa/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(r){var a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1===n?r.esFiduciante=1:r.esProveedor=1,r.creador=i.id,e.next=4,o.invalidateQueries(["empresa",t]);case 4:return e.next=6,o.getQueryData(["empresa",t]);case 6:return a=e.sent,c=[].concat(Object(Fe.a)(a),[Object(ne.a)(Object(ne.a)({},r),{},{id:(new Date).getTime()})]),o.setQueryData(["empresa",t],c),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return o.setQueryData(["empresa",t],n)},onSettled:function(){return o.invalidateQueries(["empresa",t])}}),l=c.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{razonSocial:"",CUIT:"",mail:"",telefono:"",domicilio:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,l(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,required:!0,size:"small",label:"Raz\xf3n Social",type:"string",name:"razonSocial"}),Object(N.jsx)(Be.a,{as:Ee.a,label:"CUIT",type:"string",required:!0,size:"small",maxLength:11,style:{width:"150px"},name:"CUIT",onChange:function(e){return function(e,t,i){e.preventDefault();var n=e.target.value;/^\d{0,11}$/.test(n.toString())&&t(i,n.toString())}(e,i,"CUIT")}}),Object(N.jsx)(Be.a,{required:!0,size:"small",as:Ee.a,label:"Email",type:"string",maxLength:100,name:"mail"}),Object(N.jsx)(Be.a,{size:"small",style:{width:"150px"},as:Ee.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono"}),Object(N.jsx)(Be.a,{size:"small",as:Ee.a,label:"Domicilio",type:"string",maxLength:40,name:"domicilio"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(r,{message:"El CUIT no puede estar en blanco",ok:!0})]})}var Si=function(e,t,i,n,r,o,a,c,l){return[{field:"id",headerName:"id",width:60,hide:null===e||void 0===e?void 0:e.find((function(e){return"id"===e.c})).h,editable:!1,type:"number",headerAlign:"center"},{field:"razonSocial",headerName:"Raz\xf3n Social",width:170,hide:null===e||void 0===e?void 0:e.find((function(e){return"razonSocial"===e.c})).h,editable:t,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:130,hide:null===e||void 0===e?void 0:e.find((function(e){return"CUIT"===e.c})).h,editable:t,headerAlign:"center",valueFormatter:function(e){return ct(e.value)}},{field:"descripcion",headerName:"Descripci\xf3n",width:240,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"descripcion"===e.c})).h),editable:t,headerAlign:"center"},{field:"rubroId",headerName:"Rubro",width:140,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"rubroId"===e.c})).h),renderEditCell:function(e){return Object(N.jsx)(Pi,{rubros:o,props:e})},headerAlign:"center"},{field:"condIVA",headerName:"Cond. IVA",width:200,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"condIVA"===e.c})).h),renderEditCell:function(e){return Object(N.jsx)(Ti,{listItems:n,label:"Condicion frente a IVA",props:e})},headerAlign:"center"},{field:"ganancias",headerName:"Ganancias",type:"boolean",width:160,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"ganancias"===e.c})).h),headerAlign:"center"},{field:"categoria",headerName:"Categoria",width:200,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"categoria"===e.c})).h),renderEditCell:function(e){return Object(N.jsx)(Ti,{listItems:i,label:"Categoria",props:e})},headerAlign:"center"},{field:"esRetSUSS",headerName:"Ret SUSS",type:"boolean",width:160,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"esRetSUSS"===e.c})).h),headerAlign:"center"},{field:"esRetIVA",headerName:"Ret IVA",type:"boolean",width:160,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"esRetIVA"===e.c})).h),headerAlign:"center"},{field:"CBU",headerName:"CBU",width:200,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"CBU"===e.c})).h),headerAlign:"center"},{field:"banco",headerName:"Banco",width:120,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"banco"===e.c})).h),headerAlign:"center"},{field:"nroCuenta",headerName:"# Cuenta",width:140,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"nroCuenta"===e.c})).h),headerAlign:"center"},{field:"mail",headerName:"Mail",width:150,hide:null===e||void 0===e?void 0:e.find((function(e){return"mail"===e.c})).h,editable:t,headerAlign:"center"},{field:"telefono",headerName:"Tel\xe9fono",width:140,hide:null===e||void 0===e?void 0:e.find((function(e){return"telefono"===e.c})).h,editable:t,headerAlign:"center",valueFormatter:function(e){var t=e.value;if(t)return(t=t.split("")).splice(2,0,"-"),t.splice(7,0,"-"),t.join("")}},{field:"subrubroId",headerName:"Sub Rubro",width:140,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"subrubroId"===e.c})).h),renderEditCell:function(e){return Object(N.jsx)(Fi,{subRubros:a,props:e})},headerAlign:"center"},{field:"enviar_OP_auto",headerName:"Enviar",type:"boolean",width:120,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"enviar_OP_auto"===e.c})).h),headerAlign:"center"},{field:"actividad",headerName:"Actividad",type:"singleSelect",valueOptions:["limpieza","seguridad","otra"],width:150,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"actividad"===e.c})).h),headerAlign:"center"},{field:"domicilio",headerName:"Domicilio",width:200,editable:t,hide:null===e||void 0===e?void 0:e.find((function(e){return"domicilio"===e.c})).h,headerAlign:"center"},{field:"esProveedor",headerName:"Es Provee.",type:"boolean",width:160,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"esProveedor"===e.c})).h),headerAlign:"center"},{field:"esFiduciante",headerName:"Es Fidu",type:"boolean",width:160,editable:t,hide:1===r||(null===e||void 0===e?void 0:e.find((function(e){return"esFiduciante"===e.c})).h),headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,hide:!t,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,i=t.deleteId,n=t.esProveedor,o=t.esFiduciante;return 1===n&&1===r||1===o&&0===r?"":Object(N.jsx)(Tt.a,{onClick:function(e){l(i),c(!0)}})}}]};function Ai(e){var t=e.empresaInformation,i=e.isLoading,n=e.error,r=e.loggedUser,o=e.idSociety,d=e.filtRS,s=e.tipo,u=St(),b=u.Prompt,f=u.setIsPromptOpen,j=Object(l.useState)(),m=Object(c.a)(j,2),v=m[0],h=m[1],p=!0;"vista"===(1===s?null===r||void 0===r?void 0:r["rol.fidu"]:null===r||void 0===r?void 0:r["rol.proveedor"])&&(p=!1);var x=Object(l.useContext)(Sc),O=Object(l.useContext)(Oc),g=Object(a.useQueryClient)(),y=Object(a.useQuery)(["rubros",o],(function(){return Ge("rubro/listar/".concat(o.id))})).data,C=Object(a.useQuery)(["subrubros",o],(function(){return Ge("subrubro/listar/".concat(o.id,"/0"))})).data,S=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("empresa/eliminar/".concat(o.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.cancelQueries(["empresa",o]);case 2:return i=g.getQueryData(["empresa",o]),n=i.filter((function(e){return e.id!==t})),g.setQueryData(["empresa",o],n),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return g.setQueryData(["empresa",o],i)},onSettled:function(){return g.invalidateQueries(["empresa",o])}}),A=S.mutate,I=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,$e("empresa/modificar/".concat(o.id),Object(w.a)({id:n},i,"esProveedor"===i||"esFiduciante"===i?r?1:0:r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,g.cancelQueries(["empresa",o]);case 3:return a=g.getQueryData(["empresa",o]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==n}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===n}))),{},Object(w.a)({},i,r))]),g.setQueryData(["empresa",o],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return g.setQueryData(["empresa",o],i)},onSettled:function(){return g.invalidateQueries(["empresa",o])}}),P=I.mutate,F=[];F=1===s?[{c:"id",h:!1},{c:"razonSocial",h:!1},{c:"CUIT",h:!1},{c:"mail",h:!1},{c:"telefono",h:!1},{c:"domicilio",h:!1}]:[{c:"id",h:!1},{c:"razonSocial",h:!1},{c:"CUIT",h:!1},{c:"descripcion",h:!1},{c:"rubroId",h:!1},{c:"condIVA",h:!1},{c:"ganancias",h:!1},{c:"categoria",h:!1},{c:"esRetSUSS",h:!1},{c:"esRetIVA",h:!1},{c:"CBU",h:!1},{c:"banco",h:!1},{c:"nroCuenta",h:!1},{c:"telefono",h:!1},{c:"mail",h:!1},{c:"enviar_OP_auto",h:!1},{c:"actividad",h:!1},{c:"domicilio",h:!1},{c:"esProveedor",h:!0},{c:"esFiduciante",h:!0},{c:"subrubroId",h:!0}];var T=Object(l.useState)(F),D=Object(c.a)(T,2),R=D[0],k=D[1],z=l.useState(1===s?[{field:"id",sort:"desc"}]:[{field:"razonSocial",sort:"asc"}]),_=Object(c.a)(z,2),V=_[0],U=_[1];var M=Object(l.useState)(25),Q=Object(c.a)(M,2),E=Q[0],L=Q[1];return i?"Cargando...":n?"Hubo un error: ".concat(n.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(b,{message:"\xbfEliminar fila?",action:function(){return A(v)}}),Object(N.jsx)(Ft.a,{rows:t.filter((function(e){return function(e,t){return-1===t||e.id===t}(e,d)})).map((function(e){var t,i,n,r;return{id:null===e||void 0===e?void 0:e.id,rubroId:null===y||void 0===y||null===(t=y.find((function(t){return t.id===e.rubroId})))||void 0===t?void 0:t.rubro,rubro_filtro:null===e||void 0===e?void 0:e.rubroId,subrubroId:null===C||void 0===C||null===(i=C.find((function(t){return t.id===e.subrubroId})))||void 0===i?void 0:i.subRubro,razonSocial:null===e||void 0===e?void 0:e.razonSocial,CUIT:null===e||void 0===e?void 0:e.CUIT,mail:null===e||void 0===e?void 0:e.mail,telefono:null===e||void 0===e?void 0:e.telefono,CBU:null===e||void 0===e?void 0:e.CBU,banco:null===e||void 0===e?void 0:e.banco,nroCuenta:null===e||void 0===e?void 0:e.nroCuenta,esProveedor:null===e||void 0===e?void 0:e.esProveedor,esFiduciante:null===e||void 0===e?void 0:e.esFiduciante,enviar_OP_auto:null===e||void 0===e?void 0:e.enviar_OP_auto,actividad:null===e||void 0===e?void 0:e.actividad,domicilio:null===e||void 0===e?void 0:e.domicilio,descripcion:null===e||void 0===e?void 0:e.descripcion,esRetSUSS:0!==(null===e||void 0===e?void 0:e.esRetSUSS),esRetIVA:0!==(null===e||void 0===e?void 0:e.esRetIVA),categoria:null===x||void 0===x||null===(n=x.find((function(t){return t.id===e.categoria})))||void 0===n?void 0:n.descripcion,condIVA:null===O||void 0===O||null===(r=O.find((function(t){return t.id===e.condIVA})))||void 0===r?void 0:r.descripcion,ganancias:0!==(null===e||void 0===e?void 0:e.ganancias),deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:P,columns:Si(R,p,x.filter((function(e){return"GAN"===e.impuesto})),O,s,y,C,f,h),sortModel:V,onSortModelChange:function(e){return e[0]!==V[0]&&function(e){var t;0===e.length&&(e.push(V[0]),"asc"===(null===(t=V[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),U(e)}(e)},onColumnVisibilityChange:function(e){return function(e){var t=R,i=null===t||void 0===t?void 0:t.findIndex((function(t){return t.c===e.field}));i>-1&&(t[i]={c:e.field,h:!e.isVisible},k(t))}(e)},pageSize:E,onPageSizeChange:function(e){return L(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Ii}})]})}function Ii(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.b,{}),Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["razonSocial","CUIT","mail","telefono","CBU","banco","nroCuenta","rubroId","subrubroId"]}})]})}function Pi(e){var t=e.rubros,i=e.props,n=i.id,r=i.api,o=i.field;t=[].concat(Object(Fe.a)(t),[{rubro:""}]);var a=Object(l.useState)({rubro:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(N.jsx)(mi.a,{value:s,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,a){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return r.setEditCellValue({id:n,field:o,value:a.id},t),e.next=5,i.api.commitCellChange({id:n,field:o});case 5:r.setCellMode(n,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Rubro"}))}})}function Fi(e,t){var i=e.subRubros,n=e.props,r=n.id,o=n.api,a=n.field;i=[].concat(Object(Fe.a)(i.filter((function(e){var t;return e.rubroId===parseInt(null===n||void 0===n||null===(t=n.row)||void 0===t?void 0:t.rubro_filtro)}))),[{subRubro:""}]);var d=Object(l.useState)({subRubro:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(N.jsx)(mi.a,{value:u,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(i),o.setEditCellValue({id:r,field:a,value:i.id},t),e.next=4,n.api.commitCellChange({id:r,field:a});case 4:o.setCellMode(r,a,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:i,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"subRubro"}))}})}function Ti(e){var t=e.listItems,i=e.label,n=e.props,r=n.id,o=n.api,a=n.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var d=Object(l.useState)({descripcion:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(N.jsx)(mi.a,{value:u,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(i),!(null===i||void 0===i?void 0:i.id)){e.next=6;break}return o.setEditCellValue({id:r,field:a,value:i.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:o.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:i}))}})}function Di(e){var t=e.setFiltRS,i=(e.idSociety,e.fideicomisos,e.proveedores),n=Object(l.useState)(null),r=Object(c.a)(n,2),o=r[0],a=r[1];return Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,i){a(i),function(e,i){var n=-1;(null===i||void 0===i?void 0:i.id)&&(n=i.id),"rs"===e&&t(n)}("rs",i)},value:o,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0"]})}})}function Ri(e){var t,i=e.idSociety,n=e.loggedUser,r=Object(l.useState)(-1),o=Object(c.a)(r,2),d=o[0],s=o[1],u=Object(a.useQuery)(["empresa",i],(function(){return Ge("empresa/listar/".concat(i.id,"/").concat(m))})),b=u.data,f=u.isLoading,j=u.error,m=0;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Proveedores | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(wi.a,{smUp:"vista"===n["rol.proveedor"],children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ci,{idSociety:i,loggedUser:n,tipo:m})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Di,{idSociety:i,setFiltRS:s,proveedores:b})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ai,{idSociety:i,loggedUser:n,tipo:m,filtRS:d,isLoading:f,error:j,empresaInformation:b})})]})})]})}var Ni=i(412),ki=i(1263),zi=i(1269),_i=i(1096);function Vi(e){var t=e.idSociety,i=e.loggedUser,n=St().Prompt,r=Object(a.useQueryClient)(),o=Object(l.useContext)(Cc),d=Object(l.useState)(null),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(a.useMutation)((function(e){return $e("persona/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.letra=n.letra.id,n.creador=i.id,e.next=4,r.invalidateQueries(["persona",t]);case 4:return e.next=6,r.getQueryData(["persona",t]);case 6:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),r.setQueryData(["persona",t],a),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return r.setQueryData(["persona",t],n)},onSettled:function(){return r.invalidateQueries(["persona",t])}}),j=f.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{nombre:"",CUIT:"",mail:"",telefono:"",domicilio:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,u&&(j(t),r(),b(null),n(!1));case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{required:!0,size:"small",style:{width:"160px"},as:Ee.a,label:"Nombre",type:"string",maxLength:40,name:"nombre"}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Tipo",title:"Tipo",disablePortal:!0,required:!0,style:{width:"100px",display:"inline-flex"},onChange:function(e,t){b(t),i("letra",t)},value:u,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Tipo *"}))}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"CUIT",type:"string",required:!0,size:"small",maxLength:11,style:{width:"150px"},name:"CUIT",onChange:function(e){return function(e,t,i){e.preventDefault();var n=e.target.value;/^\d{0,11}$/.test(n.toString())&&t(i,n.toString())}(e,i,"CUIT")}}),Object(N.jsx)(Be.a,{required:!0,size:"small",as:Ee.a,label:"Email",type:"string",maxLength:100,name:"mail"}),Object(N.jsx)(Be.a,{size:"small",style:{width:"150px"},as:Ee.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono"}),Object(N.jsx)(Be.a,{size:"small",as:Ee.a,label:"Domicilio",type:"string",maxLength:40,name:"domicilio"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(n,{message:"El nombre y el mail no pueden estar en blanco",ok:!0})]})}var Ui=function(e,t,i,n){return[{field:"id",headerName:"id",width:60,editable:!1,type:"number",headerAlign:"center"},{field:"nombre",headerName:"Nombre",width:220,editable:e,headerAlign:"center"},{field:"letra",headerName:"Tipo",width:110,editable:!1,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:130,editable:!0,headerAlign:"center",valueFormatter:function(e){return ct(e.value)}},{field:"mail",headerName:"Email",width:150,editable:e,headerAlign:"center"},{field:"telefono",headerName:"Tel\xe9fono",width:140,editable:e,headerAlign:"center"},{field:"domicilio",headerName:"Domicilio",width:200,editable:e,headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){n(t),i(!0)}})}}]};function Mi(e){var t=e.loggedUser,i=e.idSociety,n=(e.tipo,St()),r=n.Prompt,o=n.setIsPromptOpen,d=Object(l.useState)(),s=Object(c.a)(d,2),u=s[0],b=s[1],f=!0,j=null===t||void 0===t?void 0:t["rol.fidu"],m=Object(l.useContext)(Cc);"vista"===j&&(f=!1);var v=Object(a.useQuery)(["persona",i],(function(){return Ge("persona/listar/".concat(i.id))})),h=v.data,p=v.isLoading,x=v.error,O=Object(a.useQueryClient)(),g=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("persona/eliminar/".concat(i.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.cancelQueries(["persona",i]);case 2:return n=O.getQueryData(["persona",i]),r=n.filter((function(e){return e.id!==t})),O.setQueryData(["persona",i],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return O.setQueryData(["persona",i],n)},onSettled:function(){return O.invalidateQueries(["persona",i])}}),y=g.mutate,C=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,o=t.value,e.next=3,$e("persona/modificar/".concat(i.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,o=t.value,e.next=3,O.cancelQueries(["persona",i]);case 3:return a=O.getQueryData(["persona",i]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),O.setQueryData(["persona",i],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return O.setQueryData(["persona",i],n)},onSettled:function(){return O.invalidateQueries(["persona",i])}}),S=C.mutate,A=l.useState([{field:"id",sort:"desc"}]),I=Object(c.a)(A,2),P=I[0],F=I[1],T=Object(l.useState)(25),D=Object(c.a)(T,2),R=D[0],k=D[1];return p?"Cargando...":x?"Hubo un error: ".concat(x.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return y(u)}}),Object(N.jsx)(Ft.a,{rows:h.map((function(e){var t;return{id:null===e||void 0===e?void 0:e.id,nombre:null===e||void 0===e?void 0:e.nombre,letra:null===m||void 0===m||null===(t=m.find((function(t){return t.id===parseInt(e.letra)})))||void 0===t?void 0:t.descripcion,telefono:null===e||void 0===e?void 0:e.telefono,mail:null===e||void 0===e?void 0:e.mail,CUIT:null===e||void 0===e?void 0:e.CUIT,domicilio:null===e||void 0===e?void 0:e.domicilio,deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:S,columns:Ui(f,0,o,b),sortModel:P,onSortModelChange:function(e){return e[0]!==P[0]&&function(e){var t;0===e.length&&(e.push(P[0]),"asc"===(null===(t=P[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),F(e)}(e)},pageSize:R,onPageSizeChange:function(e){return k(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Qi}})]})}function Qi(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["nombre","mail","telefono"]}})]})}function Ei(e){var t=e.idSociety,i=e.loggedUser,n=e.tipo,r=Object(a.useQuery)(["empresa",t],(function(){return Ge("empresa/listar/".concat(t.id,"/").concat(n))})),o=r.data,d=r.isLoading,s=r.error,u=l.useState("Personas"),b=Object(c.a)(u,2),f=b[0],j=b[1];return Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(Ni.a,{value:f,children:[Object(N.jsx)(P.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(N.jsxs)(ki.a,{onChange:function(e,t){j(t)},"aria-label":"lab API tabs example",children:[Object(N.jsx)(_i.a,{label:"Personas",value:"Personas"}),Object(N.jsx)(_i.a,{label:"Empresas",value:"Empresas"})]})}),Object(N.jsx)(zi.a,{value:"Personas",children:Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(wi.a,{smUp:"vista"===i["rol.fidu"],children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Vi,{idSociety:t,loggedUser:i})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Mi,{idSociety:t,loggedUser:i})})]})})}),Object(N.jsx)(zi.a,{value:"Empresas",children:Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(wi.a,{smUp:"vista"===i["rol.fidu"],children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ci,{idSociety:t,loggedUser:i,tipo:n})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ai,{idSociety:t,loggedUser:i,tipo:n,filtRS:-1,isLoading:d,error:s,empresaInformation:o})})]})})})]})})}function Li(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Fiduciantes | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsx)(we.a,{children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ei,{idSociety:i,loggedUser:n,tipo:1})})})})]})}function Bi(e){var t=e.idSociety,i=Object(a.useQueryClient)(),n=Object(a.useMutation)((function(e){return $e("fideicomiso/agregar/".concat(t.id),e)}),{onSuccess:function(){i.refetchQueries(["fideicomiso",t])}}).mutate;return Object(N.jsx)(Be.c,{initialValues:{nombre:"",fechaInicio:null,fechaFin:null},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(i,r){var a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.setSubmitting,c=r.resetForm,e.next=3,o(t.id,i.nombre);case 3:!e.sent&&n(i),c(),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,required:!0,label:"Nombre Fideicomiso",size:"small",type:"string",maxLength:40,name:"nombre"}),Object(N.jsx)(Be.a,{name:"fechaInicio",children:function(e){var t=e.field,i=t.value,n=t.name,o=e.form.setFieldValue;return Object(N.jsx)(r,{label:"Inicio",value:i,setFieldValue:o,name:n})}}),Object(N.jsx)(Be.a,{name:"fechaFin",children:function(e){var t=e.field,i=t.value,n=t.name,o=e.form.setFieldValue;return Object(N.jsx)(r,{label:"Finalizacion",value:i,setFieldValue:o,name:n})}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}});function r(e){var t=e.value,i=e.name,n=e.setFieldValue,r=e.label;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:r,value:t,inputFormat:"dd/MM/yyyy",renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({size:"small"},e))},onChange:function(e){return n(i,e)}})})}function o(e,t){return c.apply(this,arguments)}function c(){return c=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Boolean,e.next=3,Ge("fideicomiso/mostrar/".concat(t,"/").concat(i));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}}var Wi=function(e,t,i,n,r){return[{field:"nombre",headerName:"Nombre",width:200,headerAlign:"center",align:"left",renderCell:Gi},{field:"fechaInicio",headerName:"Inicio",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"fechaFin",headerName:"Finalizaci\xf3n",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"mailOP",headerName:"Mail Contador",width:140,editable:!0,headerAlign:"center",align:"left"},{field:"web",headerName:"Web",width:140,editable:!0,headerAlign:"center",align:"left"},{field:"metros",headerName:"Metros",width:130,editable:!0,headerAlign:"center",align:"right"},{field:"empresaId",headerName:"Id",width:100,editable:!0,headerAlign:"center",align:"center"},{field:"logo",headerName:"Logo",sortable:!1,width:150,renderCell:function(e){return e.row.logo?Object(N.jsx)("img",{style:{display:"block",margin:"auto",width:"30%"},src:"".concat("http://104.131.28.211:3000/","sociedades/").concat(i,"/").concat(e.row.logo),alt:"logo"}):""}},{field:"colorElegido",headerName:"Color",width:150,sortable:!1,editable:!1,renderCell:function(e){var t=e.row.colorElegido;return Object(N.jsx)("div",{style:{width:"100%",height:"100%",background:t}})},renderEditCell:function(i){var n=i.row.colorElegido;return Object(N.jsx)(Yi,{originalColor:qi.filter((function(e){return e.css===n}))[0],color:e,setColor:t,colorOptions:qi})}}]},qi=[{label:"red",css:"red"},{label:"DarkGreen",css:"DarkGreen"},{label:"MidnightBlue",css:"MidnightBlue"},{label:"black",css:"black"},{label:"Salmon",css:"LightSalmon"},{label:"Khaki",css:"Khaki"},{label:"Bisque",css:"Bisque"},{label:"Plum",css:"Plum"},{label:"Orchid",css:"Orchid"},{label:"Chocolate",css:"Chocolate"},{label:"LightSteelBlue",css:"LightSteelBlue"},{label:"orange",css:"orange"},{label:"green",css:"green"}];function Hi(e){var t=e.idSociety,i=Object(l.useState)(null),n=Object(c.a)(i,2),r=n[0],o=n[1],d=St(),s=d.Prompt,u=(d.setIsPromptOpen,Object(l.useState)()),b=Object(c.a)(u,2),f=b[0],j=(b[1],Object(a.useQuery)(["fideicomiso",t],(function(){return Ge("fideicomiso/listar/".concat(t.id))}))),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("fideicomiso/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["fideicomiso",t]);case 2:return n=p.getQueryData(["fideicomiso",t]),r=n.filter((function(e){return e.id!==i})),p.setQueryData(["fideicomiso",t],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["fideicomiso",t],n)},onSettled:function(){return p.invalidateQueries(["fideicomiso",t])}}),O=x.mutate,g=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("fideicomiso/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,p.cancelQueries(["fideicomiso",t]);case 3:return a=p.getQueryData(["fideicomiso",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),p.setQueryData(["fideicomiso",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return p.setQueryData(["fideicomiso",t],n)},onSettled:function(){return p.invalidateQueries(["fideicomiso",t])}}),y=g.mutate,C=l.useState([{field:"nombre",sort:"asc"}]),S=Object(c.a)(C,2),A=S[0],I=S[1],P=Object(l.useState)(25),F=Object(c.a)(P,2),T=F[0],D=F[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(s,{message:"\xbfEliminar fila?",action:function(){return O(f)}}),Object(N.jsx)(Ft.a,{rows:m.map((function(e){return{id:e.id,nombre:e.nombre,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,metros:e.metros,colorElegido:e.color,logo:e.logo,cloud:e.cloud,mailOP:e.mailOP,web:e.web,empresaId:e.empresaId,deleteId:e.id}})),onCellEditCommit:y,columns:Wi(r,o,null===t||void 0===t?void 0:t.id),sortModel:A,onSortModelChange:function(e){return e[0]!==A[0]&&function(e){var t;0===e.length&&(e.push(A[0]),"asc"===(null===(t=A[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),I(e)}(e)},pageSize:T,onPageSizeChange:function(e){return D(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:$i}})]})}function Gi(e){var t="./".concat(e.row.id,"/").concat(e.row.nombre);return Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:e.row.nombre})})}function $i(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["nombre","fechaInicio","fechaFin"]}})]})}function Yi(e){var t=e.color,i=e.setColor,n=e.colorOptions,r=e.originalColor;return Object(l.useEffect)((function(){return i((function(e){return(null===r||void 0===r?void 0:r.css)!==(null===e||void 0===e?void 0:e.css)?r:e}))}),[r,i]),Object(N.jsx)(mi.a,{value:t,onChange:function(e,t){i(t)},options:n,sx:{width:300},isOptionEqualToValue:function(e,t){return e.label===t.label},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({style:{background:null===t||void 0===t?void 0:t.css}},e))},renderOption:function(e,t,i){return Object(N.jsx)("div",Object(ne.a)(Object(ne.a)({},e),{},{style:{background:null===t||void 0===t?void 0:t.css},children:t.label}))}})}function Zi(e){var t,i=e.idSociety;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Fideicomisos | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Bi,{idSociety:i})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Hi,{idSociety:i})})]})})]})}function Ji(e){var t=e.idSociety,i=e.loggedUser,n=e.fideicomisoId,r=e.refetch,o=St().Prompt,d=Object(a.useQueryClient)(),s=Object(l.useState)(null),u=Object(c.a)(s,2),b=u[0],f=u[1],j=Object(l.useContext)(wc),m=Object(a.useMutation)((function(e){return $e("producto/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(r){var o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.fideicomisoId=parseInt(n),r.creador=i.id,e.next=4,d.invalidateQueries(["producto",t]);case 4:return e.next=6,d.getQueryData(["producto",t]);case 6:return o=e.sent,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return d.setQueryData(["producto",t],n)},onSettled:function(){t.id>0&&d.invalidateQueries(["producto",t]),r()}}),v=m.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{codigo:"",descripcion:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,t.tipo=t._tipo.id,v(t),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Tipo",required:!0,disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){f(t),i("_tipo",t)},value:b,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:j||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Tipo"}))}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Unidad",type:"string",maxLength:40,size:"small",name:"codigo"},"codigo"),Object(N.jsx)(Be.a,{as:Ee.a,label:"m\xb2 Cubierto",title:"m\xb2 Cubierto, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"mtCubiertos",onChange:function(e){return Ki(e,i,"mtCubiertos")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"m\xb2 SemiCubierto",title:"m\xb2 SemiCubierto, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"mtSemiCubiertos",onChange:function(e){return Ki(e,i,"mtSemiCubiertos")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"m\xb2 Terraza",title:"m\xb2 Terraza, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"mtTerraza",onChange:function(e){return Ki(e,i,"mtTerraza")}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(o,{message:"El CUIT no puede estar en blanco",ok:!0})]})}function Ki(e,t,i){e.preventDefault();var n=e.target.value,r=e.which||e.keyCode,o=e.ctrlKey?e.ctrlKey:17===r;(/^\d{0,11}(\.\d{0,2})?$/.test(n.toString())||o)&&t(i,n.toString())}var Xi=function(e,t,i){return[{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center"},{field:"tipo",headerName:"Tipo",width:140,editable:!1,headerAlign:"center",align:"center"},{field:"codigo",headerName:"Unidad",width:140,editable:!1,headerAlign:"center",align:"center"},{field:"mtCubiertos",headerName:"m\xb2 Cubierto",type:"number",width:160,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mtSemiCubiertos",headerName:"m\xb2 SemiCub.",type:"number",width:160,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mtTerraza",headerName:"m\xb2 Terraza",type:"number",width:160,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mtTotal",headerName:"m\xb2 Tot",type:"number",width:160,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mtPor",headerName:"%",type:"number",width:100,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"precioULT",type:"number",headerName:"Precio",width:150,editable:!0,headerAlign:"center",align:"right"},{field:"descripcion",headerName:"Descri",width:150,editable:!0,headerAlign:"center",align:"right"},{field:"deleteIcon",headerName:" ",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var n=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){i(n),t(!0)}})}}]};function en(e){var t=e.idSociety,i=e.loggedUser,n=e.dataFide,r=e.isLoading,o=e.error,d=e.refetch,s=St(),u=s.Prompt,b=s.setIsPromptOpen,f=Object(l.useState)(),j=Object(c.a)(f,2),m=j[0],v=j[1],h=Object(l.useContext)(wc),p=!0;"vista"===(null===i||void 0===i?void 0:i["rol.fidu"])&&(p=!1);var x=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("producto/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.cancelQueries(["producto",t]);case 2:return n=x.getQueryData(["producto",t]),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return x.setQueryData(["producto",t],n)},onSettled:function(){t.id>0&&x.invalidateQueries(["producto",t]),d()}}),g=O.mutate,y=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("producto/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.field,i.id,i.value,e.next=3,x.cancelQueries(["producto",t]);case 3:return n=x.getQueryData(["producto",t]),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return x.setQueryData(["producto",t],n)},onSettled:function(){t.id>0&&x.invalidateQueries(["producto",t]),d()}}),C=y.mutate,S=l.useState([{field:"id",sort:"asc"}]),A=Object(c.a)(S,2),I=A[0],P=A[1];function F(e,t,i){return(e?parseFloat(e):0)+(t?parseFloat(t):0)+(i?parseFloat(i):0)}function T(e,t,i,n){var r=F(e,t,i),o=0;return r>0&&parseFloat(n)>0&&(o=Math.round(r/parseFloat(n)*1e4)/100),o}var D=Object(l.useState)(25),R=Object(c.a)(D,2),k=R[0],z=R[1];return r?"Cargando...":o?"Hubo un error: ".concat(o.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(u,{message:"\xbfEliminar fila?",action:function(){return g(m)}}),Object(N.jsx)(Ft.a,{rows:null===n||void 0===n?void 0:n.item.map((function(e){var t,i;return{id:null===e||void 0===e?void 0:e.id,codigo:null===e||void 0===e?void 0:e.codigo,mtCubiertos:null===e||void 0===e?void 0:e.mtCubiertos,mtSemiCubiertos:null===e||void 0===e?void 0:e.mtSemiCubiertos,mtTerraza:null===e||void 0===e?void 0:e.mtTerraza,mtTotal:F(null===e||void 0===e?void 0:e.mtCubiertos,null===e||void 0===e?void 0:e.mtSemiCubiertos,null===e||void 0===e?void 0:e.mtTerraza),mtPor:T(null===e||void 0===e?void 0:e.mtCubiertos,null===e||void 0===e?void 0:e.mtSemiCubiertos,null===e||void 0===e?void 0:e.mtTerraza,null===n||void 0===n||null===(t=n.fide)||void 0===t?void 0:t.metros),sector:null===e||void 0===e?void 0:e.sector,precioULT:null===e||void 0===e?void 0:e.precioULT,tipo:null===h||void 0===h||null===(i=h.find((function(t){return t.id===e.tipo})))||void 0===i?void 0:i.descripcion,descripcion:null===e||void 0===e?void 0:e.descripcion,deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:C,columns:Xi(p,b,v),sortModel:I,onSortModelChange:function(e){return e[0]!==I[0]&&function(e){var t;0===e.length&&(e.push(I[0]),"asc"===(null===(t=I[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),P(e)}(e)},pageSize:k,onPageSizeChange:function(e){return z(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:tn}})]})}function tn(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["nombre","mail","telefono"]}})]})}function nn(e){var t=e.idSociety,i=e.fideicomisoId,n=e.loggedUser,r=e.dataFide,o=e.isLoading,a=e.error,d=e.refetch,s=l.useState("1"),u=Object(c.a)(s,2),b=u[0],f=u[1];return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(Ni.a,{value:b,children:[Object(N.jsx)(P.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(N.jsx)(ki.a,{onChange:function(e,t){f(t)},"aria-label":"lab API tabs example",children:Object(N.jsx)(_i.a,{label:"Productos",value:"1"})})}),Object(N.jsx)(zi.a,{value:"1",children:Object(N.jsxs)(P.a,{sx:{pt:3},children:[Object(N.jsx)(Ji,{idSociety:t,fideicomisoId:i,loggedUser:n,dataFide:r,isLoading:o,error:a,refetch:d}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(en,{idSociety:t,fideicomisoId:i,loggedUser:n,dataFide:r,isLoading:o,error:a,refetch:d})})]})})]})})}function rn(e){var t=e.idSociety,i=e.loggedUser,n=Object(s.j)().fideicomisoId,r=Object(a.useQuery)(["dataFide",t.id],(function(){return Ge("fideicomiso/mostrarConProducto/".concat(t.id,"/").concat(n))})),o=r.data,c=r.isLoading,l=r.error,d=r.refetch;return c?"Cargando...":l?"Hubo un error: ".concat(l.message):Object(N.jsx)(we.a,{children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(nn,{idSociety:t,fideicomisoId:n,loggedUser:i,dataFide:o,isLoading:c,error:l,refetch:d})})})}var on=i(1101),an=i(1103),cn=i(1104),ln=i(202),dn=i(1266),sn=i(1063),un=i(739),bn=i(1097),fn=i(1060),jn=i(1099),mn=i(1100),vn=i(77),hn=i.n(vn),pn=i(737),xn=i(738),On=i(406);function gn(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function yn(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}function wn(e){var t=e.setActTab,i=e.iniNombre,n=e.setIniNombre,r=e.right,s=e.setRight,u=e.fideInForm,b=e.setFideInForm,f=e.fiduInForm,j=e.setFiduInForm,m=e.activeStep,v=e.idSociety,h=e.loggedUser,p=e.fideicomisos,x=e.personas,O=e.empresas,g=St(),y=g.setIsPromptOpen,w=g.Prompt,C=Object(a.useQueryClient)(),S=Object(a.useMutation)((function(e){return $e("contrato/agregar/".concat(v.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.invalidateQueries(["contrato",v]);case 2:return e.next=4,C.getQueryData(["contrato",v]);case 4:return i=e.sent,n=[].concat(Object(Fe.a)(i),[Object(ne.a)(Object(ne.a)({},t),{},{id:(new Date).getTime()})]),C.setQueryData(["contrato",v],n),e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return C.setQueryData(["contrato",v],i)},onSettled:function(){v.id>0&&C.invalidateQueries(["contrato",v]),t("1")}}),A=S.mutate,T=Object(l.useState)("persona"),D=Object(c.a)(T,2),R=D[0],k=D[1],z=Object(l.useState)(0),_=Object(c.a)(z,2),V=_[0],U=_[1],M=Object(l.useState)(!1),Q=Object(c.a)(M,2),E=Q[0],L=Q[1];var B=Object(l.useState)({id:"ARS",descripcion:"ARS"}),W=Object(c.a)(B,2),q=W[0],H=W[1],G=[{id:"ARS",descripcion:"ARS"},{id:"USD",descripcion:"USD"}],$=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,60],Y=d.a.useState([]),Z=Object(c.a)(Y,2),J=Z[0],K=Z[1];function X(){return(X=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("producto/listar/".concat(v.id,"/").concat(t.id));case 2:i=e.sent,ce(i.filter((function(e){return null===e.contratoId})).sort((function(e,t){return e.codigo.localeCompare(t.codigo)})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=d.a.useState([{id:0,codigo:""}]),ie=Object(c.a)(ee,2),re=ie[0],ce=ie[1],le=yn(J,re),de=yn(J,r),se=function(e){return function(){var t=J.indexOf(e),i=Object(Fe.a)(J);-1===t?i.push(e):i.splice(t,1),K(i)}},ue=function(){var e=r;e=e.concat(le),s(e),ce(gn(re,le)),K(gn(J,le))},be=function(){ce(re.concat(de)),s(gn(r,de)),K(gn(J,de))},fe=function(e){return Object(N.jsx)(On.a,{sx:{width:200,height:230,overflow:"auto"},children:Object(N.jsxs)(te.a,{dense:!0,component:"div",role:"list",children:[e.map((function(e){var t=e.id;return Object(N.jsxs)(oe.a,{role:"listitem",button:!0,onClick:se(e),children:[Object(N.jsx)(pn.a,{children:Object(N.jsx)(sn.a,{checked:-1!==J.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(N.jsx)(xn.a,{id:t,primary:e.codigo})]},e.id)})),Object(N.jsx)(oe.a,{})]})})},je={es:ln.a},me={es:"__/__/____"},ve=d.a.useState(null),he=Object(c.a)(ve,2),pe=he[0],xe=he[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{fideicomisoId:null,CACbase:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,n){var o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.setSubmitting,n.resetForm,a=ht(pe),pe?(A({fideicomisoId:null===u||void 0===u?void 0:u.id,nombreCesion:"persona"===R?null===f||void 0===f?void 0:f.nombre:null===f||void 0===f?void 0:f.razonSocial,personaId:"persona"===R?null===f||void 0===f?void 0:f.id:null,empresaId:"empresa"===R?null===f||void 0===f?void 0:f.id:null,CACbase:null,nombre:i,anticipo:t.anticipo,qntCuotas:V,montoCuota:t.montoCuota,moneda:null===q||void 0===q?void 0:q.id,adhesion:a,productos:r,creador:null===h||void 0===h?void 0:h.id}),o(!1)):y(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,a=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsxs)(wi.a,{smUp:!(0===m),children:[Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fideicomiso",title:"Seleccione un fideicomiso.",disablePortal:!0,style:{width:"330px",display:"inline-flex"},onChange:function(e,t){b(t),a("fideicomiso",t),function(e){X.apply(this,arguments)}(t)},value:u,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:p||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fideicomiso"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsxs)(Ce.a,{item:!0,md:4,children:[Object(N.jsx)(wi.a,{smUp:"empresa"===R,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Persona",title:"Seleccione una Persona.",disablePortal:!0,style:{width:"330px",display:"inline-flex"},onChange:function(e,t){j(t),a("persona",t)},value:"persona"===R?f:null,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:x||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Persona"}))}})}),Object(N.jsx)(wi.a,{smUp:"persona"===R,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Empresa",title:"Seleccione una Empresa.",disablePortal:!0,style:{width:"330px",display:"inline-flex"},onChange:function(e,t){j(t),a("empresa",t)},value:"empresa"===R?f:null,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:O||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Empresa"}))}})})]}),Object(N.jsx)(Ce.a,{item:!0,md:7,children:Object(N.jsxs)(un.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:"persona",onChange:function(e){return t=e,j(null),void k(t.target.value);var t},name:"tipo_fiduciante",children:[Object(N.jsx)(bn.a,{value:"persona",control:Object(N.jsx)(fn.a,{}),label:"Persona"}),Object(N.jsx)(bn.a,{value:"empresa",control:Object(N.jsx)(fn.a,{}),label:"Empresa"})]},"tipo_fiduciante")}),Object(N.jsx)(Ce.a,{item:!0,md:1}),Object(N.jsxs)(Ce.a,{item:!0,md:11,children:[Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6",children:'* Si el fiduciante no existe debe ingresarlo previamente en "Fiduciantes".'}),Object(N.jsx)(ae.a,{component:o.c,to:"/".concat(v.nombre,"/fiduciantes"),children:"Nuevo fidudiante"})]})]}),Object(N.jsx)(wi.a,{smUp:!(1===m),children:Object(N.jsxs)(Ce.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[Object(N.jsx)(Ce.a,{item:!0,children:fe(re)}),Object(N.jsx)(Ce.a,{item:!0,children:Object(N.jsxs)(Ce.a,{container:!0,direction:"column",alignItems:"center",children:[Object(N.jsx)(ae.a,{sx:{my:.5},variant:"outlined",size:"small",onClick:ue,disabled:0===le.length,"aria-label":"move selected right",children:">"}),Object(N.jsx)(ae.a,{sx:{my:.5},variant:"outlined",size:"small",onClick:be,disabled:0===de.length,"aria-label":"move selected left",children:"<"})]})}),Object(N.jsx)(Ce.a,{item:!0,children:fe(r)}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"center",color:"textPrimary",variant:"h6",children:'* Si el producto no existe debe ingresarlo previamente en "Fidecomisos / Productos".'})})]})}),Object(N.jsxs)(wi.a,{smUp:!(2===m),children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(nt.b,{dateAdapter:ot.a,locale:je.es,children:Object(N.jsx)(dn.a,{mask:me.es,value:pe,label:"Fecha de Adhesi\xf3n",onChange:function(e){return xe(e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,style:{width:"200px"},size:"small"},e))}})}),Object(N.jsx)(Be.a,{as:Ee.a,title:"Nombre contrato",label:"Nombre contrato",required:!0,maxLength:40,size:"small",sx:{width:"160px"},value:i,name:"nombre",onChange:function(e){var t;return n(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value.toString())}},"_nombre"),Object(N.jsx)(Be.a,{as:Ee.a,label:"Anticipo",title:"Anticipo solo numeros.",maxLength:11,required:!0,type:"number",size:"small",style:{width:"160px"},name:"anticipo"}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Cant. Cuotas",title:"Cant. Cuotas",required:!0,select:!0,size:"small",style:{width:"115px"},name:"qntCuotas",value:V,onChange:function(e){U(e.target.value)},children:$.map((function(e){return Object(N.jsx)(jn.a,{value:e,children:e+" Cuotas "},e)}))}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Monto cuota",title:"Monto, solo numeros.",maxLength:11,required:!0,type:"number",size:"small",style:{width:"160px"},name:"montoCuota"}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Moneda",title:"Moneda",disablePortal:!0,required:!0,style:{width:"115px",display:"inline-flex"},onChange:function(e,t){H(t),a("moneda",t)},value:q,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:G||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Moneda *"}))}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]}),Object(N.jsxs)(Ce.a,{item:!0,md:11,children:[Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6",children:"Ingrese una fecha de adhesi\xf3n, un nombre o descripci\xf3n, un monto por el anticipo (cero en el caso de no existir), cantidad de cuotas y el monto de las mismas."}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6",children:"Si la moneda del anticipo es diferente a la de las cuotas, ingrese 0(cero) en el anticipo, luego de haber creado el contrato se puede agregar en la moneda que corresponda."}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6",children:"Las fechas de cada cuota se crean de forma mensual y secuencial, en caso de ser cuotas con frecuencia bimensual, trimestral o cuatrimestral, luego de crear el contrato se pueden ajustar."}),Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6",children:"Si el fiduciante ya abono el 100% de la unidad, ingrese el valor abonado en el anticipo, 0(cero) en cuotas y 0(cero) en monto cuota."})]})]}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"})]}),Object(N.jsx)(P.a,{sx:{width:"100%"},children:Object(N.jsx)(mn.a,{in:E,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){L(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}}),Object(N.jsx)(w,{message:"...error",ok:!0})]})}var Cn=["Seleccione fideicomiso y fiduciante","Seleccione uno o mas productos","Campos adicionales y finalizar"];function Sn(e){var t=e.setActTab,i=e.idSociety,n=e.loggedUser,r=(e.dataFide,e.isLoading,e.error,e.refetch,e.fideicomisoId,l.useState(0)),o=Object(c.a)(r,2),d=o[0],s=o[1],u=l.useState(new Set),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(i.id))})).data,v=Object(a.useQuery)(["empresas"],(function(){return Ge("empresa/listar/".concat(i.id,"/1"))})).data,h=Object(a.useQuery)(["persona"],(function(){return Ge("persona/listar/".concat(i.id))})).data,p=function(e){return 99===e},x=function(e){return f.has(e)},O=function(){var e,t=f;1===d&&M(null===(e=k[0])||void 0===e?void 0:e.codigo);x(d)&&(t=new Set(t.values())).delete(d),s((function(e){return e+1})),j(t)},g=Object(l.useState)(null),y=Object(c.a)(g,2),w=y[0],C=y[1],S=Object(l.useState)(null),A=Object(c.a)(S,2),F=A[0],T=A[1],D=l.useState([]),R=Object(c.a)(D,2),k=R[0],z=R[1],_=l.useState(""),V=Object(c.a)(_,2),U=V[0],M=V[1],Q=!1;0===d&&(null===w||void 0===w?void 0:w.id)>0&&(null===F||void 0===F?void 0:F.id)>0&&(Q=!0);var E=!1;return 1===d&&(null===k||void 0===k?void 0:k.length)>0&&(E=!0),Object(N.jsxs)(P.a,{sx:{width:"100%"},children:[Object(N.jsx)(on.a,{activeStep:d,children:Cn.map((function(e,t){var i={},n={};return p(t)&&(n.optional=Object(N.jsx)(I.a,{variant:"caption",children:"Optional"})),x(t)&&(i.completed=!1),Object(N.jsx)(an.a,Object(ne.a)(Object(ne.a)({},i),{},{children:Object(N.jsx)(cn.a,Object(ne.a)(Object(ne.a)({},n),{},{children:e}))}),e)}))}),d===Cn.length?Object(N.jsxs)(l.Fragment,{children:[Object(N.jsx)(I.a,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),Object(N.jsxs)(P.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(N.jsx)(P.a,{sx:{flex:"1 1 auto"}}),Object(N.jsx)(ae.a,{onClick:function(){s(0)},children:"Reset"})]})]}):Object(N.jsx)(l.Fragment,{children:Object(N.jsxs)(we.a,{children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(wn,{setActTab:t,iniNombre:U,setIniNombre:M,fideInForm:w,setFideInForm:C,fiduInForm:F,setFiduInForm:T,right:k,setRight:z,activeStep:d,idSociety:i,loggedUser:n,fideicomisos:m,empresas:v,personas:h})}),Object(N.jsxs)(P.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(N.jsx)(ae.a,{color:"inherit",disabled:0===d,onClick:function(){s((function(e){return e-1}))},sx:{mr:1},children:"Back"}),Object(N.jsx)(P.a,{sx:{flex:"1 1 auto"}}),p(d)&&Object(N.jsx)(ae.a,{color:"inherit",onClick:function(){if(!p(d))throw new Error("You can't skip a step that isn't optional.");s((function(e){return e+1})),j((function(e){var t=new Set(e.values());return t.add(d),t}))},sx:{mr:1},children:"Skip"}),Q&&Object(N.jsx)(ae.a,{onClick:O,children:"Next"}),E&&Object(N.jsx)(ae.a,{onClick:O,children:"Next"}),d<Cn.length-1&&!Q&&!E&&Object(N.jsx)(ae.a,{disabled:!0,onClick:O,children:"Next"}),d===Cn.length-1&&Object(N.jsx)(ae.a,{disabled:!0,onClick:O,children:"Fin"})]})]})})]})}var An=function(e,t,i){return[{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center",renderCell:Fn},{field:"nombre",headerName:"Nombre",width:155,editable:e,headerAlign:"center",renderCell:Tn},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"left"},{field:"fiduciante",headerName:"Fiduciante",width:170,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var n=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){i(n),t(!0)}})}}]};function In(e){var t=e.idSociety,i=e.loggedUser,n=St(),r=n.Prompt,o=n.setIsPromptOpen,d=Object(l.useState)(),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(a.useQuery)(["contrato",t],(function(){return Ge("contrato/listar/".concat(t.id,"/0"))})),j=f.data,m=f.isLoading,v=f.error,h=f.refetch,p=!0;"vista"===(null===i||void 0===i?void 0:i["rol.contrato"])&&(p=!1);var x=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("contrato/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.cancelQueries(["contrato",t]);case 2:return n=x.getQueryData(["contrato",t]),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return x.setQueryData(["contrato",t],n)},onSettled:function(){t.id>0&&x.invalidateQueries(["contrato",t]),h()}}),g=O.mutate,y=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("contrato/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.field,i.id,i.value,e.next=3,x.cancelQueries(["contrato",t]);case 3:return n=x.getQueryData(["contrato",t]),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return x.setQueryData(["contrato",t],n)},onSettled:function(){t.id>0&&x.invalidateQueries(["contrato",t]),h()}}),C=y.mutate,S=l.useState([{field:"id",sort:"desc"}]),A=Object(c.a)(S,2),I=A[0],P=A[1],F=Object(l.useState)(25),T=Object(c.a)(F,2),D=T[0],R=T[1];return m?"Cargando...":v?"Hubo un error: ".concat(v.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return g(u)}}),Object(N.jsx)(Ft.a,{rows:null===j||void 0===j?void 0:j.map((function(e){var t,i,n;return{id:null===e||void 0===e?void 0:e.id,nombre:null===e||void 0===e?void 0:e.nombre,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)&&(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",fiduciante:(null===e||void 0===e?void 0:e.empresaId)>0?(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(i=e.empresas[0])||void 0===i?void 0:i.razonSocial:"":(null===e||void 0===e?void 0:e.personas)?null===e||void 0===e||null===(n=e.personas[0])||void 0===n?void 0:n.nombre:"",deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:C,columns:An(p,o,b),sortModel:I,onSortModelChange:function(e){return e[0]!==I[0]&&function(e){var t;0===e.length&&(e.push(I[0]),"asc"===(null===(t=I[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),P(e)}(e)},pageSize:D,onPageSizeChange:function(e){return R(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Pn}})]})}function Pn(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["nombre","mail","telefono"]}})]})}function Fn(e){var t="".concat(e.row.id,"/Detalle Contrato");return Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:e.row.id})})}function Tn(e){var t="".concat(e.row.id,"/Detalle Contrato");return Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:e.row.nombre})})}function Dn(e){var t=e.idSociety,i=e.fideicomisoId,n=e.loggedUser,r=e.dataFide,o=e.isLoading,a=e.error,d=e.refetch,s=l.useState("1"),u=Object(c.a)(s,2),b=u[0],f=u[1];return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(Ni.a,{value:b,children:[Object(N.jsx)(P.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(N.jsxs)(ki.a,{onChange:function(e,t){f(t)},"aria-label":"lab API tabs example",children:[Object(N.jsx)(_i.a,{label:"Nueva adhesi\xf3n",disabled:"vista"===(null===n||void 0===n?void 0:n["rol.contrato"]),value:"0"}),Object(N.jsx)(_i.a,{label:"Adhesiones",value:"1"}),Object(N.jsx)(_i.a,{label:"Liquidaciones",disabled:!0,value:"2"})]})}),Object(N.jsx)(zi.a,{value:"0",children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Sn,{setActTab:f,idSociety:t,fideicomisoId:i,loggedUser:n,dataFide:r,isLoading:o,error:a,refetch:d})})}),Object(N.jsx)(zi.a,{value:"1",children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(In,{idSociety:t,fideicomisoId:i,loggedUser:n,dataFide:r,isLoading:o,error:a,refetch:d})})}),Object(N.jsx)(zi.a,{value:"2",children:Object(N.jsx)(P.a,{sx:{pt:3},children:"bbbb"})})]})})}function Rn(e){var t=e.idSociety,i=e.loggedUser,n=Object(s.j)().fideicomisoId,r=Object(a.useQuery)(["dataFide",t.id],(function(){return Ge("fideicomiso/mostrarConProducto/".concat(t.id,"/").concat(n))})),o=r.data,c=r.isLoading,l=r.error,d=r.refetch;return c?"Cargando...":l?"Hubo un error: ".concat(l.message):Object(N.jsx)(we.a,{children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Dn,{idSociety:t,fideicomisoId:n,loggedUser:i,dataFide:o,isLoading:c,error:l,refetch:d})})})}var Nn=i(4),kn=function(e){var t=e.data;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsxs)(Nn.View,{style:{width:"46%",margin:3,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{fontSize:9,textAlign:"center"},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:12,textAlign:"center"},children:"Fideicomiso"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:12,textAlign:"center"},children:null===t||void 0===t?void 0:t.fide_nombre})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"center"},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"center"},children:null===t||void 0===t?void 0:t.fide_dir_linea1})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"center"},children:null===t||void 0===t?void 0:t.fide_dir_linea2})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"center"},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"center"},children:"RESPONSABLE INSCRIPTO"})})]}),Object(N.jsxs)(Nn.View,{style:{width:"8%",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{width:"50%",flexDirection:"row",flexWrap:"wrap",margin:0,borderRightWidth:1,borderRightColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"50%"},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:1,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:28,textAlign:"left",paddingLeft:7},children:"X"})}),Object(N.jsx)(Nn.View,{style:{width:"50%",flexDirection:"row",flexWrap:"wrap",margin:0,borderRightWidth:1,borderRightColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"50%"},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{width:"50%",flexDirection:"row",flexWrap:"wrap",margin:0,borderRightWidth:1,borderRightColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"50%"},children:"\xa0"})})]}),Object(N.jsxs)(Nn.View,{style:{width:"36%",margin:3,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:17,textAlign:"left",paddingLeft:8},children:"RECIBO"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{fontSize:6,textAlign:"left",paddingLeft:8},children:"(DOCUMENTO NO VALIDO COMO FACTURA)"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.Text,{style:{width:"100%",fontSize:14,textAlign:"left",paddingLeft:8},children:["NRO: ",null===t||void 0===t?void 0:t.cobro_numero]})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:["CUIT: ",null===t||void 0===t?void 0:t.fide_cuit]})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:["Ingresos Brutos: ",null===t||void 0===t?void 0:t.fide_cuit]})}),Object(N.jsx)(Nn.View,{style:{width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:["Inicio de actividades: ",null===t||void 0===t?void 0:t.fide_fecha]})})]})]})},zn=function(e){var t=e.data;return Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.View,{style:{width:"100%",margin:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{height:"7",width:"100%",flexDirection:"row",margin:0,borderTopWidth:1,borderTopColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{fontSize:9,textAlign:"left"},children:".."})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:["Se\xf1or(es): ",null===t||void 0===t?void 0:t.fidu_nombre]})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"Domicilio:  ..................................................................................................................................................................."})})]})})},_n=function(e){e.data;return Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.View,{style:{width:"100%",margin:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{height:"7",width:"100%",flexDirection:"row",margin:0,borderTopWidth:1,borderTopColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{fontSize:9,textAlign:"left"},children:".."})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"IVA:    \u214f no Resp.     \u214f exento     \u214f cons. final      \u214f resp. Isnc.      \u214f monotributo"})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"CUIT NRO:  ..............................................................................................................................................................."})})]})})},Vn=function(e){var t=e.data;return Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.View,{style:{width:"100%",margin:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{height:"24",width:"100%",flexDirection:"row",margin:0,borderTopWidth:1,borderTopColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{fontSize:9,textAlign:"left"},children:"\xa0"})}),Object(N.jsxs)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.Text,{style:{width:"26%",fontSize:9,textAlign:"right",paddingLeft:8},children:"Recib\xed(mos) la suma de:"}),Object(N.jsxs)(Nn.Text,{style:{width:"74%",fontSize:9,textAlign:"right",paddingRight:8},children:[null===t||void 0===t?void 0:t.cobro_monto," ",null===t||void 0===t?void 0:t.cobro_moneda]})]}),Object(N.jsxs)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.Text,{style:{width:"26%",fontSize:9,textAlign:"right",paddingLeft:8},children:"En concepto de:"}),Object(N.jsxs)(Nn.Text,{style:{width:"74%",fontSize:9,textAlign:"left",paddingLeft:18},children:[null===t||void 0===t?void 0:t.cobro_concepto," - ",null===t||void 0===t?void 0:t.adhe_nombre]})]}),Object(N.jsxs)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.Text,{style:{width:"26%",fontSize:9,textAlign:"right",paddingLeft:8},children:"Forma de Pago:"}),Object(N.jsx)(Nn.Text,{style:{width:"74%",fontSize:9,textAlign:"left",paddingLeft:18},children:null===t||void 0===t?void 0:t.cobro_f_pago})]}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"\xa0"})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"...................................................................................................................................................................................."})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"...................................................................................................................................................................................."})})]})})},Un=function(e){var t=e.data;return Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.View,{style:{width:"100%",margin:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:{height:"7",width:"100%",flexDirection:"row",margin:0,borderTopWidth:1,borderTopColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{fontSize:9,textAlign:"left"},children:".."})}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"\xa0"})}),Object(N.jsxs)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.Text,{style:{width:"30%",fontSize:15,textAlign:"right",paddingLeft:8},children:"TOTAL:"}),Object(N.jsxs)(Nn.Text,{style:{width:"30%",fontSize:15,textAlign:"left",paddingLeft:14},children:[null===t||void 0===t?void 0:t.cobro_monto," ",null===t||void 0===t?void 0:t.cobro_moneda]}),Object(N.jsx)(Nn.Text,{style:{width:"20%",fontSize:15,textAlign:"center",paddingLeft:0},children:"................."}),Object(N.jsx)(Nn.Text,{style:{width:"20%",fontSize:15,textAlign:"center",paddingLeft:0},children:"................."})]}),Object(N.jsxs)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.Text,{style:{width:"60%",fontSize:9,textAlign:"left",paddingLeft:14},children:"\xa0"}),Object(N.jsx)(Nn.Text,{style:{width:"20%",fontSize:9,textAlign:"center"},children:"Firma"}),Object(N.jsx)(Nn.Text,{style:{width:"20%",fontSize:9,textAlign:"center"},children:"Aclaraci\xf3n"})]}),Object(N.jsx)(Nn.View,{style:{height:"17",width:"100%",flexDirection:"row",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsx)(Nn.Text,{style:{width:"100%",fontSize:9,textAlign:"left",paddingLeft:8},children:"\xa0"})})]})})},Mn=Nn.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},rowbis:{flexDirection:"row",alignItems:"left",height:24,fontSize:10,fontStyle:"bold"},col1:{width:"33%",textAlign:"right",paddingLeft:8},col1bis:{width:"33%",textAlign:"right",paddingTop:5,paddingLeft:8},col2bis:{width:"33%",textAlign:"center",backgroundColor:"#B4B4B4",paddingTop:5,paddingLeft:8},col3:{width:"33%",textAlign:"left",paddingLeft:8},col3bis:{width:"33%",textAlign:"center",paddingTop:5,paddingLeft:8}}),Qn=function(e){var t=e.data;return Object(N.jsx)(Nn.Document,{children:Object(N.jsx)(Nn.Page,{size:"A4",style:Mn.page,children:Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:65,borderWidth:1,borderColor:"#000000"},children:[Object(N.jsx)(kn,{data:t}),Object(N.jsx)(zn,{data:t}),Object(N.jsx)(_n,{data:t}),Object(N.jsx)(Vn,{data:t}),Object(N.jsx)(Un,{data:t})]})})})},En="http://104.131.28.211:3000/";function Ln(e){var t,i,n=e.mode,r=e.contrato,o=e.conceptosPago,d=e.formaPagosFidu,s=e.contratos,u=e.fideicomisos,b=e.loggedUser,f=e.refetch,j=Object(l.useContext)(uc),m=St().Prompt,v=Object(a.useQueryClient)(),h=Object(l.useState)(null),p=Object(c.a)(h,2),x=p[0],O=p[1],g=Object(l.useState)({id:"ARS",descripcion:"ARS"}),y=Object(c.a)(g,2),w=y[0],C=y[1],S=Object(l.useState)(null),A=Object(c.a)(S,2),I=A[0],P=A[1],F=null,T=null;"contrato"===n&&(F={id:null===r||void 0===r||null===(t=r.cont)||void 0===t?void 0:t.fideicomisoId},T={id:null===r||void 0===r||null===(i=r.cont)||void 0===i?void 0:i.id});var D=Object(l.useState)(F),R=Object(c.a)(D,2),k=R[0],z=R[1],_=Object(l.useState)(T),V=Object(c.a)(_,2),U=V[0],M=V[1],Q=[{id:"ARS",descripcion:"ARS"},{id:"USD",descripcion:"USD"}],E=null,L="sociedades/".concat(j.id,"/recibos/"),B=Object(a.useMutation)((function(e){return $e("cobro/agregar/".concat(j.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.creador=parseInt(b.id),e.next=3,v.invalidateQueries(["cobro",j]);case 3:return e.next=5,v.getQueryData(["cobro",j]);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return v.setQueryData(["cobro",j],i)},onSettled:function(e){var t,i,o,a,c,l,d,s,u,b,f,m,v,h,p,O,g,y,w,C,S,A,P,F,T,D,R,N,z,_,V,M,Q,L="";"contrato"!==n?(null===k||void 0===k||null===(v=k.empresas[0])||void 0===v?void 0:v.domicilio)&&(m=" "+(null===k||void 0===k||null===(h=k.empresas[0])||void 0===h?void 0:h.domicilio.split(",")[0]),(null===k||void 0===k||null===(p=k.empresas[0])||void 0===p?void 0:p.domicilio.split(",").length)>1&&(L=null===k||void 0===k||null===(O=k.empresas[0])||void 0===O?void 0:O.domicilio.split(",")[1],(null===k||void 0===k||null===(g=k.empresas[0])||void 0===g?void 0:g.domicilio.split(",").length)>2&&(L+=","+(null===k||void 0===k||null===(y=k.empresas[0])||void 0===y?void 0:y.domicilio.split(",")[2])))):(m=" "+(null===r||void 0===r||null===(w=r.cont)||void 0===w||null===(C=w.fideicomisos[0])||void 0===C||null===(S=C.empresas[0])||void 0===S?void 0:S.domicilio.split(",")[0]),(null===r||void 0===r||null===(A=r.cont)||void 0===A||null===(P=A.fideicomisos[0])||void 0===P||null===(F=P.empresas[0])||void 0===F?void 0:F.domicilio.split(",").length)>1&&(L=null===r||void 0===r||null===(T=r.cont)||void 0===T||null===(D=T.fideicomisos[0])||void 0===D||null===(R=D.empresas[0])||void 0===R?void 0:R.domicilio.split(",")[1],(null===r||void 0===r||null===(N=r.cont)||void 0===N||null===(z=N.fideicomisos[0])||void 0===z||null===(_=z.empresas[0])||void 0===_?void 0:_.domicilio.split(",").length)>2&&(L+=","+(null===r||void 0===r||null===(V=r.cont)||void 0===V||null===(M=V.fideicomisos[0])||void 0===M||null===(Q=M.empresas[0])||void 0===Q?void 0:Q.domicilio.split(",")[2]))));var B,W,q=null,G=null;"contrato"===n?G=null===r||void 0===r||null===(B=r.cont)||void 0===B||null===(W=B.fideicomisos[0])||void 0===W?void 0:W.fechaInicio.slice(0,10):(null===k||void 0===k?void 0:k.fechaInicio)&&(G=null===k||void 0===k?void 0:k.fechaInicio.slice(0,10));G&&(q=new Date(G+" 03:00").toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"}));var $="00000"+((null===e||void 0===e?void 0:e.reciboNum)+"").slice(0,1);E={cobro_numero:$.slice(-5)+"-"+((null===e||void 0===e?void 0:e.reciboNum)+"").slice(1,9),fide_nombre:"contrato"===n?null===r||void 0===r||null===(t=r.cont)||void 0===t||null===(i=t.fideicomisos[0])||void 0===i||null===(o=i.empresas[0])||void 0===o?void 0:o.razonSocial:null===k||void 0===k||null===(a=k.empresas[0])||void 0===a?void 0:a.razonSocial,fide_cuit:ct("contrato"===n?null===r||void 0===r||null===(c=r.cont)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l||null===(d=l.empresas[0])||void 0===d?void 0:d.CUIT:null===k||void 0===k||null===(s=k.empresas[0])||void 0===s?void 0:s.CUIT),fide_fecha:q,fide_dir_linea1:m,fide_dir_linea2:L,fidu_nombre:"contrato"===n?null===r||void 0===r||null===(u=r.cesiones[0])||void 0===u?void 0:u.nombre:null===U||void 0===U||null===(b=U.cesions[0])||void 0===b?void 0:b.nombre,adhe_nombre:"contrato"===n?null===r||void 0===r||null===(f=r.cont)||void 0===f?void 0:f.nombre:null===U||void 0===U?void 0:U.nombre,cobro_monto:(null===e||void 0===e?void 0:e.monto)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===e||void 0===e?void 0:e.monto)):"",cobro_moneda:null===e||void 0===e?void 0:e.moneda,cobro_f_pago:null===x||void 0===x?void 0:x.descripcion,cobro_concepto:null===I||void 0===I?void 0:I.descripcion},j.id>0&&H(e)}}),W=B.mutate;function q(e,t,i){return"Recibo_"+i+"-"+(e+"-"+t).replace(/ /g,"_")}var H=function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E||!t){e.next=9;break}return e.next=3,Object(Nn.pdf)(G()).toBlob();case 3:i=e.sent,(n=new FormData).append("file",i),n.append("path","./"+L),n.append("fileName",q(null===k||void 0===k?void 0:k.nombre,null===U||void 0===U?void 0:U.nombre,null===t||void 0===t?void 0:t.reciboNum)),Y({formData:n});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=function(){return Object(N.jsx)(Qn,{data:E,apiServerUrl:En})},$=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.formData,e.next=3,$e("utilidades/uploadpdf/".concat(j.id),i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formData,e.next=3,v.cancelQueries(["pdfFile",j]);case 3:return i=v.getQueryData(["pdfFile",j]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return v.setQueryData(["pdfFile",j],i)},onSettled:function(e){j.id>0&&v.invalidateQueries(["pdfFile",j]),f()}}),Y=$.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{concepto:"",monto:"",fecha:null},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,W({fecha:null===t||void 0===t?void 0:t.fecha,concepto:I.id,monto:null===t||void 0===t?void 0:t.monto,formaPago:x.id,fideicomisoId:k.id,reciboUrl:En+L+q(null===k||void 0===k?void 0:k.nombre,null===U||void 0===U?void 0:U.nombre,"*****"),contratoId:U.id,moneda:w.id,creador:b.id}),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{component:Bn,label:"Fecha",type:"date",name:"fecha",style:{width:"160px"}}),Object(N.jsxs)(wi.a,{smUp:"contrato"===n,children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fideicomiso",title:"Seleccione un fideicomiso.",disablePortal:!0,required:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,t){z(t),i("fideicomiso",t)},value:k,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:u||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fideicomiso"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Adhesi\xf3n",title:"Adhesi\xf3n",disablePortal:!0,required:!0,style:{width:"260px",display:"inline-flex"},onChange:function(e,t){M(t),i("contratoId",t)},value:U,getOptionLabel:function(e){var t,i;return"".concat(e.nombre," - ").concat((null===e||void 0===e?void 0:e.empresas[0])?null===e||void 0===e||null===(t=e.empresas[0])||void 0===t?void 0:t.razonSocial:""+(null===e||void 0===e?void 0:e.personas[0])?null===e||void 0===e||null===(i=e.personas[0])||void 0===i?void 0:i.nombre:"")},isOptionEqualToValue:function(e,t){return e.id===t.id},options:s?null===s||void 0===s?void 0:s.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===(null===k||void 0===k?void 0:k.id)})):[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Adhesi\xf3n"}))}})]}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Concepto",title:"Concepto",disablePortal:!0,required:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,t){P(t),i("concepto",t)},value:I,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Concepto"}))}}),Object(N.jsx)(Be.a,{as:Ee.a,required:!0,label:"Monto",size:"small",type:"number",style:{width:"160px"},name:"monto"}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Moneda",title:"Moneda",disablePortal:!0,required:!0,style:{width:"120px",display:"inline-flex"},onChange:function(e,t){C(t),i("moneda",t)},value:w,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:Q||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Moneda"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Forma de pago",title:"Forma de pago",disablePortal:!0,required:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,t){O(t),i("formaPago",t)},value:x,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Forma de pago"}))}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(m,{message:"Descripci\xf3n, fecha y monto no puede estar en blanco",ok:!0})]})}function Bn(e){var t=e.field,i=e.form,n=t.name,r=t.value,o=i.setFieldValue;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:r,onChange:function(e){return o(n,e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,style:{width:"160px",display:"inline-flex"},size:"small"},e))}})})}var Wn=i(162),qn=i.n(Wn),Hn=i(201),Gn=function(e,t,i,n,r,o,a,c){return[{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center"},{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return lt(e.value)}},{field:"fideicomiso",headerName:"Fideicomiso",width:155,hide:"contrato"===t,editable:!1,headerAlign:"center",align:"left"},{field:"contrato",headerName:"Adhesi\xf3n",width:150,hide:"contrato"===t,editable:!1,headerAlign:"center"},{field:"fiduciante",headerName:"fiduciante",width:160,hide:"contrato"===t,editable:!1,headerAlign:"center"},{field:"reciboNum",headerName:"Recibo",width:160,editable:e,headerAlign:"center"},{field:"descargar",headerName:"Link",width:160,editable:e,headerAlign:"center"},{field:"reciboUrl",headerName:"Link",width:70,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.value;return 0===t?"":Object(N.jsx)(F.a,{color:"inherit",onClick:function(){i(t)},children:Object(N.jsx)(qn.a,{color:"primary"})})}},{field:"concepto",headerName:"concepto",width:200,editable:e,headerAlign:"left",renderEditCell:function(e){return Object(N.jsx)(Jn,{listItems:o,label:"Concepto",props:e})}},{field:"monto",preProcessEditCellProps:Zn,headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:!1,headerAlign:"center"},{field:"cambio",preProcessEditCellProps:Zn,headerName:"Cambio",width:130,editable:e,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"formaPago",headerName:"formaPago",width:160,editable:!1,headerAlign:"center"},{field:"fondos",headerName:"Fondos",width:130,editable:e,headerAlign:"left",renderEditCell:function(e){return Object(N.jsx)(Jn,{listItems:n,label:"Fondos",props:e})}},{field:"archivadas",headerName:"Estado",width:130,editable:e,headerAlign:"left",renderEditCell:function(e){return Object(N.jsx)(Jn,{listItems:r,label:"Estado",props:e})}},{field:"observaciones",headerName:"Obs.",width:180,editable:e,headerAlign:"center"},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){c(t),a(!0)}})}}]};function $n(e){var t=e.loggedUser,i=e.mode,n=e.contratoId,r=e.filtCont,o=e.formaPagosFidu,d=e.filtFide,s=e.dataCobro,u=e.fondos_s,b=e.estados,f=e.conceptosPago,j=e.isLoading,m=e.error,v=e.refetch,h=Object(l.useContext)(uc),p=St(),x=p.Prompt,O=p.setIsPromptOpen,g=Object(l.useState)(),y=Object(c.a)(g,2),C=y[0],S=y[1],A=!0;"vista"===(null===t||void 0===t?void 0:t["rol.cobros"])&&(A=!1);var P=Object(a.useQueryClient)(),F=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cobro/eliminar/".concat(h.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.cancelQueries(["cobro",h]);case 2:return i=P.getQueryData(["cobro",h]),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return P.setQueryData(["cobro",h],i)},onSettled:function(){h.id>0&&P.invalidateQueries(["cobro",h]),v()}}),T=F.mutate,D=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,$e("cobro/modificar/".concat(h.id),Object(w.a)({id:n},i,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.field,t.id,t.value,e.next=3,P.cancelQueries(["cobro",h]);case 3:return i=P.getQueryData(["cobro",h]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return P.setQueryData(["cobro",h],i)},onSettled:function(){h.id>0&&P.invalidateQueries(["cobro",h]),v()}}),R=D.mutate;var k=l.useState([{field:"id",sort:"desc"}]),z=Object(c.a)(k,2),_=z[0],V=z[1],U=Object(l.useState)(25),M=Object(c.a)(U,2),Q=M[0],E=M[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6"})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(x,{message:"\xbfEliminar fila?",action:function(){return T(C)}}),Object(N.jsx)(Ft.a,{rows:null===s||void 0===s?void 0:s.filter((function(e){return function(e,t,r){return"contrato"===i?e.contratoId===n:-1===r&&-1===t||(r>-1&&-1===t?e.fideicomisoId===r:-1===r&&t>-1?e.contratoId===t:r>-1&&t>-1?e.fideicomisoId===r&&e.contratoId===t:void 0)}(e,r,d)})).map((function(e){var t,i,n,r,a,c,l,d,s,j,m,v,h,p;return{id:null===e||void 0===e?void 0:e.id,fecha:null===e||void 0===e?void 0:e.fecha,concepto:null===f||void 0===f||null===(t=f.find((function(t){return t.id===(null===e||void 0===e?void 0:e.concepto)})))||void 0===t?void 0:t.descripcion,fideicomisoId:null===e||void 0===e?void 0:e.fideicomisoId,fideicomiso:(null===e||void 0===e||null===(i=e.contrato)||void 0===i?void 0:i.fideicomisos[0])?null===e||void 0===e||null===(n=e.contrato)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.nombre:"",contrato:null===e||void 0===e||null===(a=e.contrato)||void 0===a?void 0:a.nombre,fiduciante:(null===e||void 0===e||null===(c=e.contrato)||void 0===c?void 0:c.personas[0])?null===e||void 0===e||null===(l=e.contrato)||void 0===l||null===(d=l.personas[0])||void 0===d?void 0:d.nombre:""+(null===e||void 0===e||null===(s=e.contrato)||void 0===s?void 0:s.empresas[0])?null===e||void 0===e||null===(j=e.contrato)||void 0===j||null===(m=j.empresas[0])||void 0===m?void 0:m.razonSocial:"",monto:null===e||void 0===e?void 0:e.monto,moneda:null===e||void 0===e?void 0:e.moneda,formaPago:o&&(null===e||void 0===e?void 0:e.formaPago)?null===o||void 0===o||null===(v=o.find((function(t){return t.id===(null===e||void 0===e?void 0:e.formaPago)})))||void 0===v?void 0:v.descripcion:"",reciboNum:null===e||void 0===e?void 0:e.reciboNum,reciboUrl:null===e||void 0===e?void 0:e.reciboUrl,descargar:null===e||void 0===e?void 0:e.reciboUrl,observaciones:null===e||void 0===e?void 0:e.observaciones,cambio:null===e||void 0===e?void 0:e.cambio,fondos:null===u||void 0===u||null===(h=u.find((function(t){return t.id===(null===e||void 0===e?void 0:e.fondos)})))||void 0===h?void 0:h.descripcion,archivadas:null===b||void 0===b||null===(p=b.find((function(t){return t.id===(null===e||void 0===e?void 0:e.archivadas)})))||void 0===p?void 0:p.descripcion,createdAt:null===e||void 0===e?void 0:e.createdAt,deleteId:null===e||void 0===e?void 0:e.id}})),OPs:!0,onCellEditCommit:R,columns:Gn(A,i,(function(e){var t=e.split("/recibos/")[1];Object(Hn.saveAs)(e,t+".pdf")}),u,b,f,O,S),sortModel:_,onSortModelChange:function(e){return e[0]!==_[0]&&function(e){var t;0===e.length&&(e.push(_[0]),"asc"===(null===(t=_[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),V(e)}(e)},pageSize:Q,onPageSizeChange:function(e){return E(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Yn}})]})]})})}function Yn(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["id","tipo","letra","fideicomiso","empresa","cuit","numero","montoTotal","neto","porcentajeIVA","iva","percepcionesIVA","IIBB_CABA","IIBB_BSAS","no_gravado","moneda","es_ajuste","createdAt","fechaIngreso","fechaVTO","OPnumero","estadoOP"]}})]})}function Zn(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(ne.a)(Object(ne.a)({},e.props),{},{error:t})}function Jn(e){var t=e.listItems,i=e.label,n=e.props,r=n.id,o=n.api,a=n.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var d=Object(l.useState)({descripcion:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(N.jsx)(mi.a,{value:u,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(i),!(null===i||void 0===i?void 0:i.id)){e.next=6;break}return o.setEditCellValue({id:r,field:a,value:i.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:o.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:i}))}})}function Kn(e){var t=e.setFiltFide,i=e.setFiltCont,n=e.fideicomisos,r=e.contratos,o=Object(l.useState)(null),a=Object(c.a)(o,2),d=a[0],s=a[1],u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1];function m(e,n){var r=-1;(null===n||void 0===n?void 0:n.id)&&(r=n.id),"cont"===e&&i(r),"fide"===e&&t(r)}return Object(N.jsx)(Be.c,{initialValues:{},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){s(t),m("fide",t)},value:d,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:n||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por contrato",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),m("cont",t)},value:f,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por contrato"}))}}),"\xa0"]})}})}function Xn(e){var t,i=e.mode,n=e.idSociety,r=e.loggedUser,o=e.contrato,d=Object(l.useState)(-1),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(l.useState)(-1),j=Object(c.a)(f,2),m=j[0],v=j[1],h=Object(a.useQuery)(["cobro",n],(function(){return Ge("cobro/listar/".concat(n.id,"/").concat("contrato"===i?null===o||void 0===o?void 0:o.id:0,"/*/*"))})),p=h.data,x=h.isLoading,O=h.error,g=h.refetch,y=Object(a.useQuery)(["contratos"],(function(){return Ge("contrato/listar/".concat(n.id,"/0"))})).data,w=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listarEmpresa/".concat(n.id))})).data,C=Object(l.useContext)(yc),S=Object(l.useContext)(vc),A=Object(l.useContext)(pc),I=Object(l.useContext)(fc);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(wi.a,{smUp:"vista"===(null===r||void 0===r?void 0:r["rol.cobros"]),children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ln,{idSociety:n,mode:i,contrato:o,contratos:y,fideicomisos:w,formaPagosFidu:S,conceptosPago:C,loggedUser:r,refetch:g})})}),Object(N.jsx)(wi.a,{smUp:"contrato"===i,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Kn,{idSociety:n,fideicomisos:w,setFiltCont:b,setFiltFide:v,contratos:y})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)($n,{idSociety:n,loggedUser:r,formaPagosFidu:S,mode:i,contratoId:null===o||void 0===o||null===(t=o.cont)||void 0===t?void 0:t.id,dataCobro:p,conceptosPago:C,isLoading:x,fondos_s:A,estados:I,error:O,refetch:g,filtCont:u,filtFide:m})})]})}function er(e){var t,i=e.idSociety,n=e.loggedUser,r=e.contrato;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Cobros | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsx)(we.a,{maxWidth:!1,children:Object(N.jsx)(Xn,{mode:"cobro",idSociety:i,loggedUser:n,contrato:r})})})]})}function tr(e){var t,i=e.idSociety,n=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Rubro | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Et,{idSociety:i,loggedUser:n})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Bt,{idSociety:i,loggedUser:n})})]})})]})}function ir(e){var t=e.dataContrato,i=e.conceptosCuota,n=e.loggedUser,r=e.moneda,o=e.refetch,d=Object(l.useContext)(uc),s=St().Prompt,u=Object(a.useQueryClient)(),b=Object(l.useState)(null),f=Object(c.a)(b,2),j=f[0],m=f[1],v=Object(a.useMutation)((function(e){return $e("cuota/agregar/".concat(d.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.creador=parseInt(n.id),e.next=3,u.invalidateQueries(["cuota",d]);case 3:return e.next=5,u.getQueryData(["cuota",d]);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return u.setQueryData(["cuota",d],i)},onSettled:function(){d.id>0&&u.invalidateQueries(["cuota",d]),o()}}),h=v.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{concepto:"",cuota:"",monto:"",fecha:null},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(i,o){var a,c,l;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=o.setSubmitting,l=o.resetForm,h({fecha:null===i||void 0===i?void 0:i.fecha,cuota:null===i||void 0===i?void 0:i.cuota,concepto:j.id,monto:null===i||void 0===i?void 0:i.monto,contratoId:null===t||void 0===t||null===(a=t.cont)||void 0===a?void 0:a.id,moneda:r,creador:n.id}),l(),c(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{component:nr,label:"Fecha",type:"date",name:"fecha"}),Object(N.jsx)(Be.a,{as:Ee.a,required:!0,size:"small",label:"Cuota n\xfamero",type:"number",name:"cuota"}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Concepto",title:"Concepto",disablePortal:!0,required:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,t){m(t),n("concepto",t)},value:j,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Concepto"}))}}),Object(N.jsx)(Be.a,{as:Ee.a,required:!0,label:"Monto",size:"small",type:"number",name:"monto"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(s,{message:"Descripci\xf3n, fecha y monto no puede estar en blanco",ok:!0})]})}function nr(e){var t=e.field,i=e.form,n=t.name,r=t.value,o=i.setFieldValue;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:r,onChange:function(e){return o(n,e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}var rr=i(277),or=Nn.StyleSheet.create({titulo:{flexDirection:"row",alignItems:"center",height:23,fontSize:8,textAlign:"center",fontStyle:"bold",flexGrow:1},espacio5:{flexDirection:"row",height:5,fontSize:7,textAlign:"center",flexGrow:1},espacio10:{flexDirection:"row",height:10,fontSize:7,textAlign:"center",flexGrow:1},container:{flexDirection:"row",height:12,fontSize:7,textAlign:"center",flexGrow:1},col1:{width:"14%",textAlign:"right",paddingLeft:2},col2:{width:"36%",textAlign:"left",paddingLeft:15},col3:{width:"24%",textAlign:"right",paddingLeft:2},col4:{width:"5%",textAlign:"right",paddingLeft:2},col5:{width:"8%",textAlign:"right",paddingRight:2},col6:{width:"5%",textAlign:"right",paddingRight:2},col7:{width:"8%",textAlign:"right",paddingRight:2}}),ar=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h=e.cont,p=e.liq;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:[{width:"100%",flexDirection:"row",marginTop:20}],children:Object(N.jsx)(Nn.Text,{style:[{width:"100%",color:"#101010",fontSize:22,textAlign:"left"}],children:null===h||void 0===h||null===(t=h.fideicomisos[0])||void 0===t?void 0:t.nombre})}),Object(N.jsxs)(Nn.View,{style:[or.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[or.col1,{margin:0}],children:"Cuenta Recaudadora:"}),Object(N.jsxs)(Nn.Text,{style:[or.col2,{margin:0}],children:[null===h||void 0===h||null===(i=h.fideicomisos[0])||void 0===i||null===(n=i.empresas[0])||void 0===n?void 0:n.banco,"-",null===h||void 0===h||null===(r=h.fideicomisos[0])||void 0===r||null===(o=r.empresas[0])||void 0===o?void 0:o.nroCuenta]}),Object(N.jsx)(Nn.Text,{style:[or.col3,{margin:0}],children:"Tel:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:null===h||void 0===h||null===(a=h.fideicomisos[0])||void 0===a||null===(c=a.empresas[0])||void 0===c?void 0:c.telefono})]}),Object(N.jsxs)(Nn.View,{style:[or.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[or.col1,{margin:0}],children:"Cuenta (CC U$S):"}),Object(N.jsx)(Nn.Text,{style:[or.col2,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[or.col3,{margin:0}],children:"CUIT:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:null===h||void 0===h||null===(l=h.fideicomisos[0])||void 0===l||null===(d=l.empresas[0])||void 0===d?void 0:d.CUIT})]}),Object(N.jsxs)(Nn.View,{style:[or.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[or.col1,{margin:0}],children:"CBU:"}),Object(N.jsx)(Nn.Text,{style:[or.col2,{margin:0}],children:null===h||void 0===h||null===(s=h.fideicomisos[0])||void 0===s||null===(u=s.empresas[0])||void 0===u?void 0:u.CBU}),Object(N.jsx)(Nn.Text,{style:[or.col3,{margin:0}],children:"Mail:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:null===h||void 0===h||null===(b=h.fideicomisos[0])||void 0===b||null===(f=b.empresas[0])||void 0===f?void 0:f.mail})]}),Object(N.jsxs)(Nn.View,{style:[or.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[or.col1,{margin:0}]}),Object(N.jsxs)(Nn.Text,{style:[{margin:0,color:rr.a[700],width:"86%",textAlign:"left",paddingLeft:15}],children:["Oficinas en ",null===h||void 0===h||null===(j=h.fideicomisos[0])||void 0===j||null===(m=j.empresas[0])||void 0===m?void 0:m.domicilio]})]}),Object(N.jsxs)(Nn.View,{style:[or.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[or.col1,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[{margin:0,color:rr.a[700],width:"86%",textAlign:"left",paddingLeft:15}],children:"Condici\xf3n de pago del 1 al 15 de cada mes, se solicita enviar comprobante de pago para acreditar la cuota."})]}),Object(N.jsxs)(Nn.View,{style:[or.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[or.col1,{margin:0}]}),Object(N.jsxs)(Nn.Text,{style:[{margin:0,color:rr.a[700],width:"86%",textAlign:"left",paddingLeft:15}],children:["Web ",null===h||void 0===h||null===(v=h.fideicomisos[0])||void 0===v?void 0:v.web]})]}),Object(N.jsx)(Nn.View,{style:[{width:"100%",flexDirection:"row"}],children:Object(N.jsxs)(Nn.Text,{style:[or.label,{margin:0,width:"100%",textAlign:"right"}],children:["Periodo: ",new Date(null===p||void 0===p?void 0:p.fecha).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})]})}),Object(N.jsx)(Nn.View,{style:[or.espacio5,{margin:0}],children:Object(N.jsx)(Nn.Text,{style:[{width:"100%"}],children:" "})})]})},cr=Nn.StyleSheet.create({titulo:{flexDirection:"row",alignItems:"center",height:23,fontSize:8,textAlign:"center",fontStyle:"bold",flexGrow:1},espacio5:{flexDirection:"row",height:5,fontSize:7,textAlign:"center",flexGrow:1},espacio10:{flexDirection:"row",height:10,fontSize:7,textAlign:"center",flexGrow:1},container:{flexDirection:"row",height:12,fontSize:7,textAlign:"center",flexGrow:1},col1:{width:"14%",textAlign:"right",paddingLeft:2},col2:{width:"36%",textAlign:"left",paddingLeft:15},col3:{width:"24%",textAlign:"right",paddingLeft:2},col4:{width:"5%",textAlign:"right",paddingLeft:2},col5:{width:"8%",textAlign:"right",paddingRight:2},col6:{width:"5%",textAlign:"right",paddingRight:2},col7:{width:"8%",textAlign:"right",paddingRight:2}}),lr=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h,p,x,O=e.cont,g=e.liq,y=e.cesion,w=e.productos,C=e.letras,S=e.qCuotasARS,A=e.qCuotasUSD;return Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",width:"100%",marginLeft:0,marginRight:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:[cr.titulo,{margin:0,borderTopWidth:1,borderTopColor:(null===O||void 0===O?void 0:O.fideicomisos[0])?null===O||void 0===O||null===(t=O.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"}],children:Object(N.jsx)(Nn.Text,{style:[{fontFamily:"Helvetica-Bold",width:"100%",textAlign:"left",paddingLeft:2}],children:"DATOS DEL FIDUCIANTE"})}),Object(N.jsxs)(Nn.View,{style:[cr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[cr.col1,{margin:0}],children:"Nombre y apellido:"}),Object(N.jsx)(Nn.Text,{style:[cr.col2,{margin:0}],children:null===y||void 0===y?void 0:y.nombre}),Object(N.jsx)(Nn.Text,{style:[cr.col3,{margin:0}],children:"Domicilio:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:(null===y||void 0===y||null===(i=y.cesionItems[0])||void 0===i?void 0:i.personaId)>0?null===y||void 0===y||null===(n=y.cesionItems[0])||void 0===n||null===(r=n.personas[0])||void 0===r?void 0:r.domicilio:(null===y||void 0===y||null===(o=y.cesionItems[0])||void 0===o?void 0:o.empresaId)>0?null===y||void 0===y||null===(a=y.cesionItems[0])||void 0===a||null===(c=a.empresas[0])||void 0===c?void 0:c.domicilio:""})]}),Object(N.jsxs)(Nn.View,{style:[cr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[cr.col1,{margin:0}],children:"DNI/DUIL/CUIT:"}),Object(N.jsx)(Nn.Text,{style:[cr.col2,{margin:0}],children:(null===y||void 0===y||null===(l=y.cesionItems[0])||void 0===l?void 0:l.personaId)>0?null===y||void 0===y||null===(d=y.cesionItems[0])||void 0===d||null===(s=d.personas[0])||void 0===s?void 0:s.CUIT:(null===y||void 0===y||null===(u=y.cesionItems[0])||void 0===u?void 0:u.empresaId)>0?null===y||void 0===y||null===(b=y.cesionItems[0])||void 0===b||null===(f=b.empresas[0])||void 0===f?void 0:f.CUIT:""}),Object(N.jsx)(Nn.Text,{style:[cr.col3,{margin:0}],children:"Cuotas Totales:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:S+A})]}),Object(N.jsxs)(Nn.View,{style:[cr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[cr.col1,{margin:0}],children:"Unidad funcional:"}),Object(N.jsx)(Nn.Text,{style:[cr.col2,{margin:0}],children:(null===(j=w[0])||void 0===j?void 0:j.codigo)+(w[1]?", "+(null===(m=w[1])||void 0===m?void 0:m.codigo):"")+(w[2]?", "+(null===(v=w[2])||void 0===v?void 0:v.codigo):"")}),Object(N.jsx)(Nn.Text,{style:[cr.col3,{margin:0}],children:"Tipo de fiduciante:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:(null===y||void 0===y||null===(h=y.cesionItems[0])||void 0===h?void 0:h.personaId)>0?null===C||void 0===C||null===(p=C.find((function(e){var t,i;return e.id===parseInt(null===y||void 0===y||null===(t=y.cesionItems[0])||void 0===t||null===(i=t.personas[0])||void 0===i?void 0:i.letra)})))||void 0===p?void 0:p.descripcion:""})]}),Object(N.jsxs)(Nn.View,{style:[cr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[cr.col1,{margin:0}],children:"Fecha de adhesion: "}),Object(N.jsx)(Nn.Text,{style:[cr.col2,{margin:0}],children:null===O||void 0===O?void 0:O.adhesion.slice(0,10)}),Object(N.jsx)(Nn.Text,{style:[cr.col3,{margin:0}],children:"CAC Base:"}),Object(N.jsx)(Nn.Text,{style:[{margin:0,width:"26%",textAlign:"left",paddingLeft:8}],children:null===g||void 0===g||null===(x=g.data)||void 0===x?void 0:x.CACBase})]}),Object(N.jsx)(Nn.View,{style:[cr.espacio5,{margin:0}],children:Object(N.jsx)(Nn.Text,{style:[{width:"100%"}],children:" "})})]})})},dr=i(139),sr=Nn.StyleSheet.create({titulo:{flexDirection:"row",alignItems:"center",height:23,fontSize:8,textAlign:"center",fontStyle:"bold",flexGrow:1},espacio5:{flexDirection:"row",height:5,fontSize:7,textAlign:"center",flexGrow:1},espacio10:{flexDirection:"row",height:10,fontSize:7,textAlign:"center",flexGrow:1},container:{flexDirection:"row",height:12,fontSize:7,textAlign:"center",flexGrow:1},col1:{width:"14%",textAlign:"right",paddingLeft:2},col2:{width:"36%",textAlign:"right",paddingLeft:2},col3:{width:"24%",textAlign:"right",paddingLeft:2},col4:{width:"5%",textAlign:"right",paddingLeft:2},col5:{width:"8%",textAlign:"right",paddingRight:2},col6:{width:"5%",textAlign:"right",paddingRight:2},col7:{width:"8%",textAlign:"right",paddingRight:2}}),ur=function(e){e.conceptosPago,e.conceptosCuota;var t,i,n,r,o,a,c,l=e.cont,d=e.liq;return Object(N.jsx)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",width:"100%",marginLeft:0,marginRight:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:[sr.titulo,{margin:0,borderTopWidth:1,borderTopColor:(null===l||void 0===l?void 0:l.fideicomisos[0])?null===l||void 0===l||null===(t=l.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"}],children:Object(N.jsx)(Nn.Text,{style:[{fontFamily:"Helvetica-Bold",width:"100%",textAlign:"left",paddingLeft:2}],children:"ESTADO DE CUENTA"})}),Object(N.jsxs)(Nn.View,{style:[sr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[sr.col1,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col2,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col3,{margin:0}],children:"Cuota mes en curso:"}),Object(N.jsx)(Nn.Text,{style:[sr.col4,{margin:0}],children:"ARS\xa0"}),Object(N.jsx)(Nn.Text,{style:[sr.col5,{margin:0}],children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===d||void 0===d||null===(i=d.data)||void 0===i?void 0:i.ultimaCuotaARS))}),Object(N.jsx)(Nn.Text,{style:[sr.col6,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col7,{margin:0}]})]}),Object(N.jsxs)(Nn.View,{style:[sr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[sr.col1,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col2,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col3,{margin:0,color:rr.a[700]}],children:"Saldo al mes Anterior:"}),Object(N.jsx)(Nn.Text,{style:[sr.col4,{margin:0,color:rr.a[700]}],children:"ARS\xa0"}),Object(N.jsx)(Nn.Text,{style:[sr.col5,{margin:0,color:rr.a[700]}],children:"0.00"}),Object(N.jsx)(Nn.Text,{style:[sr.col6,{margin:0,color:rr.a[700]}]}),Object(N.jsx)(Nn.Text,{style:[sr.col7,{margin:0,color:rr.a[700]}]})]}),Object(N.jsxs)(Nn.View,{style:[sr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[sr.col1,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col2,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col3,{margin:0,color:rr.a[700]}],children:"Punitorios:"}),Object(N.jsx)(Nn.Text,{style:[sr.col4,{margin:0,color:rr.a[700]}],children:"ARS\xa0"}),Object(N.jsx)(Nn.Text,{style:[sr.col5,{margin:0,color:rr.a[700]}],children:"0.00"}),Object(N.jsx)(Nn.Text,{style:[sr.col6,{margin:0,color:rr.a[700]}]}),Object(N.jsx)(Nn.Text,{style:[sr.col7,{margin:0,color:rr.a[700]}]})]}),Object(N.jsxs)(Nn.View,{style:[sr.container,{margin:0}],children:[Object(N.jsx)(Nn.Text,{style:[sr.col1,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col2,{margin:0}]}),Object(N.jsx)(Nn.Text,{style:[sr.col3,{margin:0,color:dr.a[700]}],children:"Saldo en cuenta corriente:"}),Object(N.jsx)(Nn.Text,{style:[sr.col4,{margin:0,color:dr.a[700]}],children:"ARS\xa0"}),Object(N.jsx)(Nn.Text,{style:[sr.col5,{margin:0,color:dr.a[700]}],children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(parseFloat(null===d||void 0===d||null===(n=d.data)||void 0===n?void 0:n.cuotasTotARS)+parseFloat(null===d||void 0===d||null===(r=d.data)||void 0===r?void 0:r.estimadoTot)+parseFloat(null===d||void 0===d||null===(o=d.data)||void 0===o?void 0:o.deltaTot)-parseFloat(null===d||void 0===d||null===(a=d.data)||void 0===a?void 0:a.cobrosTotARS)))}),Object(N.jsx)(Nn.Text,{style:[sr.col6,{margin:0,color:dr.a[700]}]}),Object(N.jsx)(Nn.Text,{style:[sr.col7,{margin:0,color:dr.a[700]}]})]}),Object(N.jsx)(Nn.View,{style:[sr.espacio5,{margin:0,borderBottomWidth:1,borderBottomColor:(null===l||void 0===l?void 0:l.fideicomisos[0])?null===l||void 0===l||null===(c=l.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:Object(N.jsx)(Nn.Text,{style:[{width:"100%"}],children:" "})})]})})},br=Nn.StyleSheet.create({row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:18,fontSize:7,fontStyle:"bold"},col1:{width:"18%",borderRightWidth:1,textAlign:"center",paddingRight:2},col2:{width:"42%",textAlign:"left",borderRightWidth:1,paddingLeft:2},col3:{width:"14%",borderRightWidth:1,textAlign:"center",paddingRight:0},col4:{width:"26%",textAlign:"right",paddingRight:2}}),fr=function(e){var t=e.conceptosPago,i=e.fide;return e.cobros.map((function(e,n){var r;return Object(N.jsxs)(Nn.View,{style:[br.row,{borderBottomColor:null===i||void 0===i?void 0:i.color}],children:[Object(N.jsx)(Nn.Text,{style:[br.col1,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:lt(e.fecha)},"col_a"+n),Object(N.jsxs)(Nn.Text,{style:[br.col2,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",null===t||void 0===t||null===(r=t.find((function(t){return t.id===e.concepto})))||void 0===r?void 0:r.descripcion]},"col_b"+n),Object(N.jsxs)(Nn.Text,{style:[br.col3,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",e.moneda]},"col_c"+n),Object(N.jsxs)(Nn.Text,{style:[br.col4,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.monto))]},"col_d"+n)]},"row"+e.numero+n)}))},jr=Nn.StyleSheet.create({row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:18,fontSize:7,fontStyle:"bold"},col1:{width:"14%",borderRightWidth:1,textAlign:"center",paddingRight:2},col2:{width:"36%",textAlign:"left",borderRightWidth:1,paddingLeft:2},col2bis:{width:"16%",textAlign:"right",borderRightWidth:1,paddingRight:2},col3:{width:"10%",borderRightWidth:1,textAlign:"center",paddingRight:0},col4:{width:"24%",textAlign:"right",paddingRight:2}}),mr=function(e){var t=e.conceptosCuota,i=e.fide,n=e.cuotas,r=e.ajusteEst,o=e.ajusteDelt;return n.map((function(e,n){var a,c,l,d,s,u;return Object(N.jsx)(Nn.View,{style:[{margin:0,borderWidth:0}],children:"ARS"===e.moneda&&e.concepto>0?Object(N.jsxs)(Nn.View,{style:[{margin:0,borderWidth:0}],children:[Object(N.jsxs)(Nn.View,{style:[jr.row,{borderBottomColor:null===i||void 0===i?void 0:i.color}],children:[Object(N.jsx)(Nn.Text,{style:[jr.col1,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:lt(e.fecha)},"col_a"+n),Object(N.jsx)(Nn.Text,{style:[jr.col2,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:null===t||void 0===t||null===(a=t.find((function(t){return t.id===e.concepto})))||void 0===a?void 0:a.descripcion},"col_b"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col2bis,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" "," "]},"col_c"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col3,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",e.moneda]},"col_d"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col4,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.monto))]},"col_e"+n)]},"row1"+e.numero+n),Object(N.jsxs)(Nn.View,{style:[jr.row,{borderBottomColor:null===i||void 0===i?void 0:i.color}],children:[Object(N.jsx)(Nn.Text,{style:[jr.col1,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:lt(e.fecha)},"col_f"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col2,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ","Cuota ajuste CAC Estimado"]},"col_g"+n),Object(N.jsx)(Nn.Text,{style:[jr.col2bis,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:null===(c=r[n])||void 0===c?void 0:c.CAC},"col_h"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col3,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",e.moneda]},"col_i"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col4,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===(l=r[n])||void 0===l?void 0:l.monto))]},"col_j"+n)]},"row2"+e.numero+n),Object(N.jsxs)(Nn.View,{style:[jr.row,{borderBottomColor:null===i||void 0===i?void 0:i.color}],children:[Object(N.jsx)(Nn.Text,{style:[jr.col1,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:lt(e.fecha)},"col_k"+n),Object(N.jsx)(Nn.Text,{style:[jr.col2,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:"Cuota ajuste CAC Delta Def."},"col_l"+n),Object(N.jsx)(Nn.Text,{style:[jr.col2bis,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:null===(d=o[n])||void 0===d?void 0:d.CAC},"col_m"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col3,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",e.moneda]},"col_n"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col4,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===(s=o[n])||void 0===s?void 0:s.monto))]},"col_o"+n)]},"row3"+e.numero+n)]},"rowCont"+e.numero+n):Object(N.jsx)(Nn.View,{style:[{margin:0,borderWidth:0}],children:Object(N.jsxs)(Nn.View,{style:[jr.row,{borderBottomColor:null===i||void 0===i?void 0:i.color}],children:[Object(N.jsx)(Nn.Text,{style:[jr.col1,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:lt(e.fecha)},"col_a"+n),Object(N.jsx)(Nn.Text,{style:[jr.col2,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:null===t||void 0===t||null===(u=t.find((function(t){return t.id===e.concepto})))||void 0===u?void 0:u.descripcion},"col_b"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col2bis,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" "," "]},"col_c"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col3,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",e.moneda]},"col_d"+n),Object(N.jsxs)(Nn.Text,{style:[jr.col4,{borderRightColor:null===i||void 0===i?void 0:i.color}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.monto))]},"col_e"+n)]},"row1"+e.numero+n)},"rowCont"+e.numero+n)},"rowCont"+e.numero+n)}))},vr=Nn.StyleSheet.create({titulo:{flexDirection:"row",alignItems:"center",height:21,fontSize:8,textAlign:"center",fontStyle:"bold",flexGrow:1},container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,textAlign:"center",fontStyle:"bold",flexGrow:1},col1:{width:"14%",borderRightWidth:1,textAlign:"left",paddingLeft:2},col2:{width:"36%",textAlign:"left",borderRightWidth:1,paddingLeft:2},col2bis:{width:"16%",textAlign:"left",borderRightWidth:1,paddingLeft:2},col3:{width:"10%",borderRightWidth:1,textAlign:"left",paddingLeft:2},col4:{width:"24%",textAlign:"right",paddingRight:2},cob_col1:{width:"18%",borderRightWidth:1,textAlign:"left",paddingLeft:2},cob_col2:{width:"42%",textAlign:"left",borderRightWidth:1,paddingLeft:2},cob_col3:{width:"14%",borderRightWidth:1,textAlign:"left",paddingLeft:2},cob_col4:{width:"26%",textAlign:"right",paddingRight:2}}),hr=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v=e.conceptosPago,h=e.conceptosCuota,p=e.cont,x=e.liq;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",margin:0,borderWidth:0,borderColor:"#000000"},children:[Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",width:"53%",marginLeft:0,marginRight:35,textAlign:"center",borderWidth:0},children:[Object(N.jsx)(Nn.View,{style:[vr.titulo,{margin:0}],children:Object(N.jsx)(Nn.Text,{style:[{fontFamily:"Helvetica-Bold",width:"100%",textAlign:"left",paddingLeft:2}],children:"DETALLE DE LA CUOTA"})}),Object(N.jsxs)(Nn.View,{style:[vr.container,{margin:0,borderBottomColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(t=p.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"}],children:[Object(N.jsx)(Nn.Text,{style:[vr.col1,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(i=p.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Fecha"}),Object(N.jsx)(Nn.Text,{style:[vr.col2,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(n=p.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff"}],children:"Concepto"}),Object(N.jsx)(Nn.Text,{style:[vr.col2bis,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(r=p.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff"}],children:"V. Unitario"}),Object(N.jsx)(Nn.Text,{style:[vr.col3,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(o=p.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"Mon."}),Object(N.jsx)(Nn.Text,{style:[vr.col4,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(a=p.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Monto"})]}),Object(N.jsx)(mr,{conceptosCuota:h,fide:null===p||void 0===p?void 0:p.fideicomisos[0],cuotas:null===x||void 0===x||null===(c=x.data)||void 0===c?void 0:c.cuotas,ajusteEst:null===x||void 0===x||null===(l=x.data)||void 0===l?void 0:l.ajusteEst,ajusteDelt:null===x||void 0===x||null===(d=x.data)||void 0===d?void 0:d.ajusteDelt})]}),Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",width:"37%",marginLeft:12,marginRight:0,textAlign:"center",borderWidth:0,borderColor:"#000000"},children:[Object(N.jsx)(Nn.View,{style:[vr.titulo,{margin:0}],children:Object(N.jsx)(Nn.Text,{style:[{fontFamily:"Helvetica-Bold",width:"100%",textAlign:"left",paddingLeft:2}],children:"HISTORIAL DE PAGOS"})}),Object(N.jsxs)(Nn.View,{style:[vr.container,{margin:0,borderBottomColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(s=p.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:[Object(N.jsx)(Nn.Text,{style:[vr.cob_col1,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(u=p.fideicomisos[0])||void 0===u?void 0:u.color:"#ffffff"}],children:"Fecha"}),Object(N.jsx)(Nn.Text,{style:[vr.cob_col2,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(b=p.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:"Concepto"}),Object(N.jsx)(Nn.Text,{style:[vr.cob_col3,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(f=p.fideicomisos[0])||void 0===f?void 0:f.color:"#ffffff"}],children:"Mon."}),Object(N.jsx)(Nn.Text,{style:[vr.cob_col4,{borderRightColor:(null===p||void 0===p?void 0:p.fideicomisos[0])?null===p||void 0===p||null===(j=p.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:"Monto"})]}),Object(N.jsx)(fr,{conceptosPago:v,fide:null===p||void 0===p?void 0:p.fideicomisos[0],cobros:null===x||void 0===x||null===(m=x.data)||void 0===m?void 0:m.cobros})]})]})},pr=Nn.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:45,paddingRight:40,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:14,textAlign:"left",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),xr=function(e){var t=e.conceptosPago,i=e.conceptosCuota,n=e.data;return Object(N.jsx)(Nn.Document,{children:Object(N.jsx)(Nn.Page,{size:"A4",style:pr.page,children:Object(N.jsxs)(Nn.View,{children:[Object(N.jsx)(ar,{conceptosPago:t,conceptosCuota:i,cont:null===n||void 0===n?void 0:n.cont,liq:null===n||void 0===n?void 0:n.liq,cesion:null===n||void 0===n?void 0:n.cesion,productos:null===n||void 0===n?void 0:n.productos,letras:null===n||void 0===n?void 0:n.letras,qCuotasARS:null===n||void 0===n?void 0:n.qCuotasARS,qCuotasUSD:null===n||void 0===n?void 0:n.qCuotasUSD}),Object(N.jsx)(lr,{conceptosPago:t,conceptosCuota:i,cont:null===n||void 0===n?void 0:n.cont,liq:null===n||void 0===n?void 0:n.liq,cesion:null===n||void 0===n?void 0:n.cesion,productos:null===n||void 0===n?void 0:n.productos,letras:null===n||void 0===n?void 0:n.letras,qCuotasARS:null===n||void 0===n?void 0:n.qCuotasARS,qCuotasUSD:null===n||void 0===n?void 0:n.qCuotasUSD}),Object(N.jsx)(ur,{conceptosPago:t,conceptosCuota:i,cont:null===n||void 0===n?void 0:n.cont,liq:null===n||void 0===n?void 0:n.liq}),Object(N.jsx)(hr,{conceptosPago:t,conceptosCuota:i,cont:null===n||void 0===n?void 0:n.cont,liq:null===n||void 0===n?void 0:n.liq})]})})})},Or="http://104.131.28.211:3000/";function gr(e){var t=e.contrato,i=e.productos,n=e.cesion,r=e.qCuotasARS,o=e.qCuotasUSD,c=e.loggedUser,d=e.refetch,s=Object(l.useContext)(uc),u=St().Prompt,b=Object(a.useQueryClient)(),f=Object(l.useContext)(Cc),j=Object(l.useContext)(yc),m=Object(l.useContext)(gc),v=null,h="sociedades/".concat(s.id,"/liquidaciones/"),p=Object(a.useMutation)((function(e){return $e("liquidacion/agregar/".concat(s.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.creador=parseInt(c.id),e.next=3,b.invalidateQueries(["liquidacion",s]);case 3:return e.next=5,b.getQueryData(["liquidacion",s]);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return b.setQueryData(["liquidacion",s],i)},onSettled:function(e){v={cont:t,liq:e,cesion:n,productos:i,letras:f,qCuotasARS:r,qCuotasUSD:o},s.id>0&&g(e)}}),x=p.mutate;function O(e){var i;return"Liquidacion-"+((null===t||void 0===t||null===(i=t.fideicomisos[0])||void 0===i?void 0:i.nombre)+"-"+(null===n||void 0===n?void 0:n.nombre)).replace(/ /g,"_")+"-Adhesion_"+(null===t||void 0===t?void 0:t.id)+"-"+function(e){return void 0===e||null===e?null:new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC",month:"short"})+new Date(e).getFullYear()}(e)}var g=function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.pdf)(y()).toBlob();case 2:i=e.sent,(n=new FormData).append("file",i),n.append("path","./"+h),n.append("fileName",O(null===t||void 0===t?void 0:t.fecha)),C({formData:n});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){return Object(N.jsx)(xr,{conceptosPago:j,conceptosCuota:m,data:v,apiServerUrl:Or})},w=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.formData,e.next=3,$e("utilidades/uploadpdf/".concat(s.id),i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formData,e.next=3,b.cancelQueries(["pdfFile",s]);case 3:return i=b.getQueryData(["pdfFile",s]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return b.setQueryData(["pdfFile",s],i)},onSettled:function(e){s.id>0&&b.invalidateQueries(["pdfFile",s]),d()}}),C=w.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{fecha:null},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(i,n){var r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,o=n.resetForm,x({fechaLiquidacion:ht(null===i||void 0===i?void 0:i.fecha),contrato:{id:null===t||void 0===t?void 0:t.id,nombre:null===t||void 0===t?void 0:t.nombre,fideicomisoId:null===t||void 0===t?void 0:t.fideicomisoId,adhesion:null===t||void 0===t?void 0:t.adhesion},link:Or+h+O(ht(null===i||void 0===i?void 0:i.fecha)),creador:c.id}),o(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{component:yr,label:"Fecha",type:"date",name:"fecha"}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(u,{message:"Descripci\xf3n, fecha no puede estar en blanco",ok:!0})]})}function yr(e){var t=e.field,i=e.form,n=t.name,r=t.value,o=i.setFieldValue;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:r,onChange:function(e){return o(n,e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}var wr=function(e,t,i,n){return[{field:"fecha",headerName:"Fecha",width:150,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"saldoARS",preProcessEditCellProps:Sr,headerName:"Saldo ARS",width:170,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"saldoUSD",preProcessEditCellProps:Sr,headerName:"Saldo USD",width:170,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"link",headerName:"Link",width:70,editable:!1,headerAlign:"center",renderCell:function(e){var i=e.value;return 0===i?"":Object(N.jsx)(F.a,{color:"inherit",onClick:function(){t(i)},children:Object(N.jsx)(qn.a,{color:"primary"})})}},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){n(t),i(!0)}})}}]};function Cr(e){var t=e.loggedUser,i=e.liquidaciones,n=e.isLoading,r=e.error,o=e.refetch,d=Object(l.useContext)(uc),s=St(),u=s.Prompt,b=s.setIsPromptOpen,f=Object(l.useState)(),j=Object(c.a)(f,2),m=j[0],v=j[1],h=!0;"vista"===(null===t||void 0===t?void 0:t["rol.contrato"])&&(h=!1);var p=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("liquidacion/eliminar/".concat(d.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["liquidacion",d]);case 2:return i=p.getQueryData(["liquidacion",d]),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return p.setQueryData(["liquidacion",d],i)},onSettled:function(){d.id>0&&p.invalidateQueries(["liquidacion",d]),o()}}),O=x.mutate,g=l.useState([{field:"fecha",sort:"asc"}]),y=Object(c.a)(g,2),w=y[0],C=y[1];return n?"Cargando...":r?"Hubo un error: ".concat(r.message):Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6"})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(u,{message:"\xbfEliminar fila?",action:function(){return O(m)}}),Object(N.jsx)(Ft.a,{rows:null===i||void 0===i?void 0:i.map((function(e){return{id:null===e||void 0===e?void 0:e.id,fecha:null===e||void 0===e?void 0:e.fecha,saldoARS:null===e||void 0===e?void 0:e.saldoARS,saldoUSD:null===e||void 0===e?void 0:e.saldoUSD,link:null===e||void 0===e?void 0:e.link,deleteId:null===e||void 0===e?void 0:e.id}})),columns:wr(h,(function(e){var t=e.split("/liquidaciones/")[1];Object(Hn.saveAs)(e,t+".pdf")}),b,v),sortModel:w,onSortModelChange:function(e){return e[0]!==w[0]&&function(e){var t;0===e.length&&(e.push(w[0]),"asc"===(null===(t=w[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),C(e)}(e)},disableSelectionOnClick:!0,autoHeight:!0})]})]})})}function Sr(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(ne.a)(Object(ne.a)({},e.props),{},{error:t})}function Ar(e){var t=e.contratoId,i=e.idSociety,n=e.loggedUser,r=e.contrato,o=e.productos,c=e.cesion,l=e.qCuotasARS,d=e.qCuotasUSD,s=!0;"vista"===(null===n||void 0===n?void 0:n["rol.contrato"])&&(s=!1);var u=Object(a.useQuery)(["liquidaciones",i],(function(){return Ge("liquidacion/listar/".concat(i.id,"/0/").concat(t))})),b=u.data,f=u.isLoading,j=u.error,m=u.refetch;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(wi.a,{smUp:!s,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(gr,{loggedUser:n,contrato:r,productos:o,cesion:c,qCuotasARS:l,qCuotasUSD:d,refetch:m})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Cr,{loggedUser:n,liquidaciones:b,isLoading:f,error:j,refetch:m})})]})}var Ir=function(e,t,i,n){return[{field:"fecha",headerName:"Fecha",width:150,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"cuota",headerName:"Cuota",width:120,editable:e,headerAlign:"center"},{field:"concepto",headerName:"concepto",width:400,editable:e,headerAlign:"left",renderEditCell:function(e){return Object(N.jsx)(Tr,{listItems:t,label:"Concepto",props:e})}},{field:"monto",preProcessEditCellProps:Fr,headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){n(t),i(!0)}})}}]};function Pr(e){var t,i=e.loggedUser,n=e.conceptosCuota,r=e.dataContrato,o=e.isLoading,d=e.error,s=e.refetch,u=e.moneda,b=Object(l.useContext)(uc),f=St(),j=f.Prompt,m=f.setIsPromptOpen,v=Object(l.useState)(),h=Object(c.a)(v,2),p=h[0],x=h[1],O=!0;"vista"===(null===i||void 0===i?void 0:i["rol.contrato"])&&(O=!1);var g=Object(a.useQueryClient)(),y=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cuota/eliminar/".concat(b.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.cancelQueries(["cuota",b]);case 2:return i=g.getQueryData(["cuota",b]),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return g.setQueryData(["cuota",b],i)},onSettled:function(){b.id>0&&g.invalidateQueries(["cuota",b]),s()}}),C=y.mutate,S=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,$e("cuota/modificar/".concat(b.id),Object(w.a)({id:n},i,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.field,t.id,t.value,e.next=3,g.cancelQueries(["cuota",b]);case 3:return i=g.getQueryData(["cuota",b]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return g.setQueryData(["cuota",b],i)},onSettled:function(){b.id>0&&g.invalidateQueries(["cuota",b]),s()}}),A=S.mutate,P=l.useState([{field:"fecha",sort:"asc"}]),F=Object(c.a)(P,2),T=F[0],D=F[1];return o?"Cargando...":d?"Hubo un error: ".concat(d.message):Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6"})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(j,{message:"\xbfEliminar fila?",action:function(){return C(p)}}),Object(N.jsx)(Ft.a,{rows:null===r||void 0===r||null===(t=r.cuotas)||void 0===t?void 0:t.filter((function(e){return e.moneda===u})).map((function(e){var t;return{id:null===e||void 0===e?void 0:e.id,fecha:null===e||void 0===e?void 0:e.fecha,concepto:null===n||void 0===n||null===(t=n.find((function(t){return t.id===(null===e||void 0===e?void 0:e.concepto)})))||void 0===t?void 0:t.descripcion,cuota:null===e||void 0===e?void 0:e.cuota,monto:null===e||void 0===e?void 0:e.monto,moneda:null===e||void 0===e?void 0:e.moneda,CACBase:null===e||void 0===e?void 0:e.CACBase,createdAt:null===e||void 0===e?void 0:e.createdAt,deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:A,columns:Ir(O,n,m,x),sortModel:T,onSortModelChange:function(e){return e[0]!==T[0]&&function(e){var t;0===e.length&&(e.push(T[0]),"asc"===(null===(t=T[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),D(e)}(e)},disableSelectionOnClick:!0,autoHeight:!0})]})]})})}function Fr(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(ne.a)(Object(ne.a)({},e.props),{},{error:t})}function Tr(e){var t=e.listItems,i=e.label,n=e.props,r=n.id,o=n.api,a=n.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var d=Object(l.useState)({descripcion:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(N.jsx)(mi.a,{value:u,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(i),!(null===i||void 0===i?void 0:i.id)){e.next=6;break}return o.setEditCellValue({id:r,field:a,value:i.id},t),e.next=5,n.api.commitCellChange({id:r,field:a});case 5:o.setCellMode(r,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:i}))}})}function Dr(e){var t=e.idSociety,i=e.loggedUser,n=e.contratoId,r=e.fideicomisoId,o=e.personas,d=e.empresas,s=e.refetch,u=St(),b=u.setIsPromptOpen,f=u.Prompt,j=Object(a.useQueryClient)(),m=Object(a.useMutation)((function(e){return $e("cesion/alta/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.invalidateQueries(["cesionItem",t]);case 2:return e.next=4,j.getQueryData(["cesionItem",t]);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return j.setQueryData(["cesionItem",t],n)},onSettled:function(){t.id>0&&j.invalidateQueries(["cesionItem",t]),s()}}),v=m.mutate,h=Object(l.useState)(""),p=Object(c.a)(h,2),x=p[0],O=p[1],g=Object(l.useState)(null),y=Object(c.a)(g,2),w=y[0],C=y[1],S=Object(l.useState)(null),A=Object(c.a)(S,2),I=A[0],P=A[1],F=Object(l.useState)("persona"),T=Object(c.a)(F,2),D=T[0],R=T[1];var k=ht(new Date);return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{fideicomisoId:null,CACbase:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,o){var a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.setSubmitting,o.resetForm,void 0===(null===w||void 0===w?void 0:w.id)&&void 0===(null===I||void 0===I?void 0:I.id)?(O("Debe seleccionar un fiduciante."),b(!0)):(v({contratoId:n,fecha:k,nombre:"persona"===D?null===w||void 0===w?void 0:w.nombre:null===I||void 0===I?void 0:I.razonSocial,personaId:"persona"===D?null===w||void 0===w?void 0:w.id:null,empresaId:"empresa"===D?null===I||void 0===I?void 0:I.id:null,fideicomisoId:r,creador:null===i||void 0===i?void 0:i.id}),a(!1));case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsx)(Be.b,{children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:0,md:0},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsxs)(Ce.a,{item:!0,md:3,children:[Object(N.jsx)(wi.a,{smUp:"empresa"===D,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fiduciante Persona",title:"Seleccione una Persona.",disablePortal:!0,style:{width:"260px",display:"inline-flex"},onChange:function(e,t){C(t),i("persona",t)},value:"persona"===D?w:null,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fiduciante Persona"}))}})}),Object(N.jsx)(wi.a,{smUp:"persona"===D,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fiduciante Empresa",title:"Seleccione una Empresa.",disablePortal:!0,style:{width:"260px",display:"inline-flex"},onChange:function(e,t){P(t),i("empresa",t)},value:"empresa"===D?I:null,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fiduciante Empresa"}))}})})]}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsxs)(un.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:"persona",onChange:function(e){return t=e,C(null),P(null),void R(t.target.value);var t},name:"tipo_fiduciante",children:[Object(N.jsx)(bn.a,{value:"persona",control:Object(N.jsx)(fn.a,{}),label:"Persona"}),Object(N.jsx)(bn.a,{value:"empresa",control:Object(N.jsx)(fn.a,{}),label:"Empresa"})]},"tipo_fiduciante")}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Nueva Cesi\xf3n"})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,sx:{p:2,borderTop:2,borderColor:"primary.main"}})]})})}}),Object(N.jsx)(f,{message:x,ok:!0})]})}function Rr(e){var t=e.items,i=Object(l.useContext)(wc);return Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsx)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:Object(N.jsx)(Ce.a,{item:!0,md:7,children:Object(N.jsx)(Ft.a,{rows:t.map((function(e){var t;return{id:e.id,codigo:e.codigo,tipo:null===i||void 0===i||null===(t=i.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion}})),hideFooter:!0,columns:[{field:"codigo",headerName:"C\xf3digo",headerAlign:"center",width:200,editable:!1},{field:"tipo",headerName:"Tipo de producto",width:240,editable:!1,headerAlign:"center",align:"center"}],disableSelectionOnClick:!0,autoHeight:!0})})})})}function Nr(e){var t=e.idSociety,i=e.loggedUser,n=e.cesionId,r=e.fideicomisoId,o=e.personas,d=e.empresas,s=e.refetch,u=St(),b=u.setIsPromptOpen,f=u.Prompt,j=Object(a.useQueryClient)(),m=Object(a.useMutation)((function(e){return $e("cesionItem/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.invalidateQueries(["cesionItem",t]);case 2:return e.next=4,j.getQueryData(["cesionItem",t]);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return j.setQueryData(["cesionItem",t],n)},onSettled:function(){t.id>0&&j.invalidateQueries(["cesionItem",t]),s()}}),v=m.mutate,h=Object(l.useState)(""),p=Object(c.a)(h,2),x=p[0],O=p[1],g=Object(l.useState)(null),y=Object(c.a)(g,2),w=y[0],C=y[1],S=Object(l.useState)(null),A=Object(c.a)(S,2),I=A[0],P=A[1],F=Object(l.useState)("persona"),T=Object(c.a)(F,2),D=T[0],R=T[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{fideicomisoId:null,CACbase:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,o){var a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=o.setSubmitting,o.resetForm,void 0===(null===w||void 0===w?void 0:w.id)&&void 0===(null===I||void 0===I?void 0:I.id)?(O("Debe seleccionar un fiduciante."),b(!0)):(v({personaId:"persona"===D?null===w||void 0===w?void 0:w.id:null,empresaId:"empresa"===D?null===I||void 0===I?void 0:I.id:null,fideicomisoId:r,cesionId:n,porcentaje:0,creador:null===i||void 0===i?void 0:i.id}),a(!1));case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsx)(Be.b,{children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:0,md:0},columns:{xs:4,sm:8,md:12},children:[Object(N.jsxs)(Ce.a,{item:!0,md:6,children:[Object(N.jsx)(wi.a,{smUp:"empresa"===D,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fiduciante Persona",title:"Seleccione una Persona.",disablePortal:!0,style:{width:"260px",display:"inline-flex"},onChange:function(e,t){C(t),i("persona",t)},value:"persona"===D?w:null,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fiduciante Persona"}))}})}),Object(N.jsx)(wi.a,{smUp:"persona"===D,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fiduciante Empresa",title:"Seleccione una Empresa.",disablePortal:!0,style:{width:"260px",display:"inline-flex"},onChange:function(e,t){P(t),i("empresa",t)},value:"empresa"===D?I:null,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fiduciante Empresa"}))}})})]}),Object(N.jsx)(Ce.a,{item:!0,md:5,children:Object(N.jsxs)(un.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:"persona",onChange:function(e){return t=e,C(null),P(null),void R(t.target.value);var t},name:"tipo_fiduciante",children:[Object(N.jsx)(bn.a,{value:"persona",control:Object(N.jsx)(fn.a,{}),label:"Persona"}),Object(N.jsx)(bn.a,{value:"empresa",control:Object(N.jsx)(fn.a,{}),label:"Empresa"})]},"tipo_fiduciante")}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsx)(ae.a,{type:"submit",disabled:t,size:"large",children:"+"})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"})]})})}}),Object(N.jsx)(f,{message:x,ok:!0})]})}var kr=function(e,t,i){return[{field:"fidu",headerName:"Fiduciante",width:300,editable:!1,headerAlign:"left"},{field:"porcentaje",headerName:"Porcentaje",width:180,editable:e,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var n=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){i(n),t(!0)}})}}]};function zr(e){var t=e.loggedUser,i=e.items,n=e.refetch,r=Object(l.useContext)(uc),o=St(),d=o.Prompt,s=o.setIsPromptOpen,u=Object(l.useState)(),b=Object(c.a)(u,2),f=b[0],j=b[1],m=!0;"vista"===(null===t||void 0===t?void 0:t["rol.contrato"])&&(m=!1);var v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cesionItem/eliminar/".concat(r.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["item",r]);case 2:return i=v.getQueryData(["item",r]),e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return v.setQueryData(["item",r],i)},onSettled:function(){r.id>0&&v.invalidateQueries(["item",r]),n()}}),p=h.mutate,x=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,o=t.value,e.next=3,$e("cesionItem/modificar/".concat(r.id),Object(w.a)({id:n},i,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.field,t.id,t.value,e.next=3,v.cancelQueries(["item",r]);case 3:return i=v.getQueryData(["item",r]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return v.setQueryData(["item",r],i)},onSettled:function(){r.id>0&&v.invalidateQueries(["item",r]),n()}}),O=x.mutate;return Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsx)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(d,{message:"\xbfEliminar fila?",action:function(){return p(f)}}),Object(N.jsx)(Ft.a,{rows:null===i||void 0===i?void 0:i.filter((function(e){return 1===e.estado})).map((function(e){var t,i;return{id:e.id,fidu:e.personaId>0?null===e||void 0===e||null===(t=e.personas[0])||void 0===t?void 0:t.nombre:null===e||void 0===e||null===(i=e.empresas[0])||void 0===i?void 0:i.razonSocial,porcentaje:e.porcentaje,deleteId:null===e||void 0===e?void 0:e.id}})),headerHeight:40,hideFooter:!0,onCellEditCommit:O,columns:kr(m,s,j),disableSelectionOnClick:!0,autoHeight:!0})]})})})}function _r(e){var t=e.idSociety,i=e.loggedUser,n=e.cesion,r=e.fila,o=e.personas,s=e.empresas,u=e.isLoading,b=e.error,f=e.refetch,j=!0;"vista"===(null===i||void 0===i?void 0:i["rol.contrato"])&&(j=!1);var m=Object(l.useState)(""),v=Object(c.a)(m,2),h=v[0],p=v[1],x=St(),O=x.Prompt,g=x.setIsPromptOpen,y=Object(l.useState)(),C=Object(c.a)(y,2),S=C[0],A=C[1],F=Object(a.useQueryClient)(),T={es:ln.a},D={es:"__/__/____"};function R(e,t,i,n,r){if(n);else if(r){var o=ht(e)+" 03:00";z({field:t,id:i,value:o})}else{var a=e.target.value;z({field:t,id:i,value:a})}}var k=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("cesion/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,F.cancelQueries(["cesion",t]);case 3:return e.next=5,F.getQueryData(["cesion",t]);case 5:if(!(a=e.sent)){e.next=10;break}return c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),F.setQueryData(["cesion",t],c),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return F.setQueryData(["cesion",t],n)},onSettled:function(){t.id>0&&F.invalidateQueries(["cesion",t]),f()}}),z=k.mutate,_=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cesion/eliminar/".concat(t.id),{id:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.cancelQueries(["item",t]);case 2:return n=F.getQueryData(["item",t]),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return F.setQueryData(["item",t],n)},onSettled:function(){t.id>0&&F.invalidateQueries(["item",t]),f()}}),V=_.mutate,U=d.a.useState(!1),M=Object(c.a)(U,2),Q=M[0],E=M[1];return u?"Cargando...":b?"Hubo un error: ".concat(b.message):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{children:function(e){e.isSubmitting,e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(O,{message:"\xbfEliminar fila?",action:function(){return V(S)}}),Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Cesi\xf3n ",r,":"]})}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Nombre de La Cesi\xf3n",disabled:!j,style:{width:"250px",display:"inline-flex"},defaultValue:null===n||void 0===n?void 0:n.nombre,name:"nombre",onChange:function(e){return p("nombre")},onBlur:function(e){return R(e,h,null===n||void 0===n?void 0:n.id,!1,!1)}},"cesion_"+(null===n||void 0===n?void 0:n.id))}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Fecha:"})}),Object(N.jsxs)(Ce.a,{item:!0,md:4,children:[Object(N.jsx)(nt.b,{dateAdapter:ot.a,locale:T.es,children:Object(N.jsx)(dn.a,{mask:D.es,value:xt(null===n||void 0===n?void 0:n.fecha),disabled:!j,label:"Fecha Adhesi\xf3n",onChange:function(e){return R(e,"fecha",null===n||void 0===n?void 0:n.id,!1,!0)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e),"fecha_".concat(null===n||void 0===n?void 0:n.id))}})}),"\xa0\xa0",Object(N.jsx)(Tt.a,{onClick:function(){A(null===n||void 0===n?void 0:n.id),g(!0)}})]}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"})]})]})}}),Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(P.a,{component:"span",width:"60%",sx:{p:2,borderRadius:2,border:2,borderColor:"primary.main"},children:Object(N.jsxs)(Ce.a,{item:!0,md:11,children:[Object(N.jsx)(I.a,{align:"right",children:Object(N.jsx)(ae.a,{align:"center",size:"small",onClick:function(){E(!Q)},children:Q?"Cerrar":"Agregar Fiduciante"})}),Q?Object(N.jsx)(Nr,{idSociety:t,fideicomisoId:null===n||void 0===n?void 0:n.fideicomisoId,personas:o,empresas:s,cesionId:null===n||void 0===n?void 0:n.id,loggedUser:i,refetch:f}):"",Object(N.jsx)(zr,{loggedUser:i,items:null===n||void 0===n?void 0:n.cesionItems,refetch:f})]})})]}),Object(N.jsx)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"})}),Object(N.jsx)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"})}),Object(N.jsx)(Ce.a,{item:!0,md:12,sx:{p:2,borderTop:2,borderColor:"primary.main"}})]})}function Vr(e){var t,i=e.contratoId,n=e.idSociety,r=e.loggedUser,o=e.conceptosCuota,a=e.dataContrato,c=e.isLoading,l=e.error,d=e.refetch,s=e.moneda,u=e.setMoneda,b=e.personas,f=e.empresas,j=(e.CACs,null===a||void 0===a?void 0:a.cuotas.filter((function(e){return"ARS"===e.moneda&&e.concepto>0})).length),m=null===a||void 0===a?void 0:a.cuotas.filter((function(e){return"USD"===e.moneda&&e.concepto>0})).length,v="vista"===(null===r||void 0===r?void 0:r["rol.contrato"]);return c?"Cargando...":l?"Hubo un error: ".concat(l.message):Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(Ni.a,{value:s,children:[Object(N.jsx)(P.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(N.jsxs)(ki.a,{onChange:function(e,t){u(t)},"aria-label":"lab API tabs example",children:[Object(N.jsx)(_i.a,{label:"Cobros",value:"COB"}),Object(N.jsx)(_i.a,{label:"Liquidaciones",value:"LIQ"}),Object(N.jsx)(_i.a,{label:"Compromisos en Pesos",value:"ARS"}),Object(N.jsx)(_i.a,{label:"Compromisos en Dolares",value:"USD"}),Object(N.jsx)(_i.a,{label:"Cesiones",value:"CES"}),Object(N.jsx)(_i.a,{label:"Productos",value:"PRD"})]})}),Object(N.jsx)(zi.a,{value:"COB",children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Xn,{mode:"contrato",idSociety:n,loggedUser:r,contrato:a})})}),Object(N.jsx)(zi.a,{value:"LIQ",children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ar,{contratoId:i,idSociety:n,loggedUser:r,contrato:null===a||void 0===a?void 0:a.cont,productos:null===a||void 0===a?void 0:a.item,cesion:null===a||void 0===a?void 0:a.cesiones[0],qCuotasARS:j,qCuotasUSD:m})})}),Object(N.jsxs)(zi.a,{value:"ARS",children:[Object(N.jsx)(wi.a,{smUp:v,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ir,{idSociety:n,loggedUser:r,dataContrato:a,isLoading:c,error:l,refetch:d,moneda:"ARS",conceptosCuota:o})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Pr,{idSociety:n,loggedUser:r,dataContrato:a,isLoading:c,error:l,refetch:d,conceptosCuota:o,moneda:"ARS"})})]}),Object(N.jsxs)(zi.a,{value:"USD",children:[Object(N.jsx)(wi.a,{smUp:v,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ir,{idSociety:n,loggedUser:r,dataContrato:a,isLoading:c,error:l,refetch:d,moneda:"USD",conceptosCuota:o})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Pr,{idSociety:n,loggedUser:r,dataContrato:a,isLoading:c,error:l,refetch:d,conceptosCuota:o,moneda:"USD"})})]}),Object(N.jsxs)(zi.a,{value:"CES",children:[Object(N.jsx)(Dr,{contratoId:i,idSociety:n,loggedUser:r,personas:b,empresas:f,isLoading:c,error:l,refetch:d}),null===a||void 0===a||null===(t=a.cesiones)||void 0===t?void 0:t.map((function(e,t){var i,o;return Object(N.jsx)(_r,{idSociety:n,fila:(null===a||void 0===a||null===(i=a.cesiones)||void 0===i?void 0:i.length)-t,fideicomisoId:null===a||void 0===a||null===(o=a.cont)||void 0===o?void 0:o.fideicomisoId,cesion:e,isLoading:c,error:l,personas:b,empresas:f,loggedUser:r,refetch:d},"rep_"+t)}))]}),Object(N.jsx)(zi.a,{value:"PRD",children:Object(N.jsx)(Rr,{items:null===a||void 0===a?void 0:a.item})})]})})}var Ur=Nn.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:14,textAlign:"left",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),Mr=function(e){e.dataContrato,e.apiServerUrl,e.idSociedad;return Object(N.jsx)(Nn.Document,{children:Object(N.jsx)(Nn.Page,{size:"A4",style:Ur.page,children:Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:Ur.saltolinea,children:"Contrato Hola"})})})})},Qr="http://104.131.28.211:3000/";function Er(e){var t,i,n,r,o,u,b,f,j,m=e.idSociety,v=e.loggedUser,h=Object(s.j)().contratoId,p=Object(a.useQuery)(["CACs",m],(function(){return Ge("CAC/listar/".concat(m.id))})).data,x=Object(a.useQuery)(["empresas"],(function(){return Ge("empresa/listar/".concat(m.id,"/1"))})).data,O=Object(a.useQuery)(["persona"],(function(){return Ge("persona/listar/".concat(m.id))})).data,g=d.a.useState("ARS"),y=Object(c.a)(g,2),w=y[0],C=y[1],S=d.a.useState(!1),A=Object(c.a)(S,2),F=A[0],T=A[1],D=Object(l.useContext)(gc);var R=Object(a.useQuery)(["dataContrato",m.id],(function(){return Ge("contrato/mostrar/".concat(m.id,"/").concat(h))})),k=R.data,z=R.isLoading,_=R.error,V=R.refetch,U=0,M=0;if(z)return"Cargando...";if(_)return"Hubo un error: ".concat(_.message);for(var Q=0;Q<(null===k||void 0===k?void 0:k.cuotas.length);Q++){var E,L;if(1===(null===k||void 0===k||null===(E=k.cuotas[Q])||void 0===E?void 0:E.concepto))"ARS"===(null===k||void 0===k||null===(L=k.cuotas[Q])||void 0===L?void 0:L.moneda)?U++:M++}return Object(N.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(N.jsx)(wi.a,{smUp:!0,children:Object(N.jsx)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:Object(N.jsxs)(P.a,{mt:2,sx:{pt:1},children:[Object(N.jsx)(ae.a,{onClick:function(){T(!F)},children:F?"Ocultar PDF":"Ver PDF"}),Object(N.jsx)(Nn.PDFDownloadLink,{document:!1===z?Object(N.jsx)(Mr,{dataContrato:k,idSociedad:m.id,apiServerUrl:Qr}):null,fileName:function(e){var t,i,n,r,o;return(null===e||void 0===e||null===(t=e.contrato)||void 0===t?void 0:t.id)+" OP -"+(null===e||void 0===e||null===(i=e.contrato)||void 0===i||null===(n=i.fideicomisos[0])||void 0===n?void 0:n.nombre)+"-"+(null===e||void 0===e||null===(r=e.contrato)||void 0===r||null===(o=r.empresas[0])||void 0===o?void 0:o.razonSocial)+".pdf"}(k),children:Object(N.jsx)(ae.a,{variant:"info",children:"Descargar"})})]})})}),Object(N.jsx)(N.Fragment,{children:F?Object(N.jsx)(Nn.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(N.jsx)(Mr,{dataContrato:k,apiServerUrl:Qr})}):Object(N.jsxs)(we.a,{children:[Object(N.jsxs)(P.a,{sx:{pt:3},children:[Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:9,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:[null===k||void 0===k||null===(t=k.cont)||void 0===t?void 0:t.nombre,"\xa0\xa0\xa0|\xa0\xa0\xa0Fiduciante: ",(null===k||void 0===k||null===(i=k.cont)||void 0===i?void 0:i.empresaId)>0?null===k||void 0===k||null===(n=k.cont)||void 0===n?void 0:n.empresas[0].razonSocial:null===k||void 0===k||null===(r=k.cont)||void 0===r?void 0:r.personas[0].nombre,"\xa0\xa0\xa0-\xa0\xa0\xa0",null===k||void 0===k||null===(o=k.cont)||void 0===o||null===(u=o.fideicomisos[0])||void 0===u?void 0:u.nombre]})}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:dt(null===k||void 0===k||null===(b=k.cont)||void 0===b?void 0:b.createdAt)})})]}),Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:1.5,md:2},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Fecha de adhesi\xf3n: ",dt(null===k||void 0===k||null===(f=k.cont)||void 0===f?void 0:f.adhesion)]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Cuotas ARS: ",U]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Cuotas USD: ",M]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["CAC Base: ",gt(p,null===k||void 0===k||null===(j=k.cont)||void 0===j?void 0:j.adhesion,"Construci\xf3n")]})}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5"})})]})]}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Vr,{contratoId:h,idSociety:m,loggedUser:v,dataContrato:k,empresas:x,personas:O,isLoading:z,error:_,conceptosCuota:D,moneda:w,setMoneda:C,refetch:V})})]})})]})}function Lr(e){var t=e.idSociety,i=e.loggedUser,n=e.fideicomisos,r=e.proveedores,o=e.ddfacturas,d=e.ddfacturasBlue,s=Object(a.useQueryClient)(),u=!1;"total"===(null===i||void 0===i?void 0:i["rol.op"])&&(u=!0);var b=Object(a.useMutation)((function(e){return $e("OP/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.invalidateQueries(["OP",t]);case 2:return e.next=4,s.getQueryData(["OP",t]);case 4:return n=e.sent,r=[].concat(Object(Fe.a)(n),[Object(ne.a)(Object(ne.a)({},i),{},{id:(new Date).getTime()})]),s.setQueryData(["OP",t],r),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return s.setQueryData(["OP",t],n)},onSettled:function(){return s.invalidateQueries(["OP",t])}}),f=b.mutate,j=Object(l.useState)(null),m=Object(c.a)(j,2),v=m[0],h=m[1],p=Object(l.useState)(null),x=Object(c.a)(p,2),O=x[0],g=x[1],y=Object(l.useState)(null),w=Object(c.a)(y,2),C=w[0],S=w[1],A=Object(l.useState)(!1),I=Object(c.a)(A,2),T=I[0],D=I[1],R=!1,k=!0,z=!1;"blue"===(null===i||void 0===i?void 0:i["rol.op"])&&(k=!1,R=!0,u=!1,z=!0);var _=Object(l.useState)(k),V=Object(c.a)(_,2),U=V[0],M=V[1];return Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,n){var r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,t.fideicomiso.id>0&&t.empresa.id>0&&t.factura.id>0&&v.id>0&&O.id>0&&C.id>0?(f({fideicomisoId:t.fideicomiso.id,empresaId:t.empresa.id,rubroId:t.empresa.rubroId,subRubroId:t.empresa.subrubroId,facturaId:t.factura.id,blue:U?z?1:0:1,creador:i.id}),D(!0),r(!1)):console.log("no entro",t.fideicomiso.id,t.empresa.id,t.factura.id,v.id,O.id,C.id);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",required:!0,label:"Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){h(t),i("fideicomiso",t)},value:v,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:n||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fideicomiso"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Razon Social",required:!0,disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){g(t),S(null),i("empresa",t)},value:O,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Razon Social"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Factura N\u0970",disablePortal:!0,style:{width:"230px",display:U?"inline-flex":"none"},onChange:function(e,t){S(t),i("factura",t)},value:C,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o?null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===(null===v||void 0===v?void 0:v.id)&&(null===e||void 0===e?void 0:e.empresaId)===(null===O||void 0===O?void 0:O.id)})):[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Factura N\u0970"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Factura Blue N\u0970",disablePortal:!0,style:{width:"230px",display:U?"none":"inline-flex"},onChange:function(e,t){S(t),i("factura",t)},value:C,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d?null===d||void 0===d?void 0:d.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===(null===v||void 0===v?void 0:v.id)&&(null===e||void 0===e?void 0:e.empresaId)===(null===O||void 0===O?void 0:O.id)})):[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Factura Blue N\u0970"}))}}),"\xa0\xa0",Object(N.jsx)(wi.a,{smUp:!u,children:Object(N.jsx)(bn.a,{control:Object(N.jsx)(sn.a,{id:"blue",name:"blue",onChange:function(e){return function(e,t,i,n,r){e.preventDefault(),r(!n),t(i,n?"on":"off")}(e,i,"blue",U,M)}}),label:"Blue"})}),Object(N.jsx)(wi.a,{smUp:!R,children:Object(N.jsx)(bn.a,{control:Object(N.jsx)(sn.a,{disabled:!0,defaultChecked:!0,id:"blue",name:"blue2"}),label:"Blue"})}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(N.jsx)(ae.a,{id:"bagregar",variant:"text",type:"submit",disabled:t,children:"Agregar"}),Object(N.jsx)(P.a,{sx:{width:"100%"},children:Object(N.jsx)(mn.a,{in:T,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){D(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}})}var Br=i(657);function Wr(e){var t=e.setFiltFide,i=e.setFiltRS,n=e.setFiltEst,r=e.filtTerm,o=e.setFiltTerm,a=(e.idSociety,e.loggedUser,e.fideicomisos),d=e.proveedores,s=(e.ddfacturas,e.ddfacturasBlue,Object(l.useContext)(bc)),u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(l.useState)(null),v=Object(c.a)(m,2),h=v[0],p=v[1],x=Object(l.useState)(null),O=Object(c.a)(x,2),g=O[0],y=O[1];function w(e,r){var o=-1;(null===r||void 0===r?void 0:r.id)&&(o=r.id),"fide"===e&&t(o),"rs"===e&&i(o),"estado"===e&&n(o)}return Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),w("fide",t)},value:f,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),w("rs",t)},value:h,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0",Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Estado",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){y(t),w("estado",t)},value:g,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:s||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Estado"}))}}),Object(N.jsx)(Br.a,{children:Object(N.jsx)(bn.a,{control:Object(N.jsx)(sn.a,{defaultChecked:!0,id:"chkTerminados",name:"chkTerminados",onChange:function(e){return o(!r)}}),label:"Ocultar finalizados"})})]})}})}var qr=i(91),Hr=(i(272),Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},description:{width:"35%",textAlign:"left",borderRightWidth:1,paddingLeft:8},qty:{width:"35%",borderRightWidth:1,textAlign:"left",paddingLeft:8},rate:{width:"15%",borderRightWidth:1,textAlign:"right",paddingRight:8},amount:{width:"15%"},amountRow:{width:"15%",textAlign:"right",paddingRight:8}})),Gr=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h,p,x,O,g,y,w,C,S,A,I,P,F,T,D,R,k,z,_,V,U,M,Q,E,L,B,W,q,H,G,$,Y,Z,J,K,X,ee,te,ie,ne,re,oe,ae,ce,le,de,se,ue,be,fe,je,me,ve,he,pe,xe,Oe,ge=e.dataOP,ye=e.dataFacturas;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:ge?null===ge||void 0===ge||null===(t=ge.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(N.jsxs)(Nn.View,{style:[Hr.container,{borderBottomColor:ge?null===ge||void 0===ge||null===(i=ge.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",backgroundColor:ge?null===ge||void 0===ge||null===(n=ge.fideicomisos[0])||void 0===n?void 0:n.color2:"#ffffff"}],children:[Object(N.jsx)(Nn.Text,{style:[Hr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(r=ge.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff"}],children:"Proveedor"}),Object(N.jsx)(Nn.Text,{style:[Hr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(o=ge.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"Detalle"}),Object(N.jsx)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(a=ge.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"N\xba Factura"}),Object(N.jsx)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(c=ge.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"N\xba OC"}),Object(N.jsx)(Nn.Text,{style:[Hr.amount,{borderRightColor:ge?null===ge||void 0===ge||null===(l=ge.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Importe"})]}),Object(N.jsxs)(Nn.View,{style:[Hr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(d=ge.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Hr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(s=ge.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(u=ye.item[0])||void 0===u||null===(b=u.empresas[0])||void 0===b?void 0:b.razonSocial]}),Object(N.jsxs)(Nn.Text,{style:[Hr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(f=ge.fideicomisos[0])||void 0===f?void 0:f.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(j=ye.item[0])||void 0===j?void 0:j.detalle]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(m=ge.fideicomisos[0])||void 0===m?void 0:m.color:"#ffffff"}],children:["  ",Object(N.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(v=ye.item[0])||void 0===v?void 0:v.link,children:null===ye||void 0===ye||null===(h=ye.item[0])||void 0===h?void 0:h.numero})]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(p=ge.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(x=ye.item[0])||void 0===x?void 0:x.txtOC]}),Object(N.jsxs)(Nn.Text,{style:[Hr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(O=ge.fideicomisos[0])||void 0===O?void 0:O.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[0])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(g=ye.item[0])||void 0===g?void 0:g.montoTotal)):""]})]}),Object(N.jsxs)(Nn.View,{style:[Hr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(y=ge.fideicomisos[0])||void 0===y?void 0:y.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Hr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(w=ge.fideicomisos[0])||void 0===w?void 0:w.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(C=ye.item[1])||void 0===C||null===(S=C.empresas[0])||void 0===S?void 0:S.razonSocial]}),Object(N.jsxs)(Nn.Text,{style:[Hr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(A=ge.fideicomisos[0])||void 0===A?void 0:A.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(I=ye.item[1])||void 0===I?void 0:I.detalle]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(P=ge.fideicomisos[0])||void 0===P?void 0:P.color:"#ffffff"}],children:["  ",Object(N.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(F=ye.item[1])||void 0===F?void 0:F.link,children:null===ye||void 0===ye||null===(T=ye.item[1])||void 0===T?void 0:T.numero})]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(D=ge.fideicomisos[0])||void 0===D?void 0:D.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(R=ye.item[1])||void 0===R?void 0:R.txtOC]}),Object(N.jsxs)(Nn.Text,{style:[Hr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(k=ge.fideicomisos[0])||void 0===k?void 0:k.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[1])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(z=ye.item[1])||void 0===z?void 0:z.montoTotal)):""]})]}),Object(N.jsxs)(Nn.View,{style:[Hr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(_=ge.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Hr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(V=ge.fideicomisos[0])||void 0===V?void 0:V.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(U=ye.item[2])||void 0===U||null===(M=U.empresas[0])||void 0===M?void 0:M.razonSocial]}),Object(N.jsxs)(Nn.Text,{style:[Hr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(Q=ge.fideicomisos[0])||void 0===Q?void 0:Q.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(E=ye.item[2])||void 0===E?void 0:E.detalle]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(L=ge.fideicomisos[0])||void 0===L?void 0:L.color:"#ffffff"}],children:["  ",Object(N.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(B=ye.item[2])||void 0===B?void 0:B.link,children:null===ye||void 0===ye||null===(W=ye.item[2])||void 0===W?void 0:W.numero})]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(q=ge.fideicomisos[0])||void 0===q?void 0:q.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(H=ye.item[2])||void 0===H?void 0:H.txtOC]}),Object(N.jsxs)(Nn.Text,{style:[Hr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(G=ge.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[2])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===($=ye.item[2])||void 0===$?void 0:$.montoTotal)):""]})]}),Object(N.jsxs)(Nn.View,{style:[Hr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(Y=ge.fideicomisos[0])||void 0===Y?void 0:Y.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Hr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(Z=ge.fideicomisos[0])||void 0===Z?void 0:Z.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(J=ye.item[3])||void 0===J||null===(K=J.empresas[0])||void 0===K?void 0:K.razonSocial]}),Object(N.jsxs)(Nn.Text,{style:[Hr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(X=ge.fideicomisos[0])||void 0===X?void 0:X.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(ee=ye.item[3])||void 0===ee?void 0:ee.detalle]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(te=ge.fideicomisos[0])||void 0===te?void 0:te.color:"#ffffff"}],children:["  ",Object(N.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(ie=ye.item[3])||void 0===ie?void 0:ie.link,children:null===ye||void 0===ye||null===(ne=ye.item[3])||void 0===ne?void 0:ne.numero})]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(re=ge.fideicomisos[0])||void 0===re?void 0:re.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(oe=ye.item[3])||void 0===oe?void 0:oe.txtOC]}),Object(N.jsxs)(Nn.Text,{style:[Hr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(ae=ge.fideicomisos[0])||void 0===ae?void 0:ae.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[3])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(ce=ye.item[3])||void 0===ce?void 0:ce.montoTotal)):""]})]}),Object(N.jsxs)(Nn.View,{style:[Hr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(le=ge.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Hr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(de=ge.fideicomisos[0])||void 0===de?void 0:de.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(se=ye.item[4])||void 0===se||null===(ue=se.empresas[0])||void 0===ue?void 0:ue.razonSocial]}),Object(N.jsxs)(Nn.Text,{style:[Hr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(be=ge.fideicomisos[0])||void 0===be?void 0:be.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(fe=ye.item[4])||void 0===fe?void 0:fe.detalle]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(je=ge.fideicomisos[0])||void 0===je?void 0:je.color:"#ffffff"}],children:["  ",Object(N.jsx)(Nn.Link,{src:null===ye||void 0===ye||null===(me=ye.item[4])||void 0===me?void 0:me.link,children:null===ye||void 0===ye||null===(ve=ye.item[4])||void 0===ve?void 0:ve.numero})]}),Object(N.jsxs)(Nn.Text,{style:[Hr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(he=ge.fideicomisos[0])||void 0===he?void 0:he.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(pe=ye.item[4])||void 0===pe?void 0:pe.txtOC]}),Object(N.jsxs)(Nn.Text,{style:[Hr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(xe=ge.fideicomisos[0])||void 0===xe?void 0:xe.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[4])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(Oe=ye.item[4])||void 0===Oe?void 0:Oe.montoTotal)):""]})]})]})},$r=Nn.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},col1:{width:"11%",textAlign:"left",paddingLeft:8},col2:{width:"55%",textAlign:"left",paddingLeft:8},col3:{width:"33%",textAlign:"center",paddingLeft:8}}),Yr=function(e){var t,i,n,r,o,a=e.dataOP;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:a?null===a||void 0===a||null===(t=a.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(N.jsxs)(Nn.View,{style:$r.espacio,children:[Object(N.jsx)(Nn.Text,{style:$r.col1,children:" "}),Object(N.jsx)(Nn.Text,{style:$r.col1,children:" "}),Object(N.jsx)(Nn.Text,{style:$r.col1,children:" "})]}),Object(N.jsxs)(Nn.View,{style:$r.row,children:[Object(N.jsx)(Nn.Text,{style:$r.col1,children:"Detalles:"}),Object(N.jsx)(Nn.Text,{style:$r.col2,children:null===a||void 0===a||null===(i=a.descripcion)||void 0===i?void 0:i.slice(0,44)}),Object(N.jsx)(Nn.Text,{style:$r.col3})]}),Object(N.jsxs)(Nn.View,{style:$r.row,children:[Object(N.jsx)(Nn.Text,{style:$r.col1}),Object(N.jsx)(Nn.Text,{style:$r.col2,children:null===a||void 0===a||null===(n=a.descripcion)||void 0===n?void 0:n.slice(45,99)}),Object(N.jsxs)(Nn.Text,{style:$r.col3,children:["Aprobado por ",null===a||void 0===a||null===(r=a.auth_obra[0])||void 0===r||null===(o=r.usuarios[0])||void 0===o?void 0:o.user]})]})]})},Zr=Nn.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},rowbis:{flexDirection:"row",alignItems:"left",height:24,fontSize:10,fontStyle:"bold"},col1:{width:"33%",textAlign:"right",paddingLeft:8},col1bis:{width:"33%",textAlign:"right",paddingTop:5,paddingLeft:8},col2bis:{width:"33%",textAlign:"center",backgroundColor:"#B4B4B4",paddingTop:5,paddingLeft:8},col3:{width:"33%",textAlign:"left",paddingLeft:8},col3bis:{width:"33%",textAlign:"center",paddingTop:5,paddingLeft:8}}),Jr=function(e){var t,i,n,r,o,a,c=e.dataOP;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:c?null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(N.jsxs)(Nn.View,{style:Zr.espacio,children:[Object(N.jsx)(Nn.Text,{style:Zr.col1,children:" "}),Object(N.jsx)(Nn.Text,{style:Zr.col1,children:" "}),Object(N.jsx)(Nn.Text,{style:Zr.col1,children:" "})]}),Object(N.jsxs)(Nn.View,{style:Zr.row,children:[Object(N.jsx)(Nn.Text,{style:Zr.col1,children:"FACTURAS:"}),Object(N.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.monto)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.monto)):""}),Object(N.jsx)(Nn.Text,{style:Zr.col3})]}),Object(N.jsxs)(Nn.View,{style:Zr.row,children:[Object(N.jsx)(Nn.Text,{style:Zr.col1,children:"RET GAN:"}),Object(N.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_GAN)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_GAN)):""}),Object(N.jsxs)(Nn.Text,{style:Zr.col3,children:[" ",Object(N.jsx)(Nn.Link,{src:null===c||void 0===c?void 0:c.COMP_GAN,children:(null===c||void 0===c?void 0:c.COMP_GAN)?" cert..":""}),"   "]})]}),Object(N.jsxs)(Nn.View,{style:Zr.row,children:[Object(N.jsx)(Nn.Text,{style:Zr.col1,children:"RET IVA:"}),Object(N.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_IVA)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_IVA)):""}),Object(N.jsxs)(Nn.Text,{style:Zr.col3,children:[" ",Object(N.jsx)(Nn.Link,{src:null===c||void 0===c?void 0:c.COMP_IVA,children:(null===c||void 0===c?void 0:c.COMP_IVA)?" cert..":""})," "]})]}),Object(N.jsxs)(Nn.View,{style:Zr.row,children:[Object(N.jsx)(Nn.Text,{style:Zr.col1,children:"RET SUSS:"}),Object(N.jsx)(Nn.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(o=c.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_SUSS)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_SUSS)):""}),Object(N.jsxs)(Nn.Text,{style:Zr.col3,children:[" ",Object(N.jsx)(Nn.Link,{src:null===c||void 0===c?void 0:c.COMP_SUSS,children:(null===c||void 0===c?void 0:c.COMP_SUSS)?" cert..":""})]})]}),Object(N.jsxs)(Nn.View,{style:Zr.rowbis,children:[Object(N.jsx)(Nn.Text,{style:Zr.col1bis,children:"Monto a Abonar:"}),Object(N.jsxs)(Nn.Text,{style:Zr.col2bis,children:["$",(null===c||void 0===c?void 0:c.monto_a_pagar)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.monto_a_pagar)):""]}),Object(N.jsxs)(Nn.Text,{style:Zr.col3bis,children:["Aprobado por ",(null===c||void 0===c?void 0:c.auth_adm[0])?null===(a=c.auth_adm[0].usuarios[0])||void 0===a?void 0:a.user:""]})]})]})},Kr=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"16%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col2:{width:"20%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col3:{width:"20%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col4:{width:"12%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col5:{width:"12%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"88%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),Xr=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h,p,x,O,g,y,w,C,S,A,I,P,F,T,D,R,k,z,_,V,U,M,Q,E,L,B,W,q,H,G,$,Y,Z,J,K,X,ee,te,ie,ne,re,oe,ae,ce,le,de,se,ue,be,fe,je,me,ve,he,pe,xe,Oe,ge,ye,we,Ce,Se,Ae=e.dataOP,Ie=e.bancos,Pe=e.cuentasBanco;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:Ae?null===Ae||void 0===Ae||null===(t=Ae.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(N.jsxs)(Nn.View,{style:[Kr.container,{borderBottomColor:Ae?null===Ae||void 0===Ae||null===(i=Ae.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",backgroundColor:Ae?null===Ae||void 0===Ae||null===(n=Ae.fideicomisos[0])||void 0===n?void 0:n.color2:"#ffffff"}],children:[Object(N.jsx)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(r=Ae.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff"}],children:"Modo"}),Object(N.jsx)(Nn.Text,{style:[Kr.col1,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(o=Ae.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"Banco"}),Object(N.jsx)(Nn.Text,{style:[Kr.col2,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(a=Ae.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Cuenta Nro"}),Object(N.jsx)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(c=Ae.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"Comprobante"}),Object(N.jsx)(Nn.Text,{style:[Kr.col4,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(l=Ae.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Fecha"}),Object(N.jsx)(Nn.Text,{style:Kr.col5,children:"Monto"})]}),Object(N.jsxs)(Nn.View,{style:[Kr.row,{borderBottomColor:Ae?null===Ae||void 0===Ae||null===(d=Ae.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(s=Ae.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:[" ",null===Ae||void 0===Ae||null===(u=Ae.OPpago)||void 0===u?void 0:u.modo1]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col1,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(b=Ae.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(f=Ae.OPpago)||void 0===f?void 0:f.banco1)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.banco1)})).banco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col2,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(j=Ae.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(m=Ae.OPpago)||void 0===m?void 0:m.nro1)>0&&Pe?null===Pe||void 0===Pe?void 0:Pe.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.nro1)})).cuentaBanco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(v=Ae.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff"}],children:[" ",Object(N.jsx)(Nn.Link,{src:null===Ae||void 0===Ae||null===(h=Ae.OPpago)||void 0===h?void 0:h.descri1,children:(null===Ae||void 0===Ae||null===(p=Ae.OPpago)||void 0===p?void 0:p.descri1)?" ver.. -":""}),null===Ae||void 0===Ae||null===(x=Ae.OPpago)||void 0===x?void 0:x.descri12]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col4,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(O=Ae.fideicomisos[0])||void 0===O?void 0:O.color:"#ffffff"}],children:[" ",lt(null===Ae||void 0===Ae||null===(g=Ae.OPpago)||void 0===g?void 0:g.fecha1)]}),Object(N.jsx)(Nn.Text,{style:Kr.col5,children:(null===Ae||void 0===Ae||null===(y=Ae.OPpago)||void 0===y?void 0:y.monto1)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Ae||void 0===Ae||null===(w=Ae.OPpago)||void 0===w?void 0:w.monto1)):""})]}),Object(N.jsxs)(Nn.View,{style:[Kr.row,{borderBottomColor:Ae?null===Ae||void 0===Ae||null===(C=Ae.fideicomisos[0])||void 0===C?void 0:C.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(S=Ae.fideicomisos[0])||void 0===S?void 0:S.color:"#ffffff"}],children:[" ",null===Ae||void 0===Ae||null===(A=Ae.OPpago)||void 0===A?void 0:A.modo2]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col1,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(I=Ae.fideicomisos[0])||void 0===I?void 0:I.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(P=Ae.OPpago)||void 0===P?void 0:P.banco2)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.banco2)})).banco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col2,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(F=Ae.fideicomisos[0])||void 0===F?void 0:F.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(T=Ae.OPpago)||void 0===T?void 0:T.nro2)>0&&Pe?null===Pe||void 0===Pe?void 0:Pe.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.nro2)})).cuentaBanco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(D=Ae.fideicomisos[0])||void 0===D?void 0:D.color:"#ffffff"}],children:[" ",Object(N.jsx)(Nn.Link,{src:null===Ae||void 0===Ae||null===(R=Ae.OPpago)||void 0===R?void 0:R.descri2,children:(null===Ae||void 0===Ae||null===(k=Ae.OPpago)||void 0===k?void 0:k.descri2)?" ver.. -":""}),null===Ae||void 0===Ae||null===(z=Ae.OPpago)||void 0===z?void 0:z.descri22]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col4,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(_=Ae.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:[" ",lt(null===Ae||void 0===Ae||null===(V=Ae.OPpago)||void 0===V?void 0:V.fecha2)]}),Object(N.jsx)(Nn.Text,{style:Kr.col5,children:(null===Ae||void 0===Ae||null===(U=Ae.OPpago)||void 0===U?void 0:U.monto2)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Ae||void 0===Ae||null===(M=Ae.OPpago)||void 0===M?void 0:M.monto2)):""})]}),Object(N.jsxs)(Nn.View,{style:[Kr.row,{borderBottomColor:Ae?null===Ae||void 0===Ae||null===(Q=Ae.fideicomisos[0])||void 0===Q?void 0:Q.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(E=Ae.fideicomisos[0])||void 0===E?void 0:E.color:"#ffffff"}],children:[" ",null===Ae||void 0===Ae||null===(L=Ae.OPpago)||void 0===L?void 0:L.modo3]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col1,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(B=Ae.fideicomisos[0])||void 0===B?void 0:B.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(W=Ae.OPpago)||void 0===W?void 0:W.banco3)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.banco3)})).banco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col2,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(q=Ae.fideicomisos[0])||void 0===q?void 0:q.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(H=Ae.OPpago)||void 0===H?void 0:H.nro3)>0&&Pe?null===Pe||void 0===Pe?void 0:Pe.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.nro3)})).cuentaBanco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(G=Ae.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",Object(N.jsx)(Nn.Link,{src:null===Ae||void 0===Ae||null===($=Ae.OPpago)||void 0===$?void 0:$.descri3,children:(null===Ae||void 0===Ae||null===(Y=Ae.OPpago)||void 0===Y?void 0:Y.descri3)?" ver.. -":""}),null===Ae||void 0===Ae||null===(Z=Ae.OPpago)||void 0===Z?void 0:Z.descri32]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col4,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(J=Ae.fideicomisos[0])||void 0===J?void 0:J.color:"#ffffff"}],children:[" ",lt(null===Ae||void 0===Ae||null===(K=Ae.OPpago)||void 0===K?void 0:K.fecha3)]}),Object(N.jsx)(Nn.Text,{style:Kr.col5,children:(null===Ae||void 0===Ae||null===(X=Ae.OPpago)||void 0===X?void 0:X.monto3)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Ae||void 0===Ae||null===(ee=Ae.OPpago)||void 0===ee?void 0:ee.monto3)):""})]}),Object(N.jsxs)(Nn.View,{style:[Kr.row,{borderBottomColor:Ae?null===Ae||void 0===Ae||null===(te=Ae.fideicomisos[0])||void 0===te?void 0:te.color:"#ffffff"}],children:[Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(ie=Ae.fideicomisos[0])||void 0===ie?void 0:ie.color:"#ffffff"}],children:[" ",null===Ae||void 0===Ae||null===(ne=Ae.OPpago)||void 0===ne?void 0:ne.modo4]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col1,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(re=Ae.fideicomisos[0])||void 0===re?void 0:re.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(oe=Ae.OPpago)||void 0===oe?void 0:oe.banco4)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.banco4)})).banco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col2,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(ae=Ae.fideicomisos[0])||void 0===ae?void 0:ae.color:"#ffffff"}],children:[" ",(null===Ae||void 0===Ae||null===(ce=Ae.OPpago)||void 0===ce?void 0:ce.nro4)>0&&Pe?null===Pe||void 0===Pe?void 0:Pe.find((function(e){var t;return e.id===parseInt(null===Ae||void 0===Ae||null===(t=Ae.OPpago)||void 0===t?void 0:t.nro4)})).cuentaBanco:""]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col3,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(le=Ae.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[" ",Object(N.jsx)(Nn.Link,{src:null===Ae||void 0===Ae||null===(de=Ae.OPpago)||void 0===de?void 0:de.descri4,children:(null===Ae||void 0===Ae||null===(se=Ae.OPpago)||void 0===se?void 0:se.descri4)?" ver.. -":""}),null===Ae||void 0===Ae||null===(ue=Ae.OPpago)||void 0===ue?void 0:ue.descri42]}),Object(N.jsxs)(Nn.Text,{style:[Kr.col4,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(be=Ae.fideicomisos[0])||void 0===be?void 0:be.color:"#ffffff"}],children:[" ",lt(null===Ae||void 0===Ae||null===(fe=Ae.OPpago)||void 0===fe?void 0:fe.fecha4)]}),Object(N.jsx)(Nn.Text,{style:Kr.col5,children:(null===Ae||void 0===Ae||null===(je=Ae.OPpago)||void 0===je?void 0:je.monto4)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Ae||void 0===Ae||null===(me=Ae.OPpago)||void 0===me?void 0:me.monto4)):""})]}),Object(N.jsxs)(Nn.View,{style:Kr.rowf,children:[Object(N.jsx)(Nn.Text,{style:[Kr.descriptionf,{borderRightColor:Ae?null===Ae||void 0===Ae||null===(ve=Ae.fideicomisos[0])||void 0===ve?void 0:ve.color:"#ffffff"}],children:"TOTAL"}),Object(N.jsx)(Nn.Text,{style:Kr.col5,children:(null===Ae||void 0===Ae||null===(he=Ae.OPpago)||void 0===he?void 0:he.monto1)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(parseFloat((null===Ae||void 0===Ae||null===(pe=Ae.OPpago)||void 0===pe?void 0:pe.monto1)?null===Ae||void 0===Ae||null===(xe=Ae.OPpago)||void 0===xe?void 0:xe.monto1:0)+parseFloat((null===Ae||void 0===Ae||null===(Oe=Ae.OPpago)||void 0===Oe?void 0:Oe.monto2)?null===Ae||void 0===Ae||null===(ge=Ae.OPpago)||void 0===ge?void 0:ge.monto2:0)+parseFloat((null===Ae||void 0===Ae||null===(ye=Ae.OPpago)||void 0===ye?void 0:ye.monto3)?null===Ae||void 0===Ae||null===(we=Ae.OPpago)||void 0===we?void 0:we.monto3:0)+parseFloat((null===Ae||void 0===Ae||null===(Ce=Ae.OPpago)||void 0===Ce?void 0:Ce.monto4)?null===Ae||void 0===Ae||null===(Se=Ae.OPpago)||void 0===Se?void 0:Se.monto4:0))):""})]})]})},eo="#90e5fc",to=Nn.StyleSheet.create({tableContainer:{flexDirection:"row",flexWrap:"wrap",marginTop:8},container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,textAlign:"center",fontStyle:"bold",flexGrow:1},description:{width:"60%",borderRightColor:eo,borderRightWidth:1},qty:{width:"10%",borderRightColor:eo,borderRightWidth:1},rate:{width:"15%",borderRightColor:eo,borderRightWidth:1},amount:{width:"15%"},espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:15,fontSize:7,fontStyle:"bold"},col1:{width:"30%",textAlign:"right",paddingLeft:8},col2:{width:"30%",textAlign:"left",paddingLeft:8},col3:{width:"40%",textAlign:"left",paddingLeft:8}}),io=function(e){var t,i,n,r,o=e.dataOP;return Object(N.jsxs)(Nn.View,{style:to.tableContainer,children:[Object(N.jsxs)(Nn.View,{style:to.row,children:[Object(N.jsx)(Nn.Text,{style:to.col1,children:"CBU:"}),Object(N.jsx)(Nn.Text,{style:to.col2,children:null===o||void 0===o||null===(t=o.empresas[0])||void 0===t?void 0:t.CBU}),Object(N.jsxs)(Nn.Text,{style:to.col3,children:["Cuenta Bancaria: ",null===o||void 0===o||null===(i=o.empresas[0])||void 0===i?void 0:i.nroCuenta]})]}),Object(N.jsxs)(Nn.View,{style:to.row,children:[Object(N.jsx)(Nn.Text,{style:to.col1,children:"CUIT:"}),Object(N.jsx)(Nn.Text,{style:to.col2,children:null===o||void 0===o||null===(n=o.empresas[0])||void 0===n?void 0:n.CUIT}),Object(N.jsxs)(Nn.Text,{style:to.col3,children:["Email:   ",null===o||void 0===o||null===(r=o.empresas[0])||void 0===r?void 0:r.mail]})]})]})},no=Nn.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:18,textAlign:"center",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"}}),ro=function(e){var t,i,n,r,o,a,c,l=e.dataOP,d=e.bancos,s=e.cuentasBanco,u=e.dataFacturas,b=e.apiServerUrl,f=e.idSociedad;return Object(N.jsx)(Nn.Document,{children:Object(N.jsxs)(Nn.Page,{size:"A4",style:no.page,children:[Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.saltolinea,children:" "})}),Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"},children:[Object(N.jsx)(Nn.Text,{style:[no.reportTitleFide,{width:l?100-(null===l||void 0===l||null===(t=l.fideicomisos[0])||void 0===t?void 0:t.ancho_logo)+"%":"75%",color:null===l||void 0===l||null===(i=l.fideicomisos[0])||void 0===i?void 0:i.color}],children:null===l||void 0===l||null===(n=l.fideicomisos[0])||void 0===n?void 0:n.titulo}),Object(N.jsx)(Nn.View,{style:{width:l&&(null===l||void 0===l?void 0:l.fideicomisos[0])&&(null===l||void 0===l||null===(r=l.fideicomisos[0])||void 0===r?void 0:r.ancho_logo)>0?(null===l||void 0===l||null===(o=l.fideicomisos[0])||void 0===o?void 0:o.ancho_logo)+"%":"25%"},children:Object(N.jsx)(Nn.Image,{style:[no.logo,{backgroundColor:l?null===l||void 0===l||null===(a=l.fideicomisos[0])||void 0===a?void 0:a.color3:"#FFFFFF"}],src:{uri:"".concat(b,"/sociedades/").concat(f,"/").concat(l?null===l||void 0===l||null===(c=l.fideicomisos[0])||void 0===c?void 0:c.logo:"logo.png"),method:"GET",body:""}})})]}),Object(N.jsx)(Nn.View,{style:no.titleContainer,children:Object(N.jsxs)(Nn.Text,{style:no.reportTitle,children:["SOLICITUD DE PAGO     N\xba ",null===l||void 0===l?void 0:l.numero]})}),Object(N.jsxs)(Nn.View,{style:no.invoiceDateContainer,children:[Object(N.jsx)(Nn.Text,{style:no.label,children:"Fecha: "}),Object(N.jsx)(Nn.Text,{children:lt(null===l||void 0===l?void 0:l.createdAt)})]}),Object(N.jsx)(Gr,{dataOP:l,dataFacturas:u}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.subreportTitle,children:"APROBACI\xd3N T\xc9CNICA"})}),Object(N.jsx)(Yr,{dataOP:l}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.subreportTitle,children:"APROBACI\xd3N ADMINISTRATIVA"})}),Object(N.jsx)(Jr,{dataOP:l}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:no.subreportTitle,children:"PAGO"})}),Object(N.jsx)(Xr,{dataOP:l,bancos:d,cuentasBanco:s}),Object(N.jsx)(io,{dataOP:l})]})})},oo=i(1107),ao=function(e,t){return"dark"===t?Object(oo.b)(e,.6):Object(oo.d)(e,.6)},co=function(e,t){return"dark"===t?Object(oo.b)(e,.5):Object(oo.d)(e,.5)},lo={},so={},uo=0,bo=function(e,t,i,n,r,o,a,c,l,d){return[{field:"id",headerName:"Id",width:55,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"id"===e.c})).h,headerAlign:"center",align:"center",renderCell:go},{field:"blue",headerName:"Blue",width:70,editable:!1,hide:!r&&(null===e||void 0===e?void 0:e.find((function(e){return"blue"===e.c})).h),headerAlign:"center",renderCell:function(e){return 0===e.value?"":Object(N.jsx)(T.a,{sx:{bgcolor:"#3944BC"},children:"B"})}},{field:"createdAt",headerName:"Fecha",width:120,type:"date",editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"createdAt"===e.c})).h,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{timeZone:"UTC"})}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fideicomiso"===e.c})).h,headerAlign:"center",align:"center",renderCell:yo},{field:"numero",headerName:"Numero",width:130,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"numero"===e.c})).h,headerAlign:"center",align:"right",renderCell:wo},{field:"empresa",headerName:"Raz\xf3n Social",width:170,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"empresa"===e.c})).h,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",width:130,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"monto"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"neto",headerName:"Neto",width:130,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"neto"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:70,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"moneda"===e.c})).h,headerAlign:"center",align:"left"},{field:"estadoOP",headerName:"Estado",width:150,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"estadoOP"===e.c})).h,renderEditCell:function(e){return Object(N.jsx)(Io,{estados:t,props:e})},headerAlign:"center"},{field:"estadoRET",headerName:"Retenciones",width:150,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"estadoRET"===e.c})).h,renderEditCell:function(e){return Object(N.jsx)(Ao,{retenciones:i,props:e})},headerAlign:"center"},{field:"facturas",headerName:"Facturas",width:140,sortable:!1,filterable:!1,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"facturas"===e.c})).h,headerAlign:"center",align:"center"},{field:"RET_GAN",headerName:"GAN",width:120,hide:null===e||void 0===e?void 0:e.find((function(e){return"RET_GAN"===e.c})).h,editable:o,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_IVA",headerName:"IVA",width:120,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"RET_IVA"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_SUSS",headerName:"SUSS",width:120,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"RET_SUSS"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"apr_obra",headerName:"Ap. Obra",width:140,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"apr_obra"===e.c})).h,align:"center",renderCell:Fo},{field:"apr_adm",headerName:"Ap. ADM",width:140,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"apr_adm"===e.c})).h,align:"center",renderCell:To},{field:"formaPago",headerName:"Forma Pago",width:160,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"formaPago"===e.c})).h},{field:"fondos",headerName:"Fondos",width:150,type:"singleSelect",editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"fondos"===e.c})).h,renderEditCell:function(e){return Object(N.jsx)(Po,{fondos_s:n,props:e})},headerAlign:"center"},{field:"rubroId",headerName:"Rubro",width:140,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"rubroId"===e.c})).h,headerAlign:"center",renderEditCell:function(e){return Object(N.jsx)(Co,{rubros:a,props:e})}},{field:"subrubroId",headerName:"Sub Rubro",width:140,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"subrubroId"===e.c})).h,headerAlign:"center",renderEditCell:function(e){return Object(N.jsx)(So,{subRubros:c,props:e})}},{field:"fpagoModo1",headerName:"Forma pago 1",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoModo1"===e.c})).h,headerAlign:"center"},{field:"fpagoMonto1",headerName:"Forma pago monto 1",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoMonto1"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"fpagoModo2",headerName:"Forma pago 2",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoModo2"===e.c})).h,headerAlign:"center"},{field:"fpagoMonto2",headerName:"Forma pago monto 2",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoMonto2"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"fpagoModo3",headerName:"Forma pago 3",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoModo3"===e.c})).h,headerAlign:"center"},{field:"fpagoMonto3",headerName:"Forma pago monto 3",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoMonto3"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"fpagoModo4",headerName:"Forma pago 4",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoModo4"===e.c})).h,headerAlign:"center"},{field:"fpagoMonto4",headerName:"Forma pago monto 4",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fpagoMonto4"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"descripcion",headerName:"Detalle",width:140,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"descripcion"===e.c})).h,headerAlign:"center",align:"center"},{field:"archivada",headerName:"Generar",width:140,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"archivada"===e.c})).h,align:"center",renderCell:Do},{field:"enviada",headerName:"Enviar",width:90,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"enviada"===e.c})).h,align:"center",renderCell:Ro},{field:"confirmada",headerName:"Conf",type:"boolean",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"confirmada"===e.c})).h,headerAlign:"center"},{field:"deleteIcon",headerName:" ",hide:!o&&(null===e||void 0===e?void 0:e.find((function(e){return"deleteIcon"===e.c})).h),width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,i=t.deleteId;return t.confirmada?"":Object(N.jsx)(Tt.a,{onClick:function(e){d(i),l(!0)}})}}]},fo="http://104.131.28.211:3000/";function jo(e){var t=e.filtFide,i=e.filtRS,n=e.filtEst,r=e.filtTerm,o=e.idSociety,d=e.loggedUser,u=e.opInformation,b=e.isLoading,f=e.error;uo=o.id;var j={},m=Object(l.useContext)(bc),v=Object(l.useContext)(hc),h=Object(l.useContext)(pc),p=!0,x=null===d||void 0===d?void 0:d["rol.op"];"vista"===x&&(p=!1);var O=0,g=!1;"total"!==(null===d||void 0===d?void 0:d["rol.op"])&&"blue"!==(null===d||void 0===d?void 0:d["rol.op"])||(O=-1,g=!0);var y=!1;"blue"===(null===d||void 0===d?void 0:d["rol.descripcion"])&&(y=!0);var C=Object(s.i)(),S=St(),A=S.Prompt,T=S.setIsPromptOpen,D=Object(l.useState)(),R=Object(c.a)(D,2),k=R[0],z=R[1],_=Object(a.useQueryClient)(),V=Object(a.useQuery)(["rubros",o],(function(){return Ge("rubro/listar/".concat(o.id))})).data,U=Object(a.useQuery)(["subrubros",o],(function(){return Ge("subrubro/listar/".concat(o.id,"/0"))})).data,M=Object(a.useQuery)(["grfacturas",o.id],Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("factura/listar/".concat(o.id,"/todas/nada/").concat(O));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).data,Q=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("op/mostrar/".concat(o.id,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSettled:function(e){var t,i,n,r,o;C("./".concat(e.id,"/").concat(e.createdAt,"/").concat(e.empresaId,"/").concat(e.numero,"/").concat(e.fideicomisoId,"/").concat(null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre,"/").concat(e.estadoOP,"/").concat(null===e||void 0===e||null===(i=e.auth_adm[0])||void 0===i||null===(n=i.usuarios[0])||void 0===n?void 0:n.user,"/").concat(null===e||void 0===e||null===(r=e.auth_obra[0])||void 0===r||null===(o=r.usuarios[0])||void 0===o?void 0:o.user,"/").concat(e.confirmada,"/").concat(e.blue,"/OP Detalle"))}}),E=Q.mutate,L=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OP/eliminar/".concat(o.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.cancelQueries(["OP",o]);case 2:return i=_.getQueryData(["OP",o]),n=i.filter((function(e){return e.id!==t})),_.setQueryData(["OP",o],n),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return _.setQueryData(["OP",o],i)},onSettled:function(){return _.invalidateQueries(["OP",o])}}),B=L.mutate,W=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("op/mostrarConFacturas/".concat(o.id,"/").concat(t.id));case 2:return e.abrupt("return",j=e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){var t,i,n,r,o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:lo=j.op,so={item:j.item},H(null===(t=lo)||void 0===t?void 0:t.id,null===(i=lo)||void 0===i||null===(n=i.fideicomisos[0])||void 0===n?void 0:n.nombre,null===(r=lo)||void 0===r?void 0:r.numero,null===(o=lo)||void 0===o||null===(a=o.empresas[0])||void 0===a?void 0:a.razonSocial);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),q=W.mutate;function H(e,t,i,n){return G.apply(this,arguments)}function G(){return(G=Object(Qe.a)(Me.a.mark((function e(t,i,n,r){var a,c,l;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.pdf)($()).toBlob();case 2:return a=e.sent,c=new FormData,l=n+" OP-"+i+"-"+r+".pdf",c.append("logo",a),c.append("id",t),c.append("fideicomiso",i),c.append("numero",n),c.append("nombreArchivo",l),c.append("archivada",1),e.next=13,$e("op/modificar/".concat(o.id),c);case 13:return e.next=15,_.refetchQueries(["OP",o]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(){return Object(N.jsx)(ro,{dataOP:lo,dataFacturas:so,apiServerUrl:fo,idSociedad:o.id})},Y=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("autorizacion/eliminar/".concat(null===o||void 0===o?void 0:o.id),{id:t.authOBRA,tipoAutorizacion:"obra",opid:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.refetchQueries(["OP",o]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),Z=Y.mutate,J=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("autorizacion/eliminar/".concat(null===o||void 0===o?void 0:o.id),{id:t.authADM,tipoAutorizacion:"adm",opid:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.refetchQueries(["OP",o]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),K=J.mutate,X=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("OP/enviarMail/".concat(null===o||void 0===o?void 0:o.id),{mailTo:null===(i=t.fideicomisos[0])||void 0===i?void 0:i.mailOP,mailaccount:null===o||void 0===o?void 0:o.mailaccount,mailfromname:null===o||void 0===o?void 0:o.mailfromname,mailConstructora:null===o||void 0===o?void 0:o.mailConstructora,fideicomiso:null===(n=t.fideicomisos[0])||void 0===n?void 0:n.nombre,razonSocial:null===(r=t.empresas[0])||void 0===r?void 0:r.razonSocial,enviar_OP_auto:null===(a=t.empresas[0])||void 0===a?void 0:a.enviar_OP_auto,numero:t.numero,id:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.refetchQueries(["OP",o]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),ee=X.mutate,te=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,$e("OP/modificar/".concat(o.id),Object(w.a)({id:n},i,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,_.cancelQueries(["OP",o]);case 3:return a=_.getQueryData(["OP",o]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==n}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===n}))),{},Object(w.a)({},i,r))]),_.setQueryData(["OP",o],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return _.setQueryData(["OP",o],i)},onSettled:function(){return _.invalidateQueries(["OP",o])}}),ie=te.mutate,re=Object(l.useState)([]),oe=Object(c.a)(re,2),ce=oe[0],le=oe[1],de=Object(l.useState)(!1),se=Object(c.a)(de,2),ue=se[0],be=se[1];var fe=Object(l.useState)([{c:"id",h:!1},{c:"blue",h:!1},{c:"createdAt",h:!1},{c:"fideicomiso",h:!1},{c:"numero",h:!1},{c:"empresa",h:!1},{c:"monto",h:!1},{c:"neto",h:!1},{c:"moneda",h:!1},{c:"estadoOP",h:!1},{c:"estadoRET",h:!1},{c:"facturas",h:!1},{c:"RET_GAN",h:!0},{c:"RET_IVA",h:!0},{c:"RET_SUSS",h:!0},{c:"apr_obra",h:!1},{c:"apr_adm",h:!1},{c:"formaPago",h:!1},{c:"fondos",h:!1},{c:"rubroId",h:!0},{c:"subrubroId",h:!0},{c:"descripcion",h:!1},{c:"fpagoModo1",h:!0},{c:"fpagoMonto1",h:!0},{c:"fpagoModo2",h:!0},{c:"fpagoMonto2",h:!0},{c:"fpagoModo3",h:!0},{c:"fpagoMonto3",h:!0},{c:"fpagoModo4",h:!0},{c:"fpagoMonto4",h:!0},{c:"archivada",h:!1},{c:"enviada",h:!1},{c:"confirmada",h:!1},{c:"deleteIcon",h:!1}]),je=Object(c.a)(fe,2),me=je[0],ve=je[1],he=l.useState([{field:"createdAt",sort:"desc"}]),pe=Object(c.a)(he,2),xe=pe[0],Oe=pe[1],ge=Object(l.useState)(25),ye=Object(c.a)(ge,2),we=ye[0],Ce=ye[1];return b?"Cargando...":f?"Hubo un error: ".concat(f.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(A,{message:"\xbfEliminar fila?",action:function(){return B(k)}}),Object(N.jsx)(qr.a,{}),Object(N.jsxs)(P.a,{sx:{height:400,width:1,"& .color_x_estado-conf":{bgcolor:function(e){return ao(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return co(e.palette.success.main,e.palette.mode)}}},"& .color_x_estado-auth":{bgcolor:function(e){return ao(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return co(e.palette.error.main,e.palette.mode)}}},"& .color_x_estado-anulado":{bgcolor:function(e){return ao(e.palette.text.primary,e.palette.mode)},"&:hover":{bgcolor:function(e){return co(e.palette.text.primary,e.palette.mode)}}},"& .color_x_estado-parap":{bgcolor:function(e){return ao(e.palette.warning.light,e.palette.mode)},"&:hover":{bgcolor:function(e){return co(e.palette.warning.light,e.palette.mode)}}}},children:[Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"Rojo: Para autorizar,\xa0 Amarilla: Para pagar,\xa0 Verde: Pagada y confirmada,\xa0 Blanca: ..Otros estados\xa0 | Ocultas: Pagada, confirmada, generada y enviada"}),Object(N.jsx)(Ft.a,{rows:u.filter((function(e){return function(e,t,i,n,r,o){var a=!1;return-1===t&&-1===i&&-1===n&&(a=!0),t>-1&&-1===i&&-1===n&&e.fideicomisoId===t&&(a=!0),-1===t&&i>-1&&-1===n&&e.empresaId===i&&(a=!0),-1===t&&-1===i&&n>-1&&e.estadoOP===n&&(a=!0),t>-1&&i>-1&&-1===n&&e.fideicomisoId===t&&e.empresaId===i&&(a=!0),t>-1&&-1===i&&n>-1&&e.fideicomisoId===t&&e.estadoOP===n&&(a=!0),-1===t&&i>-1&&n>-1&&e.empresaId===i&&e.estadoOP===n&&(a=!0),t>-1&&i>-1&&n>-1&&e.fideicomisoId===t&&e.empresaId===i&&e.estadoOP===n&&(a=!0),o&&1!==e.blue&&(a=!1),(1===e.confirmada&&e.archivada&&e.enviada||6===e.estadoOP)&&r&&(a=!1),a}(e,t,i,n,r,y)})).map((function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,p,O,g;return{id:null===e||void 0===e?void 0:e.id,blue:null===e||void 0===e?void 0:e.blue,createdAt:null===e||void 0===e?void 0:e.createdAt,fideicomisoId:null===e||void 0===e?void 0:e.fideicomisoId,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",numero:null===e||void 0===e?void 0:e.numero,empresaId:null===e||void 0===e?void 0:e.empresaId,empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(i=e.empresas[0])||void 0===i?void 0:i.razonSocial:"",monto:null===e||void 0===e?void 0:e.monto,neto:null===e||void 0===e?void 0:e.neto,moneda:null===e||void 0===e?void 0:e.moneda,estadoOP:null===m||void 0===m||null===(n=m.find((function(t){return t.id===e.estadoOP})))||void 0===n?void 0:n.descripcion,estadoRET:null===v||void 0===v||null===(r=v.find((function(t){return t.id===e.estadoRET})))||void 0===r?void 0:r.descripcion,facturas:null===M||void 0===M||null===(o=M.filter((function(t){return(null===t||void 0===t?void 0:t.OPId)===e.id})))||void 0===o||null===(a=o.map((function(e){return e.numero})))||void 0===a?void 0:a.join(", "),fondos:null===h||void 0===h||null===(c=h.find((function(t){return(null===t||void 0===t?void 0:t.id)===e.fondos})))||void 0===c?void 0:c.descripcion,descripcion:null===e||void 0===e?void 0:e.descripcion,archivada:null===e||void 0===e?void 0:e.archivada,enviada:null===e||void 0===e?void 0:e.enviada,confirmada:0!==(null===e||void 0===e?void 0:e.confirmada),RET_SUSS:null===e||void 0===e?void 0:e.RET_SUSS,RET_GAN:null===e||void 0===e?void 0:e.RET_GAN,RET_IVA:null===e||void 0===e?void 0:e.RET_IVA,apr_obra:(null===e||void 0===e?void 0:e.auth_obra)&&e.auth_obra[0]&&e.auth_obra[0].usuarios?e.auth_obra[0].usuarios[0].user:"",apr_adm:(null===e||void 0===e?void 0:e.auth_adm)&&e.auth_adm[0]&&e.auth_adm[0].usuarios?e.auth_adm[0].usuarios[0].user:"",filtroRubroID:null===e||void 0===e?void 0:e.rubroId,acceso:x,deleteId:null===e||void 0===e?void 0:e.id,aprobado_obra:(null===e||void 0===e?void 0:e.auth_obra)&&e.auth_obra[0]&&e.auth_obra[0].usuarios?e.auth_obra[0].usuarios[0].user:"",aprobado_adm:(null===e||void 0===e?void 0:e.auth_adm)&&e.auth_adm[0]&&e.auth_adm[0].usuarios?e.auth_adm[0].usuarios[0].user:"",formaPago:null===e||void 0===e?void 0:e.formaPago,rubroId:null===V||void 0===V||null===(l=V.find((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.rubroId)})))||void 0===l?void 0:l.rubro,subrubroId:null===U||void 0===U||null===(d=U.find((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.subRubroId)})))||void 0===d?void 0:d.subRubro,Color_estadoOP:null===e||void 0===e?void 0:e.estadoOP,fpagoModo1:null===e||void 0===e||null===(s=e.OPpago)||void 0===s?void 0:s.modo1,fpagoMonto1:null===e||void 0===e||null===(u=e.OPpago)||void 0===u?void 0:u.monto1,fpagoModo2:null===e||void 0===e||null===(b=e.OPpago)||void 0===b?void 0:b.modo2,fpagoMonto2:null===e||void 0===e||null===(f=e.OPpago)||void 0===f?void 0:f.monto2,fpagoModo3:null===e||void 0===e||null===(j=e.OPpago)||void 0===j?void 0:j.modo3,fpagoMonto3:null===e||void 0===e||null===(p=e.OPpago)||void 0===p?void 0:p.monto3,fpagoModo4:null===e||void 0===e||null===(O=e.OPpago)||void 0===O?void 0:O.modo4,fpagoMonto4:null===e||void 0===e||null===(g=e.OPpago)||void 0===g?void 0:g.monto4,onAuthObra:function(){return Z(e)},onAuthAdm:function(){return K(e)},onEnviar:function(){return ee(e)},cargarOP:function(){return q(e)},esEditable:function(){return e},onIrDetalle:function(){return E(e)}}})),onCellEditCommit:ie,columns:bo(me,m,v,h,g,p,V,U,T,z),sortModel:xe,onSortModelChange:function(e){return e[0]!==xe[0]&&function(e){var t;0===e.length&&(e.push(xe[0]),"asc"===(null===(t=xe[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),Oe(e)}(e)},onColumnVisibilityChange:function(e){return function(e){var t=me,i=null===t||void 0===t?void 0:t.findIndex((function(t){return t.c===e.field}));i>-1&&(t[i]={c:e.field,h:!e.isVisible},ve(t))}(e)},pageSize:we,onPageSizeChange:function(e){return Ce(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,isCellEditable:function(e){return!e.row.confirmada||"total"===x},checkboxSelection:!0,onSelectionModelChange:le,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Oo},getRowClassName:function(e){return"color_x_estado-".concat(e.row.confirmada?"conf":6===e.row.Color_estadoOP?"anulado":2===e.row.Color_estadoOP?"parap":1===e.row.Color_estadoOP||4===e.row.Color_estadoOP?"auth":"regular")}}),Object(N.jsx)(wi.a,{smUp:"vista"===d["rol.op"],children:Object(N.jsx)(ae.a,{onClick:function(){return function(e,t,i){!function(e,t,i){mo.apply(this,arguments)}(e,t,i)}(ce,o,be)},children:"Generar y Enviar OPs Seleccionadas"})}),Object(N.jsx)(mn.a,{in:ue,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){be(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function mo(){return(mo=Object(Qe.a)(Me.a.mark((function e(t,i,n){var r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=12;break}return e.prev=2,e.delegateYield(Me.a.mark((function e(){var o,a,c,l,d,s,u,b,f,j;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("op/mostrarConFacturas/".concat(i.id,"/").concat(t[r]));case 2:if(o=e.sent,a=o.op,c={item:o.item},3!==a.estadoOP||0!==a.blue){e.next=11;break}return s=function(){return Object(N.jsx)(ro,{dataOP:a,dataFacturas:c,apiServerUrl:fo,idSociedad:i.id})},e.next=9,vo(s,a.id,null===a||void 0===a||null===(l=a.fideicomisos[0])||void 0===l?void 0:l.nombre,a.numero,null===a||void 0===a||null===(d=a.empresas[0])||void 0===d?void 0:d.razonSocial,i);case 9:e.sent&&(po(a.id,null===a||void 0===a||null===(u=a.fideicomisos[0])||void 0===u?void 0:u.nombre,a.numero,null===(b=a.empresas[0])||void 0===b?void 0:b.razonSocial,null===(f=a.empresas[0])||void 0===f?void 0:f.enviar_OP_auto,i,null===a||void 0===a||null===(j=a.fideicomisos[0])||void 0===j?void 0:j.mailOP),n(!0));case 11:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:e.next=9;break;case 6:e.prev=6,e.t1=e.catch(2),console.log(e.t1);case 9:r++,e.next=1;break;case 12:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function vo(e,t,i,n,r,o){return ho.apply(this,arguments)}function ho(){return(ho=Object(Qe.a)(Me.a.mark((function e(t,i,n,r,o,a){var c,l,d,s;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r+" OP-"+n+"-"+o+".pdf",e.next=3,Object(Nn.pdf)(t()).toBlob();case 3:return l=e.sent,(d=new FormData).append("logo",l),d.append("id",i),d.append("fideicomiso",n),d.append("numero",r),d.append("nombreArchivo",c),d.append("archivada",1),e.next=13,$e("op/modificar/".concat(a.id),d);case 13:return s=e.sent,e.abrupt("return",!!s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function po(e,t,i,n,r,o,a){return xo.apply(this,arguments)}function xo(){return(xo=Object(Qe.a)(Me.a.mark((function e(t,i,n,r,o,a,c){var l;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("OP/enviarMail/".concat(null===a||void 0===a?void 0:a.id),{mailTo:c,mailaccount:null===a||void 0===a?void 0:a.mailaccount,mailfromname:null===a||void 0===a?void 0:a.mailfromname,mailConstructora:null===a||void 0===a?void 0:a.mailConstructora,fideicomiso:i,razonSocial:r,enviar_OP_auto:o,numero:n,id:t});case 2:return l=e.sent,e.abrupt("return",!!l);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.b,{}),"subrubroId",Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["id","createdAt","fideicomiso","numero","empresa","monto","moneda","RET_SUSS","RET_GAN","RET_IVA","fondos","estadoRET","facturas","estadoOP","apr_obra","apr_adm","rubroId","fpagoModo1","fpagoMonto1","fpagoModo2","fpagoMonto2","fpagoModo3","fpagoMonto3","fpagoModo4","fpagoMonto4","descripcion"]}})]})}function go(e){var t="".concat(e.row.id,"/").concat(e.row.createdAt,"/").concat(e.row.empresaId,"/").concat(e.row.numero,"/").concat(e.row.fideicomisoId,"/").concat(e.row.fideicomiso,"/").concat(e.row.Color_estadoOP,"/").concat(""===e.row.apr_adm?"null":e.row.apr_adm,"/").concat(""===e.row.apr_obra?"null":e.row.apr_obra,"/").concat(e.row.confirmada?1:0,"/").concat(e.row.blue,"/OP Detalle");return Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:e.row.id})})}function yo(e){var t=e.row.onIrDetalle,i=e.row.fideicomiso;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function wo(e){var t=e.row.onIrDetalle,i=e.row.numero;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function Co(e){var t=e.rubros,i=e.props,n=i.id,r=i.api,o=i.field;t=[].concat(Object(Fe.a)(t),[{rubro:""}]);var a=Object(l.useState)({rubro:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(N.jsx)(mi.a,{value:s,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,a){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return r.setEditCellValue({id:n,field:o,value:a.id},t),e.next=5,i.api.commitCellChange({id:n,field:o});case 5:r.setCellMode(n,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Rubro"}))}})}function So(e,t){var i=e.subRubros,n=e.props,r=n.id,o=n.api,a=n.field;i=[].concat(Object(Fe.a)(i.filter((function(e){var t;return e.rubroId===parseInt(null===n||void 0===n||null===(t=n.row)||void 0===t?void 0:t.filtroRubroID)}))),[{subRubro:""}]);var d=Object(l.useState)({subRubro:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(N.jsx)(mi.a,{value:u,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(i),o.setEditCellValue({id:r,field:a,value:i.id},t),e.next=4,n.api.commitCellChange({id:r,field:a});case 4:o.setCellMode(r,a,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:i,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"subRubro"}))}})}function Ao(e){var t=e.retenciones,i=e.props,n=i.id,r=i.api,o=i.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var a=Object(l.useState)({descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(N.jsx)(mi.a,{value:s,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,a){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return r.setEditCellValue({id:n,field:o,value:a.id},t),e.next=5,i.api.commitCellChange({id:n,field:o});case 5:r.setCellMode(n,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Retencion"}))}})}function Io(e){var t=e.estados,i=e.props,n=i.id,r=i.api,o=i.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var a=Object(l.useState)({descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return i.row.confirmada?Object(N.jsx)(Ee.a,{defaultValue:i.row.estadoOP.descripcion,InputProps:{readOnly:!0}}):Object(N.jsx)(mi.a,{value:s,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,a){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return r.setEditCellValue({id:n,field:o,value:a.id},t),e.next=5,i.api.commitCellChange({id:n,field:o});case 5:r.setCellMode(n,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Estado"}))}})}function Po(e){var t=e.fondos_s,i=e.props,n=i.id,r=i.api,o=i.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var a=Object(l.useState)({descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return i.row.confirmada?Object(N.jsx)(Ee.a,{defaultValue:i.row.fondos.descripcion,InputProps:{readOnly:!0}}):Object(N.jsx)(mi.a,{value:s,onChange:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,a){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!((null===a||void 0===a?void 0:a.id)>0)){e.next=6;break}return r.setEditCellValue({id:n,field:o,value:a.id},t),e.next=5,i.api.commitCellChange({id:n,field:o});case 5:r.setCellMode(n,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fondos"}))}})}function Fo(e){var t=e.row.onAuthObra,i=e.row.apr_obra;return""!==i?"total"===e.row.acceso?Object(N.jsxs)(ae.a,{onClick:function(){return Object(qr.b)((function(e){var i=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:i,children:"Cancelar"}),Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),i()},children:"Desaprobar Obra"})]})}))},children:[i,"  "]}):""+(""+i).toUpperCase():""}function To(e){var t=e.row.onAuthAdm,i=e.row.apr_adm;return""!==i?"total"===e.row.acceso?Object(N.jsxs)(ae.a,{onClick:function(){return Object(qr.b)((function(e){var i=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:i,children:"Cancelar"}),Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),i()},children:"Desaprobar Adm"})]})}))},children:[i,"  "]}):""+(""+i).toUpperCase():""}function Do(e){var t=e.row.cargarOP,i=e.row.fideicomiso,n=e.row.empresa,r=e.row.numero+" OP-"+i+"-"+n+".pdf",o=e.row.archivada,a=function(){t(),setTimeout((function(){Object(qr.b)((function(e){var t=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(N.jsx)(Nn.PDFDownloadLink,{document:Object(N.jsx)(ro,{dataOP:lo,dataFacturas:so,apiServerUrl:"http://104.131.28.211:3000/",idSociedad:uo}),fileName:r,children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Descargar"}})]})}))}),800)};return 0===o?Object(N.jsx)(ae.a,{onClick:a,children:"Para Generar"}):Object(N.jsx)(ae.a,{onClick:a,children:"Generada"})}function Ro(e){var t=e.row.onEnviar,i=e.row.enviada,n=function(){return Object(qr.b)((function(e){var i=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:i,children:"Cancelar"}),Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),i()},children:"Enviar"})]})}))};return 0===e.row.archivada?"":0===i?Object(N.jsx)(ae.a,{onClick:n,children:"Enviar"}):Object(N.jsx)(ae.a,{onClick:n,children:"Re enviar"})}function No(e){var t=e.loggedUser,i=Object(l.useContext)(uc),n=0;"total"!==(null===t||void 0===t?void 0:t["rol.op"])&&"blue"!==(null===t||void 0===t?void 0:t["rol.op"])||(n=-1);var r=Object(a.useQuery)(["OP",i],(function(){return Ge("OP/listar/".concat(i.id,"/todas/nulo/").concat(n,"/0/0/0"))})),o=r.data,d=r.isLoading,s=r.error,u=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(i.id))})).data,b=Object(a.useQuery)(["proveedores"],(function(){return Ge("empresa/listar/".concat(i.id,"/0"))})).data,f=Object(a.useQuery)(["ddfacturas"],(function(){return Ge("factura/listar/".concat(i.id,"/opid/0/0"))})).data,j=Object(a.useQuery)(["ddfacturasBlue"],(function(){return Ge("factura/listar/".concat(i.id,"/opid/0/1"))})).data,m=Object(l.useState)(-1),v=Object(c.a)(m,2),h=v[0],p=v[1],x=Object(l.useState)(-1),O=Object(c.a)(x,2),g=O[0],y=O[1],w=Object(l.useState)(-1),C=Object(c.a)(w,2),S=C[0],A=C[1],I=Object(l.useState)(!0),F=Object(c.a)(I,2),T=F[0],D=F[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(wi.a,{smUp:"vista"===(null===t||void 0===t?void 0:t["rol.op"]),children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Lr,{idSociety:i,loggedUser:t,fideicomisos:u,proveedores:b,ddfacturas:f,ddfacturasBlue:j})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Wr,{idSociety:i,loggedUser:t,fideicomisos:u,setFiltFide:p,setFiltRS:y,setFiltEst:A,filtTerm:T,setFiltTerm:D,proveedores:b,ddfacturas:f,ddfacturasBlue:j})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(jo,{idSociety:i,loggedUser:t,opInformation:o,filtTerm:T,filtFide:h,filtRS:g,filtEst:S,isLoading:d,error:s})})]})})]})}var ko=i(652),zo=i.n(ko),_o=function(e,t){return"dark"===t?Object(oo.b)(e,.6):Object(oo.d)(e,.6)},Vo=function(e,t){return"dark"===t?Object(oo.b)(e,.5):Object(oo.d)(e,.5)},Uo=function(e,t,i){return[{field:"estadoId",headerName:"Requiere autorizar en Obra",width:70,filterable:!1,sortable:!1,hide:"obra"===e,editable:!1,headerAlign:"center",renderCell:function(e){return 1!==e.value?"":Object(N.jsx)(T.a,{sx:{bgcolor:"#39BC44"},children:"Ob"})}},{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center",align:"center",renderCell:Eo},{field:"createdAt",headerName:"Fecha",editable:!1,width:115,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return lt(e.value)}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:Lo},{field:"numero",headerName:"Nro",width:110,editable:!1,headerAlign:"center",align:"right",renderCell:Bo},{field:"empresa",headerName:"Raz\xf3n Social",editable:!1,width:160,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",editable:!1,width:120,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"Moneda",editable:!1,width:50,headerAlign:"center",align:"left"},{field:"formaPago",headerName:"Forma Pago",width:155,editable:!0},{field:"estadoOP",headerName:"Estado",width:150,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"PriceCheckIcon",headerName:"Autorizar",width:155,filterable:!1,sortable:!1,headerAlign:"center",align:"center",renderCell:function(e){var n=e.row.authId;return Object(N.jsx)(zo.a,{onClick:function(e){i(n),t(!0)}})}}]};function Mo(e){var t=e.idSociety,i=e.loggedUser,n=e.tipo,r=St(),o=r.Prompt,d=r.setIsPromptOpen,u=Object(l.useState)(),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(s.i)(),v="";v="adm"===n?"OP/listar/".concat(t.id,"/authADM/nulo/").concat(0,"/0/0/0"):"OP/listar/".concat(t.id,"/authObra/nulo/").concat(0,"/0/0/0");var h=Object(a.useQuery)(["OP"+n,t],(function(){return Ge(v)})),p=h.data,x=h.isLoading,O=h.error,g=Object(a.useQueryClient)(),y=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.rowIdToDelete,r=i.tipo,o=i.loggedUser,e.next=3,$e("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:n,documento:"op",tipoAutorizacion:r,creador:o.id});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.refetchQueries(["OP"+n,t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),C=y.mutate,S=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m("./".concat(t.id,"/").concat(t.createdAt,"/").concat(t.empresaId,"/").concat(t.numero,"/").concat(t.fideicomisoId,"/").concat(null===(i=t.fideicomisos[0])||void 0===i?void 0:i.nombre,"/").concat(t.estadoOP,"/").concat(null===t||void 0===t||null===(n=t.auth_adm[0])||void 0===n||null===(r=n.usuarios[0])||void 0===r?void 0:r.user,"/").concat(null===t||void 0===t||null===(o=t.auth_obra[0])||void 0===o||null===(a=o.usuarios[0])||void 0===a?void 0:a.user,"/").concat(t.confirmada,"/").concat(t.blue,"/OP Detalle")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),A=S.mutate,I=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.field,r=i.id,o=i.value,e.next=3,$e("OP/modificar/".concat(t.id),Object(w.a)({id:r},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var r,o,a,c,l;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.field,o=i.id,a=i.value,e.next=3,g.cancelQueries(["OP"+n,t]);case 3:return c=g.getQueryData(["OP"+n,t]),l=[].concat(Object(Fe.a)(c.filter((function(e){return e.id!==o}))),[Object(ne.a)(Object(ne.a)({},c.find((function(e){return e.id===o}))),{},Object(w.a)({},r,a))]),g.setQueryData(["OP"+n,t],l),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,r){return g.setQueryData(["OP"+n,t],r)},onSettled:function(){return g.invalidateQueries(["OP"+n,t])}}),T=I.mutate,D=Object(l.useContext)(bc),R=Object(l.useState)([]),k=Object(c.a)(R,2),z=k[0],_=k[1],V=Object(l.useState)(!1),U=Object(c.a)(V,2),M=U[0],Q=U[1];var E=l.useState([{field:"createdAt",sort:"desc"}]),L=Object(c.a)(E,2),B=L[0],W=L[1],q=Object(l.useState)(25),H=Object(c.a)(q,2),G=H[0],$=H[1];return x?"Cargando...":O?"Hubo un error: ".concat(O.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(o,{message:"\xbfAutorizar fila?",action:function(){return C({rowIdToDelete:f,tipo:n,loggedUser:i})}}),Object(N.jsxs)(P.a,{sx:{height:400,width:1,"& .color_x_estado-conf":{bgcolor:function(e){return _o(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return Vo(e.palette.success.main,e.palette.mode)}}},"& .color_x_estado-auth":{bgcolor:function(e){return _o(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return Vo(e.palette.error.main,e.palette.mode)}}},"& .color_x_estado-anulado":{bgcolor:function(e){return _o(e.palette.text.primary,e.palette.mode)},"&:hover":{bgcolor:function(e){return Vo(e.palette.text.primary,e.palette.mode)}}},"& .color_x_estado-parap":{bgcolor:function(e){return _o(e.palette.warning.light,e.palette.mode)},"&:hover":{bgcolor:function(e){return Vo(e.palette.warning.light,e.palette.mode)}}}},children:[Object(N.jsx)(Ft.a,{rows:p.filter((function(e){return function(e,t){return"adm"===t||1===e.estadoOP}(e,n)})).map((function(e){var t;return{estadoId:e.estadoOP,id:e.id,createdAt:e.createdAt,fideicomiso:e.fideicomisos[0].nombre,numero:e.numero,empresa:e.empresas[0].razonSocial,monto:e.monto,moneda:e.moneda,formaPago:e.formaPago,estadoOP:null===D||void 0===D||null===(t=D.find((function(t){return t.id===e.estadoOP})))||void 0===t?void 0:t.descripcion,Color_estadoOP:e.estadoOP,empresaId:e.empresaId,apr_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",apr_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",authOBRA:!!e.authOBRA,authId:e.id,blue:e.blue,confirmada:0!==e.confirmada,onIrDetalle:function(){return A(e)}}})),onCellEditCommit:T,columns:Uo(n,d,j),sortModel:B,onSortModelChange:function(e){return e[0]!==B[0]&&function(e){var t;0===e.length&&(e.push(B[0]),"asc"===(null===(t=B[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),W(e)}(e)},pageSize:G,onPageSizeChange:function(e){return $(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,checkboxSelection:!0,onSelectionModelChange:_,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Qo},getRowClassName:function(e){return"color_x_estado-".concat(e.row.confirmada?"conf":6===e.row.Color_estadoOP?"anulado":2===e.row.Color_estadoOP?"parap":1===e.row.Color_estadoOP||4===e.row.Color_estadoOP?"auth":"regular")}}),Object(N.jsx)(ae.a,{onClick:function(){return function(e,t,i,n,r,o){for(var a=!1,c=0;c<e.length;c++)try{r({rowIdToDelete:e[c],tipo:i,loggedUser:n})}catch(O){a=!0,console.log(O)}a||o(!0)}(z,0,n,i,C,Q)},children:"Autorizar filas Seleccionadas"}),Object(N.jsx)(mn.a,{in:M,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Q(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function Qo(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["id","createdAt","fideicomiso","numero","empresa","monto","moneda","formaPago","estadoOP"]}})]})}function Eo(e){var t="".concat(e.row.id,"/").concat(e.row.createdAt,"/").concat(e.row.empresaId,"/").concat(e.row.numero,"/").concat(e.row.fideicomiso,"/").concat(e.row.Color_estadoOP,"/").concat(""===e.row.apr_adm?"null":e.row.apr_adm,"/").concat(""===e.row.apr_obra?"null":e.row.apr_obra,"/").concat(e.row.confirmada?1:0,"/").concat(e.row.blue,"/OP Detalle");return Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:e.row.id})})}function Lo(e){var t=e.row.onIrDetalle,i=e.row.fideicomiso;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function Bo(e){var t=e.row.onIrDetalle,i=e.row.numero;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function Wo(e){var t=e.idSociety,i=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsx)(we.a,{children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Mo,{idSociety:t,loggedUser:i,tipo:"adm"})})})})]})}function qo(e){var t=e.idSociety,i=e.loggedUser;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsx)(we.a,{children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Mo,{idSociety:t,loggedUser:i,tipo:"obra"})})})})]})}function Ho(e){var t=e.idSociety,i=e.fideicomisoId,n=e.empresaId,r=e.OPId,o=e.refetch,d=Object(s.j)().blue,u=St().Prompt,b=Object(a.useQueryClient)(),f=Object(a.useQuery)(["facturas"],(function(){return Ge("factura/listarCombo/".concat(t.id,"/opid/0/").concat(d))})).data,j=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("factura/modificar/".concat(t.id),{id:null===i||void 0===i||null===(n=i.factura)||void 0===n?void 0:n.id,OPId:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.refetchQueries(["facturas",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),m=j.mutate,v=Object(l.useState)(null),h=Object(c.a)(v,2),p=h[0],x=h[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{factura:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,m(t),setTimeout((function(){o(),console.log("refetch")}),750),r(),n(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,r=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"N\xfamero Factura",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){x(t),r("factura",t)},value:p,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:f?null===f||void 0===f?void 0:f.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===parseInt(i)&&(null===e||void 0===e?void 0:e.empresaId)===parseInt(n)})):[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"N\xfamero Factura"}))}}),Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar Factura"})]})}}),Object(N.jsx)(u,{message:"...error",ok:!0})]})}var Go=i(1105),$o=i(1070),Yo="http://104.131.28.211:3000/";function Zo(e){var t=e.idSociety,i=e._bancos,n=e._cuentasbanco,r=(e.retIVA,e.setRetIVA),d=e.certificado,s=(e.retSUSS,e.setRetSUSS,e.OPId),u=e.loggedUser,b=e.estadoOP,f=e.confirmada,j=e.formOP,m=e.isLoading,v=e.error,h=e.refetch,p=e.empresaId,x=(e.fideicomiso,St().Prompt),O=Object(a.useQueryClient)(),g=!0,y=!0;"vista"===(null===u||void 0===u?void 0:u["rol.op"])&&(g=!1,y=!1),"obra"===(null===u||void 0===u?void 0:u["rol.descripcion"])&&(y=!0);var C=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("op/modificar/".concat(t.id),i);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.refetchQueries(["formOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),S=C.mutate,A=Object(l.useContext)(bc),P=Object(l.useContext)(hc),T=Object(l.useContext)(pc),D=Object(l.useContext)(mc),R=function(e,i){var n=i+"sociedades/"+t.id+"/certificados/"+e;Object(Hn.saveAs)(n,e+".pdf")};if(void 0===Object(l.useContext)(bc)){A=[{id:0,descripcion:"-"},{id:1,descripcion:"Para autorizar en Obra"},{id:2,descripcion:"Para pagar"},{id:3,descripcion:"Pagada"},{id:4,descripcion:"Para autorizar Admin. Central"},{id:5,descripcion:"Pagado Parcial"},{id:6,descripcion:"Anulado"},{id:7,descripcion:"Cargada en Banco"}]}if(void 0===Object(l.useContext)(hc)){P=[{id:0,descripcion:"-"},{id:1,descripcion:"No aplican"},{id:2,descripcion:"OK"},{id:3,descripcion:"Pendiente"}]}if(void 0===Object(l.useContext)(pc)){P=[{id:0,descripcion:"-"},{id:1,descripcion:"No aplican"},{id:2,descripcion:"OK"},{id:3,descripcion:"Pendiente"}]}if(void 0===Object(l.useContext)(pc)){T=[{id:0,descripcion:"-"},{id:1,descripcion:"No cargado"},{id:2,descripcion:"OK cargado"}]}var k=Object(l.useState)(parseInt(f)),z=Object(c.a)(k,2),_=z[0],V=z[1],U=Object(l.useState)(A[parseInt(b)]),M=Object(c.a)(U,2),Q=M[0],E=M[1],L=Object(l.useState)(P[parseInt(null===j||void 0===j?void 0:j.estadoRET)]),B=Object(c.a)(L,2),W=B[0],q=B[1],H=Object(l.useState)(T[parseInt(null===j||void 0===j?void 0:j.fondos)]),G=Object(c.a)(H,2),$=G[0],Y=G[1],Z=Object(l.useState)(""),J=Object(c.a)(Z,2),K=J[0],X=J[1],ee=Object(l.useState)(null===j||void 0===j?void 0:j.OC_moneda),te=Object(c.a)(ee,2),ie=te[0],re=te[1],oe=Object(Fe.a)(i),ce=Object(Fe.a)(n),le="total"!==u["rol.op"]||1!==_,de="no"===u["rol.oc"],se=1===(null===j||void 0===j?void 0:j.empresas[0].esRetIVA);"vista"!==u["rol.op"]&&"blue"!==u["rol.op"]||(se=!1);var ue=1===(null===j||void 0===j?void 0:j.empresas[0].esRetSUSS);return"vista"!==u["rol.op"]&&"blue"!==u["rol.op"]||(ue=!1),1===(null===j||void 0===j?void 0:j.confirmada)&&(ue=!1),m?"Cargando...":v?"Hubo un error: ".concat(v.message):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{id:s,flagPago:1},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,S(t),n(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting;var i,n,c,l,b,f,m,v,x,O,C=e.setFieldValue;return Object(N.jsx)(Be.b,{children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n T\xe9cnica"})})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:6,children:Object(N.jsx)(Ee.a,{sx:{width:"64ch"},label:"Detalle",defaultValue:null===j||void 0===j?void 0:j.descripcion,type:"float",name:"descripcion",onChange:function(e){return X("descripcion")},onBlur:function(e){return function(e,t,i,n,r,o,a,c,l,d){var s=null;if("descripcion"===d){if(2===a)s=st(e)+" 03:00:00";else{e.preventDefault();var u=e.target.value;t(n,u.toString()),s=u,"OCId"!==n&&"estadoOP"!==n&&"estadoRET"!==n&&"fondos"!==n||(s=c),"banco"===n.toString().substring(0,5)&&(s=c),"nro"===n.toString().substring(0,3)&&(s=c),"modo"===n.toString().substring(0,4)&&(s=c)}var b=Object(w.a)({id:o},n,s);if(a>0&&(b.flagPago=1),"Retenciones"===c){var f=parseFloat(null===l||void 0===l?void 0:l.RET_GAN)+parseFloat(null===l||void 0===l?void 0:l.RET_IVA)+parseFloat(null===l||void 0===l?void 0:l.RET_SUSS);"modo1"===n&&(b.monto1=f),"modo2"===n&&(b.monto2=f),"modo3"===n&&(b.monto3=f),"modo4"===n&&(b.monto4=f),"modo5"===n&&(b.monto5=f),"modo6"===n&&(b.monto6=f),"modo7"===n&&(b.monto7=f)}$e("op/modificar/".concat(r),b),setTimeout((function(){i&&(i(),console.log("refetch"))}),2e3)}}(e,C,h,"descripcion",t.id,s,0,0,null,K)},InputProps:{maxLength:90,readOnly:!y||1===_}},null===j||void 0===j?void 0:j.descripcion)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===j||void 0===j?void 0:j.auth_obra)?null===(i=j.auth_obra[0])||void 0===i||null===(n=i.usuarios[0])||void 0===n?void 0:n.user:""})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Orden de Compra:\xa0\xa0\xa0"})}),Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(na,{useQuery:a.useQuery,setFieldValue:C,OCId:null===j||void 0===j?void 0:j.OCId,OPId:s,idSociety:t,empresaId:p,fideicomisoId:null===j||void 0===j?void 0:j.fideicomisoId})}),Object(N.jsx)(Ce.a,{item:!0,md:6,children:Object(N.jsx)(wi.a,{smUp:de||(null===j||void 0===j?void 0:j.OCId)<1,children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:2,sm:4,md:6},children:[Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h4",children:Object(N.jsx)(ae.a,{component:o.c,to:"../../oc/".concat(null===j||void 0===j?void 0:j.OCId,"/OC Detalle"),children:"ver compra"})})}),Object(N.jsx)(Ce.a,{item:!0,md:1}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(un.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:null===j||void 0===j?void 0:j.OC_moneda,onChange:function(e){return Xo(e,C,re,h,"OC_moneda",t.id,s,1,0)},name:"row-radio-buttons-group",children:[Object(N.jsx)(bn.a,{value:"ARS",control:Object(N.jsx)(fn.a,{}),label:"ARS"}),Object(N.jsx)(bn.a,{value:"USD",control:Object(N.jsx)(fn.a,{}),label:"USD"})]},null===j||void 0===j?void 0:j.OC_moneda)}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsx)(wi.a,{smUp:"ARS"===ie,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"14ch"},label:"Tipo de cambio",type:"number",defaultValue:null===j||void 0===j?void 0:j.cotizacion_usd,name:"cotizacion_usd",onChange:function(e){return X("cotizacion_usd")},onBlur:function(e){return Ko(e,C,h,"cotizacion_usd",t.id,s,0,0,null,K)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.cotizacion_usd)})})]})})})]}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n Administrativa"})})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Estado:\xa0\xa0\xa0"})}),Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Estado",disabled:!g||1===_,disablePortal:!0,style:{width:"325px",display:"inline-flex"},onChange:function(e,i){Jo(e,C,E,h,"estadoOP",t.id,s,0,i)},value:Q,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:A,renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Estado"}))}})}),Object(N.jsxs)(Ce.a,{item:!0,md:2,children:[Object(N.jsx)(wi.a,{smUp:"total"===u["rol.op"]||1!==_,children:Object(N.jsx)(I.a,{align:"right",color:"green",variant:"h5",children:1===_?"Confirmada!":""})}),Object(N.jsx)(wi.a,{smUp:!g||3!==(null===Q||void 0===Q?void 0:Q.id)||1===_,children:Object(N.jsxs)(I.a,{align:"right",color:"blue",variant:"h5",children:[Object(N.jsx)(Go.a,{onChange:function(e){return ia(e,V,"confirmada",t.id,s,h,0,1)}})," Confirmar"]})}),Object(N.jsx)(wi.a,{smUp:le,children:Object(N.jsxs)(I.a,{align:"right",color:"blue",variant:"h5",children:[Object(N.jsx)(Go.a,{defaultChecked:!0,onChange:function(e){return ia(e,V,"confirmada",t.id,s,h,0,0)}})," Desconfirmar"]})})]}),Object(N.jsx)(Ce.a,{item:!0,md:4,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Retenci\xf3n, Fondos:\xa0\xa0\xa0"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Estado Retenci\xf3n",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){Jo(e,C,q,h,"estadoRET",t.id,s,0,i)},value:W,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:P,renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Estado Retenci\xf3n"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fondos",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){Jo(e,C,Y,h,"fondos",t.id,s,0,i)},value:$,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:T,renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fondos"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Forma de Pago:"})}),Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:null===j||void 0===j?void 0:j.formaPago})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Sumatoria Facturas:\xa0\xa0\xa0"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===j||void 0===j?void 0:j.monto))]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(N.jsx)(Ce.a,{item:!0,md:4,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===j||void 0===j?void 0:j.auth_adm)?null===(c=j.auth_adm[0])||void 0===c||null===(l=c.usuarios[0])||void 0===l?void 0:l.user:""})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:2}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"RET GAN",type:"number",defaultValue:null===j||void 0===j?void 0:j.RET_GAN,name:"RET_GAN",onChange:function(e){return X("RET_GAN")},onBlur:function(e){return Ko(e,C,h,"RET_GAN",t.id,s,0,0,null,K)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.RET_GAN)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Certificado GAN",defaultValue:null===j||void 0===j?void 0:j.COMP_GAN,name:"COMP_GAN",onChange:function(e){return ta(e,C,h,"COMP_GAN",t.id,s,0,0,null)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.COMP_GAN)}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsx)(wi.a,{smUp:!(void 0!==(null===d||void 0===d||null===(b=d.find((function(e){return"GAN"===e.tipo})))||void 0===b?void 0:b.nombre)&&""!==(null===d||void 0===d||null===(f=d.find((function(e){return"GAN"===e.tipo})))||void 0===f?void 0:f.nombre)&&(null===j||void 0===j?void 0:j.RET_GAN)>1),children:Object(N.jsx)($o.a,{title:"Descargar Certificado GAN",children:Object(N.jsx)(F.a,{color:"inherit",onClick:function(){var e;R(null===d||void 0===d||null===(e=d.find((function(e){return"GAN"===e.tipo})))||void 0===e?void 0:e.nombre,Yo)},children:Object(N.jsx)(qn.a,{color:"primary"})})})})}),Object(N.jsx)(Ce.a,{item:!0,md:5}),Object(N.jsx)(Ce.a,{item:!0,md:2}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"RET IVA",type:"number",defaultValue:null===j||void 0===j?void 0:j.RET_IVA,name:"RET_IVA",onChange:function(e){return X("RET_IVA")},onBlur:function(e){return Ko(e,C,h,"RET_IVA",t.id,s,0,0,null,K)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.RET_IVA)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Certificado IVA",defaultValue:null===j||void 0===j?void 0:j.COMP_IVA,name:"COMP_IVA",onChange:function(e){return ta(e,C,h,"COMP_IVA",t.id,s,0,0)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.COMP_IVA)}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsx)(wi.a,{smUp:!(void 0!==(null===d||void 0===d||null===(m=d.find((function(e){return"IVA"===e.tipo})))||void 0===m?void 0:m.nombre)&&""!==(null===d||void 0===d||null===(v=d.find((function(e){return"IVA"===e.tipo})))||void 0===v?void 0:v.nombre)&&(null===j||void 0===j?void 0:j.RET_IVA)>1),children:Object(N.jsx)($o.a,{title:"Descargar Certificado IVA",children:Object(N.jsx)(F.a,{color:"inherit",onClick:function(){var e;R(null===d||void 0===d||null===(e=d.find((function(e){return"IVA"===e.tipo})))||void 0===e?void 0:e.nombre,Yo)},children:Object(N.jsx)(qn.a,{color:"primary"})})})})}),Object(N.jsx)(Ce.a,{item:!0,md:5,children:Object(N.jsx)(wi.a,{smUp:!se,children:Object(N.jsxs)(un.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",onChange:function(e){return r(e.target.value)},name:"row-radio-buttons-group",children:[Object(N.jsx)(bn.a,{value:998,control:Object(N.jsx)(fn.a,{}),label:"Clase 'M' 100%"}),Object(N.jsx)(bn.a,{value:999,control:Object(N.jsx)(fn.a,{}),label:"Operaci\xf3n sujeto Ret. 50%"})]},"retIVA")})}),Object(N.jsx)(Ce.a,{item:!0,md:2}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"RET SUSS",type:"number",defaultValue:null===j||void 0===j?void 0:j.RET_SUSS,name:"RET_SUSS",onChange:function(e){return X("RET_SUSS")},onBlur:function(e){return Ko(e,C,h,"RET_SUSS",t.id,s,0,0,null,K)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.RET_SUSS)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Certificado SUSS",defaultValue:null===j||void 0===j?void 0:j.COMP_SUSS,name:"COMP_SUSS",onChange:function(e){return ta(e,C,h,"COMP_SUSS",t.id,s,0,0)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.COMP_SUSS)}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:Object(N.jsx)(wi.a,{smUp:!(void 0!==(null===d||void 0===d||null===(x=d.find((function(e){return"SUS"===e.tipo})))||void 0===x?void 0:x.nombre)&&""!==(null===d||void 0===d||null===(O=d.find((function(e){return"SUS"===e.tipo})))||void 0===O?void 0:O.nombre)&&(null===j||void 0===j?void 0:j.RET_SUSS)>1),children:Object(N.jsx)($o.a,{title:"Descargar Certificado SUSS",children:Object(N.jsx)(F.a,{color:"inherit",onClick:function(){var e;R(null===d||void 0===d||null===(e=d.find((function(e){return"SUS"===e.tipo})))||void 0===e?void 0:e.nombre,Yo)},children:Object(N.jsx)(qn.a,{color:"primary"})})})})}),Object(N.jsx)(Ce.a,{item:!0,md:5,children:Object(N.jsx)(wi.a,{smUp:!ue,children:Object(N.jsxs)(un.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:null===j||void 0===j?void 0:j.conceptoSUSS,onChange:function(e){return Xo(e,C,null,h,"conceptoSUSS",t.id,s,1,0)},name:"row2-radio-buttons-group",children:[Object(N.jsx)(bn.a,{value:995,control:Object(N.jsx)(fn.a,{}),label:"Seg. & Limp."}),Object(N.jsx)(bn.a,{value:996,control:Object(N.jsx)(fn.a,{}),label:"Ing.(1.2%)"}),Object(N.jsx)(bn.a,{value:997,control:Object(N.jsx)(fn.a,{}),label:"Arq.(2.5%)"}),Object(N.jsx)(bn.a,{value:0,control:Object(N.jsx)(fn.a,{}),label:"N/A"})]},null===j||void 0===j?void 0:j.conceptoSUSS)})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Monto a Abonar:\xa0\xa0\xa0"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(I.a,{style:{textDecorationLine:"underline"},align:"left",color:"green",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===j||void 0===j?void 0:j.monto_a_pagar))+" "+(null===j||void 0===j?void 0:j.moneda)]})}),Object(N.jsx)(Ce.a,{item:!0,md:6,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Pago"})})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Modo"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Banco"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Nro Cuenta"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Comprobante"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Fecha"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Monto"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Modo",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){ea(e,C,h,"modo1",t.id,s,1,i,j)},value:null===j||void 0===j?void 0:j.OPpago.modo1,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:D||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Modo"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Banco",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){C("banco1",i),ea(e,C,h,"banco1",t.id,s,1,i.id,null)},value:oe.find((function(e){var t;return e.id===parseInt((null===j||void 0===j||null===(t=j.OPpago)||void 0===t?void 0:t.banco1)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:oe||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"banco"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"NRO",disabled:!g||1===_,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,i){C("nro1",i),ea(e,C,h,"nro1",t.id,s,1,i.id,null)},value:ce.find((function(e){return e.id===((null===j||void 0===j?void 0:j.OPpago.nro1)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:ce.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===j||void 0===j?void 0:j.OPpago.banco1)})),renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Cuenta"}))}})}),Object(N.jsxs)(Ce.a,{item:!0,md:2,children:[Object(N.jsx)(Ee.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri12,name:"descri12",onChange:function(e){return ta(e,C,h,"descri12",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.OPpago.descri12),Object(N.jsx)(Ee.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri1,name:"descri1",onChange:function(e){return ta(e,C,h,"descri1",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},(null===j||void 0===j?void 0:j.OPpago.descri1)+"1")]}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:at(null===j||void 0===j?void 0:j.OPpago.fecha1)?null===j||void 0===j?void 0:j.OPpago.fecha1:null,name:"fecha1",InputProps:{readOnly:!g||1===_},onChange:function(e){return ta(e,C,h,"fecha1",t.id,s,2,0)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.monto1,name:"monto1",onChange:function(e){return X("monto1")},onBlur:function(e){return Ko(e,C,h,"monto1",t.id,s,1,0,null,K)},inputProps:{readOnly:!g||1===_,min:0,style:{textAlign:"center"}}},null===j||void 0===j?void 0:j.OPpago.monto1)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Modo",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){ea(e,C,h,"modo2",t.id,s,1,i,j)},value:null===j||void 0===j?void 0:j.OPpago.modo2,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:D||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Modo"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Banco",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){C("banco2",i),ea(e,C,h,"banco2",t.id,s,1,i.id,null)},value:oe.find((function(e){var t;return e.id===parseInt((null===j||void 0===j||null===(t=j.OPpago)||void 0===t?void 0:t.banco2)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:oe||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"banco"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"NRO",disabled:!g||1===_,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,i){C("nro2",i),ea(e,C,h,"nro2",t.id,s,1,i.id,null)},value:ce.find((function(e){return e.id===parseInt((null===j||void 0===j?void 0:j.OPpago.nro2)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:ce.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===j||void 0===j?void 0:j.OPpago.banco2)})),renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Cuenta"}))}})}),Object(N.jsxs)(Ce.a,{item:!0,md:2,children:[Object(N.jsx)(Ee.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri22,name:"descri22",onChange:function(e){return ta(e,C,h,"descri22",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.OPpago.descri22),Object(N.jsx)(Ee.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri2,name:"descri2",onChange:function(e){return ta(e,C,h,"descri2",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},(null===j||void 0===j?void 0:j.OPpago.descri2)+"2")]}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:at(null===j||void 0===j?void 0:j.OPpago.fecha2)?null===j||void 0===j?void 0:j.OPpago.fecha2:null,name:"fecha2",InputProps:{readOnly:!g||1===_},onChange:function(e){return ta(e,C,h,"fecha2",t.id,s,2,0)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.monto2,name:"monto2",onChange:function(e){return X("monto2")},onBlur:function(e){return Ko(e,C,h,"monto2",t.id,s,1,0,null,K)},inputProps:{readOnly:!g||1===_,min:0,style:{textAlign:"center"}}},null===j||void 0===j?void 0:j.OPpago.monto2)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Modo",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){ea(e,C,h,"modo3",t.id,s,1,i,j)},value:null===j||void 0===j?void 0:j.OPpago.modo3,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:D||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Modo"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Banco",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){C("banco3",i),ea(e,C,h,"banco3",t.id,s,1,i.id,null)},value:oe.find((function(e){var t;return e.id===parseInt((null===j||void 0===j||null===(t=j.OPpago)||void 0===t?void 0:t.banco3)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:oe,renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"banco"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"NRO",disabled:!g||1===_,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,i){C("nro3",i),ea(e,C,h,"nro3",t.id,s,1,i.id,null)},value:ce.find((function(e){return e.id===parseInt((null===j||void 0===j?void 0:j.OPpago.nro3)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:ce.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===j||void 0===j?void 0:j.OPpago.banco3)})),renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Cuenta"}))}})}),Object(N.jsxs)(Ce.a,{item:!0,md:2,children:[Object(N.jsx)(Ee.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri32,name:"descri32",onChange:function(e){return ta(e,C,h,"descri32",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.OPpago.descri32),Object(N.jsx)(Ee.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri3,name:"descri3",onChange:function(e){return ta(e,C,h,"descri3",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},(null===j||void 0===j?void 0:j.OPpago.descri3)+"3")]}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:at(null===j||void 0===j?void 0:j.OPpago.fecha3)?null===j||void 0===j?void 0:j.OPpago.fecha3:null,name:"fecha3",InputProps:{readOnly:!g||1===_},onChange:function(e){return ta(e,C,h,"fecha3",t.id,s,2,0)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.monto3,name:"monto3",onChange:function(e){return X("monto3")},onBlur:function(e){return Ko(e,C,h,"monto3",t.id,s,1,0,null,K)},inputProps:{readOnly:!g||1===_,min:0,style:{textAlign:"center"}}},null===j||void 0===j?void 0:j.OPpago.monto3)}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Modo",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){ea(e,C,h,"modo4",t.id,s,1,i,j)},value:null===j||void 0===j?void 0:j.OPpago.modo4,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:D||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Modo"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Banco",disabled:!g||1===_,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,i){C("banco4",i),ea(e,C,h,"banco4",t.id,s,1,i.id,null)},value:oe.find((function(e){var t;return e.id===parseInt((null===j||void 0===j||null===(t=j.OPpago)||void 0===t?void 0:t.banco4)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:oe,renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"banco"}))}})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"NRO",disabled:!g||1===_,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,i){C("nro4",i),ea(e,C,h,"nro4",t.id,s,1,i.id,null)},value:ce.find((function(e){return e.id===parseInt((null===j||void 0===j?void 0:j.OPpago.nro4)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:ce.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===j||void 0===j?void 0:j.OPpago.banco4)})),renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Cuenta"}))}})}),Object(N.jsxs)(Ce.a,{item:!0,md:2,children:[Object(N.jsx)(Ee.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri42,name:"descri42",onChange:function(e){return ta(e,C,h,"descri42",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},null===j||void 0===j?void 0:j.OPpago.descri42),Object(N.jsx)(Ee.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===j||void 0===j?void 0:j.OPpago.descri4,name:"descri4",onChange:function(e){return ta(e,C,h,"descri4",t.id,s,1,0)},InputProps:{readOnly:!g||1===_}},(null===j||void 0===j?void 0:j.OPpago.descri4)+"4")]}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:at(null===j||void 0===j?void 0:j.OPpago.fecha4)?null===j||void 0===j?void 0:j.OPpago.fecha4:null,name:"fecha4",InputProps:{readOnly:!g||1===_},onChange:function(e){return ta(e,C,h,"fecha4",t.id,s,2,0)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",thousandSeparator:!0,defaultValue:null===j||void 0===j?void 0:j.OPpago.monto4,name:"monto4",onChange:function(e){return X("monto4")},onBlur:function(e){return Ko(e,C,h,"monto4",t.id,s,1,0,null,K)},inputProps:{readOnly:!g||1===_,min:0,style:{textAlign:"center"}}},null===j||void 0===j?void 0:j.OPpago.monto4)}),Object(N.jsxs)(Ce.a,{item:!0,md:10,children:[Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:"Total:"}),Object(N.jsx)(I.a,{align:"right",color:"textSecondary",variant:"h5",children:"Saldo:"})]}),Object(N.jsxs)(Ce.a,{item:!0,md:2,children:[Object(N.jsxs)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:[Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Math.round(100*(parseFloat((null===j||void 0===j?void 0:j.OPpago.monto1)?null===j||void 0===j?void 0:j.OPpago.monto1:0)+parseFloat((null===j||void 0===j?void 0:j.OPpago.monto2)?null===j||void 0===j?void 0:j.OPpago.monto2:0)+parseFloat((null===j||void 0===j?void 0:j.OPpago.monto3)?null===j||void 0===j?void 0:j.OPpago.monto3:0)+parseFloat((null===j||void 0===j?void 0:j.OPpago.monto4)?null===j||void 0===j?void 0:j.OPpago.monto4:0)))/100)),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"]}),Object(N.jsxs)(I.a,{align:"right",color:"textSecondary",variant:"h5",children:[Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Math.round(100*(parseFloat(null===j||void 0===j?void 0:j.monto)-parseFloat((null===j||void 0===j?void 0:j.OPpago.monto1)?null===j||void 0===j?void 0:j.OPpago.monto1:0)-parseFloat((null===j||void 0===j?void 0:j.OPpago.monto2)?null===j||void 0===j?void 0:j.OPpago.monto2:0)-parseFloat((null===j||void 0===j?void 0:j.OPpago.monto3)?null===j||void 0===j?void 0:j.OPpago.monto3:0)-parseFloat((null===j||void 0===j?void 0:j.OPpago.monto4)?null===j||void 0===j?void 0:j.OPpago.monto4:0))+1e-7)/100)),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"]})]})]})})}}),Object(N.jsx)(x,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function Jo(e,t,i,n,r,o,a,c,l){var d=e.target.value;if(0===d){e.preventDefault();if(!/^\d{0,7}(\.\d{0,2})?$/.test(d.toString()))return!1;i(l),t(r,d.toString()),ta(e,t,n,r,o,a,c,null===l||void 0===l?void 0:l.id,null)}}function Ko(e,t,i,n,r,o,a,c,l,d){if(n!==d)return!1;e.preventDefault();var s=e.target.value;return void 0!==s&&(!!/^\d{0,9}(\.\d{0,2})?$/.test(s.toString())&&(t(n,s.toString()),void ta(e,t,i,n,r,o,a,c,l)))}function Xo(e,t,i,n,r,o,a,c,l,d){var s=e.target.value;i&&i(s),ta(e,t,n,r,o,a,c,l,d)}function ea(e,t,i,n,r,o,a,c,l){e.preventDefault();var d=e.target.value;return void 0!==d&&(!!/^\d{0,9}(\.\d{0,2})?$/.test(d.toString())&&(t(n,d.toString()),void ta(e,t,i,n,r,o,a,c,l)))}function ta(e,t,i,n,r,o,a,c,l){var d=null;if(2===a)d=st(e)+" 03:00:00";else{e.preventDefault();var s=e.target.value;t(n,s.toString()),d=s,"OCId"!==n&&"estadoOP"!==n&&"estadoRET"!==n&&"fondos"!==n||(d=c),"banco"===n.toString().substring(0,5)&&(d=c),"nro"===n.toString().substring(0,3)&&(d=c),"modo"===n.toString().substring(0,4)&&(d=c)}var u=Object(w.a)({id:o},n,d);if(a>0&&(u.flagPago=1),"Retenciones"===c){var b=parseFloat(null===l||void 0===l?void 0:l.RET_GAN)+parseFloat(null===l||void 0===l?void 0:l.RET_IVA)+parseFloat(null===l||void 0===l?void 0:l.RET_SUSS);"modo1"===n&&(u.monto1=b),"modo2"===n&&(u.monto2=b),"modo3"===n&&(u.monto3=b),"modo4"===n&&(u.monto4=b),"modo5"===n&&(u.monto5=b),"modo6"===n&&(u.monto6=b),"modo7"===n&&(u.monto7=b)}$e("op/modificar/".concat(r),u),setTimeout((function(){i&&(i(),console.log("refetch"))}),2e3)}function ia(e,t,i,n,r,o,a,c){e.preventDefault(),t(c);var l=Object(w.a)({id:r},i,c);1===a&&(l.flagPago=1),$e("op/modificar/".concat(n),l),setTimeout((function(){o&&(o(),console.log("refetch"))}),2e3)}function na(e){var t=e.idSociety,i=e.setFieldValue,n=e.empresaId,r=e.fideicomisoId,o=e.OPId,a=e.OCId,d={id:0,fideicomisoId:0,empresaId:0,descripcion1:"-"},s=(0,e.useQuery)(["ordenes",t.id],(function(){return Ge("oc/listarCombo/".concat(t.id,"/0/0"))})),u=s.data,b=s.isLoading,f=s.error,j=s.refetch,m=Object(l.useState)(d),v=Object(c.a)(m,2),h=v[0],p=v[1];if(b)return"Cargando...";if(f)return"Hubo un error: ".concat(f.message);var x=[].concat(Object(Fe.a)(u.filter((function(e){return e.fideicomisoId===parseInt(r)&&e.empresaId===parseInt(n)}))),[d]);return x.length>1&&(parseInt(a)>0&&0===(null===h||void 0===h?void 0:h.id)||0===parseInt(a)&&(null===h||void 0===h?void 0:h.id)>0)&&p(x.find((function(e){return e.id===parseInt(a)}))),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Orden de Compra",disablePortal:!0,style:{width:"325px",display:"inline-flex"},onChange:function(e,n){Jo(e,i,p,j,"OCId",t.id,o,0,n)},value:h,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.descripcion1},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:x,renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Orden de Compra"}))}})}var ra=function(e,t){return[{field:"tipo",headerName:"Tipo de Comp.",width:170,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"empresa",headerName:"Proveedor",width:170,editable:!1,headerAlign:"center"},{field:"detalle",headerName:"Detalle",width:175,editable:e,headerAlign:"center"},{field:"numero",headerName:"Nro Factura",width:185,editable:!1,headerAlign:"center",align:"center"},{field:"txtOC",headerName:"Nro OC",width:130,editable:e,headerAlign:"center",align:"center"},{field:"montoTotal",headerName:"Importe",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"es_ajuste",headerName:"M. Costo",type:"boolean",width:150,editable:!1,headerAlign:"center"},{field:"link2",headerName:"",width:20,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(N.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"deleteIcon",headerName:"",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:aa}]};function oa(e){var t=e.idSociety,i=(e.OPId,e.loggedUser),n=e.selectedFacturaData,r=e.facturas,o=e.isLoading,c=e.error,d=e.refetch,s=Object(a.useQueryClient)(),u=Object(l.useContext)(xc),b=!0;"vista"===(null===i||void 0===i?void 0:i["rol.op"])&&(b=!1);var f=!0;"parcial"!==(null===i||void 0===i?void 0:i["rol.op"])&&"vista"!==(null===i||void 0===i?void 0:i["rol.op"])||(f=!1);var j=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(i){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),{id:i,OPId:null});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.id>0)){e.next=3;break}return e.next=3,s.refetchQueries(["facturas",t,n]);case 3:d();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),m=j.mutate;return o?"Cargando...":c?"Hubo un error: ".concat(c.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(qr.a,{}),Object(N.jsx)(Ft.a,{rows:r.map((function(e){var t;return{id:e.id,empresa:e.empresas[0]?e.empresas[0].razonSocial:"",numero:e.numero,tipo:{id:e.tipo,descripcion:null===u||void 0===u||null===(t=u.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion},link:e.link,link2:e.link,montoTotal:e.montoTotal,moneda:e.moneda,es_ajuste:e.es_ajuste,detalle:e.detalle,txtOC:e.txtOC,fechaIngreso:e.fechaIngreso,fechaVTO:e.fechaVTO,onDelete:function(){return m(e.id)}}})),hideFooter:!0,columns:ra(b,f),disableSelectionOnClick:!0,autoHeight:!0,onCellEditCommit:function(e){var i=Object(w.a)({id:e.id},e.field,e.value);$e("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),i)}})]})}function aa(e){var t=e.row.onDelete;return Object(N.jsx)(Tt.a,{onClick:function(){return Object(qr.b)((function(e){var i=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:i,children:"No quiero borrar"}),Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),i()},children:"S\xed quiero borrar"})]})}))}})}var ca=Nn.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:44,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",fontSize:14,textAlign:"center"},reportTitleG:{color:"#101010",fontSize:16,textAlign:"center"},litleSpace:{color:"#101010",fontSize:2,textAlign:"center"},litleSpace8:{color:"#101010",fontSize:8,textAlign:"center"},size11Bold:{color:"#101010",fontSize:11,fontFamily:"Helvetica-Bold",textAlign:"center"},subreportTitle:{color:"#101010",letterSpacing:2,fontSize:12,textAlign:"left",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:19,fontSize:10,fontStyle:"bold"},rowlight:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:15,fontSize:9},col1:{width:"37%",textAlign:"right",paddingRight:3},col2:{width:"63%",textAlign:"left",fontFamily:"Helvetica-Bold",paddingLeft:15},col2i:{width:"63%",textAlign:"left",fontFamily:"Helvetica-Oblique",paddingLeft:15},col2plus:{width:"63%",textAlign:"left",fontFamily:"Helvetica-Bold",fontSize:12,paddingLeft:15}}),la=function(e){var t,i,n,r,o,a,c,l,d,s=e.data,u=e.apiServerUrl;return Object(N.jsx)(Nn.Document,{children:Object(N.jsxs)(Nn.Page,{size:"A4",style:ca.page,children:[Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"}}),Object(N.jsxs)(Nn.View,{style:ca.titleContainer,children:[Object(N.jsxs)(Nn.View,{style:{width:"30%"},children:[Object(N.jsx)(Nn.Image,{style:[ca.logo],src:{uri:"".concat(u,"/sociedades/afip.png"),method:"GET",body:""}}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.size11Bold,children:"IVA"===(null===s||void 0===s?void 0:s.tipo)?"F.2005":"GAN"===(null===s||void 0===s?void 0:s.tipo)?"":"F.2004"})})]}),Object(N.jsxs)(Nn.View,{style:{width:"70%"},children:[Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.litleSpace8,children:"IVA"===(null===s||void 0===s?void 0:s.tipo)?" ":""})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:"GAN"===(null===s||void 0===s?void 0:s.tipo)?ca.reportTitleG:ca.reportTitle,children:"GAN"===(null===s||void 0===s?void 0:s.tipo)?"SI.CO.RE. - Sistema de Control":"IVA"===(null===s||void 0===s?void 0:s.tipo)?"CERTIFICADO DE RETENCI\xd3N/PERCEPCI\xd3N":"CERTIFICADO DE RETENCI\xd3N/"})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:"IVA"===(null===s||void 0===s?void 0:s.tipo)?ca.litleSpace:"GAN"===(null===s||void 0===s?void 0:s.tipo)?ca.reportTitleG:ca.reportTitle,children:"GAN"===(null===s||void 0===s?void 0:s.tipo)?"de Retenciones":"IVA"===(null===s||void 0===s?void 0:s.tipo)?"":"PERCEPCI\xd3N de la SEGURIDAD SOCIAL"})})]})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{style:ca.invoiceDateContainer,children:Object(N.jsxs)(Nn.Text,{style:ca.label,children:["Fecha de Retenci\xf3n: ",lt(null===s||void 0===s||null===(t=s.general)||void 0===t?void 0:t.fecha)]})}),Object(N.jsx)(Nn.View,{style:ca.invoiceDateContainer,children:Object(N.jsxs)(Nn.Text,{style:ca.label,children:["Certificado N\xb0: ",null===s||void 0===s?void 0:s.numero]})}),Object(N.jsx)(Nn.View,{style:ca.titleContainer,children:Object(N.jsx)(Nn.Text,{style:ca.subreportTitle,children:"A. - Datos del Agente de Retenci\xf3n"})}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Apellido y Nombre o Denominaci\xf3n:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(i=s.general)||void 0===i?void 0:i.agente})]}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"C.U.I.T. N\xb0:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(n=s.general)||void 0===n?void 0:n.agente_cuit})]}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Domicilio:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(r=s.general)||void 0===r?void 0:r.agente_dir})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.subreportTitle,children:"B. - Datos del Sujeto Retenido"})}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Apellido y Nombre o Denominaci\xf3n:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(o=s.general)||void 0===o?void 0:o.sujeto})]}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"C.U.I.T. N\xb0:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(a=s.general)||void 0===a?void 0:a.sujeto_cuit})]}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Domicilio:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(c=s.general)||void 0===c?void 0:c.sujeto_dir})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.subreportTitle,children:"C. - Datos de la Retenci\xf3n Practicada"})}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Impuesto:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s?void 0:s.impuesto})]}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"R\xe9gimen:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s?void 0:s.regimen})]}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Comp. que origina la Retenci\xf3n:"}),Object(N.jsx)(Nn.Text,{style:ca.col2,children:null===s||void 0===s||null===(l=s.general)||void 0===l?void 0:l.comp_origen})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsxs)(Nn.View,{style:ca.rowlight,children:[Object(N.jsx)(Nn.Text,{style:ca.col1}),Object(N.jsx)(Nn.Text,{style:ca.col2i,children:""})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsxs)(Nn.View,{style:ca.rowf,children:[Object(N.jsx)(Nn.Text,{style:ca.col1,children:"Monto de la Retenci\xf3n:"}),Object(N.jsxs)(Nn.Text,{style:ca.col2plus,children:[Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===s||void 0===s?void 0:s.monto))," pesos"]})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsxs)(Nn.View,{children:[Object(N.jsx)(Nn.Text,{style:ca.label,children:"Firma del Agente de Retenci\xf3n :"}),Object(N.jsx)(Nn.Text,{style:ca.label,children:"Aclaraci\xf3n :"}),Object(N.jsx)(Nn.Text,{style:ca.label,children:"Cargo :"})]}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:[ca.label,{borderRightColor:"#0000ff"}],children:"El presente certificado se expide sobre la base de los datos declarados y aportados por el Agente de Retenci\xf3n a la fecha de la presente consulta, el cual podr\xeda ser pasible de modificaciones por el agente en cuesti\xf3n. "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:[ca.label,{borderRightColor:"#0000ff"}],children:"Conserve este Certificado como comprobante de Retenci\xf3n/Percepci\xf3n. "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:ca.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{style:ca.invoiceDateContainer,children:Object(N.jsxs)(Nn.Text,{style:ca.label,children:["Fecha de Emisi\xf3n e Impresi\xf3n: ",lt(null===s||void 0===s||null===(d=s.general)||void 0===d?void 0:d.fecha)]})})]})})},da="http://104.131.28.211:3000/";function sa(e){var t,i,n,r,o,d,s,u,b,f,j,m,v,h,p,x,O,g,y,w,C=e.idSociety,S=e.OPId,A=e.acumulado,T=e.item,D=e.fecha,R=e.fideicomiso,k=e.OP,z=e.certificado,_=e.categorias,V=e.isLoading,U=e.error,M=e.refetch,Q=e.loggedUser,E=Object(l.useContext)(Oc),L="NO APLICA (0 cero)",B=Object(a.useQueryClient)(),W=Object(l.useState)(!1),q=Object(c.a)(W,2),H=q[0],G=q[1],$=0,Y=0,Z=0,J="CERT_GAN_OP_",K="CERT_IVA_OP_",X="CERT_SUSS_OP_",ee="sociedades/".concat(C.id,"/certificados/"),te=Object(a.useMutation)(Object(Qe.a)(Me.a.mark((function e(){var t,i,n,r,o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("op/modificar/".concat(C.id),{id:S,RET_GAN:$,RET_IVA:Y,RET_SUSS:Z,COMP_GAN:$>.1?da+ee+J+(null===k||void 0===k?void 0:k.numero)+"_"+R+"_"+(null===k||void 0===k||null===(t=k.empresas[0])||void 0===t||null===(i=t.razonSocial)||void 0===i?void 0:i.replace(/ /g,"_"))+"_"+vt(D):void 0,COMP_IVA:Y>.1?da+ee+K+(null===k||void 0===k?void 0:k.numero)+"_"+R+"_"+(null===k||void 0===k||null===(n=k.empresas[0])||void 0===n||null===(r=n.razonSocial)||void 0===r?void 0:r.replace(/ /g,"_"))+"_"+vt(D):void 0,COMP_SUSS:Z>.1?da+ee+X+(null===k||void 0===k?void 0:k.numero)+"_"+R+"_"+(null===k||void 0===k||null===(o=k.empresas[0])||void 0===o||null===(a=o.razonSocial)||void 0===a?void 0:a.replace(/ /g,"_"))+"_"+vt(D):void 0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(){var t;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.cancelQueries(["_op",C]);case 2:return t=B.getQueryData(["_op",C]),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),onError:function(e,t,i){return B.setQueryData(["_op",C],i)},onSettled:function(){G(!0),C.id>0&&B.invalidateQueries(["_op",C]),C.id>0&&Oe(),M()}}),ie=te.mutate,ne=Object(l.useState)({}),re=Object(c.a)(ne,2),oe=re[0],ce=re[1],le=Object(l.useState)({}),de=Object(c.a)(le,2),se=de[0],ue=de[1],be=Object(l.useState)({}),fe=Object(c.a)(be,2),je=fe[0],me=fe[1],ve=parseInt(k?null===k||void 0===k?void 0:k.empresas[0].condIVA:0),he=null===E||void 0===E?void 0:E.find((function(e){return e.id===ve})).descripcion,pe=null,xe=null,Oe=function(){var e=Object(Qe.a)(Me.a.mark((function e(){var t,i,n,r,o,a,c,l,d,s,u,b,f;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t="",!($>.1)){e.next=13;break}return e.next=4,Object(Nn.pdf)(Object(N.jsx)(la,{data:oe,apiServerUrl:da})).toBlob();case 4:n=e.sent,(r=new FormData).append("file",n),o=(o=null===k||void 0===k||null===(i=k.empresas[0])||void 0===i?void 0:i.razonSocial).replace(/ /g,"_"),t=J+ +(null===k||void 0===k?void 0:k.numero)+"_"+R+"_"+o+"_"+vt(D),r.append("path","./"+ee),r.append("fileName",t),Se({formData:r});case 13:if(!(Y>.1)){e.next=25;break}return e.next=16,Object(Nn.pdf)(Object(N.jsx)(la,{data:se,apiServerUrl:da})).toBlob();case 16:c=e.sent,(l=new FormData).append("file",c),d=(d=null===k||void 0===k||null===(a=k.empresas[0])||void 0===a?void 0:a.razonSocial).replace(/ /g,"_"),t=K+(null===k||void 0===k?void 0:k.numero)+"_"+R+"_"+d+"_"+vt(D),l.append("path","./"+ee),l.append("fileName",t),Se({formData:l});case 25:if(!(Z>.1)){e.next=37;break}return e.next=28,Object(Nn.pdf)(Object(N.jsx)(la,{data:je,apiServerUrl:da})).toBlob();case 28:u=e.sent,(b=new FormData).append("file",u),f=(f=null===k||void 0===k||null===(s=k.empresas[0])||void 0===s?void 0:s.razonSocial).replace(/ /g,"_"),t=X+(null===k||void 0===k?void 0:k.numero)+"_"+R+"_"+f+"_"+vt(D),b.append("path","./"+ee),b.append("fileName",t),Se({formData:b});case 37:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.formData,e.next=3,$e("utilidades/uploadpdf/".concat(C.id),i);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.formData,e.next=3,B.cancelQueries(["pdfFile",C]);case 3:return i=B.getQueryData(["pdfFile",C]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return B.setQueryData(["pdfFile",C],i)},onSettled:function(e){var t;C.id>0&&B.invalidateQueries(["pdfFile",C]),Ie({data:{OPId:S,tipo:e.slice(5,8),nombre:e,creador:Q.id,id:null===z||void 0===z||null===(t=z.find((function(t){return t.tipo===e.slice(5,8)})))||void 0===t?void 0:t.id}})}}),Se=ge.mutate,Ae=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,!((null===z||void 0===z||null===(i=z.find((function(e){return e.tipo===n.tipo})))||void 0===i?void 0:i.id)>0)){e.next=7;break}return e.next=4,$e("certificado/modificar/".concat(C.id),n);case 4:e.t0=e.sent,e.next=10;break;case 7:return e.next=9,$e("certificado/agregar/".concat(C.id),n);case 9:e.t0=e.sent;case 10:return e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.data,e.next=3,B.cancelQueries(["certificado",C]);case 3:return i=B.getQueryData(["certificado",C]),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return B.setQueryData(["certificado",C],i)},onSettled:function(){C.id>0&&B.invalidateQueries(["certificado",C]),M()}}),Ie=Ae.mutate;if(V)return"Cargando...";if(U)return"Hubo un error: ".concat(U.message);var Pe="",Fe=0,Te=0,De="";pe=null===_||void 0===_?void 0:_.find((function(e){return e.id===(null===k||void 0===k?void 0:k.empresas[0].categoria)}));var Re=parseFloat(null===(t=pe)||void 0===t?void 0:t.inscriptosNoRet);Re||(Re=0);var Ne=(null===(i=pe)||void 0===i?void 0:i.inscriptos)?null===(n=pe)||void 0===n?void 0:n.inscriptos:"0 %";if("M"===(null===A||void 0===A?void 0:A.letra)||"A_SUJ_RET"===(null===A||void 0===A?void 0:A.letra)){var ke,ze;Fe=L,Te=L,De=L,Ne="sin dato";var _e="M"===(null===A||void 0===A?void 0:A.letra)?998:999;Ne=null===(ke=pe=null===_||void 0===_?void 0:_.find((function(e){return e.codigo===parseInt(_e)})))||void 0===ke?void 0:ke.inscriptos,$=pe.inscriptos*(null===k||void 0===k?void 0:k.neto)/100,Pe=null===(ze=pe)||void 0===ze?void 0:ze.regimen}else if(null===(r=pe)||void 0===r?void 0:r.codigo){var Ve,Ue,Ee;if(Pe=null===(Ve=pe)||void 0===Ve?void 0:Ve.regimen,De=null===(Ue=pe)||void 0===Ue?void 0:Ue.codigo,116===(null===(Ee=pe)||void 0===Ee?void 0:Ee.codigo)){var Be,We;Fe=L,Te=L;var qe,He,Ge=parseFloat(null===k||void 0===k?void 0:k.neto);qe=null===(Be=pe)||void 0===Be?void 0:Be.escalaMonto.split(","),He=null===(We=pe)||void 0===We?void 0:We.escalaPorcentaje.split(",");var Ye=0,Ze=[];Ze[0]=0,Ze[1]=parseFloat(qe[Ye+1])*parseFloat(He[Ye])/100,Ye++,Ze[2]=Ze[Ye]+(parseFloat(qe[Ye+1])-parseFloat(qe[Ye]))*parseFloat(He[Ye])/100,Ye++,Ze[3]=Ze[Ye]+(parseFloat(qe[Ye+1])-parseFloat(qe[Ye]))*parseFloat(He[Ye])/100,Ye++,Ze[4]=Ze[Ye]+(parseFloat(qe[Ye+1])-parseFloat(qe[Ye]))*parseFloat(He[Ye])/100,Ye++,Ze[5]=Ze[Ye]+(parseFloat(qe[Ye+1])-parseFloat(qe[Ye]))*parseFloat(He[Ye])/100,Ye++,Ze[6]=Ze[Ye]+(parseFloat(qe[Ye+1])-parseFloat(qe[Ye]))*parseFloat(He[Ye])/100,Ye++,Ze[7]=Ze[Ye]+(parseFloat(qe[Ye+1])-parseFloat(qe[Ye]))*parseFloat(He[Ye])/100,Ne="Escala";var Je=Ge-parseFloat(Re),Ke=0;Je<0&&(Je=0);var Xe=0;Je>0&&(parseFloat(qe[7])<Je?(Ke=Je-parseFloat(qe[7]),Xe=7):parseFloat(qe[6])<=Je?(Ke=Je-parseFloat(qe[6]),Xe=6):parseFloat(qe[5])<=Je?(Ke=Je-parseFloat(qe[5]),Xe=5):parseFloat(qe[4])<=Je?(Ke=Je-parseFloat(qe[4]),Xe=4):parseFloat(qe[3])<=Je?(Ke=Je-parseFloat(qe[3]),Xe=3):parseFloat(qe[2])<=Je?(Ke=Je-parseFloat(qe[2]),Xe=2):parseFloat(qe[1])<=Je?(Xe=1,Ke=Je-parseFloat(qe[1])):Ke=Je,($=Ze[Xe]+Ke*parseFloat(He[Xe])/100)<pe.inscriptos&&($=0))}else Fe=parseFloat(null===A||void 0===A?void 0:A.netoAcumMes)+parseFloat(null===k||void 0===k?void 0:k.neto),Te=parseFloat(null===A||void 0===A?void 0:A.netoGAN_Mes),($=(Fe-Re)*pe.inscriptos/100-Te)<0&&($=0);$<parseFloat(240)&&($=0)}var et=0;"M"!==(null===A||void 0===A?void 0:A.letra)&&"A_SUJ_RET"!==(null===A||void 0===A?void 0:A.letra)&&"limpieza"!==(null===k||void 0===k?void 0:k.empresas[0].actividad)&&"seguridad"!==(null===k||void 0===k?void 0:k.empresas[0].actividad)||(et=100,"A_SUJ_RET"!==(null===A||void 0===A?void 0:A.letra)&&"limpieza"!==(null===k||void 0===k?void 0:k.empresas[0].actividad)&&"seguridad"!==(null===k||void 0===k?void 0:k.empresas[0].actividad)||(et=50),Y=parseFloat(null===k||void 0===k?void 0:k.iva)*et/100);var tt,it="0,00",nt=0,rt=0,ot=0;1===(null===k||void 0===k||null===(o=k.empresas[0])||void 0===o?void 0:o.esRetSUSS)&&((null===k||void 0===k?void 0:k.conceptoSUSS)>0?(xe=null===_||void 0===_?void 0:_.find((function(e){return e.codigo===(null===k||void 0===k?void 0:k.conceptoSUSS)})),rt=parseFloat(null===(tt=xe)||void 0===tt?void 0:tt.inscriptosNoRet),nt=parseFloat(null===A||void 0===A?void 0:A.netoAcumAnio),ot=xe.inscriptos,nt+parseFloat(null===k||void 0===k?void 0:k.neto)>rt?(Z=parseFloat(null===k||void 0===k?void 0:k.neto)*xe.inscriptos/100,it=Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Z))+" $"):it=Z=0):0===(null===k||void 0===k?void 0:k.conceptoSUSS)&&(it="0,00"));var at=new Date,ct="";if(T.map((function(e){return ct=ct+ct!==""?", ":""+e.numero})),w={fecha:ht(at),comp_origen:"Factura Nro."+ct,agente:null===k||void 0===k||null===(d=k.fideicomisos[0])||void 0===d||null===(s=d.empresas[0])||void 0===s?void 0:s.razonSocial,agente_cuit:null===k||void 0===k||null===(u=k.fideicomisos[0])||void 0===u||null===(b=u.empresas[0])||void 0===b?void 0:b.CUIT,agente_dir:null===k||void 0===k||null===(f=k.fideicomisos[0])||void 0===f||null===(j=f.empresas[0])||void 0===j?void 0:j.domicilio,sujeto:null===k||void 0===k||null===(m=k.empresas[0])||void 0===m?void 0:m.razonSocial,sujeto_cuit:null===k||void 0===k||null===(v=k.empresas[0])||void 0===v?void 0:v.CUIT,sujeto_dir:null===k||void 0===k||null===(h=k.empresas[0])||void 0===h?void 0:h.domicilio},(null===z||void 0===z||null===(p=z.find((function(e){return"GAN"===e.tipo})))||void 0===p?void 0:p.id)>0){var lt,st,ut,bt,ft,jt=("00000"+(null===z||void 0===z||null===(lt=z.find((function(e){return"GAN"===e.tipo})))||void 0===lt?void 0:lt.id)).slice(-5);$=Math.round(100*$)/100;var mt={general:w,tipo:"GAN",numero:pt(at)+"-"+jt,impuesto:"Impto. a las Ganancias",regimen:De+" - "+Pe.substring(0,50),Fila1:116===(null===(st=pe)||void 0===st?void 0:st.codigo)?"":"Neto gravado acumulado mensual: "+Ot(Fe),Fila2:116===(null===(ut=pe)||void 0===ut?void 0:ut.codigo)?"":"Retenciones acumuladas del mes: "+Ot(Te),Fila3:"M\xednimo no sujeto a retenci\xf3n: "+Ot(Re),Fila4:116===(null===(bt=pe)||void 0===bt?void 0:bt.codigo)?"Calculo por escala":"Tasa: "+(null===(ft=pe)||void 0===ft?void 0:ft.inscriptos)+" %",monto:$};(null===oe||void 0===oe?void 0:oe.monto)!==$&&ce(mt)}if((null===z||void 0===z||null===(x=z.find((function(e){return"IVA"===e.tipo})))||void 0===x?void 0:x.id)>0){var xt,gt=("00000"+(null===z||void 0===z||null===(xt=z.find((function(e){return"IVA"===e.tipo})))||void 0===xt?void 0:xt.id)).slice(-5),yt="M"===(null===A||void 0===A?void 0:A.letra)||"A_SUJ_RET"===(null===A||void 0===A?void 0:A.letra)?"Letra: "+(null===A||void 0===A?void 0:A.letra):"",wt={general:w,tipo:"IVA",numero:pt(at)+"-"+gt,impuesto:"IVA",regimen:831,Fila1:yt,Fila2:"Actividad: "+(null===k||void 0===k?void 0:k.empresas[0].actividad),Fila3:"Tasa: "+et+" %",Fila4:"",monto:Y};(null===se||void 0===se?void 0:se.monto)!==Y&&ue(wt)}if((null===z||void 0===z||null===(O=z.find((function(e){return"SUS"===e.tipo})))||void 0===O?void 0:O.id)>0){var Ct,St=("00000"+(null===z||void 0===z||null===(Ct=z.find((function(e){return"SUS"===e.tipo})))||void 0===Ct?void 0:Ct.id)).slice(-5),At={general:w,tipo:"SUS",numero:pt(at)+"-"+St,impuesto:"RETENCIONES CONTRIB. SEG. SOCIAL",regimen:754,Fila1:"",Fila2:"Actividad: "+(null===k||void 0===k?void 0:k.empresas[0].actividad),Fila3:"",Fila4:"Tasa: "+ot+" %",monto:Z};(null===je||void 0===je?void 0:je.monto)!==Z&&me(At)}return Object(N.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["op:","numero"," | ",null===C||void 0===C?void 0:C.nombre]})}),Object(N.jsx)(N.Fragment,{children:Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsx)(we.a,{children:Object(N.jsxs)(P.a,{sx:{pt:3},children:[Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:7,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:["Pago: ",null===k||void 0===k?void 0:k.numero,"\xa0\xa0\xa0\xa0 Fideicomiso: ",R," - Raz\xf3n Social: ",null===k||void 0===k||null===(g=k.empresas[0])||void 0===g?void 0:g.razonSocial]})}),Object(N.jsx)(Ce.a,{item:!0,md:5,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:dt(D)})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"})]}),Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"RETENCIONES IMPUESTO A LAS GANANCIAS:"})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["R\xe9gimen:\xa0",Pe]})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:[he," \xa0\xa0\xa0\xa0\xa0\xa0\xa0C\xf3digo de R\xe9gimen:\xa0",De]})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Tipo de Persona:"})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Neto gravado acumulado mensual:\xa0",Fe]})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Retenciones acumuladas del mes:\xa0",Te]})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["M\xednimo no sujeto a retenci\xf3n:\xa0",Re]})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Tasa aplicable:\xa0",Ne]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Retenci\xf3n a practicar:"})}),Object(N.jsx)(Ce.a,{item:!0,md:10,children:Object(N.jsxs)(I.a,{style:{textDecorationLine:"underline"},align:"left",color:"green",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number($))+" $"]})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"GANANCIAS (resoluci\xf3n 830), Calculo:"}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"((Neto gravado acumulado mensual - M\xednimo no sujeto a retenci\xf3n) * Tasa aplicable) - Retenciones acumuladas del mes"}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"Si el resultado es menor a cero, entonces la Retenci\xf3n a practicar: 0"}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:'GANANCIAS (r\xe9gimen particular Clase "M", Clase "A" "Operaci\xf3n sujeto a retenci\xf3n"), Calculo: Monto Neto * Tasa aplicable'})]}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"RETENCIONES IMPUESTO IVA:"})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Actividad:\xa0",null===k||void 0===k?void 0:k.empresas[0].actividad]})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Porcentaje a retener:\xa0",et,"%"]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Retenci\xf3n a practicar:"})}),Object(N.jsx)(Ce.a,{item:!0,md:10,children:Object(N.jsxs)(I.a,{style:{textDecorationLine:"underline"},align:"left",color:"green",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Y))+" $"]})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:'IVA Resolucion AFIP 1575 (r\xe9gimen particular Clase "M", Clase "A" "Operaci\xf3n sujeto a retenci\xf3n"), Calculo: % delMonto IVA'}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"Sujetos pertenecientes a las actividades de Seguridad y Limpieza retienen IVA."})]}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"RETENCIONES IMPUESTO SEGURIDAD SOCIAL:"})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Sujeto retenci\xf3n SUSS :\xa0",1===(null===k||void 0===k||null===(y=k.empresas[0])||void 0===y?void 0:y.esRetSUSS)?"SI":"NO"]})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Tipo de Persona:"})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Neto gravado acumulado anual:\xa0",nt]})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["M\xednimo no sujeto a retenci\xf3n:\xa0",rt]})}),Object(N.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:11,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["Tasa aplicable:\xa0",ot,"%"]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:"Retenci\xf3n a practicar:"})}),Object(N.jsx)(Ce.a,{item:!0,md:10,children:Object(N.jsxs)(I.a,{style:{textDecorationLine:"underline"},align:"left",color:"green",variant:"h4",children:["\xa0",it," $"]})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"SUSS (Resoluci\xf3n AFIP 2682), Calculo:"}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:"Si el Neto gravado es mayor al  M\xednimo no sujeto a retenci\xf3n, entonces:  Monto Neto * Tasa aplicable"})]}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(ae.a,{disabled:"vista"===Q["rol.op"]||"blue"===Q["rol.op"]||1===(null===k||void 0===k?void 0:k.confirmada),onClick:function(){ie()},children:"Impactar valores"}),Object(N.jsx)(mn.a,{in:H,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){G(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsxs)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:["Monto Neto: ",null===k||void 0===k?void 0:k.neto,", Monto IVA: ",null===k||void 0===k?void 0:k.iva]}),Object(N.jsxs)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:["Periodo: ",null===A||void 0===A?void 0:A.mes,", Ejercicio: ",null===A||void 0===A?void 0:A.anio]}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:'GANANCIAS OPs involucradas, criterio: estado "PAGADA" o "PAGADA PARCIAL" dentro del periodo [numero OP - numero Factura]:'}),Object(N.jsx)(I.a,{align:"left",color:"textSecondary",variant:"h6",children:null===A||void 0===A?void 0:A.factrurasMesGAN})]})]})]})})})})]})}var ua="http://104.131.28.211:3000/";function ba(e){var t,i,n,r,o,u=e.idSociety,b=e.loggedUser,f=d.a.useState(!1),j=Object(c.a)(f,2),m=j[0],v=j[1],h=d.a.useState(!1),p=Object(c.a)(h,2),x=p[0],O=p[1],g=Object(s.j)(),y=g.idOP,w=g.fideicomisoId,C=g.fecha,S=g.empresaId,A=g.numero,F=g.fideicomiso,T=g.estadoOP,D=g.auth_adm,R=g.auth_obra,k=g.confirmada,z=g.blue,_=u.id,V=Object(l.useRef)(),U=new Date,M=Object(a.useQuery)(["acumulado",u],(function(){return Ge("op/acumulado/".concat(u.id,"/").concat(y,"/").concat(S,"/").concat(w,"/").concat(U.getMonth()+1,"/").concat(U.getFullYear()))})).data,Q=Object(a.useQuery)(["categoria",u],(function(){return Ge("categoria/listar/".concat(u.id))})).data,E=Object(a.useQuery)(["formOP",u.id],(function(){return Ge("op/mostrarConFacturas/".concat(u.id,"/").concat(y))})),L=E.data,B=E.isLoading,W=E.error,q=E.refetch,H=function(){var e=Object(Qe.a)(Me.a.mark((function e(){var t,i;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Nn.pdf)($()).toBlob();case 2:t=e.sent,(i=new FormData).append("logo",t),i.append("id",y),i.append("fideicomiso",F),i.append("numero",A),$e("op/modificar/".concat(u.id),i);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function G(e,t){return e&&"op"===t?e:e&&"f"===t?{item:e}:e&&"b"===t?{bancos:e}:e&&"c"===t?{cuentasBanco:e}:null}var $=function(){return Object(N.jsx)(ro,{dataOP:G(null===L||void 0===L?void 0:L.op,"op"),bancos:null===L||void 0===L?void 0:L.bancos,cuentasBanco:null===L||void 0===L?void 0:L.cuentasBanco,dataFacturas:G(null===L||void 0===L?void 0:L.item,"f"),apiServerUrl:ua,idSociedad:_})},Y=Object(a.useQueryClient)(),Z=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("autorizacion/agregar/".concat(null===u||void 0===u?void 0:u.id),{opid:t,documento:"op",tipoAutorizacion:"obra",creador:b.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.id>0)){e.next=3;break}return e.next=3,Y.refetchQueries(["formOP",u]);case 3:q();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),J=Z.mutate,K=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("autorizacion/agregar/".concat(null===u||void 0===u?void 0:u.id),{opid:t,documento:"op",tipoAutorizacion:"adm",creador:b.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.id>0)){e.next=3;break}return e.next=3,Y.refetchQueries(["formOP",u]);case 3:q();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),X=K.mutate,ee="vista"===(null===b||void 0===b?void 0:b["rol.op"]);ee||!!L&&1===(null===L||void 0===L?void 0:L.confirmada)&&(ee="total"!==(null===b||void 0===b?void 0:b["rol.op"]));return B?"Cargando...":W?"Hubo un error: ".concat(W.message):Object(N.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(N.jsxs)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:[Object(N.jsx)(wi.a,{smUp:"vista"===(null===b||void 0===b?void 0:b["rol.op"])||1===parseInt(z),children:Object(N.jsx)(P.a,{mt:2,sx:{pt:1},children:Object(N.jsx)(ae.a,{onClick:function(){O(!x)},children:x?"Ocultar Retenciones":"Retenciones"})})}),Object(N.jsx)(wi.a,{smUp:fa("obra",(null===L||void 0===L?void 0:L.auth_obra)&&(null===L||void 0===L||null===(t=L.auth_obra[0])||void 0===t?void 0:t.usuarios)?null===L||void 0===L||null===(i=L.auth_obra[0])||void 0===i?void 0:i.usuarios:R,null===b||void 0===b?void 0:b["rol.descripcion"]),children:Object(N.jsx)(P.a,{mt:2,sx:{pt:1},children:Object(N.jsx)(ae.a,{onClick:function(){Object(qr.b)((function(e){var t=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){J(y),t()},children:"Autorizar"})]})}))},children:"Autorizar en Obra"})})}),Object(N.jsx)(wi.a,{smUp:fa("adm",(null===L||void 0===L?void 0:L.auth_adm)&&(null===L||void 0===L||null===(n=L.auth_adm[0])||void 0===n?void 0:n.usuarios)?null===L||void 0===L||null===(r=L.auth_adm[0])||void 0===r?void 0:r.usuarios:D,null===b||void 0===b?void 0:b["rol.descripcion"]),children:Object(N.jsx)(P.a,{mt:2,sx:{pt:1},children:Object(N.jsx)(ae.a,{ref:V,onClick:function(){Object(qr.b)((function(e){var t=e.closeToast;return Object(N.jsxs)(P.a,{children:[Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(N.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){X(y),t()},children:"Autorizar"})]})}))},children:"Autorizar ADM"})})}),Object(N.jsxs)(P.a,{mt:2,sx:{pt:1},children:[Object(N.jsx)(ae.a,{onClick:function(){v(!m)},children:m?"Ocultar PDF":"Ver PDF"}),Object(N.jsx)(Nn.PDFDownloadLink,{document:!1===B?Object(N.jsx)(ro,{dataOP:G(null===L||void 0===L?void 0:L.op,"op"),bancos:null===L||void 0===L?void 0:L.bancos,cuentasBanco:null===L||void 0===L?void 0:L.cuentasBanco,dataFacturas:G(null===L||void 0===L?void 0:L.item,"f"),apiServerUrl:ua,idSociedad:_}):null,fileName:function(e,t,i){var n;return e&&e.empresas[0]?t+" OP-"+i+"-"+(null===e||void 0===e||null===(n=e.empresas[0])||void 0===n?void 0:n.razonSocial)+".pdf":"-"}(null===L||void 0===L?void 0:L.op,A,F),children:Object(N.jsx)(ae.a,{variant:"info",onClick:function(){setTimeout((function(){H()}),300)},children:"Descargar"})})]})]}),Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["op:",A.replace("OP_","")," | ",null===u||void 0===u?void 0:u.nombre]})}),Object(N.jsx)(N.Fragment,{children:m?Object(N.jsx)(Nn.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(N.jsx)(ro,{dataOP:G(null===L||void 0===L?void 0:L.op,"op"),bancos:null===L||void 0===L?void 0:L.bancos,cuentasBanco:null===L||void 0===L?void 0:L.cuentasBanco,dataFacturas:G(null===L||void 0===L?void 0:L.item,"f"),apiServerUrl:ua,idSociedad:_})}):x?Object(N.jsx)(sa,{idSociety:u,OPId:y,fecha:C,fideicomiso:F,item:null===L||void 0===L?void 0:L.item,OP:null===L||void 0===L?void 0:L.op,certificado:null===L||void 0===L?void 0:L.certificado,acumulado:M,categorias:Q,error:W,refetch:q,loggedUser:b}):Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Solicitud de Pago:"})}),Object(N.jsxs)(Ce.a,{item:!0,md:5,children:[Object(N.jsx)(wi.a,{smUp:!(1===parseInt(z)),children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:[A.replace("OP_","")," (Blue) \xa0\xa0 ",F]})}),Object(N.jsx)(wi.a,{smUp:!(0===parseInt(z)),children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:[A.replace("OP_",""),"\xa0\xa0\xa0\xa0 ",F]})})]}),Object(N.jsx)(Ce.a,{item:!0,md:5,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:dt(C)})})]})}),Object(N.jsx)(wi.a,{smUp:ee,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ho,{OPId:y,fecha:C,fideicomisoId:null===L||void 0===L||null===(o=L.op)||void 0===o?void 0:o.fideicomisoId,empresaId:S,idSociety:u,refetch:q,loggedUser:b})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(oa,{OPId:y,fecha:C,empresaId:S,idSociety:u,facturas:null===L||void 0===L?void 0:L.item,isLoading:B,error:W,refetch:q,loggedUser:b})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Zo,{OPId:y,estadoOP:T,confirmada:k,idSociety:u,loggedUser:b,formOP:null===L||void 0===L?void 0:L.op,certificado:null===L||void 0===L?void 0:L.certificado,isLoading:B,error:W,empresaId:S,fideicomiso:F,_bancos:null===L||void 0===L?void 0:L.bancos,_cuentasbanco:null===L||void 0===L?void 0:L.cuentasBanco,refetch:q})})]})})})]})}function fa(e,t,i){var n=!0;return"manager"===i&&"adm"===e&&(null!==t&&"null"!==t&&void 0!==t&&"undefined"!==t||(n=!1)),"manager"!==i&&"obra"!==i||"obra"!==e||null!==t&&"null"!==t&&void 0!==t&&"undefined"!==t||(n=!1),n}var ja=i(404),ma=i.n(ja);function va(e){var t=e.idSociety,i=e.loggedUser,n=e.fideicomisos,r=e.proveedores,o=St(),d=o.setIsPromptOpen,s=o.Prompt,u=Object(a.useQueryClient)(),b=!1;"total"===(null===i||void 0===i?void 0:i["rol.factura"])&&(b=!0);var f=Object(a.useMutation)((function(e){return $e("factura/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(n){var r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=i.id,e.next=3,u.invalidateQueries(["factura",t]);case 3:return e.next=5,u.getQueryData(["factura",t]);case 5:return r=e.sent,o=[].concat(Object(Fe.a)(r),[Object(ne.a)(Object(ne.a)({},n),{},{id:(new Date).getTime()})]),u.setQueryData(["factura",t],o),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,i,n){return u.setQueryData(["factura",t],n)},onSettled:function(){return u.invalidateQueries(["factura",t])}}),j=f.mutate,m=Object(l.useState)(""),v=Object(c.a)(m,2),h=v[0],p=v[1],x=[{id:"A",descripcion:"A"},{id:"B",descripcion:"B"},{id:"C",descripcion:"C"},{id:"M",descripcion:"M"},{id:"A_SUJ_RET",descripcion:"A Ope. Sujeto a Retenci\xf3n"},{id:"-",descripcion:"-"}],O=[{id:21,descripcion:"21,0%"},{id:27,descripcion:"27,0%"},{id:17,descripcion:"17,0%"},{id:10.5,descripcion:"10,5%"},{id:5,descripcion:"5,0%"},{id:0,descripcion:"0,0%"}],g=Object(l.useContext)(xc),y=Object(l.useState)(null),w=Object(c.a)(y,2),C=w[0],S=w[1],A=Object(l.useState)(0),I=Object(c.a)(A,2),T=I[0],D=I[1],R=Object(l.useState)(null),k=Object(c.a)(R,2),z=k[0],_=k[1],V=Object(l.useState)({id:0,descripcion:"Factura"}),U=Object(c.a)(V,2),M=U[0],Q=U[1],E=Object(l.useState)(null),L=Object(c.a)(E,2),B=L[0],W=L[1],q=Object(l.useState)(null),H=Object(c.a)(q,2),G=H[0],$=H[1],Y=Object(l.useState)(!1),Z=Object(c.a)(Y,2),J=Z[0],K=Z[1],X=!1,ee="",te=!0,ie=!1,re=new Date,oe=ut(re)+"01",ce=null,le="Letra";"blue"===(null===i||void 0===i?void 0:i["rol.factura"])&&(ee=oe,te=!1,X=!0,b=!1,ie=!0,ce={id:"-",descripcion:"-"},le="si es blue, dejar  '-'");var de=Object(l.useState)(ce),se=Object(c.a)(de,2),ue=se[0],be=se[1],fe=Object(l.useState)(te),je=Object(c.a)(fe,2),me=je[0],ve=je[1],he=Object(l.useState)(!te),pe=Object(c.a)(he,2),xe=pe[0],Oe=pe[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(n,r){var o,a,c,l,s,u,b,f,m;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.setSubmitting,r.resetForm,void 0===(null===n||void 0===n?void 0:n.tipo)&&(n.tipo=M),xe&&void 0===n.numeroBlue&&(n.numeroBlue=ee),3===M.id&&void 0===n.numeroBlue&&(n.numeroBlue=ee),a=n.numero,c=n.numero.slice(11,14),(xe||3===M.id)&&(l=n.numeroBlue+"",c=l.slice(7,10),a=n.numeroBlue),e.next=9,bt("factura",t.id,n.empresa.id,a);case 9:return s=e.sent,e.next=12,bt("factura",t.id,n.empresa.id,c);case 12:u=e.sent,s||""===a||void 0===a?(p("Ya existe ese n\xfamero de factura para esa razon social."),d(!0)):(m=parseFloat(z),T>1&&(m+=parseFloat(T)),n.percepciones&&(m+=parseFloat(n.percepciones)),n.IIBB_CABA&&(m+=parseFloat(n.IIBB_CABA)),n.IIBB_BSAS&&(m+=parseFloat(n.IIBB_BSAS)),n.no_gravados_exentos&&(m+=parseFloat(n.no_gravados_exentos)),u&&(p("Cuidado, esta ingresando una factura terminada en: "+c+" y existe una similar para ese proveedor."),d(!0)),j({numero:xe||3===M.id?n.numeroBlue:n.numero,neto:2===n.tipo.id?-1*z:z,iva:2===n.tipo.id?-1*T:T,letra:xe?"-":n.letra.id,percepciones:xe?0:2===n.tipo.id?-1*n.percepciones:n.percepciones,IIBB_CABA:xe?0:2===n.tipo.id?-1*n.IIBB_CABA:n.IIBB_CABA,IIBB_BSAS:xe?0:2===n.tipo.id?-1*n.IIBB_BSAS:n.IIBB_BSAS,no_gravados_exentos:xe?0:2===n.tipo.id?-1*n.no_gravados_exentos:n.no_gravados_exentos,montoTotal:2===n.tipo.id?-1*m:m,porcentajeIVA:xe?0:n.porcentajeIVA.id,fechaIngreso:n.fechaIngreso,tipo:n.tipo.id,empresaId:null===n||void 0===n||null===(b=n.empresa)||void 0===b?void 0:b.id,fideicomisoId:null===n||void 0===n||null===(f=n.fideicomiso)||void 0===f?void 0:f.id,moneda:"ARS",blue:"on"===n.blue||ie?1:0,creador:i.id}),o(!1));case 14:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Tipo",title:"Tipo de comprobante",disablePortal:!0,required:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,t){Q(t),i("tipo",t),pa(3===(null===t||void 0===t?void 0:t.id),i)},value:M,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:g||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Tipo de comprobante"}))}}),Object(N.jsx)(wi.a,{smUp:xe,children:Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Letra (es obligatorio, existe 0%)",title:le,disablePortal:!0,required:!0,style:{width:"100px",display:"inline-flex"},onChange:function(e,t){be(t),i("letra",t)},value:ue,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:x||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Letra *"}))}})}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fideicomiso",title:"Seleccione un fideicomiso.",disablePortal:!0,required:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,t){W(t),i("fideicomiso",t)},value:B,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:n||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fideicomiso *"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Razon Social",title:"Seleccione un proveedor.",disablePortal:!0,required:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){$(t),i("empresa",t)},value:G,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.razonSocial},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===t.id},options:r||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Razon Social *"}))}}),Object(N.jsx)(wi.a,{smUp:xe||3===M.id,children:Object(N.jsx)(ma.a,{mask:"99999-99999999",disabled:!1,maskChar:" ",onChange:function(e){return i("numero",e.target.value)},children:function(){return Object(N.jsx)(Ee.a,{title:"Cargar n\xfamero completo de la factura.",label:"Numero",type:"float",required:!0,maxLength:11,size:"small",style:{width:"160px"},name:"numero"})}})}),Object(N.jsx)(wi.a,{smUp:!xe&&3!==M.id,children:Object(N.jsx)(ma.a,{mask:"9999999999",defaultValue:ut(re)+"01",disabled:!1,maskChar:" ",onChange:function(e){return i("numeroBlue",e.target.value)},children:function(){return Object(N.jsx)(Ee.a,{title:"Cargar n\xfamero completo de la factura.",type:"float",required:!0,maxLength:11,size:"small",sx:{width:"25ch"},name:"numeroBlue"})}})}),Object(N.jsx)(wi.a,{smUp:xe,children:Object(N.jsx)(Be.a,{component:xa,label:"Fecha Emisi\xf3n",type:"date",name:"fechaIngreso"})}),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",Object(N.jsx)(wi.a,{smUp:!b,children:Object(N.jsx)(bn.a,{control:Object(N.jsx)(sn.a,{id:"blue",name:"blue",onChange:function(e){return function(e,t,i,n,r,o){e.preventDefault(),r(!n),n?(pa(!0,t),t(i,"on"),o(!0)):(t(i,"off"),pa(!1,t),o(!1))}(e,i,"blue",me,ve,Oe)}}),label:"Blue"})}),Object(N.jsx)(wi.a,{smUp:!X,children:Object(N.jsx)(bn.a,{control:Object(N.jsx)(sn.a,{disabled:!0,defaultChecked:!0,id:"blue",name:"blue2"}),label:"Blue"})})]}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(Be.a,{as:Ee.a,label:"Neto",title:"Monto , solo numeros.",required:!0,maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"neto",onChange:function(e){_(e.target.value),D(Math.round(parseFloat(e.target.value)?parseFloat(e.target.value)*parseFloat((null===C||void 0===C?void 0:C.id)?null===C||void 0===C?void 0:C.id:0):0)/100)}}),Object(N.jsxs)(wi.a,{smUp:xe,children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"%",title:"% IVA (es obligatorio, existe 0%)",disablePortal:!0,required:!0,style:{width:"100px",display:"inline-flex"},onChange:function(e,t){S(t),D((null===t||void 0===t?void 0:t.id)?Math.round(t.id*parseFloat(z||0))/100:0),i("porcentajeIVA",t)},value:C,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.descripcion},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===t.id},options:O||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"% IVA *"}))}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Iva",title:"Iva, solo numeros.",maxLength:9,type:"float",size:"small",value:T,style:{width:"160px",display:"inline-flex"},name:"iva",onChange:function(e){return ha(e,i,"iva")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"Percepciones IVA",title:"Percepciones, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"percepciones",onChange:function(e){return ha(e,i,"percepciones")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"IIBB CABA",title:"IIBB CABA, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"IIBB_CABA",onChange:function(e){return ha(e,i,"IIBB_CABA")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"IIBB Buenos Aires",title:"IIBB BsAs, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px",display:"inline-flex"},name:"IIBB_BSAS",onChange:function(e){return ha(e,i,"IIBB_BSAS")}}),Object(N.jsx)(Be.a,{as:Ee.a,label:"No gravado",title:"No gravado, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"160px"},name:"no_gravados_exentos",onChange:function(e){return ha(e,i,"no_gravados_exentos")}})]}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})]}),Object(N.jsx)(P.a,{sx:{width:"100%"},children:Object(N.jsx)(mn.a,{in:J,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){K(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}}),Object(N.jsx)(s,{message:h,ok:!0})]})}function ha(e,t,i){e.preventDefault();var n=e.target.value;if(void 0===n||""===n)t(i,void 0);else{/^\d{0,11}(\.\d{0,2})?$/.test(n.toString())&&t(i,n.toString())}}function pa(e,t){if(e){var i=ut(new Date)+"01";t("numeroBlue",parseInt(i))}else t("numeroBlue","")}function xa(e){var t=e.field,i=e.form,n=t.name,r=t.value,o=i.setFieldValue;return Object(N.jsx)(nt.b,{dateAdapter:ot.a,children:Object(N.jsx)(rt.a,{label:"Fecha Emisi\xf3n",inputFormat:"dd/MM/yyyy",value:r,onChange:function(e){return o(n,e)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({style:{width:"160px"},required:!0,size:"small"},e))}})})}function Oa(e){var t=e.setFiltComp,i=e.setFiltFide,n=e.setFiltRS,r=e.fideicomisos,o=e.proveedores,a=Object(l.useContext)(xc),d=Object(l.useState)(null),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(l.useState)(null),j=Object(c.a)(f,2),m=j[0],v=j[1],h=Object(l.useState)(null),p=Object(c.a)(h,2),x=p[0],O=p[1];function g(e,r){var o=-1;(null===r||void 0===r?void 0:r.id)&&(o=r.id),"comp"===e&&t(o),"fide"===e&&i(o),"rs"===e&&n(o)}return Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Tipo Comprobante",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){O(t),g("comp",t)},value:x,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Tipo Comprobante"}))}}),"\xa0",Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){b(t),g("fide",t)},value:u,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){v(t),g("rs",t)},value:m,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0"]})}})}var ga=function(e,t,i,n,r){return[{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center"},{field:"blue",headerName:"Blue",hide:!e,width:55,editable:!1,headerAlign:"center",renderCell:function(e){return 0===e.value?"":Object(N.jsx)(T.a,{sx:{bgcolor:"#3944BC"},children:"B"})}},{field:"tipo",headerName:"Tipo de Comp.",width:170,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"letra",headerName:"Letra",width:55,editable:!1,headerAlign:"center"},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"left"},{field:"empresa",headerName:"Razon Social",width:170,editable:!1,headerAlign:"center"},{field:"cuit",headerName:"CUIT",hide:!0,width:170,editable:!1,headerAlign:"center"},{field:"numero",headerName:"N\xfamero",width:155,editable:!1,headerAlign:"center"},{field:"montoTotal",headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"neto",headerName:"Neto",width:120,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"porcentajeIVA",headerName:"%IVA",width:110,editable:!1,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:1}).format(Number(t))}},{field:"iva",headerName:"IVA",width:110,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"percepcionesIVA",headerName:"Percepciones IVA",width:110,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"IIBB_CABA",headerName:"IIBB CABA",width:110,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"IIBB_BSAS",headerName:"IIBB BsAs",width:110,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"no_gravado",headerName:"No gravado",width:150,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",type:"singleSelect",valueOptions:["ARS","USD"],width:50,editable:t,headerAlign:"center"},{field:"es_ajuste",headerName:"Mayor Costo",type:"boolean",width:160,editable:t,headerAlign:"center"},{field:"link",headerName:"Link",width:110,editable:t,headerAlign:"center"},{field:"ver",headerName:"",width:20,sortable:!1,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(N.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"createdAt",headerName:"Fecha C.",width:155,type:"date",editable:!1,headerAlign:"center",align:"center",renderCell:Aa},{field:"fechaIngreso",headerName:"Fecha Emisi\xf3n",width:175,type:"date",editable:t,headerAlign:"center",align:"center",renderCell:Sa},{field:"diasVTO",headerName:"D\xedas VTO",width:140,filterable:!1,editable:t,type:"singleSelect",valueOptions:[0,1,2,3,4,5,6,7,10,14,15,20,21,28,30,40,50,60,70,80,90,100,120,150]},{field:"fechaIngreso_mas_diasVTO",headerName:"VTO",width:155,type:"date",sortable:!1,filterable:!1,editable:!1,headerAlign:"center",align:"center",renderCell:Ca},{field:"OPnumero",headerName:"OP",width:100,editable:!1,headerAlign:"center",renderCell:Ia},{field:"estadoOP",headerName:"Estado OP",width:160,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:" ",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,i=t.deleteId,o=t.OPnumero,a=t.es_cuotas;return o>0||1===a?"":Object(N.jsx)(Tt.a,{onClick:function(e){r(i),n(!0)}})}}]};function ya(e){var t=e.filtComp,i=e.filtFide,n=e.filtRS,r=e.idSociety,o=e.loggedUser,d=Object(s.i)(),u=St(),b=u.Prompt,f=u.setIsPromptOpen,j=Object(l.useState)(),m=Object(c.a)(j,2),v=m[0],h=m[1],p=Object(l.useContext)(bc),x=Object(l.useContext)(xc),O=0,g=!1,y=!1;"total"===(null===o||void 0===o?void 0:o["rol.factura"])&&(O=-1,y=!0),"blue"===(null===o||void 0===o?void 0:o["rol.descripcion"])&&(O=-1,y=!0,g=!0);var C=!0;"vista"===(null===o||void 0===o?void 0:o["rol.factura"])&&(C=!1);var S=Object(a.useQuery)(["factura",r],(function(){return Ge("factura/listar/".concat(r.id,"/todas/nada/").concat(O))})),A=S.data,I=S.isLoading,P=S.error,F=Object(a.useQueryClient)(),T=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("factura/eliminar/".concat(r.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.cancelQueries(["factura",r]);case 2:return i=F.getQueryData(["factura",r]),n=i.filter((function(e){return e.id!==t})),F.setQueryData(["factura",r],n),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return F.setQueryData(["factura",r],i)},onSettled:function(){return F.invalidateQueries(["factura",r])}}),D=T.mutate,R=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,o=t.value,e.next=3,$e("factura/modificar/".concat(r.id),Object(w.a)({id:n},i,"es_ajuste"===i||"es_cuotas"===i?o?1:0:o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,o=t.value,e.next=3,F.cancelQueries(["factura",r]);case 3:return a=F.getQueryData(["factura",r]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==n}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===n}))),{},Object(w.a)({},i,o))]),F.setQueryData(["factura",r],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return F.setQueryData(["factura",r],i)},onSettled:function(){return F.invalidateQueries(["factura",r])}}),k=R.mutate,z=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,o,a,c,l,s;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d("./".concat(null===t||void 0===t||null===(i=t.OP)||void 0===i?void 0:i.id,"/").concat(null===t||void 0===t||null===(n=t.OP)||void 0===n?void 0:n.createdAt,"/").concat(t.empresaId,"/").concat(null===t||void 0===t||null===(r=t.OP)||void 0===r?void 0:r.numero,"/").concat(t.fideicomisoId,"/").concat(null===t||void 0===t||null===(o=t.fideicomisos[0])||void 0===o?void 0:o.nombre,"/").concat(null===t||void 0===t||null===(a=t.OP)||void 0===a?void 0:a.estadoOP,"/").concat(null===t||void 0===t||null===(c=t.OP)||void 0===c?void 0:c.authADM,"/").concat(null===t||void 0===t?void 0:t.OP.authOBRA,"/").concat(null===t||void 0===t||null===(l=t.OP)||void 0===l?void 0:l.confirmada,"/").concat(null===t||void 0===t||null===(s=t.OP)||void 0===s?void 0:s.blue,"/OP Detalle")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),_=z.mutate;var V=l.useState([{field:"id",sort:"desc"}]),U=Object(c.a)(V,2),M=U[0],Q=U[1],E=Object(l.useState)(25),L=Object(c.a)(E,2),B=L[0],W=L[1];return I?"Cargando...":P?"Hubo un error: ".concat(P.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(b,{message:"\xbfEliminar fila?",action:function(){return D(v)}}),Object(N.jsx)(Ft.a,{rows:A.filter((function(e){return function(e,t,i,n,r){return(!r||1===e.blue)&&(-1===i&&-1===n&&-1===t||(i>-1&&-1===n&&-1===t?e.fideicomisoId===i:-1===i&&n>-1&&-1===t?e.empresaId===n:-1===i&&-1===n&&t>-1?e.tipo===t:i>-1&&n>-1&&-1===t?e.fideicomisoId===i&&e.empresaId===n:i>-1&&-1===n&&t>-1?e.fideicomisoId===i&&e.tipo===t:-1===i&&n>-1&&t>-1?e.empresaId===n&&e.tipo===t:i>-1&&n>-1&&t>-1?e.fideicomisoId===i&&e.empresaId===n&&e.tipo===t:void 0))}(e,t,i,n,g)})).map((function(e){var t,i,n,r,o,a,c;return{id:null===e||void 0===e?void 0:e.id,blue:null===e||void 0===e?void 0:e.blue,tipo:null===x||void 0===x||null===(t=x.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion,letra:null===e||void 0===e?void 0:e.letra,fideicomisoId:null===e||void 0===e?void 0:e.fideicomisoId,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(i=e.fideicomisos[0])||void 0===i?void 0:i.nombre:"",cuit:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(n=e.empresas[0])||void 0===n?void 0:n.cuit:"",empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(r=e.empresas[0])||void 0===r?void 0:r.razonSocial:"",numero:null===e||void 0===e?void 0:e.numero,montoTotal:2===parseInt(e.tipo)?-1*e.montoTotal:e.montoTotal,neto:2===parseInt(e.tipo)?-1*e.neto:e.neto,iva:2===parseInt(e.tipo)?-1*e.iva:e.iva,percepcionesIVA:2===parseInt(e.tipo)?-1*e.percepciones:e.percepciones,IIBB_CABA:2===parseInt(e.tipo)?-1*e.IIBB_CABA:e.IIBB_CABA,IIBB_BSAS:2===parseInt(e.tipo)?-1*e.IIBB_BSAS:e.IIBB_BSAS,moneda:null===e||void 0===e?void 0:e.moneda,porcentajeIVA:null===e||void 0===e?void 0:e.porcentajeIVA,es_ajuste:null===e||void 0===e?void 0:e.es_ajuste,es_cuotas:null===e||void 0===e?void 0:e.es_cuotas,no_gravado:null===e||void 0===e?void 0:e.no_gravados_exentos,fechaIngreso:null===e||void 0===e?void 0:e.fechaIngreso,diasVTO:null===e||void 0===e?void 0:e.diasVTO,fechaVTO:null===e||void 0===e?void 0:e.fechaVTO,createdAt:null===e||void 0===e?void 0:e.createdAt,OPnumero:(null===e||void 0===e?void 0:e.OP)?null===e||void 0===e||null===(o=e.OP)||void 0===o?void 0:o.numero:"",estadoOP:p?null===(a=p[null===e||void 0===e||null===(c=e.OP)||void 0===c?void 0:c.estadoOP])||void 0===a?void 0:a.descripcion:"",link:null===e||void 0===e?void 0:e.link,ver:null===e||void 0===e?void 0:e.link,empresaId:null===e||void 0===e?void 0:e.empresaId,deleteId:null===e||void 0===e?void 0:e.id,onIrDetalle:function(){return _(e)}}})),OPs:!0,onCellEditCommit:k,columns:ga(y,C,0,f,h),sortModel:M,onSortModelChange:function(e){return e[0]!==M[0]&&function(e){var t;0===e.length&&(e.push(M[0]),"asc"===(null===(t=M[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),Q(e)}(e)},pageSize:B,onPageSizeChange:function(e){return W(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:wa}})]})}function wa(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["id","tipo","letra","fideicomiso","empresa","cuit","numero","montoTotal","neto","porcentajeIVA","iva","percepcionesIVA","IIBB_CABA","IIBB_BSAS","no_gravado","moneda","es_ajuste","es_cuotas","createdAt","fechaIngreso","fechaVTO","OPnumero","estadoOP"]}})]})}function Ca(e){var t=new Date(e.row.fechaIngreso),i=0;return e.row.diasVTO&&e.row.diasVTO>0&&(i=e.row.diasVTO),t.setDate(t.getDate()+i),lt(t)}function Sa(e){return e.row.fechaIngreso?lt(e.row.fechaIngreso):""}function Aa(e){return e.row.createdAt?lt(e.row.createdAt):""}function Ia(e){var t=e.row.onIrDetalle,i=e.row.OPnumero;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function Pa(e){var t,i=e.idSociety,n=e.loggedUser,r=Object(l.useState)(-1),o=Object(c.a)(r,2),d=o[0],s=o[1],u=Object(l.useState)(-1),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(l.useState)(-1),v=Object(c.a)(m,2),h=v[0],p=v[1],x=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(i.id))})).data,O=Object(a.useQuery)(["proveedores"],(function(){return Ge("empresa/listar/".concat(i.id,"/0"))})).data;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsxs)("title",{children:["Facturas | ",null!==(t=null===i||void 0===i?void 0:i.nombre)&&void 0!==t?t:""]})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(wi.a,{smUp:"vista"===(null===n||void 0===n?void 0:n["rol.factura"]),children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(va,{idSociety:i,loggedUser:n,fideicomisos:x,proveedores:O})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Oa,{idSociety:i,fideicomisos:x,setFiltComp:s,setFiltFide:j,setFiltRS:p,proveedores:O})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ya,{idSociety:i,loggedUser:n,filtComp:d,filtFide:f,filtRS:h})})]})})]})}function Fa(e){var t=e.idSociety,i=e.loggedUser,n=e.fideicomisos,r=e.proveedores,o=Object(a.useQueryClient)(),d=Object(a.useMutation)((function(e){return $e("OC/agregar/".concat(t.id),e)}),{onSuccess:function(){var e=Object(Qe.a)(Me.a.mark((function e(){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.refetchQueries(["OC",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),s=d.mutate,u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(l.useState)(null),v=Object(c.a)(m,2),h=v[0],p=v[1],x=Object(l.useState)(!1),O=Object(c.a)(x,2),g=O[0],y=O[1];return Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,n){var r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,s({fideicomisoId:t.fideicomiso.id,empresaId:t.empresa.id,descripcion1:t.descripcion,creador:i.id}),y(!0),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),i("fideicomiso",t)},value:f,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:n||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Fideicomiso"}))}}),Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),i("empresa",t)},value:h,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({},e),{},{label:"Razon Social"}))}}),Object(N.jsx)(Be.a,{as:Ee.a,required:!0,size:"small",label:"Descripci\xf3n",type:"string",name:"descripcion"}),Object(N.jsx)(ae.a,{id:"bagregar",variant:"text",type:"submit",disabled:t,children:"Agregar"}),Object(N.jsx)(P.a,{sx:{width:"100%"},children:Object(N.jsx)(mn.a,{in:g,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){y(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}})}function Ta(e){var t=e.setFiltFide,i=e.setFiltRS,n=(e.setFiltEst,e.idSociety,e.loggedUser,e.fideicomisos),r=e.proveedores,o=(e.ddfacturas,e.ddfacturasBlue,Object(l.useState)(null)),a=Object(c.a)(o,2),d=a[0],s=a[1],u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1];function m(e,n){var r=-1;(null===n||void 0===n?void 0:n.id)&&(r=n.id),"fide"===e&&t(r),"rs"===e&&i(r)}return Object(N.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,i.resetForm,n(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){s(t),m("fide",t)},value:d,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:n||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(N.jsx)(Be.a,{as:mi.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),m("rs",t)},value:f,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)(Object(ne.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0"]})}})}var Da=function(e,t){return"dark"===t?Object(oo.b)(e,.6):Object(oo.d)(e,.6)},Ra=function(e,t){return"dark"===t?Object(oo.b)(e,.5):Object(oo.d)(e,.5)},Na=function(e,t,i){return[{field:"id",width:120,headerName:"Id",renderCell:_a},{field:"createdAt",headerName:"Fecha",width:120,type:"date",editable:!1,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{timeZone:"UTC"})}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:Va},{field:"empresa",headerName:"Raz\xf3n Social",width:170,editable:!1,headerAlign:"center",align:"center"},{field:"descripcion1",width:160,editable:e,headerName:"Descripci\xf3n"},{field:"monto_ARS",headerName:"Tot ARS",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"monto_USD",headerName:"Tot USD",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",hide:!e,width:50,headerAlign:"center",align:"center",renderCell:function(e){var n=e.row,r=n.deleteId;return n.confirmada?"":Object(N.jsx)(Tt.a,{onClick:function(e){i(r),t(!0)}})}}]};function ka(e){var t=e.filtFide,i=e.filtRS,n=(e.filtEst,e.idSociety),r=e.loggedUser,o=e.ocInformation,d=e.isLoading,u=e.error,b=!0;"vista"===(null===r||void 0===r?void 0:r["rol.oc"])&&(b=!1);var f=Object(s.i)(),j=St(),m=j.Prompt,v=j.setIsPromptOpen,h=Object(l.useState)(),p=Object(c.a)(h,2),x=p[0],O=p[1],g=Object(a.useQueryClient)(),y=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("oc/mostrar/".concat(n.id,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSettled:function(e){f("./".concat(e.id,"/OC Detalle"))}}),C=y.mutate,S=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OC/eliminar/".concat(n.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.cancelQueries(["OC",n]);case 2:return i=g.getQueryData(["OC",n]),r=i.filter((function(e){return e.id!==t})),g.setQueryData(["OC",n],r),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return g.setQueryData(["OC",n],i)},onSettled:function(){return g.invalidateQueries(["OC",n])}}),A=S.mutate,I=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,r,o;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,r=t.id,o=t.value,e.next=3,$e("OC/modificar/".concat(n.id),Object(w.a)({id:r},i,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,r,o,a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,r=t.id,o=t.value,e.next=3,g.cancelQueries(["OC",n]);case 3:return a=g.getQueryData(["OC",n]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(ne.a)(Object(ne.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},i,o))]),g.setQueryData(["OC",n],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return g.setQueryData(["OC",n],i)},onSettled:function(){return g.invalidateQueries(["OC",n])}}),T=I.mutate,D=Object(l.useState)(!1),R=Object(c.a)(D,2),k=R[0],z=R[1];var _=l.useState([{field:"createdAt",sort:"desc"}]),V=Object(c.a)(_,2),U=V[0],M=V[1],Q=Object(l.useState)(25),E=Object(c.a)(Q,2),L=E[0],B=E[1];return d?"Cargando...":u?"Hubo un error: ".concat(u.message):Object(N.jsxs)("div",{style:{width:"100%"},children:[Object(N.jsx)(m,{message:"\xbfEliminar fila?",action:function(){return A(x)}}),Object(N.jsx)(qr.a,{}),Object(N.jsxs)(P.a,{sx:{height:400,width:1,"& .super-app-theme--true":{bgcolor:function(e){return Da(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return Ra(e.palette.success.main,e.palette.mode)}}},"& .super-app-theme--otra":{bgcolor:function(e){return Da(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return Ra(e.palette.error.main,e.palette.mode)}}}},children:[Object(N.jsx)(Ft.a,{rows:o.filter((function(e){return function(e,t,i){return e.id>0&&e.empresaId>0&&e.fideicomisoId>0&&(-1===t&&-1===i||(t>-1&&-1===i?e.fideicomisoId===t:-1===t&&i>-1?e.empresaId===i:t>-1&&i>-1?e.fideicomisoId===t&&e.empresaId===i:void 0))}(e,t,i)})).map((function(e){var t,i;return{id:null===e||void 0===e?void 0:e.id,createdAt:null===e||void 0===e?void 0:e.createdAt,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(i=e.empresas[0])||void 0===i?void 0:i.razonSocial:"",descripcion1:null===e||void 0===e?void 0:e.descripcion1,monto_ARS:null===e||void 0===e?void 0:e.monto_ARS,monto_USD:null===e||void 0===e?void 0:e.monto_USD,fideicomisoId:null===e||void 0===e?void 0:e.fideicomisoId,empresaId:null===e||void 0===e?void 0:e.empresaId,deleteId:null===e||void 0===e?void 0:e.id,esEditable:function(){return e},onIrDetalle:function(){return C(e)}}})),onCellEditCommit:T,columns:Na(b,v,O),sortModel:U,onSortModelChange:function(e){return e[0]!==U[0]&&function(e){var t;0===e.length&&(e.push(U[0]),"asc"===(null===(t=U[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),M(e)}(e)},pageSize:L,onPageSizeChange:function(e){return B(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:za},getRowClassName:function(e){return"super-app-theme--false"}}),Object(N.jsx)(mn.a,{in:k,children:Object(N.jsx)(Le.a,{action:Object(N.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){z(!1)},children:Object(N.jsx)(hn.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function za(){return Object(N.jsxs)(Ft.c,{children:[Object(N.jsx)(Ft.f,{}),Object(N.jsx)(Ft.d,{}),Object(N.jsx)(Ft.e,{csvOptions:{fields:["id","createdAt","fideicomiso","empresa","descripcion1","monto_ARS","monto_USD"]}})]})}function _a(e){var t="".concat(e.row.id,"/OC Detalle");return Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:e.row.id})})}function Va(e){var t=e.row.onIrDetalle,i=e.row.fideicomiso;return Object(N.jsxs)(ae.a,{onClick:t,children:[i,"  "]})}function Ua(e){var t=e.idSociety,i=e.loggedUser,n=Object(a.useQuery)(["OC",t],(function(){return Ge("OC/listar/".concat(t.id,"/0/0"))})),r=n.data,o=n.isLoading,d=n.error,s=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(t.id))})).data,u=Object(a.useQuery)(["proveedores"],(function(){return Ge("empresa/listar/".concat(t.id,"/0"))})).data,b=Object(l.useState)(-1),f=Object(c.a)(b,2),j=f[0],m=f[1],v=Object(l.useState)(-1),h=Object(c.a)(v,2),p=h[0],x=h[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(ye.a,{children:Object(N.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(N.jsx)(P.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(N.jsxs)(we.a,{maxWidth:!1,children:[Object(N.jsx)(wi.a,{smUp:"vista"===(null===i||void 0===i?void 0:i["rol.oc"]),children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Fa,{idSociety:t,loggedUser:i,fideicomisos:s,proveedores:u})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ta,{idSociety:t,loggedUser:i,fideicomisos:s,setFiltFide:m,setFiltRS:x,proveedores:u})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(ka,{idSociety:t,loggedUser:i,ocInformation:r,filtFide:j,filtRS:p,isLoading:o,error:d})})]})})]})}function Ma(e){var t,i=e.OCId,n=e.formOC,r=e.loggedUser,o=e.refetch,s=!0;"vista"===(null===r||void 0===r?void 0:r["rol.oc"])&&(s=!1);var u=Object(l.useContext)(uc),b=St().Prompt,f=Object(a.useQueryClient)(),j=Object(l.useState)(""),m=Object(c.a)(j,2),v=m[0],h=m[1],p=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,$e("OC/modificar/".concat(u.id),Object(w.a)({id:n},i,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,f.cancelQueries(["OC",u]);case 3:return e.next=5,f.getQueryData(["OC",u]);case 5:if(!(o=e.sent)){e.next=10;break}return a=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==n}))),[Object(ne.a)(Object(ne.a)({},o.find((function(e){return e.id===n}))),{},Object(w.a)({},i,r))]),f.setQueryData(["OC",u],a),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return f.setQueryData(["OC",u],i)},onSettled:function(){u.id>0&&f.invalidateQueries(["OCdetalle",u]),o()}}),x=p.mutate;function O(e,t,i,n,r){if(n)!function(e,t,i){var n;e.preventDefault();var r=e.target.value,o=/^\d{0,5}(\.\d{0,2})?$/,a=e.which||e.keyCode,c=e.ctrlKey?e.ctrlKey:17===a;(null===e||void 0===e||null===(n=e.target)||void 0===n?void 0:n.name)===t&&(o.test(r.toString())||c)&&x({field:t,id:i,value:r})}(e,t,i);else if(r){F(e);var o=ht(e)+" 03:00";x({field:t,id:i,value:o})}else{var a=e.target.value;x({field:t,id:i,value:a})}}var g=[{value:"Construci\xf3n",label:"Construci\xf3n"},{value:"Materiales",label:"Materiales"},{value:"Mano de Obra",label:"Mano de Obra"}],y={es:ln.a},C={es:"__/__/____"},S=xt(null===n||void 0===n||null===(t=n.oc)||void 0===t?void 0:t.fechaIni),A=d.a.useState(S),I=Object(c.a)(A,2),P=I[0],F=I[1];return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{children:function(e){var t,r,o,a;e.isSubmitting;return Object(N.jsx)(Be.b,{children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsxs)(Ce.a,{item:!0,md:5,children:[Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"Tipo de CAC",style:{width:"215px",display:"inline-flex"},select:!0,disabled:!s,defaultValue:null===(r=n.oc)||void 0===r?void 0:r.CACtipo,name:"CACtipo",onChange:function(e){return O(e,"CACtipo",i,!1,!1)},children:g.map((function(e){return Object(N.jsx)(jn.a,{value:e.value,children:e.label},e.value)}))},null===n||void 0===n||null===(t=n.oc)||void 0===t?void 0:t.CACtipo),Object(N.jsx)(Ee.a,{size:"small",sx:{width:"20ch"},label:"CAC Base",type:"number",disabled:!s,style:{width:"215px",display:"inline-flex"},defaultValue:null===(a=n.oc)||void 0===a?void 0:a.CACbase,name:"CACbase",onChange:function(e){return h("CACbase")},onBlur:function(e){return O(e,v,i,!0,!1)}},null===n||void 0===n||null===(o=n.oc)||void 0===o?void 0:o.CACbase)]}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(wi.a,{smUp:!0,children:Object(N.jsx)(nt.b,{dateAdapter:ot.a,locale:y.es,children:Object(N.jsx)(dn.a,{mask:C.es,value:P,disabled:!s,label:"Fecha",onChange:function(e){return O(e,"fechaIni",i,!1,!0)},renderInput:function(e){return Object(N.jsx)(Ee.a,Object(ne.a)({required:!0,size:"small"},e))}})})})})]})})}}),Object(N.jsx)(b,{message:"Tarea y monto no puede estar en blanco",ok:!0})]})}function Qa(e){var t=e.OCId,i=e.loggedUser,n=e.moneda,r=e.refetch,o=Object(l.useContext)(uc),c=St().Prompt,d=Object(a.useQueryClient)(),s=Object(a.useMutation)((function(e){return $e("OCdetalle/agregar/".concat(o.id),e)}),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(r){var a,c;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=parseInt(i.id),r.OCId=parseInt(t),r.moneda=n,e.next=5,d.invalidateQueries(["OCdetalle",o]);case 5:return e.next=7,d.getQueryData(["OCdetalle",o]);case 7:return a=e.sent,c=[].concat(Object(Fe.a)(a),[Object(ne.a)(Object(ne.a)({},r),{},{id:(new Date).getTime()})]),d.setQueryData(["OCdetalle",o],c),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return d.setQueryData(["OCdetalle",o],i)},onSettled:function(){o.id>0&&d.invalidateQueries(["OCdetalle",o]),r()}}),u=s.mutate;return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(Be.c,{initialValues:{descripcion:"",monto:""},onSubmit:function(){var e=Object(Qe.a)(Me.a.mark((function e(t,i){var n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=i.setSubmitting,r=i.resetForm,u(t),r(),n(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(N.jsxs)(Be.b,{children:[Object(N.jsx)(Be.a,{as:Ee.a,required:!0,size:"small",style:{width:"215px",display:"inline-flex"},label:"Tarea",type:"string",name:"descripcion"}),Object(N.jsx)(Be.a,{as:Ee.a,required:!0,label:"Monto",style:{width:"215px",display:"inline-flex"},size:"small",type:"float",name:"monto",onChange:function(e){return function(e,t,i){e.preventDefault();var n=e.target.value;/^\d{0,11}$/.test(n.toString())&&t(i,n.toString())}(e,i,"monto")}}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(N.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(N.jsx)(c,{message:"Tarea y monto no puede estar en blanco",ok:!0})]})}var Ea=i(8),La=Object(p.a)(),Ba=Object(j.a)((function(e){return Object(m.a)({root:{border:"1px solid ".concat(e.palette.divider),position:"relative",overflow:"hidden",width:"100%",height:26,borderRadius:2},value:{position:"absolute",lineHeight:"24px",width:"100%",display:"flex",justifyContent:"center"},bar:{height:"100%","&.low":{backgroundColor:"#f44336"},"&.medium":{backgroundColor:"#efbb5aa3"},"&.high":{backgroundColor:"#088208a3"}}})}),{defaultTheme:La}),Wa=l.memo((function(e){var t=100*e.value,i=Ba();return Object(N.jsxs)("div",{className:i.root,children:[Object(N.jsx)("div",{className:i.value,children:"".concat(t.toLocaleString()," %")}),Object(N.jsx)("div",{className:Object(Ea.a)(i.bar,{low:t<30,medium:t>=30&&t<=70,high:t>70}),style:{maxWidth:"".concat(t,"%")}})]})}));function qa(e){var t=e.value;return Object(N.jsx)(Wa,{value:t})}var Ha=function(e,t,i,n){return[{field:"numero",headerName:"",width:50,editable:e,headerAlign:"center"},{field:"descripcion",headerName:"Tarea",width:400,editable:e,headerAlign:"left"},{field:"monto",preProcessEditCellProps:$a,headerName:"Monto",width:130,editable:e,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:e,headerAlign:"center"},{field:"porcentaje",preProcessEditCellProps:$a,headerName:"%",width:65,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var i=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:1}).format(Math.round(1e3*i/t)/10)+"%"}},{field:"createdAt",headerName:"Fecha",width:150,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return lt(e.value)}},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(N.jsx)(Tt.a,{onClick:function(e){n(t),i(!0)}})}}]};function Ga(e){var t,i,n,r,o,d,s,u,b,f=e.OCId,j=e.loggedUser,m=e.formOC,v=e.refetch,h=e.moneda,p=e.totPagos,x=e.totAjuste,O=e.CACs,g=Object(l.useContext)(uc),y=St(),C=y.Prompt,S=y.setIsPromptOpen,A=Object(l.useState)(),P=Object(c.a)(A,2),F=P[0],T=P[1],D=!0;"vista"===(null===j||void 0===j?void 0:j["rol.oc"])&&(D=!1);var R=Object(a.useQuery)(["OCdetalle",g],(function(){return Ge("OCdetalle/listar/".concat(g.id,"/").concat(f))})),k=R.data,z=R.isLoading,_=R.error,V=Object(a.useQueryClient)(),U=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OCdetalle/eliminar/".concat(g.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.cancelQueries(["OCdetalle",g]);case 2:return i=V.getQueryData(["OCdetalle",g]),n=i.filter((function(e){return e.id!==t})),V.setQueryData(["OCdetalle",g],n),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return V.setQueryData(["OCdetalle",g],i)},onSettled:function(){g.id>0&&V.invalidateQueries(["OCdetalle",g]),v()}}),M=U.mutate,Q=Object(a.useMutation)(function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,$e("OCdetalle/modificar/".concat(g.id),Object(w.a)({id:n},i,r));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(Qe.a)(Me.a.mark((function e(t){var i,n,r,o,a;return Me.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.field,n=t.id,r=t.value,e.next=3,V.cancelQueries(["OCdetalle",g]);case 3:return o=V.getQueryData(["OCdetalle",g]),a=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==n}))),[Object(ne.a)(Object(ne.a)({},o.find((function(e){return e.id===n}))),{},Object(w.a)({},i,r))]),V.setQueryData(["OCdetalle",g],a),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,i){return V.setQueryData(["OCdetalle",g],i)},onSettled:function(){g.id>0&&V.invalidateQueries(["OCdetalle",g]),v()}}),E=Q.mutate;if(z)return"Cargando...";if(_)return"Hubo un error: ".concat(_.message);var L="ARS"===h?null===m||void 0===m||null===(t=m.oc)||void 0===t?void 0:t.monto_ARS:null===m||void 0===m||null===(i=m.oc)||void 0===i?void 0:i.monto_USD,B=L+x-p,W=(p-x)/L,q=(1-(null===m||void 0===m||null===(n=m.oc)||void 0===n?void 0:n.CACbase)/gt(O,null===(r=m.oc)||void 0===r?void 0:r.fechaIni,null===(o=m.oc)||void 0===o?void 0:o.CACtipo))*B;return gt(O,null===(d=m.oc)||void 0===d?void 0:d.fechaIni,null===(s=m.oc)||void 0===s?void 0:s.CACtipo)<1&&(q=0),W||(W=0),Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:8,children:Object(N.jsx)(I.a,{align:"right",color:"textWarning",variant:"h5",children:"Total Contrato:"})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textWarning",variant:"h5",children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(L))+" "+h})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(qa,{value:W})}),Object(N.jsx)(Ce.a,{item:!0,md:8,children:Object(N.jsxs)(I.a,{align:"right",color:"textWarning",variant:"h5",children:["Saldo233","ARS"===h?" + Ajuste CAC":"",":"]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"right",color:"textWarning",variant:"h5",children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Math.round(100*Number(B))/100)+" "+h})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:["\xa0\xa0","ARS"===h?"+":"","\xa0\xa0","ARS"===h?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Math.round(100*Number(q))/100)+" "+h:""]})}),Object(N.jsxs)(Ce.a,{item:!0,md:12,children:[Object(N.jsx)(C,{message:"\xbfEliminar fila?",action:function(){return M(F)}}),Object(N.jsx)(Ft.a,{rows:k.filter((function(e){return e.moneda===h})).map((function(e){return{id:e.id,OCId:e.OCId,numero:e.numero,avance:e.numero/100,descripcion:e.descripcion,monto:e.monto,porcentaje:e.monto,moneda:e.moneda,createdAt:e.createdAt,deleteId:e.id}})),hideFooter:!0,onCellEditCommit:E,columns:Ha(D,"ARS"===h?null===m||void 0===m||null===(u=m.oc)||void 0===u?void 0:u.monto_ARS:null===m||void 0===m||null===(b=m.oc)||void 0===b?void 0:b.monto_USD,S,T),disableSelectionOnClick:!0,autoHeight:!0})]})]})})}function $a(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(ne.a)(Object(ne.a)({},e.props),{},{error:t})}var Ya=function(e,t){return[{field:"numero",headerName:"OP",width:95,editable:!1,headerAlign:"center",align:"center"},{field:"avanceARS",headerName:"Monto Contrato",width:170,hide:"USD"===t,editable:!1,sortable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"avanceUSD",headerName:"Monto Contrato",width:170,hide:"ARS"===t,sortable:!1,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"ajuste",headerName:"Mayor Costo",width:170,editable:!1,sortable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"montoOP",headerName:"Monto OP",width:140,hide:"ARS"===t,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:!1,headerAlign:"center"},{field:"cotizacion_usd",headerName:"Cambio",width:130,hide:"ARS"===t,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"estado",headerName:"Estado",width:145,hide:!1,editable:!1,headerAlign:"center",align:"center"},{field:"createdAt",headerName:"Fecha",width:140,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return lt(e.value)}},{field:"CACop",headerName:"CAC",width:110,hide:"USD"===t,editable:!1,headerAlign:"center",align:"center"},{field:"teorico",headerName:"Costo Te\xf3rico",width:170,editable:!1,hide:"USD"===t,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Math.trunc(100*t)/100))}},{field:"id",headerName:"",hide:!e,width:70,editable:!1,headerAlign:"center",align:"center",renderCell:Ja}]};function Za(e){e.OCId;var t,i,n=e.loggedUser,r=e.formOC,o=e.isLoading,a=e.error,c=e.moneda,d=e.totPagos,s=e.totAjuste,u=e.CACs,b=null===r||void 0===r?void 0:r.pago,f=Object(l.useContext)(bc),j=!1;function m(e,t){var i=0;if(e){var n;if("Construci\xf3n"===t)i=null===u||void 0===u||null===(n=u.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===n?void 0:n.definitivo;else if("Materiales"===t){var r;i=null===u||void 0===u||null===(r=u.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===r?void 0:r.materiales}else if("Mano de Obra"===t){var o;i=null===u||void 0===u||null===(o=u.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===o?void 0:o.manodeobra}if(!i){var a,c,l=new Date(e.slice(0,10)+" "+e.slice(12,5));if(l.setMonth(l.getMonth()-1),"Construci\xf3n"===t)i=null===u||void 0===u||null===(a=u.find((function(e){return e.fecha.slice(0,7)===st(l).slice(0,7)})))||void 0===a?void 0:a.definitivo;else if("Materiales"===t){var d;i=null===u||void 0===u||null===(d=u.find((function(e){return e.fecha.slice(0,7)===st(l).slice(0,7)})))||void 0===d?void 0:d.materiales}else if("Mano de Obra"===t){var s;i=null===u||void 0===u||null===(s=u.find((function(e){return e.fecha.slice(0,7)===st(l).slice(0,7)})))||void 0===s?void 0:s.manodeobra}if(!i)if(l.setMonth(l.getMonth()-1),"Construci\xf3n"===t)i=null===u||void 0===u||null===(c=u.find((function(e){return e.fecha.slice(0,7)===st(l).slice(0,7)})))||void 0===c?void 0:c.definitivo;else if("Materiales"===t){var b;i=null===u||void 0===u||null===(b=u.find((function(e){return e.fecha.slice(0,7)===st(l).slice(0,7)})))||void 0===b?void 0:b.materiales}else if("Mano de Obra"===t){var f;i=null===u||void 0===u||null===(f=u.find((function(e){return e.fecha.slice(0,7)===st(l).slice(0,7)})))||void 0===f?void 0:f.manodeobra}}}return i}if("no"!==(null===n||void 0===n?void 0:n["rol.op"])&&(j=!0),o)return"Cargando...";if(a)return"Hubo un error: ".concat(a.message);var v=s/("ARS"===c?null===r||void 0===r||null===(t=r.oc)||void 0===t?void 0:t.monto_ARS:null===r||void 0===r||null===(i=r.oc)||void 0===i?void 0:i.monto_USD);return v||(v=0),Object(N.jsx)("div",{style:{width:"100%"},children:Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h6"})}),Object(N.jsx)(Ce.a,{item:!0,md:7,children:Object(N.jsxs)(I.a,{align:"right",color:"textWarning",variant:"h5",children:["Monto Contrato (netos):\xa0\xa0\xa0\xa0\xa0\xa0 ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(d-s))+" "+c]})}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsxs)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:["Mayores Costos:\xa0\xa0\xa0\xa0\xa0\xa0 ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(s))+" "+c]})}),Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(qa,{value:v})}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(Ft.a,{rows:b.filter((function(e){return e.OC_moneda===c})).map((function(e){var t,i,o,a,c,l,d;return{id:e.id,numero:e.numero,fideicomisoId:e.fideicomisoId,montoOP:e.monto-e.ajuste,cotizacion_usd:e.cotizacion_usd,avanceARS:e.monto-e.ajuste,avanceUSD:"ARS"===e.moneda?(e.monto-e.ajuste)/e.cotizacion_usd:e.monto-e.ajuste,moneda:e.moneda,ajuste:e.ajuste,estadoOP:e.estadoOP,estado:null===f||void 0===f||null===(t=f.find((function(t){return t.id===e.estadoOP})))||void 0===t?void 0:t.descripcion,createdAt:e.createdAt,CACop:m(null===e||void 0===e?void 0:e.createdAt,null===(i=r.oc)||void 0===i?void 0:i.CACtipo),teorico:(1-(null===r||void 0===r||null===(o=r.oc)||void 0===o?void 0:o.CACbase)/m(null===e||void 0===e?void 0:e.createdAt,null===(a=r.oc)||void 0===a?void 0:a.CACtipo))*(e.monto-e.ajuste),confirmada:e.confirmada,blue:e.blue,authADM:e.authADM,authOBRA:e.authOBRA,rol:null===n||void 0===n?void 0:n["rol.descripcion"],empresaId:null===r||void 0===r||null===(c=r.oc)||void 0===c?void 0:c.empresaId,fideicomiso:null===r||void 0===r||null===(l=r.oc)||void 0===l||null===(d=l.fideicomisos[0])||void 0===d?void 0:d.nombre}})),hideFooter:!0,columns:Ya(j,c),disableSelectionOnClick:!0,autoHeight:!0})})]})})}function Ja(e){var t="../../op/".concat(e.row.id,"/").concat(e.row.createdAt,"/").concat(e.row.empresaId,"/").concat(e.row.numero,"/").concat(e.row.fideicomisoId,"/").concat(e.row.fideicomiso,"/").concat(e.row.estadoOP,"/").concat(e.row.authADM,"/").concat(e.row.authOBRA,"/").concat(e.row.confirmada,"/").concat(e.row.blue,"/OP Detalle");return 0===e.row.blue||"manager"===e.row.rol?Object(N.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(N.jsx)("span",{children:"ver"})}):""}function Ka(e){var t=e.OCId,i=e.idSociety,n=e.loggedUser,r=e.formOC,o=e.isLoading,a=e.error,c=e.refetch,l=e.totPagosARS,d=e.totPagosUSD,s=e.totAjusteARS,u=e.totAjusteUSD,b=e.moneda,f=e.setMoneda,j=e.CACs,m="vista"===(null===n||void 0===n?void 0:n["rol.oc"]);return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(Ni.a,{value:b,children:[Object(N.jsx)(P.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(N.jsxs)(ki.a,{onChange:function(e,t){f(t)},"aria-label":"lab API tabs example",children:[Object(N.jsx)(_i.a,{label:"Pesos",value:"ARS"}),Object(N.jsx)(_i.a,{label:"Dolares",value:"USD"})]})}),Object(N.jsxs)(zi.a,{value:"ARS",children:[Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ma,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,moneda:"ARS"})}),Object(N.jsx)(wi.a,{smUp:m,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Qa,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,moneda:"ARS"})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ga,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,totPagos:l,totAjuste:s,moneda:"ARS",CACs:j})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Za,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,totPagos:l,totAjuste:s,moneda:"ARS",CACs:j})})]}),Object(N.jsxs)(zi.a,{value:"USD",children:[Object(N.jsx)(wi.a,{smUp:m,children:Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Qa,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,moneda:"USD"})})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ga,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,totPagos:d,totAjuste:u,moneda:"USD",CACs:j})}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Za,{OCId:t,idSociety:i,loggedUser:n,formOC:r,isLoading:o,error:a,refetch:c,totPagos:d,totAjuste:u,moneda:"USD"})})]})]})})}var Xa=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"10%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"60%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col3:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),ec=function(e){var t=e.dataOC,i=e.color,n=e.moneda;return t.item.filter((function(e){return e.moneda===n})).map((function(e,t){return Object(N.jsxs)(Nn.View,{style:[Xa.row,{borderBottomColor:i}],children:[Object(N.jsxs)(Nn.Text,{style:[Xa.col1,{borderRightColor:i}],children:[" ",e.numero]},"col_x"+t),Object(N.jsxs)(Nn.Text,{style:[Xa.col2,{borderRightColor:i}],children:[" ",e.descripcion]},"col_y"+t),Object(N.jsxs)(Nn.Text,{style:[Xa.col3,{borderRightColor:i}],children:[" ",lt(e.createdAt)]},"col_z"+t),Object(N.jsx)(Nn.Text,{style:Xa.col4,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.monto))},"col_w"+t)]},"row"+e.numero+t)}))},tc=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"10%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"60%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col3:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),ic=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h,p,x,O,g=e.dataOC,y=e.moneda;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:g?null===g||void 0===g||null===(t=g.oc)||void 0===t||null===(i=t.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"},children:[Object(N.jsxs)(Nn.View,{style:[tc.container,{borderBottomColor:g?null===g||void 0===g||null===(n=g.oc)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",backgroundColor:(null===g||void 0===g?void 0:g.oc)?null===g||void 0===g||null===(o=g.oc)||void 0===o||null===(a=o.fideicomisos[0])||void 0===a?void 0:a.color2:"#ffffff"}],children:[Object(N.jsx)(Nn.Text,{style:[tc.col1,{borderRightColor:g?null===g||void 0===g||null===(c=g.oc)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Num"}),Object(N.jsx)(Nn.Text,{style:[tc.col2,{borderRightColor:g?null===g||void 0===g||null===(d=g.oc)||void 0===d||null===(s=d.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:"Tarea"}),Object(N.jsx)(Nn.Text,{style:[tc.col3,{borderRightColor:g?null===g||void 0===g||null===(u=g.oc)||void 0===u||null===(b=u.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:"Fecha"}),Object(N.jsx)(Nn.Text,{style:[tc.col4,{borderRightColor:g?null===g||void 0===g||null===(f=g.oc)||void 0===f||null===(j=f.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:"Monto"})]}),Object(N.jsx)(ec,{dataOC:g,color:g?null===g||void 0===g||null===(m=g.oc)||void 0===m||null===(v=m.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff",moneda:y}),Object(N.jsxs)(Nn.View,{style:tc.rowf,children:[Object(N.jsx)(Nn.Text,{style:[tc.descriptionf,{borderRightColor:(null===g||void 0===g?void 0:g.oc)?null===g||void 0===g||null===(h=g.oc)||void 0===h||null===(p=h.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:"TOTAL"}),Object(N.jsx)(Nn.Text,{style:tc.col4,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===y?null===g||void 0===g||null===(x=g.oc)||void 0===x?void 0:x.monto_ARS:null===g||void 0===g||null===(O=g.oc)||void 0===O?void 0:O.monto_USD))})]})]})},nc=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"35%",textAlign:"right",borderRightWidth:1,paddingRight:5},col3:{width:"35%",borderRightWidth:1,textAlign:"right",paddingRight:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),rc=function(e){var t=e.dataOC,i=e.color,n=e.moneda;return t.pago.filter((function(e){return e.OC_moneda===n})).map((function(e,t){return Object(N.jsxs)(Nn.View,{style:[nc.row,{borderBottomColor:i}],children:[Object(N.jsxs)(Nn.Text,{style:[nc.col1,{borderRightColor:i}],children:[" ",e.numero]},"col_a"+t),Object(N.jsxs)(Nn.Text,{style:[nc.col2,{borderRightColor:i}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===n?e.monto-e.ajuste:"ARS"===e.moneda?(e.monto-e.ajuste)/e.cotizacion_usd:e.monto-e.ajuste))]},"col_b"+t),Object(N.jsxs)(Nn.Text,{style:[nc.col3,{borderRightColor:i}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.ajuste))]},"col_c"+t),Object(N.jsx)(Nn.Text,{style:nc.col4,children:lt(e.createdAt)},"col_d"+t)]},"row"+e.numero+t)}))},oc=Nn.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"35%",textAlign:"right",borderRightWidth:1,paddingRight:5},col3:{width:"35%",borderRightWidth:1,textAlign:"right",paddingRight:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"15%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"35%",textAlign:"right",paddingRight:8}}),ac=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h,p,x=e.dataOC,O=e.moneda,g=e.totARS,y=e.totUSD,w=e.ajARS,C=e.ajUSD;return Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:x?null===x||void 0===x||null===(t=x.oc)||void 0===t||null===(i=t.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"},children:[Object(N.jsxs)(Nn.View,{style:[oc.container,{borderBottomColor:x?null===x||void 0===x||null===(n=x.oc)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",backgroundColor:(null===x||void 0===x?void 0:x.oc)?null===x||void 0===x||null===(o=x.oc)||void 0===o||null===(a=o.fideicomisos[0])||void 0===a?void 0:a.color2:"#ffffff"}],children:[Object(N.jsx)(Nn.Text,{style:[oc.col1,{borderRightColor:x?null===x||void 0===x||null===(c=x.oc)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Num"}),Object(N.jsx)(Nn.Text,{style:[oc.col2,{borderRightColor:x?null===x||void 0===x||null===(d=x.oc)||void 0===d||null===(s=d.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:"Monto Contrato"}),Object(N.jsx)(Nn.Text,{style:[oc.col3,{borderRightColor:x?null===x||void 0===x||null===(u=x.oc)||void 0===u||null===(b=u.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:"Mayor Costo"}),Object(N.jsx)(Nn.Text,{style:[oc.col4,{borderRightColor:x?null===x||void 0===x||null===(f=x.oc)||void 0===f||null===(j=f.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:"Fecha"})]}),Object(N.jsx)(rc,{dataOC:x,color:x?null===x||void 0===x||null===(m=x.oc)||void 0===m||null===(v=m.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff",moneda:O}),Object(N.jsxs)(Nn.View,{style:oc.rowf,children:[Object(N.jsx)(Nn.Text,{style:[oc.col1,{borderRightColor:(null===x||void 0===x?void 0:x.oc)?null===x||void 0===x||null===(h=x.oc)||void 0===h||null===(p=h.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:"TOTALES"}),Object(N.jsx)(Nn.Text,{style:oc.col2,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===O?g-w:y-C))}),Object(N.jsx)(Nn.Text,{style:oc.col3,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===O?w:C))}),Object(N.jsx)(Nn.Text,{style:oc.col4,children:" "})]})]})},cc=Nn.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:14,textAlign:"left",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),lc=function(e){var t,i,n,r,o,a,c,l,d,s,u,b,f,j,m,v,h=e.dataOC,p=e.apiServerUrl,x=e.idSociedad,O=e.moneda,g=e.totARS,y=e.totUSD,w=e.ajARS,C=e.ajUSD;return Object(N.jsx)(Nn.Document,{children:Object(N.jsxs)(Nn.Page,{size:"A4",style:cc.page,children:[Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:cc.saltolinea,children:" "})}),Object(N.jsxs)(Nn.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"},children:[Object(N.jsx)(Nn.Text,{style:[cc.reportTitleFide,{width:(null===h||void 0===h?void 0:h.oc)?100-(null===h||void 0===h||null===(t=h.oc)||void 0===t||null===(i=t.fideicomisos[0])||void 0===i?void 0:i.ancho_logo)+"%":"75%",color:null===h||void 0===h||null===(n=h.oc)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.color}],children:null===h||void 0===h||null===(o=h.oc)||void 0===o||null===(a=o.fideicomisos[0])||void 0===a?void 0:a.titulo}),Object(N.jsx)(Nn.View,{style:{width:h?"80%":"25%"},children:Object(N.jsx)(Nn.Image,{style:[cc.logo,{backgroundColor:(null===h||void 0===h?void 0:h.oc)?null===h||void 0===h||null===(c=h.oc)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l?void 0:l.color3:"#FFFFFF"}],src:{uri:"".concat(p,"/sociedades/").concat(x,"/").concat((null===h||void 0===h?void 0:h.oc)?null===h||void 0===h||null===(d=h.oc)||void 0===d||null===(s=d.fideicomisos[0])||void 0===s?void 0:s.logo:"logo.png"),method:"GET",body:""}})})]}),Object(N.jsxs)(Nn.View,{style:cc.invoiceDateContainer,children:[Object(N.jsx)(Nn.Text,{style:cc.label,children:"Fecha: "}),Object(N.jsx)(Nn.Text,{children:lt(null===h||void 0===h||null===(u=h.oc)||void 0===u?void 0:u.createdAt)})]}),Object(N.jsx)(Nn.View,{style:cc.titleContainer,children:Object(N.jsxs)(Nn.Text,{style:cc.reportTitle,children:["ORDEN DE COMPRA N\xba ",null===h||void 0===h||null===(b=h.oc)||void 0===b?void 0:b.id]})}),Object(N.jsx)(Nn.View,{style:cc.titleContainer,children:Object(N.jsxs)(Nn.Text,{style:cc.subreportTitle,children:["Raz\xf3n social: ",null===h||void 0===h||null===(f=h.oc)||void 0===f||null===(j=f.empresas[0])||void 0===j?void 0:j.razonSocial]})}),Object(N.jsx)(Nn.View,{style:cc.titleContainer,children:Object(N.jsxs)(Nn.Text,{style:cc.subreportTitle,children:["Monto total: ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===O?null===h||void 0===h||null===(m=h.oc)||void 0===m?void 0:m.monto_ARS:null===h||void 0===h||null===(v=h.oc)||void 0===v?void 0:v.monto_USD)),"  ","ARS"===O?"pesos":"dolares"]})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:cc.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:cc.subreportTitle,children:"TAREAS"})}),Object(N.jsx)(ic,{dataOC:h,moneda:O}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:cc.saltolinea,children:" "})}),Object(N.jsx)(Nn.View,{children:Object(N.jsx)(Nn.Text,{style:cc.subreportTitle,children:"PAGOS"})}),Object(N.jsx)(ac,{dataOC:h,moneda:O,totARS:g,totUSD:y,ajARS:w,ajUSD:C})]})})},dc="http://104.131.28.211:3000/";function sc(e){var t,i,n,r,o,l,u,b=e.idSociety,f=e.loggedUser,j=Object(a.useQuery)(["CACs",b],(function(){return Ge("CAC/listar/".concat(b.id))})).data,m=Object(s.j)().idOC,v=d.a.useState(!1),h=Object(c.a)(v,2),p=h[0],x=h[1];var O=Object(a.useQuery)(["formOC",b.id],(function(){return Ge("oc/mostrarConDetalle/".concat(b.id,"/").concat(m))})),g=O.data,y=O.isLoading,w=O.error,C=O.refetch,S=d.a.useState("ARS"),A=Object(c.a)(S,2),F=A[0],T=A[1];if(y)return"Cargando...";if(w)return"Hubo un error: ".concat(w.message);for(var D=0,R=0,k=0,z=0,_=0;_<(null===g||void 0===g?void 0:g.pago.length);_++)"ARS"===(null===g||void 0===g?void 0:g.pago[_].OC_moneda)?(D+=parseFloat(null===g||void 0===g?void 0:g.pago[_].monto),k+=parseFloat((null===g||void 0===g?void 0:g.pago[_].ajuste)?null===g||void 0===g?void 0:g.pago[_].ajuste:0)):"ARS"===(null===g||void 0===g?void 0:g.pago[_].moneda)?(R+=parseFloat(null===g||void 0===g?void 0:g.pago[_].monto)/parseFloat(null===g||void 0===g?void 0:g.pago[_].cotizacion_usd),z+=parseFloat((null===g||void 0===g?void 0:g.pago[_].ajuste)?null===g||void 0===g?void 0:g.pago[_].ajuste:0)/parseFloat(null===g||void 0===g?void 0:g.pago[_].cotizacion_usd)):(R+=parseFloat(null===g||void 0===g?void 0:g.pago[_].monto),z+=parseFloat((null===g||void 0===g?void 0:g.pago[_].ajuste)?null===g||void 0===g?void 0:g.pago[_].ajuste:0));return Object(N.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(N.jsx)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:Object(N.jsxs)(P.a,{mt:2,sx:{pt:1},children:[Object(N.jsx)(ae.a,{onClick:function(){x(!p)},children:p?"Ocultar PDF":"Ver PDF"}),Object(N.jsx)(Nn.PDFDownloadLink,{document:!1===y?Object(N.jsx)(lc,{dataOC:g,moneda:F,totARS:D,totUSD:R,ajARS:k,ajUSD:z,idSociedad:b.id,apiServerUrl:dc}):null,fileName:function(e){var t,i,n,r,o;return(null===e||void 0===e||null===(t=e.oc)||void 0===t?void 0:t.id)+" OP -"+(null===e||void 0===e||null===(i=e.oc)||void 0===i||null===(n=i.fideicomisos[0])||void 0===n?void 0:n.nombre)+"-"+(null===e||void 0===e||null===(r=e.oc)||void 0===r||null===(o=r.empresas[0])||void 0===o?void 0:o.razonSocial)+".pdf"}(g),children:Object(N.jsx)(ae.a,{variant:"info",children:"Descargar"})})]})}),Object(N.jsx)(N.Fragment,{children:p?Object(N.jsx)(Nn.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(N.jsx)(lc,{dataOC:g,moneda:F,totARS:D,totUSD:R,ajARS:k,ajUSD:z,idSociedad:b.id,apiServerUrl:dc})}):Object(N.jsxs)(we.a,{children:[Object(N.jsxs)(P.a,{sx:{pt:3},children:[Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:2,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:"Orden de Compra:"})}),Object(N.jsx)(Ce.a,{item:!0,md:7,children:Object(N.jsxs)(I.a,{align:"left",color:"textPrimary",variant:"h4",children:[null===g||void 0===g||null===(t=g.oc)||void 0===t?void 0:t.id,"\xa0\xa0\xa0|\xa0\xa0\xa0Razon Social: ",null===g||void 0===g||null===(i=g.oc)||void 0===i||null===(n=i.empresas[0])||void 0===n?void 0:n.razonSocial,"\xa0\xa0\xa0-\xa0\xa0\xa0",null===g||void 0===g||null===(r=g.oc)||void 0===r||null===(o=r.fideicomisos[0])||void 0===o?void 0:o.nombre]})}),Object(N.jsx)(Ce.a,{item:!0,md:3,children:Object(N.jsx)(I.a,{align:"right",color:"textPrimary",variant:"h5",children:dt(null===g||void 0===g||null===(l=g.oc)||void 0===l?void 0:l.createdAt)})})]}),Object(N.jsxs)(Ce.a,{container:!0,spacing:{xs:1.5,md:2},columns:{xs:4,sm:8,md:12},children:[Object(N.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(N.jsx)(Ce.a,{item:!0,md:12,children:Object(N.jsx)(I.a,{align:"left",color:"textPrimary",variant:"h5",children:null===g||void 0===g||null===(u=g.oc)||void 0===u?void 0:u.descripcion1})})]})]}),Object(N.jsx)(P.a,{sx:{pt:3},children:Object(N.jsx)(Ka,{OCId:m,idSociety:b,loggedUser:f,formOC:g,isLoading:y,error:w,totPagosARS:D,totPagosUSD:R,totAjusteARS:k,totAjusteUSD:z,moneda:F,setMoneda:T,CACs:j,refetch:C})})]})})]})}var uc=Object(l.createContext)({}),bc=Object(l.createContext)({}),fc=Object(l.createContext)({}),jc=Object(l.createContext)({}),mc=Object(l.createContext)({}),vc=Object(l.createContext)({}),hc=Object(l.createContext)({}),pc=Object(l.createContext)({}),xc=Object(l.createContext)({}),Oc=Object(l.createContext)({}),gc=Object(l.createContext)({}),yc=Object(l.createContext)({}),wc=Object(l.createContext)({}),Cc=Object(l.createContext)({}),Sc=Object(l.createContext)({});function Ac(){var e=function(){var e=Object(l.useState)((function(){var e=localStorage.getItem("loggedUserInfo");return e?JSON.parse(e):null})),t=Object(c.a)(e,2),i=t[0],n=t[1];return Object(l.useEffect)((function(){localStorage.setItem("loggedUserInfo",JSON.stringify(i))}),[i]),{loggedUser:i,setLoggedUser:n}}(),t=e.loggedUser,i=e.setLoggedUser,n=Object(l.useState)((function(){var e=localStorage.getItem("idSociety");return e?JSON.parse(e):null})),r=Object(c.a)(n,2),o=r[0],d=r[1],u=Object(a.useQuery)(["estados",o],(function(){return Ge("listas/listarEstados/".concat(o.id))})).data,b=Object(a.useQuery)(["estadosPago",o],(function(){return Ge("listas/listarEstadosPago/".concat(o.id))})).data,j=Object(a.useQuery)(["formaCobros",o],(function(){return Ge("listas/listarFormaCobros/".concat(o.id))})).data,m=Object(a.useQuery)(["formaPagos",o],(function(){return Ge("listas/listarFormaPagos/".concat(o.id))})).data,v=Object(a.useQuery)(["formaPagosFidu",o],(function(){return Ge("listas/listarFormaPagosFidu/".concat(o.id))})).data,p=Object(a.useQuery)(["retenciones",o],(function(){return Ge("listas/listarRetenciones/".concat(o.id))})).data,x=Object(a.useQuery)(["fondos",o],(function(){return Ge("listas/listarFondos/".concat(o.id))})).data,O=Object(a.useQuery)(["tipos",o],(function(){return Ge("listas/listarTipos/".concat(o.id))})).data,g=Object(a.useQuery)(["condicion_de_IVA",o],(function(){return Ge("listas/listarCondicion_de_IVA/".concat(o.id))})).data,w=Object(a.useQuery)(["tipoProductos",o],(function(){return Ge("listas/listarTipoProductos/".concat(o.id))})).data,C=Object(a.useQuery)(["letras",o],(function(){return Ge("listas/listarLetras/".concat(o.id))})).data,S=Object(a.useQuery)(["categoriaCombo",o],(function(){return Ge("categoria/listarCombo/".concat(o.id))})).data,A=Object(a.useQuery)(["conceptosCuota",o],(function(){return Ge("listas/conceptosCuota/".concat(o.id))})).data,I=Object(a.useQuery)(["conceptosPago",o],(function(){return Ge("listas/conceptosPago/".concat(o.id))})).data;return Object(N.jsx)(uc.Provider,{value:o,children:Object(N.jsx)(bc.Provider,{value:u,children:Object(N.jsx)(fc.Provider,{value:b,children:Object(N.jsx)(jc.Provider,{value:j,children:Object(N.jsx)(vc.Provider,{value:v,children:Object(N.jsx)(mc.Provider,{value:m,children:Object(N.jsx)(hc.Provider,{value:p,children:Object(N.jsx)(pc.Provider,{value:x,children:Object(N.jsx)(xc.Provider,{value:O,children:Object(N.jsx)(Oc.Provider,{value:g,children:Object(N.jsx)(gc.Provider,{value:A,children:Object(N.jsx)(yc.Provider,{value:I,children:Object(N.jsx)(wc.Provider,{value:w,children:Object(N.jsx)(Cc.Provider,{value:C,children:Object(N.jsx)(Sc.Provider,{value:S,children:Object(N.jsxs)(f.a,{theme:y,children:[Object(N.jsx)(h,{}),Object(N.jsx)(s.e,{children:t?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)(s.c,{path:"/",element:Object(N.jsx)(s.a,{to:"".concat(null===o||void 0===o?void 0:o.nombre)})}),Object(N.jsxs)(s.c,{path:":societyName",element:Object(N.jsx)(me,{setLoggedUser:i,idSociety:o,loggedUser:t}),children:[Object(N.jsx)(s.c,{path:"dashboard",element:Object(N.jsx)(Ve,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:"dolar",element:Object(N.jsx)(zt,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:"cac",element:Object(N.jsx)(Qt,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:"usuarios",element:Object(N.jsx)(yi,{idSociety:o,loggedUser:t})}),Object(N.jsxs)(s.c,{path:"rubro",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(Ht,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idRubro/:rubro",element:Object(N.jsx)(ii,{idSociety:o,loggedUser:t})})]}),Object(N.jsxs)(s.c,{path:"contrato",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(Rn,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":contratoId/:page",element:Object(N.jsx)(Er,{idSociety:o,loggedUser:t})})]}),Object(N.jsx)(s.c,{path:"cobros",element:Object(N.jsx)(er,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:"cuotas",element:Object(N.jsx)(tr,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:"categoria",element:Object(N.jsx)(Jt,{idSociety:o,loggedUser:t})}),Object(N.jsxs)(s.c,{path:"OC",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(Ua,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idOC/:page",element:Object(N.jsx)(sc,{idSociety:o,loggedUser:t})})]}),Object(N.jsx)(s.c,{path:"fiduciantes",element:Object(N.jsx)(Li,{idSociety:o,loggedUser:t})}),Object(N.jsxs)(s.c,{path:"fideicomiso",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(Zi,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":fideicomisoId/:nombre",element:Object(N.jsx)(rn,{idSociety:o,loggedUser:t})})]}),Object(N.jsxs)(s.c,{path:"factura",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(Pa,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomisoId/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(N.jsx)(ba,{idSociety:o,formaPagos:m,loggedUser:t})})]}),Object(N.jsxs)(s.c,{path:"OP",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(No,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomisoId/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(N.jsx)(ba,{idSociety:o,formaPagos:m,loggedUser:t})})]}),Object(N.jsxs)(s.c,{path:"AuthAdmOP",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(Wo,{idSociety:o,formaPagos:m,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomisoId/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(N.jsx)(ba,{idSociety:o,loggedUser:t})})]}),Object(N.jsxs)(s.c,{path:"AuthObraOP",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(qo,{idSociety:o,formaPagos:m,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomisoId/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(N.jsx)(ba,{idSociety:o,loggedUser:t})})]}),Object(N.jsx)(s.c,{path:"proveedores",element:Object(N.jsx)(Ri,{idSociety:o,loggedUser:t})}),Object(N.jsxs)(s.c,{path:"banco",children:[Object(N.jsx)(s.c,{path:"",element:Object(N.jsx)(li,{idSociety:o,loggedUser:t})}),Object(N.jsx)(s.c,{path:":idBanco/:banco",element:Object(N.jsx)(fi,{idSociety:o,loggedUser:t})})]}),Object(N.jsx)(s.c,{path:"*",element:Object(N.jsx)(it,{})})]})]}):Object(N.jsxs)(ge,{children:[Object(N.jsx)(s.c,{path:":societyName/login",element:Object(N.jsx)(Ze,{setLoggedUser:i,setIdSociety:d})}),Object(N.jsx)(s.c,{path:":societyName",element:Object(N.jsx)(s.a,{to:"login"})}),Object(N.jsx)(s.c,{path:"*",element:Object(N.jsx)(s.a,{to:"/"})})]})})]})})})})})})})})})})})})})})})})}b.a.config();var Ic=new a.QueryClient;r.a.render(Object(N.jsx)(o.a,{children:Object(N.jsx)(a.QueryClientProvider,{client:Ic,children:Object(N.jsx)(Ac,{})})}),document.getElementById("root"))},742:function(e,t){},744:function(e,t){},774:function(e,t){},775:function(e,t){},886:function(e,t){}},[[1056,1,2]]]);
//# sourceMappingURL=main.c49fec2f.chunk.js.map