(this.webpackJsonptsf=this.webpackJsonptsf||[]).push([[0],{1031:function(e,t,n){"use strict";n.r(t);var r=n(43),i=n.n(r),o=n(34),a=n(12),c=n(6),l=n(1),d=n.n(l),s=n(41),u=n(618),b=n.n(u),f=n(1202),j=n(1154),m=n(1113),v=Object(j.a)((function(){return Object(m.a)({"@global":{"*":{boxSizing:"border-box",margin:0,padding:0},html:{"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale",height:"100%",width:"100%"},body:{backgroundColor:"#f4f6f8",height:"100%",width:"100%"},a:{textDecoration:"none"},"#root":{height:"100%",width:"100%"}}})})),h=function(){return v(),null},p=n(643),O=n(25),x=["none","0 0 0 1px rgba(63,63,68,0.05), 0 1px 2px 0 rgba(63,63,68,0.15)","0 0 1px 0 rgba(0,0,0,0.31), 0 2px 2px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 3px 4px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 6px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 4px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 5px 8px -2px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 12px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 6px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 7px 16px -4px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 8px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 9px 18px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 10px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 11px 20px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 12px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 13px 22px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 14px 24px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 16px 28px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 18px 30px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 20px 32px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 22px 34px -8px rgba(0,0,0,0.25)","0 0 1px 0 rgba(0,0,0,0.31), 0 24px 36px -8px rgba(0,0,0,0.25)"],g={h1:{fontWeight:500,fontSize:35,letterSpacing:"-0.24px"},h2:{fontWeight:500,fontSize:29,letterSpacing:"-0.24px"},h3:{fontWeight:500,fontSize:24,letterSpacing:"-0.06px"},h4:{fontWeight:500,fontSize:20,letterSpacing:"-0.06px"},h5:{fontWeight:500,fontSize:16,letterSpacing:"-0.05px"},h6:{fontWeight:500,fontSize:14,letterSpacing:"-0.05px"},overline:{fontWeight:500}},y=Object(p.a)({palette:{background:{default:"#F4F6F8",paper:O.a.common.white},primary:{contrastText:"#ffffff",main:"#5664d2"},text:{primary:"#172b4d",secondary:"#6b778c"}},shadows:x,typography:g}),w=n(4),C=n(1132),S=n(1169),P=n(1170),A=n(238),I=n(1171),F=n(1172),D=n(1165),R=n(1126),T=n(1127),k=n(0),N=function(e){var t=e.idSociety;return Object(k.jsx)("img",{alt:"Logo",height:"60px",src:"".concat("http://104.131.28.211:3000/","public/").concat(null===t||void 0===t?void 0:t.logo)})},Q=n(1114),z=n(1116),U=n(1117),M=n(1118),E=n(1119),_=n(1120),V=n(1121),L=n(1122),B=n(1123),q=n(1124),W=n(625),H=n.n(W),G=n(623),$=n.n(G),Y=n(622),K=n.n(Y),Z=n(624),J=n.n(Z),X=[{path:"op",icon:Q.a,title:"OPs",acceso:"oppago"},{path:"AuthAdmOP",icon:Q.a,title:"OPs Auth ADM",acceso:"AuthAdmOP"},{path:"AuthObraOP",icon:Q.a,title:"OPs Auth Obra",acceso:"AuthObraOP"},{path:"factura",icon:z.a,title:"Facturas",acceso:"factura"},{path:"OC",icon:U.a,title:"OCs",acceso:"orden_compra"},{path:"contrato",icon:K.a,title:"Contratos",acceso:"contrato"},{path:"cuotas",icon:$.a,title:"Cuotas",acceso:"cuotas"},{path:"cobros",icon:J.a,title:"Cobros",acceso:"cobros"},{path:"proveedores",icon:M.a,title:"Proveedores",acceso:"proveedores"},{path:"fideicomiso",icon:E.a,title:"Fideicomisos",acceso:"fideicomiso"},{path:"fiduciantes",icon:_.a,title:"Fiduciantes",acceso:"fiduciante"},{path:"banco",icon:V.a,title:"Bancos",acceso:"banco"},{path:"cac",icon:L.a,title:"CAC",acceso:"cac"},{path:"categoria",icon:H.a,title:"Categoria",acceso:"categoria"},{path:"dolar",icon:V.a,title:"D\xf3lar",acceso:"dolar"},{path:"rubro",icon:B.a,title:"Rubros",acceso:"rubro"},{path:"usuarios",icon:q.a,title:"Usuarios",acceso:"usuarios"}];function ee(e){var t,n=e.setisMobileNavOpen,r=e.setLoggedUser,i=e.idSociety,a=e.loggedUser,c={avatar:"/static/images/avatars/"+a.avatar},l=Object(s.i)(),d=Object(s.h)().pathname,u=d.split("/")[d.split("/").length-1];a||f();var b=(null===(t=X.find((function(e){return e.path===u})))||void 0===t?void 0:t.title)||u;function f(){r(null),l("../".concat(null===i||void 0===i?void 0:i.nombre))}return Object(k.jsx)(S.a,{elevation:0,children:Object(k.jsxs)(P.a,{children:[Object(k.jsx)(o.b,{to:"DashBoard",children:Object(k.jsx)(N,{idSociety:i})}),Object(k.jsx)("div",{style:{marginLeft:50,fontSize:24},children:Object(k.jsx)(A.a,{align:"left",color:"white",variant:"h4",children:b.replace("-"," de ").replace("%20"," ").replace("%20"," ").replace("%20"," ").replace("_",": ")})}),Object(k.jsx)(I.a,{sx:{flexGrow:1}}),Object(k.jsx)("div",{children:Object(k.jsx)(A.a,{align:"left",color:"white",variant:"h4",children:null===a||void 0===a?void 0:a.user})}),Object(k.jsx)(F.a,{color:"inherit",children:Object(k.jsx)(D.a,{component:o.b,to:"/",src:c.avatar,sx:{cursor:"pointer",width:30,height:30}})}),Object(k.jsx)(F.a,{color:"inherit",sx:{display:{md:"block",lg:"none"}},onClick:n,children:Object(k.jsx)(R.a,{})}),Object(k.jsx)(F.a,{color:"inherit",onClick:f,children:Object(k.jsx)(T.a,{})})]})})}var te=n(1175),ne=n(1176),re=n(9),ie=n(309),oe=n(1166),ae=n(1174),ce=["href","icon","title"];function le(e){var t=e.href,n=e.icon,r=e.title,i=Object(ie.a)(e,ce),a=Object(s.h)(),c=!!t&&!!Object(s.f)({path:t,end:!1},a.pathname);return Object(k.jsx)(oe.a,Object(re.a)(Object(re.a)({disableGutters:!0,sx:{display:"flex",py:0}},i),{},{children:Object(k.jsxs)(ae.a,{component:o.c,sx:Object(re.a)(Object(re.a)({color:"text.secondary",fontWeight:"medium",justifyContent:"flex-start",letterSpacing:0,py:1.25,textTransform:"none",width:"100%"},c&&{color:"primary.main"}),{},{"& svg":{mr:1}}),to:t,children:[n&&Object(k.jsx)(n,{size:"20"}),Object(k.jsx)("span",{children:r})]})}))}function de(e){var t=e.setisMobileNavOpen,n=e.setLoggedUser,r=e.isMobileNavOpen,i=e.idSociety,o=e.loggedUser,a=Object(s.i)();o||(n(null),a("../".concat(null===i||void 0===i?void 0:i.nombre)));var c=Object(k.jsx)(I.a,{sx:{display:"flex",flexDirection:"column",height:"100%",p:2},children:Object(k.jsx)(te.a,{children:se(X,null===o||void 0===o?void 0:o["rol.accesoTXT"]).map((function(e){return Object(k.jsx)(le,{href:"/".concat(null===i||void 0===i?void 0:i.nombre,"/").concat(e.path),title:e.title,icon:e.icon},e.title)}))})});return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ne.a,{variant:"temporary",sx:{display:{xs:"block",lg:"none"}},anchor:"left",onClose:t,open:r,PaperProps:{sx:{width:256}},children:c}),Object(k.jsx)(ne.a,{variant:"persistent",open:!0,sx:{display:{xs:"none",lg:"block"}},anchor:"left",PaperProps:{sx:{width:256,top:64,height:"calc(100% - 64px)"}},children:c})]})}function se(e,t){var n=[{}];return e.forEach((function(e){-1!==t.indexOf(e.acceso)&&""!==e.acceso.trim()&&null!==e.acceso&&void 0!==e.acceso&&n.push(e)})),n.splice(0,1),n}var ue=Object(C.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.default,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),be=Object(C.a)("div")((function(e){var t=e.theme;return Object(w.a)({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64},t.breakpoints.up("lg"),{paddingLeft:256})})),fe=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),je=Object(C.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"});function me(e){var t=e.setLoggedUser,n=e.idSociety,r=e.loggedUser,i=Object(s.i)();r||(t(null),i("../".concat(null===n||void 0===n?void 0:n.nombre)));var o=Object(l.useState)(!1),a=Object(c.a)(o,2),d=a[0],u=a[1];return Object(k.jsxs)(ue,{children:[Object(k.jsx)(ee,{setisMobileNavOpen:function(){return u(!d)},setLoggedUser:t,idSociety:n,loggedUser:r}),Object(k.jsx)(de,{idSociety:n,loggedUser:r,setisMobileNavOpen:function(){return u(!d)},isMobileNavOpen:d}),Object(k.jsx)(be,{children:Object(k.jsx)(fe,{children:Object(k.jsx)(je,{children:Object(k.jsx)(s.b,{})})})})]})}var ve=function(e){return Object(k.jsx)(S.a,Object(re.a)(Object(re.a)({elevation:0},e),{},{children:Object(k.jsx)(P.a,{sx:{height:64},children:Object(k.jsx)(o.b,{to:"/",children:Object(k.jsx)(N,{})})})}))},he=Object(C.a)("div")((function(e){return{backgroundColor:e.theme.palette.background.paper,display:"flex",height:"100%",overflow:"hidden",width:"100%"}})),pe=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden",paddingTop:64}),Oe=Object(C.a)("div")({display:"flex",flex:"1 1 auto",overflow:"hidden"}),xe=Object(C.a)("div")({flex:"1 1 auto",height:"100%",overflow:"auto"}),ge=function(){return Object(k.jsxs)(he,{children:[Object(k.jsx)(ve,{}),Object(k.jsx)(pe,{children:Object(k.jsx)(Oe,{children:Object(k.jsx)(xe,{children:Object(k.jsx)(s.b,{})})})})]})},ye=n(36),we=n(1180),Ce=n(1164),Se=n(1177),Pe=n(1178),Ae=n(1133),Ie=function(e){var t=e.props;return Object(k.jsx)(Se.a,Object(re.a)(Object(re.a)({sx:{height:"100%"}},t),{},{children:Object(k.jsxs)(Pe.a,{children:[Object(k.jsxs)(Ce.a,{container:!0,spacing:3,sx:{justifyContent:"space-between"},children:[Object(k.jsxs)(Ce.a,{item:!0,children:[Object(k.jsx)(A.a,{color:"textSecondary",gutterBottom:!0,variant:"overline",children:t.nombre}),Object(k.jsx)(A.a,{color:"textPrimary",variant:"h4",children:t.valor})]}),Object(k.jsx)(Ce.a,{item:!0,children:Object(k.jsx)(D.a,{sx:{backgroundColor:t.color,height:56,width:56},children:"LocalShipping"===t.avatar?Object(k.jsx)(M.a,{}):"Business"===t.avatar?Object(k.jsx)(Ae.a,{}):"TrendingUp"===t.avatar?Object(k.jsx)(L.a,{}):Object(k.jsx)(q.a,{})})})]}),Object(k.jsx)(I.a,{sx:{pt:2,display:"flex",alignItems:"center"}})]})}))},Fe=n(20),De=n(60),Re=n(288),Te=n(54),ke=n(1179),Ne=n(1134);De.d.register.apply(De.d,Object(Fe.a)(De.m));var Qe=function(e){var t=Object(Te.a)(),n={animation:!1,cornerRadius:20,layout:{padding:0},legend:{display:!1},maintainAspectRatio:!1,responsive:!0,xAxes:[{ticks:{fontColor:t.palette.text.secondary},gridLines:{display:!1,drawBorder:!1}}],yAxes:[{ticks:{fontColor:t.palette.text.secondary,beginAtZero:!0,min:0},gridLines:{borderDash:[2],borderDashOffset:[2],color:t.palette.divider,drawBorder:!1,zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2],zeroLineColor:t.palette.divider}}],tooltips:{backgroundColor:t.palette.background.paper,bodyFontColor:t.palette.text.secondary,borderColor:t.palette.divider,borderWidth:1,enabled:!0,footerFontColor:t.palette.text.secondary,intersect:!1,mode:"index",titleFontColor:t.palette.text.primary}};return Object(k.jsxs)(Se.a,Object(re.a)(Object(re.a)({},e),{},{children:[Object(k.jsx)(ke.a,{title:"Unidades vendidas vs por vender por fideicomiso"}),Object(k.jsx)(Ne.a,{}),Object(k.jsx)(Pe.a,{children:Object(k.jsx)(I.a,{sx:{height:400,position:"relative"},children:Object(k.jsx)(Re.a,{data:{datasets:[{backgroundColor:"#3F51B5",barPercentage:.5,barThickness:12,borderRadius:4,categoryPercentage:.5,data:[18,5,19,27,29,19,20],label:"Unidades vendidas",maxBarThickness:10},{backgroundColor:"#EEEEEE",barPercentage:.5,barThickness:12,borderRadius:4,categoryPercentage:.5,data:[11,20,12,29,30,25,13],label:"Unidades por vender",maxBarThickness:10}],labels:["Barlovento","La Heras","Garden","DV Park","Bouchard","STD","STURIZA"]},options:n})})}),Object(k.jsx)(Ne.a,{}),Object(k.jsx)(I.a,{sx:{display:"flex",justifyContent:"flex-end",p:2}})]}))};De.d.register(De.a,De.l,De.f);var ze=function(e){var t=e.props,n=[{title:null===t||void 0===t?void 0:t.data.labels[0],value:null===t||void 0===t?void 0:t.data.datasets[0].data[0],color:"#3F51B5"},{title:null===t||void 0===t?void 0:t.data.labels[1],value:null===t||void 0===t?void 0:t.data.datasets[0].data[1],color:"#E53935"},{title:null===t||void 0===t?void 0:t.data.labels[2],value:null===t||void 0===t?void 0:t.data.datasets[0].data[2],color:"#FB8C00"}];return Object(k.jsxs)(Se.a,Object(re.a)(Object(re.a)({},t),{},{children:[Object(k.jsx)(ke.a,{title:t.nombre}),Object(k.jsx)(Ne.a,{}),Object(k.jsxs)(Pe.a,{children:[Object(k.jsx)(I.a,{sx:{height:300,position:"relative"},children:Object(k.jsx)(Re.b,{data:null===t||void 0===t?void 0:t.data,options:{}})}),Object(k.jsx)(I.a,{sx:{display:"flex",justifyContent:"center",pt:2},children:n.map((function(e){var n=e.color,r=e.title,i=e.value;return Object(k.jsxs)(I.a,{sx:{p:1,textAlign:"center"},children:[Object(k.jsx)(A.a,{color:null===t||void 0===t?void 0:t.color,variant:"body1",children:r}),Object(k.jsx)(A.a,{style:{color:n},variant:"h4",children:i})]},r)}))})]})]}))};function Ue(e){e.loggedUser;var t={nombre:"Estado de Fiduciantes",valor:99,color:"gray",avatar:"LocalShipping",data:{datasets:[{data:[666,111,111],backgroundColor:["#3F51B5","#e53935","#FB8C00"],borderWidth:8,borderColor:"#FFFFFF",hoverBorderColor:"#FFFFFF"}],labels:["Pago en termino","Mora + 2 meses","Mora < 2 meses"]}},n={nombre:"Ordenes de Pagos",valor:99,color:"gray",avatar:"LocalShipping",data:{datasets:[{data:[333,333,333],backgroundColor:["#3F51B5","#e53935","#FB8C00"],borderWidth:8,borderColor:"#FFFFFF",hoverBorderColor:"#FFFFFF"}],labels:["Para Autor. Adm","Para Autor. Obra","Para pagar"]}};return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsx)("title",{children:"Dashboard "})}),Object(k.jsx)(I.a,{component:"main",sx:{flexGrow:1,py:8},children:Object(k.jsx)(we.a,{maxWidth:!1,children:Object(k.jsxs)(Ce.a,{container:!0,spacing:3,children:[Object(k.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(k.jsx)(Ie,{props:{nombre:"Proveedores",valor:99,color:"warning.main",avatar:"LocalShipping"}})}),Object(k.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(k.jsx)(Ie,{props:{nombre:"Fiduciantes",valor:99,color:"warning.main",avatar:"People"}})}),Object(k.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(k.jsx)(Ie,{props:{nombre:"Fideicomisos",valor:99,color:"primary.main",avatar:"Business"}})}),Object(k.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(k.jsx)(Ie,{props:{nombre:"CAC",valor:99,color:"error.main",avatar:"TrendingUp"}})}),Object(k.jsx)(Ce.a,{item:!0,lg:6,sm:12,xl:6,xs:12,children:Object(k.jsx)(Qe,{})}),Object(k.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(k.jsx)(ze,{props:t,sx:{height:"100%"}})}),Object(k.jsx)(Ce.a,{item:!0,lg:3,sm:6,xl:3,xs:12,children:Object(k.jsx)(ze,{props:n,sx:{height:"100%"}})})]})})})]})}var Me=n(5),Ee=n.n(Me),_e=n(13),Ve=n(1181),Le=n(1156),Be=n(17),qe=n(314),We=n.n(qe),He="http://104.131.28.211:3000/",Ge=function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.a.get("".concat(He).concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$e=function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.a.post("".concat(He).concat(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ye=function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,We.a.delete("".concat(He).concat(t),{data:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function Ke(e){var t,n,r=e.setLoggedUser,i=e.setIdSociety,o=Object(l.useContext)(Jo),a=Object(s.j)().societyName,d=Object(s.i)(),u=Object(l.useState)("none"),b=Object(c.a)(u,2),f=b[0],j=b[1];return Object(l.useEffect)((function(){!function(e,t){Ze.apply(this,arguments)}(a,i)}),[i,a]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{onChangeClientState:function(){},children:Object(k.jsxs)("title",{children:["Login | ",null!==(t=null===o||void 0===o?void 0:o.nombreComercial)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(k.jsxs)(we.a,{maxWidth:"sm",children:[Object(k.jsx)("div",{style:{width:"100%"},children:Object(k.jsx)("img",{style:{display:"block",margin:"auto",width:"50%",backgroundColor:"#777777"},src:"".concat("http://104.131.28.211:3000/","public/").concat(null===o||void 0===o?void 0:o.logo),alt:"logo"})}),Object(k.jsx)(Be.c,{enableReinitialize:"true",initialValues:{email:"".concat(null!==(n=null===o||void 0===o?void 0:o.dominio)&&void 0!==n?n:""),password:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et(o.id,t.email,t.password,r);case 2:if(!e.sent){e.next=6;break}d("/".concat(a,"/DashBoard"),{replace:!0}),e.next=8;break;case 6:j("flex"),n.resetForm();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){return Object(k.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(k.jsx)(Ve.a,{fullWidth:!0,label:"Correo",margin:"normal",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.email,variant:"outlined"}),Object(k.jsx)(Ve.a,{fullWidth:!0,label:"Contrase\xf1a",margin:"normal",name:"password",autoComplete:"on",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password,variant:"outlined"}),Object(k.jsxs)(I.a,{sx:{py:2},children:[Object(k.jsx)(Le.a,{style:{display:f},severity:"error",onClose:function(){j("none")},children:"Correo y/o contrase\xf1a inv\xe1lidos"}),Object(k.jsx)(ae.a,{color:"primary",disabled:e.isSubmitting,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"Ingresar"})]})]})}})]})})]})}function Ze(){return(Ze=Object(_e.a)(Ee.a.mark((function e(t,n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je(t);case 2:r=e.sent,n(Object(re.a)({},r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(_e.a)(Ee.a.mark((function e(t){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("sociedad/mostrar/".concat(t));case 2:return n=e.sent,localStorage.removeItem("idSociety"),n&&localStorage.setItem("idSociety",JSON.stringify(Object(re.a)({},n))),e.next=7,n;case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n,r){return tt.apply(this,arguments)}function tt(){return(tt=Object(_e.a)(Ee.a.mark((function e(t,n,r,i){var o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=$e,e.t1="usuario/login/",e.next=4,t;case 4:return e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),e.t4={mail:n,pass:r},e.next=9,(0,e.t0)(e.t3,e.t4);case 9:return o=e.sent,i(o),e.abrupt("return",null!==o);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var nt=function(){return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsx)("title",{children:"404"})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:Object(k.jsxs)(we.a,{children:[Object(k.jsx)(A.a,{align:"center",color:"textPrimary",variant:"h1",children:"404: La p\xe1gina no existe"}),Object(k.jsx)(I.a,{sx:{textAlign:"center"},children:Object(k.jsx)("img",{alt:"Under development",src:"/static/images/undraw_page_not_found_su7k.svg",style:{marginTop:50,display:"inline-block",width:560}})})]})})]})};var rt=n(1041),it=n(1168),ot=n(1152),at="3";function ct(e){var t=new Date(e);return!isNaN(t.getTime())}function lt(e){try{return(e=e.split("")).splice(2,0,"-"),e.splice(13,0,"-"),e.join("")}catch(t){return console.log("hubo un error: ",t),null}}function dt(e){return void 0===e||null===e?null:new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC"})}function st(e){return new Date(e).getDate()+" "+new Date(e).toLocaleDateString("es-AR",{timeZone:"UTC",month:"short"})+" "+new Date(e).getFullYear()}function ut(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e),"-").concat((1+e.getMonth(e)).toString().padStart(2,"0"),"-").concat(e.getDate(e).toString().padStart(2,"0"))}function bt(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e)).concat((1+e.getMonth(e)).toString().padStart(2,"0")).concat(e.getDate(e).toString().padStart(2,"0"))}function ft(e,t,n,r){return jt.apply(this,arguments)}function jt(){return(jt=Object(_e.a)(Ee.a.mark((function e(t,n,r,i){var o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=""+i).length>parseInt(at)&&(o=o.slice(o.length-parseInt(at))),a="".concat(t,"/checknumero/").concat(n,"/").concat(r,"/").concat(o),e.next=5,Ge(a);case 5:return c=e.sent,e.abrupt("return",!!c);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t,n){return vt.apply(this,arguments)}function vt(){return(vt=Object(_e.a)(Ee.a.mark((function e(t,n,r){var i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i="".concat(t,"/mostrar/").concat(n,"/").concat(r),e.next=3,Ge(i);case 3:return o=e.sent,e.abrupt("return",!!o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e){return void 0===e||null===e?null:"".concat(e.getFullYear(e),"-").concat((1+e.getMonth(e)).toString().padStart(2,"0"),"-").concat(e.getDate(e).toString().padStart(2,"0"))}var pt=n(1139),Ot=n(1140),xt=n(1188);function gt(){var e=Object(l.useState)(!1),t=Object(c.a)(e,2),n=t[0],r=t[1];return{Prompt:function(e){var t=e.ok,r=void 0!==t&&t,o=e.action,a=void 0===o?function(){}:o,c=e.message,l=void 0===c?"\xbfEst\xe1s seguro de eliminar este registro?":c;return Object(k.jsx)("div",{children:Object(k.jsxs)(pt.a,{open:n,onClose:i,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(k.jsx)(Ot.a,{id:"alert-dialog-title",children:l}),Object(k.jsx)(xt.a,{children:r?Object(k.jsx)(ae.a,{onClick:i,children:"Ok"}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ae.a,{onClick:i,children:"No"}),Object(k.jsx)(ae.a,{onClick:function(){return function(e){e(),i()}(a)},autoFocus:!0,children:"S\xed"})]})})]})})},setIsPromptOpen:r};function i(){r(!1)}}function yt(e){var t=e.loggedUser,n=Object(l.useContext)(Jo),r=gt(),i=r.setIsPromptOpen,o=r.Prompt,c=Object(a.useQueryClient)(),d=Object(a.useMutation)((function(e){return $e("dolar/agregar/".concat(n.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=t.id,console.log(r),e.next=4,c.invalidateQueries(["dolar",n]);case 4:return e.next=6,c.getQueryData(["dolar",n]);case 6:return i=e.sent,o=[].concat(Object(Fe.a)(i),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),c.setQueryData(["dolar",n],o),e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){return c.setQueryData(["dolar",n],r)},onSettled:function(){return c.invalidateQueries(["dolar",n])}}),s=d.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{fecha:new Date,mep:"",BCRA:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.setSubmitting,a=r.resetForm,t.fecha=ut(t.fecha),e.next=4,mt("dolar",n.id,t.fecha);case 4:if(!e.sent){e.next=8;break}i(!0),e.next=9;break;case 8:s(t);case 9:a(),o(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{component:Ct,label:"Fecha",type:"date",name:"fecha"}),Object(k.jsx)(Be.a,{as:Ve.a,label:"BCRA",size:"small",type:"float",maxLength:4,name:"BCRA",onChange:function(e){return wt(e,n,"BCRA")}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"MEP",size:"small",type:"float",name:"mep",onChange:function(e){return wt(e,n,"mep")}}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(o,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function wt(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,3}(\.\d{0,2})?$/.test(r.toString())&&t(n,r.toString())}function Ct(e){var t=e.field,n=e.form,r=t.name,i=t.value,o=n.setFieldValue;return Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:i,onChange:function(e){return o(r,e)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})}var St=n(24),Pt=n(1141),At=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return dt(e.value)}},{field:"BCRA",preProcessEditCellProps:Dt,headerName:"BCRA",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"mep",preProcessEditCellProps:Dt,headerName:"MEP",width:130,editable:!0,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function It(){var e=Object(l.useContext)(Jo),t=gt(),n=t.Prompt,r=t.setIsPromptOpen,i=Object(l.useState)(),o=Object(c.a)(i,2),d=o[0],s=o[1],u=Object(a.useQuery)(["dolar",e],(function(){return Ge("dolar/listar/".concat(e.id))})),b=u.data,f=u.isLoading,j=u.error,m=Object(a.useQueryClient)(),v=Object(a.useMutation)(function(){var t=Object(_e.a)(Ee.a.mark((function t(n){return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ye("dolar/eliminar/".concat(e.id),{id:n});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(){var t=Object(_e.a)(Ee.a.mark((function t(n){var r,i;return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.cancelQueries(["dolar",e]);case 2:return r=m.getQueryData(["dolar",e]),i=r.filter((function(e){return e.id!==n})),m.setQueryData(["dolar",e],i),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,n,r){return m.setQueryData(["dolar",e],r)},onSettled:function(){return m.invalidateQueries(["dolar",e])}}),h=v.mutate,p=Object(a.useMutation)(function(){var t=Object(_e.a)(Ee.a.mark((function t(n){var r,i,o;return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.field,i=n.id,o=n.value,t.next=3,$e("dolar/modificar/".concat(e.id),Object(w.a)({id:i},r,o));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{onMutate:function(){var t=Object(_e.a)(Ee.a.mark((function t(n){var r,i,o,a,c;return Ee.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.field,i=n.id,o=n.value,t.next=3,m.cancelQueries(["dolar",e]);case 3:return a=m.getQueryData(["dolar",e]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),m.setQueryData(["dolar",e],c),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),onError:function(t,n,r){return m.setQueryData(["dolar",e],r)},onSettled:function(){return m.invalidateQueries(["dolar",e])}}),O=p.mutate,x=l.useState([{field:"fecha",sort:"desc"}]),g=Object(c.a)(x,2),y=g[0],C=g[1],S=Object(l.useState)(25),P=Object(c.a)(S,2),A=P[0],I=P[1];return f?"Cargando...":j?"Hubo un error: ".concat(j.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(n,{message:"\xbfEliminar fila?",action:function(){return h(d)}}),Object(k.jsx)(St.a,{rows:b.map((function(e){return{id:e.id,fecha:e.fecha,BCRA:e.BCRA,blue:e.blue,mep:e.mep,descripcion:e.descripcion,deleteId:e.id}})),onCellEditCommit:O,columns:At(r,s),sortModel:y,onSortModelChange:function(e){return e[0]!==y[0]&&function(e){var t;0===e.length&&(e.push(y[0]),"asc"===(null===(t=y[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),C(e)}(e)},pageSize:A,onPageSizeChange:function(e){return I(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Ft}})]})}function Ft(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["fecha","BCRA","blue","mep"]}})]})}function Dt(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(re.a)(Object(re.a)({},e.props),{},{error:t})}function Rt(e){var t,n=e.loggedUser,r=Object(l.useContext)(Jo);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["D\xf3lar | ",null!==(t=null===r||void 0===r?void 0:r.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(yt,{loggedUser:n})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(It,{loggedUser:n})})]})})]})}function Tt(e){var t=e.idSociety,n=e.loggedUser,r=gt(),i=r.Prompt,o=r.setIsPromptOpen,c=Object(a.useQueryClient)(),l=Object(a.useMutation)((function(e){return $e("cac/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,c.cancelQueries(["cac",t]);case 3:return e.next=5,c.getQueryData(["cac",t]);case 5:return i=e.sent,o=[].concat(Object(Fe.a)(i),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),c.setQueryData(["cac",t],o),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return c.setQueryData(["cac",t],r)},onSettled:function(){return c.invalidateQueries(["cac",t])}}),d=l.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{fecha:new Date,estimado:"",definitivo:"",materiales:"",manodeobra:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(n,r){var i,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.setSubmitting,a=r.resetForm,n.fecha=(c=n.fecha,"".concat(c.getFullYear(c),"-").concat((1+c.getMonth(c)).toString().padStart(2,"0"),"-01")),e.next=4,mt("cac",t.id,n.fecha);case 4:if(!e.sent){e.next=8;break}o(!0),e.next=9;break;case 8:d(n);case 9:a(),i(!1);case 11:case"end":return e.stop()}var c}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{component:u,label:"Fecha",type:"date",name:"fecha"}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Estimado",required:!0,type:"float",style:{width:"140px"},size:"small",maxLength:4,name:"estimado",onChange:function(e){return s(e,n,"estimado")}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Definitivo",required:!0,type:"float",size:"small",style:{width:"140px"},name:"definitivo",onChange:function(e){return s(e,n,"definitivo")}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Materiales",required:!0,type:"float",size:"small",style:{width:"140px"},name:"materiales",onChange:function(e){return s(e,n,"materiales")}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Mano de obra",required:!0,type:"float",size:"small",style:{width:"140px"},name:"manodeobra",onChange:function(e){return s(e,n,"manodeobra")}}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(i,{message:"Ya hay un mes con informaci\xf3n, por favor editar el mes desde la grilla.",ok:!0})]});function s(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,4}(\.\d{0,2})?$/.test(r.toString())&&t(n,r.toString())}function u(e){var t=e.field,n=e.form,r=t.name,i=t.value,o=n.setFieldValue;return Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:i,onChange:function(e){return o(r,e)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})}}var kt=function(e,t){return[{field:"fecha",headerName:"Fecha",width:150,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"estimado",headerName:"Estimado",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Qt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"definitivo",headerName:"Definitivo",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Qt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"materiales",headerName:"Materiales",width:150,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Qt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"manodeobra",headerName:"Mano de Obra",width:180,editable:!0,headerAlign:"center",align:"right",preProcessEditCellProps:Qt,valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function Nt(e){var t=e.idSociety,n=gt(),r=n.Prompt,i=n.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),s=d[0],u=d[1],b=Object(a.useQuery)(["cac",t],(function(){return Ge("CAC/listar/".concat(t.id))})),f=b.data,j=b.isLoading,m=b.error,v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cac/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["cac",t]);case 2:return r=v.getQueryData(["cac",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["cac",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["cac",t],r)},onSettled:function(){return v.invalidateQueries(["cac",t])}}),p=h.mutate,O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("cac/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,v.cancelQueries(["cac",t]);case 3:return a=v.getQueryData(["cac",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),v.setQueryData(["cac",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["cac",t],r)},onSettled:function(){return v.invalidateQueries(["cac",t])}}),x=O.mutate,g=l.useState([{field:"fecha",sort:"desc"}]),y=Object(c.a)(g,2),C=y[0],S=y[1],P=Object(l.useState)(25),A=Object(c.a)(P,2),I=A[0],F=A[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return p(s)}}),Object(k.jsx)(St.a,{rows:f.map((function(e){return{id:e.id,fecha:e.fecha,estimado:e.estimado,definitivo:e.definitivo,materiales:e.materiales,manodeobra:e.manodeobra,deleteId:e.id}})),onCellEditCommit:x,columns:kt(i,u),sortModel:C,onSortModelChange:function(e){return e[0]!==C[0]&&function(e){var t;0===e.length&&(e.push(C[0]),"asc"===(null===(t=C[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),S(e)}(e)},pageSize:I,onPageSizeChange:function(e){return F(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:function(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["fecha","estimado","definitivo"]}})]})}}})]})}function Qt(e){var t=!/^\d{0,4}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(re.a)(Object(re.a)({},e.props),{},{error:t})}function zt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["CAC | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Tt,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Nt,{idSociety:n,loggedUser:r})})]})})]})}function Ut(e){var t=e.idSociety,n=e.loggedUser,r=gt().Prompt,i=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("rubro/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["rubro",t]);case 3:return e.next=5,i.getQueryData(["rubro",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["rubro",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["rubro",t],r)},onSettled:function(){return i.invalidateQueries(["rubro",t])}}),c=o.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{rubro:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"Rubro",required:!0,size:"small",type:"float",name:"rubro"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(r,{message:"El rubro no puede estar en blanco",ok:!0})]})}var Mt=function(e,t){return[{field:"rubro",headerName:"Rubro",width:260,editable:!1,headerAlign:"center",align:"left",renderCell:Vt},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function Et(e){var t=e.idSociety,n=gt(),r=n.Prompt,i=n.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),u=d[0],b=d[1],f=Object(s.i)(),j=Object(a.useQuery)(["rubro",t],(function(){return Ge("rubro/listar/".concat(t.id))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("rubro/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["rubro",t]);case 2:return r=p.getQueryData(["rubro",t]),i=r.filter((function(e){return e.id!==n})),p.setQueryData(["rubro",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["rubro",t],r)},onSettled:function(){return p.invalidateQueries(["rubro",t])}}),x=O.mutate,g=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("rubro/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,p.cancelQueries(["rubro",t]);case 3:return a=p.getQueryData(["rubro",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),p.setQueryData(["rubro",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["rubro",t],r)},onSettled:function(){return p.invalidateQueries(["rubro",t])}}),y=g.mutate,C=l.useState([{field:"rubro",sort:"asc"}]),S=Object(c.a)(C,2),P=S[0],A=S[1],I=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("./".concat(t.id,"/Subrubros-").concat(t.rubro)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=I.mutate,D=Object(l.useState)(25),R=Object(c.a)(D,2),T=R[0],N=R[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(u)}}),Object(k.jsx)(St.a,{rows:m.map((function(e){return{id:e.id,rubro:e.rubro,deleteId:e.id,onIrDetalle:function(){return F(e)}}})),onCellEditCommit:y,columns:Mt(i,b),sortModel:P,onSortModelChange:function(e){return e[0]!==P[0]&&function(e){var t;0===e.length&&(e.push(P[0]),"asc"===(null===(t=P[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),A(e)}(e)},pageSize:T,onPageSizeChange:function(e){return N(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:_t}})]})}function _t(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["rubro"]}})]})}function Vt(e){var t=e.row.onIrDetalle,n=e.row.rubro;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function Lt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Rubro | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ut,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Et,{idSociety:n,loggedUser:r})})]})})]})}function Bt(e){var t=e.idSociety,n=e.loggedUser,r=gt().Prompt,i=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("categoria/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["categoria",t]);case 3:return e.next=5,i.getQueryData(["categoria",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["categoria",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["categoria",t],r)},onSettled:function(){return i.invalidateQueries(["categoria",t])}}),c=o.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{codigo:"",concepto:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"C\xf3digo",required:!0,size:"small",type:"number",name:"codigo"}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Concepto",required:!0,size:"small",name:"concepto"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(r,{message:"El C\xf3digo no puede estar en blanco",ok:!0})]})}var qt=function(e,t){return[{field:"id",headerName:"id",width:90,editable:!1,hide:!0,headerAlign:"center",align:"left"},{field:"codigo",headerName:"C\xf3digo",width:130,editable:!0,headerAlign:"center",align:"left"},{field:"anexo",headerName:"Anexo",width:120,editable:!0,headerAlign:"center",align:"left"},{field:"concepto",headerName:"Concepto",width:200,editable:!0,headerAlign:"center",align:"left"},{field:"regimen",headerName:"R\xe9gimen",width:200,editable:!0,headerAlign:"center",align:"left"},{field:"inscriptos",headerName:"Inscriptos %",width:180,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"noInscriptos",headerName:"No Inscr. HUM y SUC %",width:230,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"noInscrptoResto",headerName:"No Inscr. Resto %",width:200,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"inscriptosNoRet",headerName:"Inscriptos No Ret. $",width:220,editable:!0,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function Wt(e){var t=e.idSociety,n=gt(),r=n.Prompt,i=n.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),s=d[0],u=d[1],b=Object(a.useQuery)(["categoria",t],(function(){return Ge("categoria/listar/".concat(t.id))})),f=b.data,j=b.isLoading,m=b.error,v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("categoria/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["categoria",t]);case 2:return r=v.getQueryData(["categoria",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["categoria",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["categoria",t],r)},onSettled:function(){return v.invalidateQueries(["categoria",t])}}),p=h.mutate,O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("categoria/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,v.cancelQueries(["categoria",t]);case 3:return a=v.getQueryData(["categoria",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),v.setQueryData(["categoria",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["categoria",t],r)},onSettled:function(){return v.invalidateQueries(["categoria",t])}}),x=O.mutate,g=l.useState([{field:"id",sort:"asc"}]),y=Object(c.a)(g,2),C=y[0],S=y[1],P=Object(l.useState)(25),I=Object(c.a)(P,2),F=I[0],D=I[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return p(s)}}),Object(k.jsx)(St.a,{rows:f.map((function(e){return{id:e.id,codigo:e.codigo,anexo:e.anexo,concepto:e.concepto,regimen:e.regimen,inscriptos:e.inscriptos,noInscriptos:e.noInscriptos,noInscrptoResto:e.noInscrptoResto,inscriptosNoRet:e.inscriptosNoRet,deleteId:e.id}})),onCellEditCommit:x,columns:qt(i,u),sortModel:C,onSortModelChange:function(e){return e[0]!==C[0]&&function(e){var t;0===e.length&&(e.push(C[0]),"asc"===(null===(t=C[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),S(e)}(e)},pageSize:F,onPageSizeChange:function(e){return D(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Ht}}),Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function Ht(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["categoria"]}})]})}function Gt(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Categoria | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Bt,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Wt,{idSociety:n,loggedUser:r})})]})})]})}function $t(e){var t=e.idSociety,n=e.idRubro,r=e.loggedUser,i=gt().Prompt,o=Object(a.useQueryClient)(),c=Object(a.useMutation)((function(e){return $e("subrubro/agregar/".concat(t.id,"/").concat(n),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var i,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=r.id,e.next=3,o.invalidateQueries(["subrubro",t]);case 3:return e.next=5,o.getQueryData(["subrubro",t]);case 5:return i=e.sent,a=[].concat(Object(Fe.a)(i),[Object(re.a)(Object(re.a)({},n),{},{id:(new Date).getTime()})]),o.setQueryData(["subrubro",t],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return o.setQueryData(["subrubro",t],r)},onSettled:function(){return o.invalidateQueries(["subrubro",t])}}),l=c.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{subRubro:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,l(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"SubRubro",required:!0,size:"small",type:"float",name:"subRubro"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(i,{message:"El subrubro no puede estar en blanco",ok:!0})]})}var Yt=function(e,t){return[{field:"subRubro",headerName:"SubRubro",width:260,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function Kt(e){var t=e.idSociety,n=e.idRubro,r=gt(),i=r.Prompt,o=r.setIsPromptOpen,d=Object(l.useState)(),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(a.useQuery)(["subrubro",t],(function(){return Ge("subrubro/listar/".concat(t.id,"/").concat(n))})),j=f.data,m=f.isLoading,v=f.error,h=Object(a.useQueryClient)(),p=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("subrubro/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cancelQueries(["subrubro",t]);case 2:return r=h.getQueryData(["subrubro",t]),i=r.filter((function(e){return e.id!==n})),h.setQueryData(["subrubro",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return h.setQueryData(["subrubro",t],r)},onSettled:function(){return h.invalidateQueries(["subrubro",t])}}),O=p.mutate,x=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("subrubro/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,h.cancelQueries(["subrubro",t]);case 3:return a=h.getQueryData(["subrubro",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),h.setQueryData(["subrubro",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return h.setQueryData(["subrubro",t],r)},onSettled:function(){return h.invalidateQueries(["subrubro",t])}}),g=x.mutate,y=l.useState([{field:"subRubro",sort:"asc"}]),C=Object(c.a)(y,2),S=C[0],P=C[1],A=Object(l.useState)(25),I=Object(c.a)(A,2),F=I[0],D=I[1];return m?"Cargando...":v?"Hubo un error: ".concat(v.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(i,{message:"\xbfEliminar fila?",action:function(){return O(u)}}),Object(k.jsx)(St.a,{rows:j.map((function(e){return{id:e.id,subRubro:e.subRubro,deleteId:e.id}})),onCellEditCommit:g,compone:!0,columns:Yt(o,b),sortModel:S,onSortModelChange:function(e){return e[0]!==S[0]&&function(e){var t;0===e.length&&(e.push(S[0]),"asc"===(null===(t=S[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),P(e)}(e)},pageSize:F,onPageSizeChange:function(e){return D(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Zt}})]})}function Zt(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["subRubro"]}})]})}function Jt(e){var t,n=e.idSociety,r=e.loggedUser,i=Object(s.j)().idRubro,o=parseInt(i);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["SubRubro | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)($t,{idSociety:n,idRubro:o,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Kt,{idSociety:n,idRubro:o,loggedUser:r})})]})})]})}function Xt(e){var t=e.idSociety,n=e.loggedUser,r=gt().Prompt,i=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("banco/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["banco",t]);case 3:return e.next=5,i.getQueryData(["banco",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["banco",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["banco",t],r)},onSettled:function(){return i.invalidateQueries(["banco",t])}}),c=o.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{banco:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"Banco",required:!0,size:"small",type:"float",name:"banco"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(r,{message:"El Banco no puede estar en blanco",ok:!0})]})}var en=function(e,t){return[{field:"banco",headerName:"Banco",width:170,editable:!1,headerAlign:"center",align:"center",renderCell:rn},{field:"descripcionLarga",headerName:"Descripcion",width:250,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function tn(e){var t=e.idSociety,n=gt(),r=n.Prompt,i=n.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),u=d[0],b=d[1],f=Object(s.i)(),j=Object(a.useQuery)(["banco",t],(function(){return Ge("banco/listar/".concat(t.id))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("banco/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["banco",t]);case 2:return r=p.getQueryData(["banco",t]),i=r.filter((function(e){return e.id!==n})),p.setQueryData(["banco",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["banco",t],r)},onSettled:function(){return p.invalidateQueries(["banco",t])}}),x=O.mutate,g=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("banco/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,p.cancelQueries(["banco",t]);case 3:return a=p.getQueryData(["banco",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),p.setQueryData(["banco",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["banco",t],r)},onSettled:function(){return p.invalidateQueries(["banco",t])}}),y=g.mutate,C=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f("./".concat(t.id,"/Cuentas de Banco-").concat(t.banco)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=C.mutate,P=l.useState([{field:"banco",sort:"asc"}]),I=Object(c.a)(P,2),F=I[0],D=I[1],R=Object(l.useState)(25),T=Object(c.a)(R,2),N=T[0],Q=T[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(u)}}),Object(k.jsx)(St.a,{rows:m.map((function(e){return{id:e.id,banco:e.banco,descripcionLarga:e.descripcionLarga,deleteId:e.id,onIrDetalle:function(){return S(e)}}})),onCellEditCommit:y,columns:en(i,b),sortModel:F,onSortModelChange:function(e){return e[0]!==F[0]&&function(e){var t;0===e.length&&(e.push(F[0]),"asc"===(null===(t=F[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),D(e)}(e)},pageSize:N,onPageSizeChange:function(e){return Q(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:nn}}),Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function nn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["banco","descripcionLarga"]}})]})}function rn(e){var t=e.row.onIrDetalle,n=e.row.banco;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function on(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Banco | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Xt,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(tn,{idSociety:n,loggedUser:r})})]})})]})}function an(e){var t=e.idSociety,n=e.loggedUser,r=gt().Prompt,i=Object(a.useQueryClient)(),o=Object(s.j)().idBanco,c=Object(a.useMutation)((function(e){return $e("cuentabanco/agregar/".concat(t.id,"/").concat(o),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["cuentabanco",t]);case 3:return e.next=5,i.getQueryData(["cuentabanco",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["cuentabanco",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["cuentabanco",t],r)},onSettled:function(){return i.invalidateQueries(["cuentabanco",t])}}),l=c.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{cuentaBanco:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,l(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"Cuenta",required:!0,size:"small",type:"float",name:"cuentaBanco"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(r,{message:"El cuentabanco no puede estar en blanco",ok:!0})]})}var cn=function(e,t){return[{field:"cuentaBanco",headerName:"Cuenta",width:170,editable:!0,headerAlign:"center",align:"center"},{field:"descripcionLarga",headerName:"Descripcion",width:250,editable:!0,headerAlign:"center",align:"center"},{field:"deleteIcon",headerName:" ",width:50,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]};function ln(e){var t=e.idSociety,n=gt(),r=n.Prompt,i=n.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),u=d[0],b=d[1],f=Object(s.j)().idBanco,j=Object(a.useQuery)(["cuentabanco",t],(function(){return Ge("cuentabanco/listar/".concat(t.id,"/").concat(f))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("cuentabanco/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["cuentabanco",t]);case 2:return r=p.getQueryData(["cuentabanco",t]),i=r.filter((function(e){return e.id!==n})),p.setQueryData(["cuentabanco",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["cuentabanco",t],r)},onSettled:function(){return p.invalidateQueries(["cuentabanco",t])}}),x=O.mutate,g=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("cuentabanco/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,p.cancelQueries(["cuentabanco",t]);case 3:return a=p.getQueryData(["cuentabanco",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),p.setQueryData(["cuentabanco",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["cuentabanco",t],r)},onSettled:function(){return p.invalidateQueries(["cuentabanco",t])}}),y=g.mutate,C=l.useState([{field:"cuentaBanco",sort:"asc"}]),S=Object(c.a)(C,2),P=S[0],I=S[1],F=Object(l.useState)(25),D=Object(c.a)(F,2),R=D[0],T=D[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return x(u)}}),Object(k.jsx)(St.a,{sortModel:P,rows:m.map((function(e){return{id:e.id,cuentaBanco:e.cuentaBanco,descripcionLarga:e.descripcionLarga,deleteId:e.id}})),onCellEditCommit:y,columns:cn(i,b),onSortModelChange:function(e){return e[0]!==P[0]&&function(e){var t;0===e.length&&(e.push(P[0]),"asc"===(null===(t=P[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),I(e)}(e)},pageSize:R,onPageSizeChange:function(e){return T(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:dn}}),Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0\xa0\xa0\xa0\xa0"}),Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Para visualizar los cambios en otras pantallas del sistema es necesario salir y volver a loguearse, gracias."})]})}function dn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["cuentaBanco","descripcionLarga"]}})]})}function sn(e){var t,n=e.idSociety,r=e.loggedUser,i=Object(s.j)().idRubro,o=parseInt(i);return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["CuentaBanco | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(an,{idSociety:n,idRubro:o,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(ln,{idSociety:n,idRubro:o,loggedUser:r})})]})})]})}function un(e){var t=e.idSociety,n=e.loggedUser,r=gt().Prompt,i=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("usuario/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["usuario",t]);case 3:return e.next=5,i.getQueryData(["usuario",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["usuario",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["usuario",t],r)},onSettled:function(){return i.invalidateQueries(["usuario",t])}}),c=o.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{user:"",mail:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,required:!0,size:"small",label:"Usuario",type:"string",maxLength:30,name:"user"}),Object(k.jsx)(Be.a,{as:Ve.a,required:!0,size:"small",label:"Mail",type:"mail",name:"mail"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(r,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}var bn=n(1190),fn=function(e,t){return[{field:"user",headerName:"Usuario",width:170,editable:!0,headerAlign:"center"},{field:"mail",headerName:"Mail",width:220,headerAlign:"center"},{field:"pass",headerName:"Clave",width:150,editable:!0,sortable:!1,filterable:!1,headerAlign:"center",renderCell:pn},{field:"rolId",headerName:"Rol",editable:!0,width:160,renderEditCell:function(e){return Object(k.jsx)(vn,{roles:jn,props:e})},headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,sortable:!1,filterable:!1,headerAlign:"center",align:"center",renderCell:function(n){var r=n.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(n){t(r),e(!0)}})}}]},jn=[{id:1,rol_descripcion:"administrativo"},{id:2,rol_descripcion:"obra"},{id:3,rol_descripcion:"manager"},{id:4,rol_descripcion:"vista"},{id:5,rol_descripcion:"blue"}];function mn(e){var t=e.idSociety,n=gt(),r=n.Prompt,i=n.setIsPromptOpen,o=Object(l.useState)(),d=Object(c.a)(o,2),s=d[0],u=d[1],b=Object(a.useQuery)(["usuario",t],(function(){return Ge("usuario/listar/".concat(t.id))})),f=b.data,j=b.isLoading,m=b.error,v=Object(a.useQueryClient)(),h=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("usuario/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.cancelQueries(["usuario",t]);case 2:return r=v.getQueryData(["usuario",t]),i=r.filter((function(e){return e.id!==n})),v.setQueryData(["usuario",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["usuario",t],r)},onSettled:function(){return v.invalidateQueries(["usuario",t])}}),p=h.mutate,O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("usuario/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,v.cancelQueries(["usuario",t]);case 3:return a=v.getQueryData(["usuario",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),v.setQueryData(["usuario",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return v.setQueryData(["usuario",t],r)},onSettled:function(){return v.invalidateQueries(["usuario",t])}}),x=O.mutate,g=l.useState([{field:"user",sort:"asc"}]),y=Object(c.a)(g,2),C=y[0],S=y[1],P=Object(l.useState)(25),A=Object(c.a)(P,2),F=A[0],D=A[1];return j?"Cargando...":m?"Hubo un error: ".concat(m.message):Object(k.jsxs)("div",{style:{height:"100%",width:"100%"},children:[Object(k.jsx)(r,{message:"\xbfEliminar fila?",action:function(){return p(s)}}),Object(k.jsx)(I.a,{children:Object(k.jsx)(St.a,{sortModel:C,rows:f.map((function(e){return{id:e.id,user:e.user,mail:e.mail,pass:e.pass,rolId:e["rol.descripcion"],deleteId:e.id}})),onCellEditCommit:x,columns:fn(i,u),onSortModelChange:function(e){return e[0]!==C[0]&&function(e){var t;0===e.length&&(e.push(C[0]),"asc"===(null===(t=C[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),S(e)}(e)},pageSize:F,onPageSizeChange:function(e){return D(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,autoHeight:!0,disableSelectionOnClick:!0,scrollbarSize:!0,components:{Toolbar:hn}})})]})}function vn(e){var t=e.roles,n=e.props,r=n.id,i=n.api,o=n.field;t=[].concat(Object(Fe.a)(t),[{rol_descripcion:""}]);var a=Object(l.useState)({rol_descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(k.jsx)(bn.a,{value:s,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,a){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return i.setEditCellValue({id:r,field:o,value:a.id},t),e.next=5,n.api.commitCellChange({id:r,field:o});case 5:i.setCellMode(r,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rol_descripcion===t.rol_descripcion},getOptionLabel:function(e){return e.rol_descripcion},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Rol"}))}})}function hn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["user","mail","rolId"]}})]})}function pn(e){return"***********"}function On(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Usuarios | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(un,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(mn,{idSociety:n,loggedUser:r})})]})})]})}var xn=n(1159);function gn(e){var t=e.idSociety,n=e.loggedUser,r=e.tipo,i=gt().Prompt,o=Object(a.useQueryClient)(),c=Object(a.useMutation)((function(e){return $e("empresa/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(i){var a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 1===r?i.esFiduciante=1:i.esProveedor=1,i.creador=n.id,e.next=4,o.invalidateQueries(["empresa",t]);case 4:return e.next=6,o.getQueryData(["empresa",t]);case 6:return a=e.sent,c=[].concat(Object(Fe.a)(a),[Object(re.a)(Object(re.a)({},i),{},{id:(new Date).getTime()})]),o.setQueryData(["empresa",t],c),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return o.setQueryData(["empresa",t],r)},onSettled:function(){return o.invalidateQueries(["empresa",t])}}),l=c.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{razonSocial:"",CUIT:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,l(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"CUIT",type:"string",required:!0,size:"small",maxLength:11,name:"CUIT",onChange:function(e){return function(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,11}$/.test(r.toString())&&t(n,r.toString())}(e,n,"CUIT")}}),Object(k.jsx)(Be.a,{as:Ve.a,required:!0,size:"small",label:"Raz\xf3n Social",type:"string",name:"razonSocial"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(i,{message:"El CUIT no puede estar en blanco",ok:!0})]})}var yn=function(e,t,n,r,i,o,a,c,l){return[{field:"razonSocial",headerName:"Raz\xf3n Social",width:170,hide:null===e||void 0===e?void 0:e.find((function(e){return"razonSocial"===e.c})).h,editable:t,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:130,hide:null===e||void 0===e?void 0:e.find((function(e){return"CUIT"===e.c})).h,headerAlign:"center",valueFormatter:function(e){return lt(e.value)}},{field:"rubroId",headerName:"Rubro",width:140,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"rubroId"===e.c})).h),renderEditCell:function(e){return Object(k.jsx)(Sn,{rubros:o,props:e})},headerAlign:"center"},{field:"condIVA",headerName:"Cond. IVA",width:200,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"condIVA"===e.c})).h),renderEditCell:function(e){return Object(k.jsx)(An,{listItems:r,label:"Condicion frente a IVA",props:e})},headerAlign:"center"},{field:"ganancias",headerName:"Ganancias",type:"boolean",width:160,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"ganancias"===e.c})).h),headerAlign:"center"},{field:"categoria",headerName:"Categoria",width:200,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"categoria"===e.c})).h),renderEditCell:function(e){return Object(k.jsx)(An,{listItems:n,label:"Categoria",props:e})},headerAlign:"center"},{field:"esRetSUSS",headerName:"Ret SUSS",type:"boolean",width:160,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"esRetSUSS"===e.c})).h),headerAlign:"center"},{field:"esRetIVA",headerName:"Ret IVA",type:"boolean",width:160,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"esRetIVA"===e.c})).h),headerAlign:"center"},{field:"CBU",headerName:"CBU",width:200,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"CBU"===e.c})).h),headerAlign:"center"},{field:"banco",headerName:"Banco",width:120,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"banco"===e.c})).h),headerAlign:"center"},{field:"nroCuenta",headerName:"# Cuenta",width:140,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"nroCuenta"===e.c})).h),headerAlign:"center"},{field:"telefono",headerName:"Tel\xe9fono",width:140,hide:null===e||void 0===e?void 0:e.find((function(e){return"telefono"===e.c})).h,editable:t,headerAlign:"center",valueFormatter:function(e){var t=e.value;if(t)return(t=t.split("")).splice(2,0,"-"),t.splice(7,0,"-"),t.join("")}},{field:"mail",headerName:"Mail",width:150,hide:null===e||void 0===e?void 0:e.find((function(e){return"mail"===e.c})).h,editable:t,headerAlign:"center"},{field:"subrubroId",headerName:"Sub Rubro",width:140,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"subrubroId"===e.c})).h),renderEditCell:function(e){return Object(k.jsx)(Pn,{subRubros:a,props:e})},headerAlign:"center"},{field:"enviar_OP_auto",headerName:"Enviar",type:"boolean",width:120,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"enviar_OP_auto"===e.c})).h),headerAlign:"center"},{field:"esProveedor",headerName:"Es Provee.",type:"boolean",width:160,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"esProveedor"===e.c})).h),headerAlign:"center"},{field:"esFiduciante",headerName:"Es Fidu",type:"boolean",width:160,editable:t,hide:1===i||(null===e||void 0===e?void 0:e.find((function(e){return"esFiduciante"===e.c})).h),headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,hide:!t,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,n=t.deleteId,r=t.esProveedor,o=t.esFiduciante;return 1===r&&1===i||1===o&&0===i?"":Object(k.jsx)(Pt.a,{onClick:function(e){l(n),c(!0)}})}}]};function wn(e){var t=e.loggedUser,n=e.idSociety,r=e.tipo,i=gt(),o=i.Prompt,d=i.setIsPromptOpen,s=Object(l.useState)(),u=Object(c.a)(s,2),b=u[0],f=u[1],j=!0;"vista"===(1===r?null===t||void 0===t?void 0:t["rol.fidu"]:null===t||void 0===t?void 0:t["rol.proveedor"])&&(j=!1);var m=Object(l.useContext)(aa),v=Object(l.useContext)(ia),h=Object(a.useQuery)(["empresa",n],(function(){return Ge("empresa/listar/".concat(n.id,"/").concat(r))})),p=h.data,O=h.isLoading,x=h.error,g=Object(a.useQueryClient)(),y=Object(a.useQuery)(["rubros",n],(function(){return Ge("rubro/listar/".concat(n.id))})).data,C=Object(a.useQuery)(["subrubros",n],(function(){return Ge("subrubro/listar/".concat(n.id,"/0"))})).data,S=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("empresa/eliminar/".concat(n.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.cancelQueries(["empresa",n]);case 2:return r=g.getQueryData(["empresa",n]),i=r.filter((function(e){return e.id!==t})),g.setQueryData(["empresa",n],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){return g.setQueryData(["empresa",n],r)},onSettled:function(){return g.invalidateQueries(["empresa",n])}}),P=S.mutate,A=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,i=t.id,o=t.value,e.next=3,$e("empresa/modificar/".concat(n.id),Object(w.a)({id:i},r,"esProveedor"===r||"esFiduciante"===r?o?1:0:o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,i=t.id,o=t.value,e.next=3,g.cancelQueries(["empresa",n]);case 3:return a=g.getQueryData(["empresa",n]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),g.setQueryData(["empresa",n],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){return g.setQueryData(["empresa",n],r)},onSettled:function(){return g.invalidateQueries(["empresa",n])}}),I=A.mutate,F=[];F=1===r?[{c:"razonSocial",h:!1},{c:"CUIT",h:!1},{c:"telefono",h:!1},{c:"mail",h:!1}]:[{c:"razonSocial",h:!1},{c:"CUIT",h:!1},{c:"rubroId",h:!1},{c:"condIVA",h:!1},{c:"ganancias",h:!1},{c:"categoria",h:!1},{c:"esRetSUSS",h:!1},{c:"esRetIVA",h:!1},{c:"CBU",h:!1},{c:"banco",h:!1},{c:"nroCuenta",h:!1},{c:"telefono",h:!1},{c:"mail",h:!1},{c:"enviar_OP_auto",h:!1},{c:"esProveedor",h:!0},{c:"esFiduciante",h:!0},{c:"subrubroId",h:!0}];var D=Object(l.useState)(F),R=Object(c.a)(D,2),T=R[0],N=R[1],Q=l.useState([{field:"razonSocial",sort:"asc"}]),z=Object(c.a)(Q,2),U=z[0],M=z[1],E=Object(l.useState)(25),_=Object(c.a)(E,2),V=_[0],L=_[1];return O?"Cargando...":x?"Hubo un error: ".concat(x.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(o,{message:"\xbfEliminar fila?",action:function(){return P(b)}}),Object(k.jsx)(St.a,{rows:p.map((function(e){var t,n,r,i;return{id:null===e||void 0===e?void 0:e.id,rubroId:null===y||void 0===y||null===(t=y.find((function(t){return t.id===e.rubroId})))||void 0===t?void 0:t.rubro,rubro_filtro:null===e||void 0===e?void 0:e.rubroId,subrubroId:null===C||void 0===C||null===(n=C.find((function(t){return t.id===e.subrubroId})))||void 0===n?void 0:n.subRubro,razonSocial:null===e||void 0===e?void 0:e.razonSocial,CUIT:null===e||void 0===e?void 0:e.CUIT,mail:null===e||void 0===e?void 0:e.mail,telefono:null===e||void 0===e?void 0:e.telefono,CBU:null===e||void 0===e?void 0:e.CBU,banco:null===e||void 0===e?void 0:e.banco,nroCuenta:null===e||void 0===e?void 0:e.nroCuenta,esProveedor:null===e||void 0===e?void 0:e.esProveedor,esFiduciante:null===e||void 0===e?void 0:e.esFiduciante,enviar_OP_auto:null===e||void 0===e?void 0:e.enviar_OP_auto,esRetSUSS:0!==(null===e||void 0===e?void 0:e.esRetSUSS),esRetIVA:0!==(null===e||void 0===e?void 0:e.esRetIVA),categoria:null===m||void 0===m||null===(r=m.find((function(t){return t.id===e.categoria})))||void 0===r?void 0:r.descripcion,condIVA:null===v||void 0===v||null===(i=v.find((function(t){return t.id===e.condIVA})))||void 0===i?void 0:i.descripcion,ganancias:0!==(null===e||void 0===e?void 0:e.ganancias),deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:I,columns:yn(T,j,m,v,r,y,C,d,f),sortModel:U,onSortModelChange:function(e){return e[0]!==U[0]&&function(e){var t;0===e.length&&(e.push(U[0]),"asc"===(null===(t=U[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),M(e)}(e)},onColumnVisibilityChange:function(e){return function(e){var t=T,n=null===t||void 0===t?void 0:t.findIndex((function(t){return t.c===e.field}));n>-1&&(t[n]={c:e.field,h:!e.isVisible},N(t))}(e)},pageSize:V,onPageSizeChange:function(e){return L(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Cn}})]})}function Cn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.b,{}),Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["razonSocial","CUIT","mail","telefono","CBU","banco","nroCuenta","rubroId","subrubroId"]}})]})}function Sn(e){var t=e.rubros,n=e.props,r=n.id,i=n.api,o=n.field;t=[].concat(Object(Fe.a)(t),[{rubro:""}]);var a=Object(l.useState)({rubro:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(k.jsx)(bn.a,{value:s,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,a){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return i.setEditCellValue({id:r,field:o,value:a.id},t),e.next=5,n.api.commitCellChange({id:r,field:o});case 5:i.setCellMode(r,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Rubro"}))}})}function Pn(e,t){var n=e.subRubros,r=e.props,i=r.id,o=r.api,a=r.field;n=[].concat(Object(Fe.a)(n.filter((function(e){var t;return e.rubroId===parseInt(null===r||void 0===r||null===(t=r.row)||void 0===t?void 0:t.rubro_filtro)}))),[{subRubro:""}]);var d=Object(l.useState)({subRubro:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(k.jsx)(bn.a,{value:u,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(n),o.setEditCellValue({id:i,field:a,value:n.id},t),e.next=4,r.api.commitCellChange({id:i,field:a});case 4:o.setCellMode(i,a,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:n,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"subRubro"}))}})}function An(e){var t=e.listItems,n=e.label,r=e.props,i=r.id,o=r.api,a=r.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var d=Object(l.useState)({descripcion:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(k.jsx)(bn.a,{value:u,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(n),!(null===n||void 0===n?void 0:n.id)){e.next=6;break}return o.setEditCellValue({id:i,field:a,value:n.id},t),e.next=5,r.api.commitCellChange({id:i,field:a});case 5:o.setCellMode(i,a,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:n}))}})}function In(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Proveedores | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(xn.a,{smUp:"vista"===r["rol.proveedor"],children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(gn,{idSociety:n,loggedUser:r,tipo:0})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(wn,{idSociety:n,loggedUser:r,tipo:0})})]})})]})}var Fn=n(405),Dn=n(1148),Rn=n(1203),Tn=n(1192);function kn(e){var t=e.idSociety,n=e.loggedUser,r=gt().Prompt,i=Object(a.useQueryClient)(),o=Object(a.useMutation)((function(e){return $e("persona/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,i.invalidateQueries(["persona",t]);case 3:return e.next=5,i.getQueryData(["persona",t]);case 5:return o=e.sent,a=[].concat(Object(Fe.a)(o),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),i.setQueryData(["persona",t],a),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return i.setQueryData(["persona",t],r)},onSettled:function(){return i.invalidateQueries(["persona",t])}}),c=o.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{nombre:"",mail:"",telefono:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,c(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{required:!0,size:"small",as:Ve.a,label:"Nombre",type:"string",maxLength:40,name:"nombre"}),Object(k.jsx)(Be.a,{required:!0,size:"small",as:Ve.a,label:"Email",type:"string",maxLength:100,name:"mail"}),Object(k.jsx)(Be.a,{size:"small",as:Ve.a,label:"Tel\xe9fono",type:"string",maxLength:11,name:"telefono"}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(r,{message:"El nombre y el mail no pueden estar en blanco",ok:!0})]})}var Nn=function(e,t,n){return[{field:"nombre",headerName:"Nombre",width:220,editable:e,headerAlign:"center"},{field:"mail",headerName:"Mail",width:150,editable:e,headerAlign:"center"},{field:"telefono",headerName:"Tel\xe9fono",width:140,editable:e,headerAlign:"center"},{field:"CUIT",headerName:"CUIT",width:130,editable:!0,headerAlign:"center",valueFormatter:function(e){return lt(e.value)}},{field:"deleteIcon",headerName:" ",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var r=e.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(e){n(r),t(!0)}})}}]};function Qn(e){var t=e.loggedUser,n=e.idSociety,r=(e.tipo,gt()),i=r.Prompt,o=r.setIsPromptOpen,d=Object(l.useState)(),s=Object(c.a)(d,2),u=s[0],b=s[1],f=!0;"vista"===(null===t||void 0===t?void 0:t["rol.fidu"])&&(f=!1);var j=Object(a.useQuery)(["persona",n],(function(){return Ge("persona/listar/".concat(n.id))})),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("persona/eliminar/".concat(n.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["persona",n]);case 2:return r=p.getQueryData(["persona",n]),i=r.filter((function(e){return e.id!==t})),p.setQueryData(["persona",n],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){return p.setQueryData(["persona",n],r)},onSettled:function(){return p.invalidateQueries(["persona",n])}}),x=O.mutate,g=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,i=t.id,o=t.value,e.next=3,$e("persona/modificar/".concat(n.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.field,i=t.id,o=t.value,e.next=3,p.cancelQueries(["persona",n]);case 3:return a=p.getQueryData(["persona",n]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),p.setQueryData(["persona",n],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,r){return p.setQueryData(["persona",n],r)},onSettled:function(){return p.invalidateQueries(["persona",n])}}),y=g.mutate,C=l.useState([{field:"nombre",sort:"asc"}]),S=Object(c.a)(C,2),P=S[0],A=S[1],I=Object(l.useState)(25),F=Object(c.a)(I,2),D=F[0],R=F[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(i,{message:"\xbfEliminar fila?",action:function(){return x(u)}}),Object(k.jsx)(St.a,{rows:m.map((function(e){return{id:null===e||void 0===e?void 0:e.id,nombre:null===e||void 0===e?void 0:e.nombre,telefono:null===e||void 0===e?void 0:e.telefono,mail:null===e||void 0===e?void 0:e.mail,CUIT:null===e||void 0===e?void 0:e.CUIT,deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:y,columns:Nn(f,o,b),sortModel:P,onSortModelChange:function(e){return e[0]!==P[0]&&function(e){var t;0===e.length&&(e.push(P[0]),"asc"===(null===(t=P[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),A(e)}(e)},pageSize:D,onPageSizeChange:function(e){return R(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:zn}})]})}function zn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["nombre","mail","telefono"]}})]})}function Un(e){var t=e.idSociety,n=e.loggedUser,r=e.tipo,i=l.useState("Personas"),o=Object(c.a)(i,2),a=o[0],d=o[1];return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(Fn.a,{value:a,children:[Object(k.jsx)(I.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(k.jsxs)(Dn.a,{onChange:function(e,t){d(t)},"aria-label":"lab API tabs example",children:[Object(k.jsx)(Tn.a,{label:"Personas",value:"Personas"}),Object(k.jsx)(Tn.a,{label:"Empresas",value:"Empresas"})]})}),Object(k.jsx)(Rn.a,{value:"Personas",children:Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(xn.a,{smUp:"vista"===n["rol.fidu"],children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(kn,{idSociety:t,loggedUser:n})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Qn,{idSociety:t,loggedUser:n})})]})})}),Object(k.jsx)(Rn.a,{value:"Empresas",children:Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(xn.a,{smUp:"vista"===n["rol.fidu"],children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(gn,{idSociety:t,loggedUser:n,tipo:r})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(wn,{idSociety:t,loggedUser:n,tipo:r})})]})})})]})})}function Mn(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Fiduciantes | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsx)(we.a,{children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Un,{idSociety:n,loggedUser:r,tipo:1})})})})]})}function En(e){var t=e.idSociety,n=Object(a.useQueryClient)(),r=Object(a.useMutation)((function(e){return $e("fideicomiso/agregar/".concat(t.id),e)}),{onSuccess:function(){n.refetchQueries(["fideicomiso",t])}}).mutate;return Object(k.jsx)(Be.c,{initialValues:{nombre:"",fechaInicio:null,fechaFin:null},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(n,i){var a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.setSubmitting,c=i.resetForm,e.next=3,o(t.id,n.nombre);case 3:!e.sent&&r(n),c(),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting;e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,required:!0,label:"Nombre Fideicomiso",size:"small",type:"string",maxLength:40,name:"nombre"}),Object(k.jsx)(Be.a,{name:"fechaInicio",children:function(e){var t=e.field,n=t.value,r=t.name,o=e.form.setFieldValue;return Object(k.jsx)(i,{label:"Inicio",value:n,setFieldValue:o,name:r})}}),Object(k.jsx)(Be.a,{name:"fechaFin",children:function(e){var t=e.field,n=t.value,r=t.name,o=e.form.setFieldValue;return Object(k.jsx)(i,{label:"Finalizacion",value:n,setFieldValue:o,name:r})}}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}});function i(e){var t=e.value,n=e.name,r=e.setFieldValue,i=e.label;return Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:i,value:t,inputFormat:"dd/MM/yyyy",renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({size:"small"},e))},onChange:function(e){return r(n,e)}})})}function o(e,t){return c.apply(this,arguments)}function c(){return c=Object(_e.a)(Ee.a.mark((function e(t,n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Boolean,e.next=3,Ge("fideicomiso/mostrar/".concat(t,"/").concat(n));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}}var _n=function(e,t,n,r,i){return[{field:"nombre",headerName:"Nombre",width:200,headerAlign:"center",align:"left",renderCell:Bn},{field:"fechaInicio",headerName:"Inicio",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"fechaFin",headerName:"Finalizaci\xf3n",editable:!0,width:170,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{year:"numeric",month:"short",timeZone:"UTC"})}},{field:"mailOP",headerName:"Mail Contador",width:200,editable:!0,headerAlign:"center",align:"left"},{field:"logo",headerName:"Logo",sortable:!1,width:150,renderCell:function(e){return e.row.logo?Object(k.jsx)("img",{style:{display:"block",margin:"auto",width:"30%"},src:"".concat("http://104.131.28.211:3000/","sociedades/").concat(n,"/").concat(e.row.logo),alt:"logo"}):""}},{field:"colorElegido",headerName:"Color",width:150,sortable:!1,editable:!1,renderCell:function(e){var t=e.row.colorElegido;return Object(k.jsx)("div",{style:{width:"100%",height:"100%",background:t}})},renderEditCell:function(n){var r=n.row.colorElegido;return Object(k.jsx)(Wn,{originalColor:Vn.filter((function(e){return e.css===r}))[0],color:e,setColor:t,colorOptions:Vn})}}]},Vn=[{label:"red",css:"red"},{label:"DarkGreen",css:"DarkGreen"},{label:"MidnightBlue",css:"MidnightBlue"},{label:"black",css:"black"},{label:"Salmon",css:"LightSalmon"},{label:"Khaki",css:"Khaki"},{label:"Bisque",css:"Bisque"},{label:"Plum",css:"Plum"},{label:"Orchid",css:"Orchid"},{label:"Chocolate",css:"Chocolate"},{label:"LightSteelBlue",css:"LightSteelBlue"},{label:"orange",css:"orange"},{label:"green",css:"green"}];function Ln(e){var t=e.idSociety,n=Object(l.useState)(null),r=Object(c.a)(n,2),i=r[0],o=r[1],d=gt(),s=d.Prompt,u=(d.setIsPromptOpen,Object(l.useState)()),b=Object(c.a)(u,2),f=b[0],j=(b[1],Object(a.useQuery)(["fideicomiso",t],(function(){return Ge("fideicomiso/listar/".concat(t.id))}))),m=j.data,v=j.isLoading,h=j.error,p=Object(a.useQueryClient)(),O=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("fideicomiso/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.cancelQueries(["fideicomiso",t]);case 2:return r=p.getQueryData(["fideicomiso",t]),i=r.filter((function(e){return e.id!==n})),p.setQueryData(["fideicomiso",t],i),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["fideicomiso",t],r)},onSettled:function(){return p.invalidateQueries(["fideicomiso",t])}}),x=O.mutate,g=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("fideicomiso/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,p.cancelQueries(["fideicomiso",t]);case 3:return a=p.getQueryData(["fideicomiso",t]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},r,o))]),p.setQueryData(["fideicomiso",t],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return p.setQueryData(["fideicomiso",t],r)},onSettled:function(){return p.invalidateQueries(["fideicomiso",t])}}),y=g.mutate,C=l.useState([{field:"nombre",sort:"asc"}]),S=Object(c.a)(C,2),P=S[0],A=S[1],I=Object(l.useState)(25),F=Object(c.a)(I,2),D=F[0],R=F[1];return v?"Cargando...":h?"Hubo un error: ".concat(h.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(s,{message:"\xbfEliminar fila?",action:function(){return x(f)}}),Object(k.jsx)(St.a,{rows:m.map((function(e){return{id:e.id,nombre:e.nombre,fechaInicio:e.fechaInicio,fechaFin:e.fechaFin,colorElegido:e.color,logo:e.logo,cloud:e.cloud,mailOP:e.mailOP,deleteId:e.id}})),onCellEditCommit:y,columns:_n(i,o,null===t||void 0===t?void 0:t.id),sortModel:P,onSortModelChange:function(e){return e[0]!==P[0]&&function(e){var t;0===e.length&&(e.push(P[0]),"asc"===(null===(t=P[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),A(e)}(e)},pageSize:D,onPageSizeChange:function(e){return R(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:qn}})]})}function Bn(e){var t="./".concat(e.row.id,"/").concat(e.row.nombre);return Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:e.row.nombre})})}function qn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["nombre","fechaInicio","fechaFin"]}})]})}function Wn(e){var t=e.color,n=e.setColor,r=e.colorOptions,i=e.originalColor;return Object(l.useEffect)((function(){return n((function(e){return(null===i||void 0===i?void 0:i.css)!==(null===e||void 0===e?void 0:e.css)?i:e}))}),[i,n]),Object(k.jsx)(bn.a,{value:t,onChange:function(e,t){n(t)},options:r,sx:{width:300},isOptionEqualToValue:function(e,t){return e.label===t.label},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({style:{background:null===t||void 0===t?void 0:t.css}},e))},renderOption:function(e,t,n){return Object(k.jsx)("div",Object(re.a)(Object(re.a)({},e),{},{style:{background:null===t||void 0===t?void 0:t.css},children:t.label}))}})}function Hn(e){var t,n=e.idSociety;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Fideicomisos | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(En,{idSociety:n})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ln,{idSociety:n})})]})})]})}function Gn(e){var t=e.idSociety,n=e.loggedUser,r=e.fideicomisoId,i=e.refetch,o=gt().Prompt,d=Object(a.useQueryClient)(),s=Object(l.useState)(null),u=Object(c.a)(s,2),b=u[0],f=u[1],j=Object(l.useContext)(oa),m=Object(a.useMutation)((function(e){return $e("producto/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(i){var o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.fideicomisoId=parseInt(r),i.creador=n.id,console.log(22,i),e.next=5,d.invalidateQueries(["producto",t]);case 5:return e.next=7,d.getQueryData(["producto",t]);case 7:return o=e.sent,e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return d.setQueryData(["producto",t],r)},onSettled:function(){t.id>0&&d.invalidateQueries(["producto",t]),i()}}),v=m.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{codigo:"",descripcion:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,t.tipo=t._tipo.id,v(t),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"C\xf3digo",type:"string",maxLength:40,size:"small",name:"codigo"},"codigo"),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Tipo",required:!0,disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){f(t),n("_tipo",t)},value:b,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:j||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Tipo"}))}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Descripci\xf3n",type:"string",size:"small",name:"descripcion"},"descripcion"),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(o,{message:"El CUIT no puede estar en blanco",ok:!0})]})}var $n=function(e,t,n){return[{field:"codigo",headerName:"C\xf3digo",width:140,editable:!1,headerAlign:"center",align:"center"},{field:"tipo",headerName:"Tipo",width:140,editable:!1,headerAlign:"center",align:"center"},{field:"metros",headerName:"Metros",type:"number",width:130,editable:!0,headerAlign:"center",align:"right"},{field:"precioULT",type:"number",headerName:"Precio",width:150,editable:!0,headerAlign:"center",align:"right"},{field:"descripcion",headerName:"Descri",width:150,editable:!0,headerAlign:"center",align:"right"},{field:"deleteIcon",headerName:" ",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var r=e.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(e){n(r),t(!0)}})}}]};function Yn(e){var t=e.idSociety,n=e.loggedUser,r=e.dataFide,i=e.isLoading,o=e.error,d=e.refetch,s=(e.fideicomisoId,gt()),u=s.Prompt,b=s.setIsPromptOpen,f=Object(l.useState)(),j=Object(c.a)(f,2),m=j[0],v=j[1],h=Object(l.useContext)(oa),p=!0;"vista"===(null===n||void 0===n?void 0:n["rol.fidu"])&&(p=!1);var O=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("producto/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.cancelQueries(["producto",t]);case 2:return r=O.getQueryData(["producto",t]),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return O.setQueryData(["producto",t],r)},onSettled:function(){t.id>0&&O.invalidateQueries(["producto",t]),d()}}),g=x.mutate,y=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("producto/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,console.log(r,i,o,t),e.next=4,O.cancelQueries(["producto",t]);case 4:return a=O.getQueryData(["producto",t]),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return O.setQueryData(["producto",t],r)},onSettled:function(){t.id>0&&O.invalidateQueries(["producto",t]),d()}}),C=y.mutate,S=l.useState([{field:"codigo",sort:"asc"}]),P=Object(c.a)(S,2),A=P[0],I=P[1],F=Object(l.useState)(25),D=Object(c.a)(F,2),R=D[0],T=D[1];return i?"Cargando...":o?"Hubo un error: ".concat(o.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(u,{message:"\xbfEliminar fila?",action:function(){return g(m)}}),Object(k.jsx)(St.a,{rows:null===r||void 0===r?void 0:r.item.map((function(e){var t;return{id:null===e||void 0===e?void 0:e.id,codigo:null===e||void 0===e?void 0:e.codigo,metros:null===e||void 0===e?void 0:e.metros,precioULT:null===e||void 0===e?void 0:e.precioULT,tipo:null===h||void 0===h||null===(t=h.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion,descripcion:null===e||void 0===e?void 0:e.descripcion,deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:C,columns:$n(p,b,v),sortModel:A,onSortModelChange:function(e){return e[0]!==A[0]&&function(e){var t;0===e.length&&(e.push(A[0]),"asc"===(null===(t=A[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),I(e)}(e)},pageSize:R,onPageSizeChange:function(e){return T(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Kn}})]})}function Kn(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["nombre","mail","telefono"]}})]})}function Zn(e){var t=e.idSociety,n=e.fideicomisoId,r=e.loggedUser,i=e.dataFide,o=e.isLoading,a=e.error,d=e.refetch,s=l.useState("1"),u=Object(c.a)(s,2),b=u[0],f=u[1];return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(Fn.a,{value:b,children:[Object(k.jsx)(I.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(k.jsx)(Dn.a,{onChange:function(e,t){f(t)},"aria-label":"lab API tabs example",children:Object(k.jsx)(Tn.a,{label:"Productos",value:"1"})})}),Object(k.jsx)(Rn.a,{value:"1",children:Object(k.jsxs)(I.a,{sx:{pt:3},children:[Object(k.jsx)(Gn,{idSociety:t,fideicomisoId:n,loggedUser:r,dataFide:i,isLoading:o,error:a,refetch:d}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Yn,{idSociety:t,fideicomisoId:n,loggedUser:r,dataFide:i,isLoading:o,error:a,refetch:d})})]})})]})})}function Jn(e){var t=e.idSociety,n=e.loggedUser,r=Object(s.j)().fideicomisoId,i=Object(a.useQuery)(["dataFide",t.id],(function(){return Ge("fideicomiso/mostrarConProducto/".concat(t.id,"/").concat(r))})),o=i.data,c=i.isLoading,l=i.error,d=i.refetch;return c?"Cargando...":l?"Hubo un error: ".concat(l.message):Object(k.jsx)(we.a,{children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Zn,{idSociety:t,fideicomisoId:r,loggedUser:n,dataFide:o,isLoading:c,error:l,refetch:d})})})}var Xn=n(1196),er=n(1198),tr=n(1199),nr=n(306),rr=n(1161),ir=n(1160),or=n(1151),ar=n(1193),cr=n(1157),lr=n(1195),dr=n(88),sr=n.n(dr),ur=n(1149),br=n(1150),fr=n(655);function jr(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function mr(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}function vr(e){var t=e.setActTab,n=e.iniNombre,r=e.setIniNombre,i=e.right,o=e.setRight,s=e.fideInForm,u=e.setFideInForm,b=e.fiduInForm,f=e.setFiduInForm,j=e.activeStep,m=e.idSociety,v=e.loggedUser,h=e.fideicomisos,p=e.personas,O=e.empresas,x=gt(),g=x.setIsPromptOpen,y=x.Prompt,w=Object(a.useQueryClient)(),C=Object(a.useMutation)((function(e){return $e("contrato/agregar/".concat(m.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.invalidateQueries(["contrato",m]);case 2:return e.next=4,w.getQueryData(["contrato",m]);case 4:return n=e.sent,r=[].concat(Object(Fe.a)(n),[Object(re.a)(Object(re.a)({},t),{},{id:(new Date).getTime()})]),w.setQueryData(["contrato",m],r),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return w.setQueryData(["contrato",m],n)},onSettled:function(){m.id>0&&w.invalidateQueries(["contrato",m]),t("1")}}),S=C.mutate,P=Object(l.useState)("persona"),D=Object(c.a)(P,2),R=D[0],T=D[1],N=Object(l.useState)(!1),Q=Object(c.a)(N,2),z=Q[0],U=Q[1];var M=d.a.useState([]),E=Object(c.a)(M,2),_=E[0],V=E[1];function L(){return(L=Object(_e.a)(Ee.a.mark((function e(t){var n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("producto/listar/".concat(m.id,"/").concat(t.id));case 2:n=e.sent,H(n.filter((function(e){return null===e.contratoId})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var B=d.a.useState([{id:0,codigo:""}]),q=Object(c.a)(B,2),W=q[0],H=q[1],G=mr(_,W),$=mr(_,i),Y=function(e){return function(){var t=_.indexOf(e),n=Object(Fe.a)(_);-1===t?n.push(e):n.splice(t,1),V(n)}},K=function(){var e=i;e=e.concat(G),o(e),H(jr(W,G)),V(jr(_,G))},Z=function(){H(W.concat($)),o(jr(i,$)),V(jr(_,$))},J=function(e){return Object(k.jsx)(fr.a,{sx:{width:200,height:230,overflow:"auto"},children:Object(k.jsxs)(te.a,{dense:!0,component:"div",role:"list",children:[e.map((function(e){var t=e.id;return Object(k.jsxs)(oe.a,{role:"listitem",button:!0,onClick:Y(e),children:[Object(k.jsx)(ur.a,{children:Object(k.jsx)(ir.a,{checked:-1!==_.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),Object(k.jsx)(br.a,{id:t,primary:e.codigo})]},e.id)})),Object(k.jsx)(oe.a,{})]})})},X={es:nr.a},ee={es:"__/__/____"},ne=d.a.useState(null),ie=Object(c.a)(ne,2),ce=ie[0],le=ie[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{fideicomisoId:null,CACbase:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,r){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=r.setSubmitting,r.resetForm,a=ht(ce),ce?(S({fideicomisoId:t.fideicomiso.id,personaId:"persona"===R?b.id:null,empresaId:"empresa"===R?b.id:null,CACbase:t.CACbase,nombre:n,adhesion:a,productos:i,creador:v.id}),o(!1)):g(!0);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,o=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsxs)(xn.a,{smUp:!(0===j),children:[Object(k.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:11,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Fideicomiso",title:"Seleccione un fideicomiso.",disablePortal:!0,style:{width:"330px",display:"inline-flex"},onChange:function(e,t){u(t),o("fideicomiso",t),function(e){L.apply(this,arguments)}(t)},value:s,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:h||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Fideicomiso"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(k.jsxs)(Ce.a,{item:!0,md:4,children:[Object(k.jsx)(xn.a,{smUp:"empresa"===R,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Persona",title:"Seleccione una Persona.",disablePortal:!0,style:{width:"330px",display:"inline-flex"},onChange:function(e,t){f(t),o("persona",t)},value:"persona"===R?b:null,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:p||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Persona"}))}})}),Object(k.jsx)(xn.a,{smUp:"persona"===R,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Empresa",title:"Seleccione una Empresa.",disablePortal:!0,style:{width:"330px",display:"inline-flex"},onChange:function(e,t){f(t),o("empresa",t)},value:"empresa"===R?b:null,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:O||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Empresa"}))}})})]}),Object(k.jsx)(Ce.a,{item:!0,md:7,children:Object(k.jsxs)(or.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:"persona",onChange:function(e){return t=e,f(null),T(t.target.value),void console.log(t.target.value);var t},name:"tipo_fiduciante",children:[Object(k.jsx)(ar.a,{value:"persona",control:Object(k.jsx)(cr.a,{}),label:"Persona"}),Object(k.jsx)(ar.a,{value:"empresa",control:Object(k.jsx)(cr.a,{}),label:"Empresa"})]},"tipo_fiduciante")}),Object(k.jsx)(Ce.a,{item:!0,md:1}),Object(k.jsx)(Ce.a,{item:!0,md:11,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h6",children:'* Si el fiduciante no existe debe ingresarlo previamente en "Fiduciantes".'})})]}),Object(k.jsx)(xn.a,{smUp:!(1===j),children:Object(k.jsxs)(Ce.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[Object(k.jsx)(Ce.a,{item:!0,children:J(W)}),Object(k.jsx)(Ce.a,{item:!0,children:Object(k.jsxs)(Ce.a,{container:!0,direction:"column",alignItems:"center",children:[Object(k.jsx)(ae.a,{sx:{my:.5},variant:"outlined",size:"small",onClick:K,disabled:0===G.length,"aria-label":"move selected right",children:">"}),Object(k.jsx)(ae.a,{sx:{my:.5},variant:"outlined",size:"small",onClick:Z,disabled:0===$.length,"aria-label":"move selected left",children:"<"})]})}),Object(k.jsx)(Ce.a,{item:!0,children:J(i)}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"center",color:"textPrimary",variant:"h6",children:'* Si el producto no existe debe ingresarlo previamente en "Fidecomisos / Productos".'})})]})}),Object(k.jsxs)(xn.a,{smUp:!(2===j),children:[Object(k.jsxs)(Ce.a,{item:!0,md:5,children:[Object(k.jsx)(Be.a,{as:Ve.a,title:"Nombre",label:"Nombre",required:!0,maxLength:40,size:"small",sx:{width:"24ch"},value:n,name:"nombre",onChange:function(e){var t;return r(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value.toString())}},"_nombre"),Object(k.jsx)(Be.a,{as:Ve.a,title:"CAC Base",label:"CAC Base",type:"float",required:!0,maxLength:11,size:"small",sx:{width:"24ch"},name:"CACbase",onChange:function(e){return function(e,t,n){e.preventDefault();var r=e.target.value,i=/^\d{0,11}(\.\d{0,2})?$/,o=e.which||e.keyCode,a=e.ctrlKey?e.ctrlKey:17===o;(i.test(r.toString())||a)&&t(n,r.toString())}(e,o,"CACbase")}})]}),Object(k.jsx)(Ce.a,{item:!0,md:3,children:Object(k.jsx)(rt.b,{dateAdapter:ot.a,locale:X.es,children:Object(k.jsx)("div",{children:Object(k.jsx)(rr.a,{mask:ee.es,value:ce,label:"Adhesion",onChange:function(e){return le(e)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})})}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h6",children:"* Ingrese CAC y Fecha de Adhesi\xf3n."})})]}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"})]}),Object(k.jsx)(I.a,{sx:{width:"100%"},children:Object(k.jsx)(lr.a,{in:z,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){U(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}}),Object(k.jsx)(y,{message:"...error",ok:!0})]})}var hr=["Seleccione fideicomiso y fiduciante","Seleccione uno o mas productos","Campos adicionales y finalizar"];function pr(e){var t=e.setActTab,n=e.idSociety,r=e.loggedUser,i=(e.dataFide,e.isLoading,e.error,e.refetch,e.fideicomisoId,l.useState(0)),o=Object(c.a)(i,2),d=o[0],s=o[1],u=l.useState(new Set),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(n.id))})).data,v=Object(a.useQuery)(["empresas"],(function(){return Ge("empresa/listar/".concat(n.id,"/1"))})).data,h=Object(a.useQuery)(["persona"],(function(){return Ge("persona/listar/".concat(n.id))})).data,p=function(e){return 99===e},O=function(e){return f.has(e)},x=function(){var e,t=f;1===d&&E(null===(e=N[0])||void 0===e?void 0:e.codigo);O(d)&&(t=new Set(t.values())).delete(d),s((function(e){return e+1})),j(t)},g=Object(l.useState)(null),y=Object(c.a)(g,2),w=y[0],C=y[1],S=Object(l.useState)(null),P=Object(c.a)(S,2),F=P[0],D=P[1],R=l.useState([]),T=Object(c.a)(R,2),N=T[0],Q=T[1],z=l.useState(""),U=Object(c.a)(z,2),M=U[0],E=U[1],_=!1;0===d&&(null===w||void 0===w?void 0:w.id)>0&&(null===F||void 0===F?void 0:F.id)>0&&(_=!0);var V=!1;return 1===d&&(null===N||void 0===N?void 0:N.length)>0&&(V=!0),Object(k.jsxs)(I.a,{sx:{width:"100%"},children:[Object(k.jsx)(Xn.a,{activeStep:d,children:hr.map((function(e,t){var n={},r={};return p(t)&&(r.optional=Object(k.jsx)(A.a,{variant:"caption",children:"Optional"})),O(t)&&(n.completed=!1),Object(k.jsx)(er.a,Object(re.a)(Object(re.a)({},n),{},{children:Object(k.jsx)(tr.a,Object(re.a)(Object(re.a)({},r),{},{children:e}))}),e)}))}),d===hr.length?Object(k.jsxs)(l.Fragment,{children:[Object(k.jsx)(A.a,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}),Object(k.jsxs)(I.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(k.jsx)(I.a,{sx:{flex:"1 1 auto"}}),Object(k.jsx)(ae.a,{onClick:function(){s(0)},children:"Reset"})]})]}):Object(k.jsx)(l.Fragment,{children:Object(k.jsxs)(we.a,{children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(vr,{setActTab:t,iniNombre:M,setIniNombre:E,fideInForm:w,setFideInForm:C,fiduInForm:F,setFiduInForm:D,right:N,setRight:Q,activeStep:d,idSociety:n,loggedUser:r,fideicomisos:m,empresas:v,personas:h})}),Object(k.jsxs)(I.a,{sx:{display:"flex",flexDirection:"row",pt:2},children:[Object(k.jsx)(ae.a,{color:"inherit",disabled:0===d,onClick:function(){s((function(e){return e-1}))},sx:{mr:1},children:"Back"}),Object(k.jsx)(I.a,{sx:{flex:"1 1 auto"}}),p(d)&&Object(k.jsx)(ae.a,{color:"inherit",onClick:function(){if(!p(d))throw new Error("You can't skip a step that isn't optional.");s((function(e){return e+1})),j((function(e){var t=new Set(e.values());return t.add(d),t}))},sx:{mr:1},children:"Skip"}),_&&Object(k.jsx)(ae.a,{onClick:x,children:"Next"}),V&&Object(k.jsx)(ae.a,{onClick:x,children:"Next"}),d<hr.length-1&&!_&&!V&&Object(k.jsx)(ae.a,{disabled:!0,onClick:x,children:"Next"}),d===hr.length-1&&Object(k.jsx)(ae.a,{disabled:!0,onClick:x,children:"Fin"})]})]})})]})}var Or=function(e,t,n){return[{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center",renderCell:yr},{field:"nombre",headerName:"Nombre",width:155,editable:e,headerAlign:"center",renderCell:wr},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"left"},{field:"fiduciante",headerName:"Fiduciante",width:170,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:" ",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var r=e.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(e){n(r),t(!0)}})}}]};function xr(e){var t=e.idSociety,n=e.loggedUser,r=gt(),i=r.Prompt,o=r.setIsPromptOpen,d=Object(l.useState)(),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(a.useQuery)(["contrato",t],(function(){return Ge("contrato/listar/".concat(t.id,"/0"))})),j=f.data,m=f.isLoading,v=f.error,h=f.refetch,p=!0;"vista"===(null===n||void 0===n?void 0:n["rol.contrato"])&&(p=!1);var O=Object(a.useQueryClient)(),x=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("contrato/eliminar/".concat(t.id),{id:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.cancelQueries(["contrato",t]);case 2:return r=O.getQueryData(["contrato",t]),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return O.setQueryData(["contrato",t],r)},onSettled:function(){t.id>0&&O.invalidateQueries(["contrato",t]),h()}}),g=x.mutate,y=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("contrato/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,console.log(r,i,o,t),e.next=4,O.cancelQueries(["contrato",t]);case 4:return a=O.getQueryData(["contrato",t]),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return O.setQueryData(["contrato",t],r)},onSettled:function(){t.id>0&&O.invalidateQueries(["contrato",t]),h()}}),C=y.mutate,S=l.useState([{field:"id",sort:"desc"}]),P=Object(c.a)(S,2),A=P[0],I=P[1],F=Object(l.useState)(25),D=Object(c.a)(F,2),R=D[0],T=D[1];return m?"Cargando...":v?"Hubo un error: ".concat(v.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(i,{message:"\xbfEliminar fila?",action:function(){return g(u)}}),Object(k.jsx)(St.a,{rows:null===j||void 0===j?void 0:j.map((function(e){var t,n,r;return{id:null===e||void 0===e?void 0:e.id,nombre:null===e||void 0===e?void 0:e.nombre,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",fiduciante:(null===e||void 0===e?void 0:e.empresaId)>0?null===e||void 0===e||null===(n=e.empresas[0])||void 0===n?void 0:n.razonSocial:(null===e||void 0===e?void 0:e.personas)?null===e||void 0===e||null===(r=e.personas[0])||void 0===r?void 0:r.nombre:"",deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:C,columns:Or(p,o,b),sortModel:A,onSortModelChange:function(e){return e[0]!==A[0]&&function(e){var t;0===e.length&&(e.push(A[0]),"asc"===(null===(t=A[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),I(e)}(e)},pageSize:R,onPageSizeChange:function(e){return T(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:gr}})]})}function gr(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["nombre","mail","telefono"]}})]})}function yr(e){var t="".concat(e.row.id,"/Detalle Contrato");return Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:e.row.id})})}function wr(e){var t="".concat(e.row.id,"/Detalle Contrato");return Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:e.row.nombre})})}function Cr(e){var t=e.idSociety,n=e.fideicomisoId,r=e.loggedUser,i=e.dataFide,o=e.isLoading,a=e.error,d=e.refetch,s=l.useState("1"),u=Object(c.a)(s,2),b=u[0],f=u[1];return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(Fn.a,{value:b,children:[Object(k.jsx)(I.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(k.jsxs)(Dn.a,{onChange:function(e,t){f(t)},"aria-label":"lab API tabs example",children:[Object(k.jsx)(Tn.a,{label:"Nuevo contrato",value:"0"}),Object(k.jsx)(Tn.a,{label:"Contratos",value:"1"}),Object(k.jsx)(Tn.a,{label:"Liquidaciones",value:"2"})]})}),Object(k.jsx)(Rn.a,{value:"0",children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(pr,{setActTab:f,idSociety:t,fideicomisoId:n,loggedUser:r,dataFide:i,isLoading:o,error:a,refetch:d})})}),Object(k.jsx)(Rn.a,{value:"1",children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(xr,{idSociety:t,fideicomisoId:n,loggedUser:r,dataFide:i,isLoading:o,error:a,refetch:d})})}),Object(k.jsx)(Rn.a,{value:"2",children:Object(k.jsx)(I.a,{sx:{pt:3},children:"bbbb"})})]})})}function Sr(e){var t=e.idSociety,n=e.loggedUser,r=Object(s.j)().fideicomisoId,i=Object(a.useQuery)(["dataFide",t.id],(function(){return Ge("fideicomiso/mostrarConProducto/".concat(t.id,"/").concat(r))})),o=i.data,c=i.isLoading,l=i.error,d=i.refetch;return c?"Cargando...":l?"Hubo un error: ".concat(l.message):Object(k.jsx)(we.a,{children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Cr,{idSociety:t,fideicomisoId:r,loggedUser:n,dataFide:o,isLoading:c,error:l,refetch:d})})})}function Pr(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Rubro | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ut,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Et,{idSociety:n,loggedUser:r})})]})})]})}function Ar(e){var t,n=e.idSociety,r=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Rubro | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ut,{idSociety:n,loggedUser:r})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Et,{idSociety:n,loggedUser:r})})]})})]})}function Ir(e){e.contratoId;var t=e.loggedUser,n=(e.moneda,e.refetch),r=Object(l.useContext)(Jo),i=gt().Prompt,o=Object(a.useQueryClient)(),c=Object(a.useMutation)((function(e){return $e("cuota/agregar/".concat(r.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var i,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.creador=parseInt(t.id),e.next=3,o.invalidateQueries(["cuota",r]);case 3:return e.next=5,o.getQueryData(["cuota",r]);case 5:return i=e.sent,a=[].concat(Object(Fe.a)(i),[Object(re.a)(Object(re.a)({},n),{},{id:(new Date).getTime()})]),o.setQueryData(["cuota",r],a),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return o.setQueryData(["cuota",r],n)},onSettled:function(){r.id>0&&o.invalidateQueries(["cuota",r]),n()}}),d=c.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{descripcion:"",monto:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,d(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,required:!0,size:"small",label:"Tarea",type:"string",name:"descripcion"}),Object(k.jsx)(Be.a,{as:Ve.a,required:!0,label:"Monto",size:"small",type:"float",name:"monto",onChange:function(e){return function(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,11}$/.test(r.toString())&&t(n,r.toString())}(e,n,"monto")}}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(i,{message:"Tarea y monto no puede estar en blanco",ok:!0})]})}var Fr=function(e,t,n,r){return[{field:"createdAt",headerName:"Fecha",width:150,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return dt(e.value)}},{field:"concepto",headerName:"concepto",width:400,editable:e,headerAlign:"left"},{field:"cuota",headerName:"",width:50,editable:!0,headerAlign:"center"},{field:"monto",preProcessEditCellProps:Rr,headerName:"Monto",width:130,editable:e,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:e,headerAlign:"center"},{field:"CACBase",headerName:"Cac Base",width:50,editable:e,headerAlign:"center"},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(e){r(t),n(!0)}})}}]};function Dr(e){var t,n,r,i=e.loggedUser,o=e.dataContrato,d=e.isLoading,s=e.error,u=e.refetch,b=e.moneda,f=(e.totPagos,e.totAjuste,Object(l.useContext)(Jo)),j=gt(),m=j.Prompt,v=j.setIsPromptOpen,h=Object(l.useState)(),p=Object(c.a)(h,2),O=p[0],x=p[1],g=!0;"vista"===(null===i||void 0===i?void 0:i["rol.contrato"])&&(g=!1);var y=Object(a.useQueryClient)(),C=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OCdetalle/eliminar/".concat(f.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.cancelQueries(["OCdetalle",f]);case 2:return n=y.getQueryData(["OCdetalle",f]),r=n.filter((function(e){return e.id!==t})),y.setQueryData(["OCdetalle",f],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return y.setQueryData(["OCdetalle",f],n)},onSettled:function(){f.id>0&&y.invalidateQueries(["OCdetalle",f]),u()}}),S=C.mutate,P=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,$e("OCdetalle/modificar/".concat(f.id),Object(w.a)({id:r},n,i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,y.cancelQueries(["OCdetalle",f]);case 3:return o=y.getQueryData(["OCdetalle",f]),a=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==r}))),[Object(re.a)(Object(re.a)({},o.find((function(e){return e.id===r}))),{},Object(w.a)({},n,i))]),y.setQueryData(["OCdetalle",f],a),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return y.setQueryData(["OCdetalle",f],n)},onSettled:function(){f.id>0&&y.invalidateQueries(["OCdetalle",f]),u()}}),I=P.mutate;return d?"Cargando...":s?"Hubo un error: ".concat(s.message):Object(k.jsx)("div",{style:{width:"100%"},children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h6"})}),Object(k.jsxs)(Ce.a,{item:!0,md:12,children:[Object(k.jsx)(m,{message:"\xbfEliminar fila?",action:function(){return S(O)}}),Object(k.jsx)(St.a,{rows:null===o||void 0===o||null===(t=o.cuotas)||void 0===t?void 0:t.filter((function(e){return e.moneda===b})).map((function(e){return{id:null===e||void 0===e?void 0:e.id,concepto:null===e||void 0===e?void 0:e.concepto,cuota:null===e||void 0===e?void 0:e.cuota,monto:null===e||void 0===e?void 0:e.monto,moneda:null===e||void 0===e?void 0:e.moneda,CACBase:null===e||void 0===e?void 0:e.CACBase,createdAt:null===e||void 0===e?void 0:e.createdAt,deleteId:null===e||void 0===e?void 0:e.id}})),onCellEditCommit:I,columns:Fr(g,"ARS"===b?null===o||void 0===o||null===(n=o.oc)||void 0===n||n.monto_ARS:null===o||void 0===o||null===(r=o.oc)||void 0===r||r.monto_USD,v,x),disableSelectionOnClick:!0,autoHeight:!0})]})]})})}function Rr(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(re.a)(Object(re.a)({},e.props),{},{error:t})}function Tr(e){var t=e.OCId,n=e.idSociety,r=e.loggedUser,i=e.dataContrato,o=e.isLoading,a=e.error,c=e.refetch,l=e.moneda,d=e.setMoneda,s=(e.CACs,"vista"===(null===r||void 0===r?void 0:r["rol.oc"]));return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(Fn.a,{value:l,children:[Object(k.jsx)(I.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(k.jsxs)(Dn.a,{onChange:function(e,t){d(t)},"aria-label":"lab API tabs example",children:[Object(k.jsx)(Tn.a,{label:"Compromisos en Pesos",value:"ARS"}),Object(k.jsx)(Tn.a,{label:"Compromisos en Dolares",value:"USD"})]})}),Object(k.jsxs)(Rn.a,{value:"ARS",children:[Object(k.jsx)(xn.a,{smUp:s,children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ir,{OCId:t,idSociety:n,loggedUser:r,dataContrato:i,isLoading:o,error:a,refetch:c,moneda:"ARS"})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Dr,{OCId:t,idSociety:n,loggedUser:r,dataContrato:i,isLoading:o,error:a,refetch:c,moneda:"ARS"})})]}),Object(k.jsx)(Rn.a,{value:"USD"})]})})}var kr=n(8),Nr=kr.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:14,textAlign:"left",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),Qr=function(e){e.dataContrato,e.apiServerUrl,e.idSociedad;return Object(k.jsx)(kr.Document,{children:Object(k.jsx)(kr.Page,{size:"A4",style:Nr.page,children:Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Nr.saltolinea,children:"Contrato Hola"})})})})},zr="http://104.131.28.211:3000/";function Ur(e){var t,n,r,i,o,l,u,b,f=e.idSociety,j=e.loggedUser,m=d.a.useState("ARS"),v=Object(c.a)(m,2),h=v[0],p=v[1],O=Object(s.j)().contratoId,x=d.a.useState(!1),g=Object(c.a)(x,2),y=g[0],w=g[1];var C=Object(a.useQuery)(["dataContrato",f.id],(function(){return Ge("contrato/mostrar/".concat(f.id,"/").concat(O))})),S=C.data,P=C.isLoading,F=C.error,D=C.refetch;return P?"Cargando...":F?"Hubo un error: ".concat(F.message):Object(k.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(k.jsx)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:Object(k.jsxs)(I.a,{mt:2,sx:{pt:1},children:[Object(k.jsx)(ae.a,{onClick:function(){w(!y)},children:y?"Ocultar PDF":"Ver PDF"}),Object(k.jsx)(kr.PDFDownloadLink,{document:!1===P?Object(k.jsx)(Qr,{dataContrato:S,idSociedad:f.id,apiServerUrl:zr}):null,fileName:function(e){var t,n,r,i,o;return(null===e||void 0===e||null===(t=e.contrato)||void 0===t?void 0:t.id)+" OP -"+(null===e||void 0===e||null===(n=e.contrato)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.nombre)+"-"+(null===e||void 0===e||null===(i=e.contrato)||void 0===i||null===(o=i.empresas[0])||void 0===o?void 0:o.razonSocial)+".pdf"}(S),children:Object(k.jsx)(ae.a,{variant:"info",children:"Descargar"})})]})}),Object(k.jsx)(k.Fragment,{children:y?Object(k.jsx)(kr.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(k.jsx)(Qr,{dataContrato:S,apiServerUrl:zr})}):Object(k.jsxs)(we.a,{children:[Object(k.jsxs)(I.a,{sx:{pt:3},children:[Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:null===S||void 0===S||null===(t=S.cont)||void 0===t||null===(n=t.fideicomisos[0])||void 0===n?void 0:n.nombre})}),Object(k.jsx)(Ce.a,{item:!0,md:7,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:["Fiduciante: ",(null===S||void 0===S||null===(r=S.cont)||void 0===r?void 0:r.empresaId)>0?null===S||void 0===S||null===(i=S.cont)||void 0===i?void 0:i.empresas[0].razonSocial:null===S||void 0===S||null===(o=S.cont)||void 0===o?void 0:o.personas[0].nombre]})}),Object(k.jsx)(Ce.a,{item:!0,md:3,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:st(null===S||void 0===S||null===(l=S.cont)||void 0===l?void 0:l.createdAt)})})]}),Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:1.5,md:2},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"\xa0"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:["CAC Base: ",null===S||void 0===S||null===(u=S.cont)||void 0===u?void 0:u.CACbase]})}),Object(k.jsx)(Ce.a,{item:!0,md:8,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:["Fecha de adhesi\xf3n: ",st(null===S||void 0===S||null===(b=S.cont)||void 0===b?void 0:b.adhesion)]})})]})]}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Tr,{contratoId:O,idSociety:f,loggedUser:j,dataContrato:S,isLoading:P,error:F,moneda:h,setMoneda:p,refetch:D})})]})})]})}function Mr(e){var t=e.idSociety,n=e.loggedUser,r=e.fideicomisos,i=e.proveedores,o=e.ddfacturas,d=e.ddfacturasBlue,s=Object(a.useQueryClient)(),u=!1;"total"===(null===n||void 0===n?void 0:n["rol.op"])&&(u=!0);var b=Object(a.useMutation)((function(e){return $e("OP/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.invalidateQueries(["OP",t]);case 2:return e.next=4,s.getQueryData(["OP",t]);case 4:return r=e.sent,i=[].concat(Object(Fe.a)(r),[Object(re.a)(Object(re.a)({},n),{},{id:(new Date).getTime()})]),s.setQueryData(["OP",t],i),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return s.setQueryData(["OP",t],r)},onSettled:function(){return s.invalidateQueries(["OP",t])}}),f=b.mutate,j=Object(l.useState)(null),m=Object(c.a)(j,2),v=m[0],h=m[1],p=Object(l.useState)(null),O=Object(c.a)(p,2),x=O[0],g=O[1],y=Object(l.useState)(null),w=Object(c.a)(y,2),C=w[0],S=w[1],P=Object(l.useState)(!1),A=Object(c.a)(P,2),D=A[0],R=A[1],T=!1,N=!0,Q=!1;"blue"===(null===n||void 0===n?void 0:n["rol.op"])&&(N=!1,T=!0,u=!1,Q=!0);var z=Object(l.useState)(N),U=Object(c.a)(z,2),M=U[0],E=U[1];return Object(k.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,r){var i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.setSubmitting,r.resetForm,t.fideicomiso.id>0&&t.empresa.id>0&&t.factura.id>0&&v.id>0&&x.id>0&&C.id>0?(f({fideicomisoId:t.fideicomiso.id,empresaId:t.empresa.id,rubroId:t.empresa.rubroId,subRubroId:t.empresa.subrubroId,facturaId:t.factura.id,blue:M?Q?1:0:1,creador:n.id}),R(!0),i(!1)):console.log("no entro",t.fideicomiso.id,t.empresa.id,t.factura.id,v.id,x.id,C.id);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",required:!0,label:"Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){h(t),n("fideicomiso",t)},value:v,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Fideicomiso"}))}}),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Razon Social",required:!0,disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){g(t),S(null),n("empresa",t)},value:x,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Razon Social"}))}}),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Factura N\u0970",disablePortal:!0,style:{width:"230px",display:M?"inline-flex":"none"},onChange:function(e,t){S(t),n("factura",t)},value:C,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o?null===o||void 0===o?void 0:o.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===(null===v||void 0===v?void 0:v.id)&&(null===e||void 0===e?void 0:e.empresaId)===(null===x||void 0===x?void 0:x.id)})):[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Factura N\u0970"}))}}),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Factura Blue N\u0970",disablePortal:!0,style:{width:"230px",display:M?"none":"inline-flex"},onChange:function(e,t){S(t),n("factura",t)},value:C,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d?null===d||void 0===d?void 0:d.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===(null===v||void 0===v?void 0:v.id)&&(null===e||void 0===e?void 0:e.empresaId)===(null===x||void 0===x?void 0:x.id)})):[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Factura Blue N\u0970"}))}}),"\xa0\xa0",Object(k.jsx)(xn.a,{smUp:!u,children:Object(k.jsx)(ar.a,{control:Object(k.jsx)(ir.a,{id:"blue",name:"blue",onChange:function(e){return function(e,t,n,r,i){e.preventDefault(),i(!r),t(n,r?"on":"off")}(e,n,"blue",M,E)}}),label:"Blue"})}),Object(k.jsx)(xn.a,{smUp:!T,children:Object(k.jsx)(ar.a,{control:Object(k.jsx)(ir.a,{disabled:!0,defaultChecked:!0,id:"blue",name:"blue2"}),label:"Blue"})}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(k.jsx)(ae.a,{id:"bagregar",variant:"text",type:"submit",disabled:t,children:"Agregar"}),Object(k.jsx)(I.a,{sx:{width:"100%"},children:Object(k.jsx)(lr.a,{in:D,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){R(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}})}var Er=n(1058);function _r(e){var t=e.setFiltFide,n=e.setFiltRS,r=e.setFiltEst,i=e.filtTerm,o=e.setFiltTerm,a=(e.idSociety,e.loggedUser,e.fideicomisos),d=e.proveedores,s=(e.ddfacturas,e.ddfacturasBlue,Object(l.useContext)(Xo)),u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(l.useState)(null),v=Object(c.a)(m,2),h=v[0],p=v[1],O=Object(l.useState)(null),x=Object(c.a)(O,2),g=x[0],y=x[1];function w(e,i){var o=-1;(null===i||void 0===i?void 0:i.id)&&(o=i.id),"fide"===e&&t(o),"rs"===e&&n(o),"estado"===e&&r(o)}return Object(k.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),w("fide",t)},value:f,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),w("rs",t)},value:h,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:d||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0",Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Estado",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){y(t),w("estado",t)},value:g,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:s||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Estado"}))}}),Object(k.jsx)(Er.a,{children:Object(k.jsx)(ar.a,{control:Object(k.jsx)(ir.a,{defaultChecked:!0,id:"chkTerminados",name:"chkTerminados",onChange:function(e){return o(!i)}}),label:"Ocultar finalizados"})})]})}})}var Vr=n(80),Lr=(n(267),kr.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},description:{width:"35%",textAlign:"left",borderRightWidth:1,paddingLeft:8},qty:{width:"35%",borderRightWidth:1,textAlign:"left",paddingLeft:8},rate:{width:"15%",borderRightWidth:1,textAlign:"right",paddingRight:8},amount:{width:"15%"},amountRow:{width:"15%",textAlign:"right",paddingRight:8}})),Br=function(e){var t,n,r,i,o,a,c,l,d,s,u,b,f,j,m,v,h,p,O,x,g,y,w,C,S,P,A,I,F,D,R,T,N,Q,z,U,M,E,_,V,L,B,q,W,H,G,$,Y,K,Z,J,X,ee,te,ne,re,ie,oe,ae,ce,le,de,se,ue,be,fe,je,me,ve,he,pe,Oe,xe,ge=e.dataOP,ye=e.dataFacturas;return Object(k.jsxs)(kr.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:ge?null===ge||void 0===ge||null===(t=ge.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(k.jsxs)(kr.View,{style:[Lr.container,{borderBottomColor:ge?null===ge||void 0===ge||null===(n=ge.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",backgroundColor:ge?null===ge||void 0===ge||null===(r=ge.fideicomisos[0])||void 0===r?void 0:r.color2:"#ffffff"}],children:[Object(k.jsx)(kr.Text,{style:[Lr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(i=ge.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Proveedor"}),Object(k.jsx)(kr.Text,{style:[Lr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(o=ge.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"Detalle"}),Object(k.jsx)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(a=ge.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"N\xba Factura"}),Object(k.jsx)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(c=ge.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"N\xba OC"}),Object(k.jsx)(kr.Text,{style:[Lr.amount,{borderRightColor:ge?null===ge||void 0===ge||null===(l=ge.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Importe"})]}),Object(k.jsxs)(kr.View,{style:[Lr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(d=ge.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[Lr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(s=ge.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(u=ye.item[0])||void 0===u||null===(b=u.empresas[0])||void 0===b?void 0:b.razonSocial]}),Object(k.jsxs)(kr.Text,{style:[Lr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(f=ge.fideicomisos[0])||void 0===f?void 0:f.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(j=ye.item[0])||void 0===j?void 0:j.detalle]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(m=ge.fideicomisos[0])||void 0===m?void 0:m.color:"#ffffff"}],children:["  ",Object(k.jsx)(kr.Link,{src:null===ye||void 0===ye||null===(v=ye.item[0])||void 0===v?void 0:v.link,children:null===ye||void 0===ye||null===(h=ye.item[0])||void 0===h?void 0:h.numero})]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(p=ge.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(O=ye.item[0])||void 0===O?void 0:O.txtOC]}),Object(k.jsxs)(kr.Text,{style:[Lr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(x=ge.fideicomisos[0])||void 0===x?void 0:x.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[0])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(g=ye.item[0])||void 0===g?void 0:g.montoTotal)):""]})]}),Object(k.jsxs)(kr.View,{style:[Lr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(y=ge.fideicomisos[0])||void 0===y?void 0:y.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[Lr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(w=ge.fideicomisos[0])||void 0===w?void 0:w.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(C=ye.item[1])||void 0===C||null===(S=C.empresas[0])||void 0===S?void 0:S.razonSocial]}),Object(k.jsxs)(kr.Text,{style:[Lr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(P=ge.fideicomisos[0])||void 0===P?void 0:P.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(A=ye.item[1])||void 0===A?void 0:A.detalle]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(I=ge.fideicomisos[0])||void 0===I?void 0:I.color:"#ffffff"}],children:["  ",Object(k.jsx)(kr.Link,{src:null===ye||void 0===ye||null===(F=ye.item[1])||void 0===F?void 0:F.link,children:null===ye||void 0===ye||null===(D=ye.item[1])||void 0===D?void 0:D.numero})]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(R=ge.fideicomisos[0])||void 0===R?void 0:R.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(T=ye.item[1])||void 0===T?void 0:T.txtOC]}),Object(k.jsxs)(kr.Text,{style:[Lr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(N=ge.fideicomisos[0])||void 0===N?void 0:N.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[1])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(Q=ye.item[1])||void 0===Q?void 0:Q.montoTotal)):""]})]}),Object(k.jsxs)(kr.View,{style:[Lr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(z=ge.fideicomisos[0])||void 0===z?void 0:z.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[Lr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(U=ge.fideicomisos[0])||void 0===U?void 0:U.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(M=ye.item[2])||void 0===M||null===(E=M.empresas[0])||void 0===E?void 0:E.razonSocial]}),Object(k.jsxs)(kr.Text,{style:[Lr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(_=ge.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(V=ye.item[2])||void 0===V?void 0:V.detalle]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(L=ge.fideicomisos[0])||void 0===L?void 0:L.color:"#ffffff"}],children:["  ",Object(k.jsx)(kr.Link,{src:null===ye||void 0===ye||null===(B=ye.item[2])||void 0===B?void 0:B.link,children:null===ye||void 0===ye||null===(q=ye.item[2])||void 0===q?void 0:q.numero})]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(W=ge.fideicomisos[0])||void 0===W?void 0:W.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(H=ye.item[2])||void 0===H?void 0:H.txtOC]}),Object(k.jsxs)(kr.Text,{style:[Lr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(G=ge.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[2])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===($=ye.item[2])||void 0===$?void 0:$.montoTotal)):""]})]}),Object(k.jsxs)(kr.View,{style:[Lr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(Y=ge.fideicomisos[0])||void 0===Y?void 0:Y.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[Lr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(K=ge.fideicomisos[0])||void 0===K?void 0:K.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(Z=ye.item[3])||void 0===Z||null===(J=Z.empresas[0])||void 0===J?void 0:J.razonSocial]}),Object(k.jsxs)(kr.Text,{style:[Lr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(X=ge.fideicomisos[0])||void 0===X?void 0:X.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(ee=ye.item[3])||void 0===ee?void 0:ee.detalle]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(te=ge.fideicomisos[0])||void 0===te?void 0:te.color:"#ffffff"}],children:["  ",Object(k.jsx)(kr.Link,{src:null===ye||void 0===ye||null===(ne=ye.item[3])||void 0===ne?void 0:ne.link,children:null===ye||void 0===ye||null===(re=ye.item[3])||void 0===re?void 0:re.numero})]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(ie=ge.fideicomisos[0])||void 0===ie?void 0:ie.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(oe=ye.item[3])||void 0===oe?void 0:oe.txtOC]}),Object(k.jsxs)(kr.Text,{style:[Lr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(ae=ge.fideicomisos[0])||void 0===ae?void 0:ae.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[3])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(ce=ye.item[3])||void 0===ce?void 0:ce.montoTotal)):""]})]}),Object(k.jsxs)(kr.View,{style:[Lr.row,{borderBottomColor:ge?null===ge||void 0===ge||null===(le=ge.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[Lr.description,{borderRightColor:ge?null===ge||void 0===ge||null===(de=ge.fideicomisos[0])||void 0===de?void 0:de.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(se=ye.item[4])||void 0===se||null===(ue=se.empresas[0])||void 0===ue?void 0:ue.razonSocial]}),Object(k.jsxs)(kr.Text,{style:[Lr.qty,{borderRightColor:ge?null===ge||void 0===ge||null===(be=ge.fideicomisos[0])||void 0===be?void 0:be.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(fe=ye.item[4])||void 0===fe?void 0:fe.detalle]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(je=ge.fideicomisos[0])||void 0===je?void 0:je.color:"#ffffff"}],children:["  ",Object(k.jsx)(kr.Link,{src:null===ye||void 0===ye||null===(me=ye.item[4])||void 0===me?void 0:me.link,children:null===ye||void 0===ye||null===(ve=ye.item[4])||void 0===ve?void 0:ve.numero})]}),Object(k.jsxs)(kr.Text,{style:[Lr.rate,{borderRightColor:ge?null===ge||void 0===ge||null===(he=ge.fideicomisos[0])||void 0===he?void 0:he.color:"#ffffff"}],children:[" ",null===ye||void 0===ye||null===(pe=ye.item[4])||void 0===pe?void 0:pe.txtOC]}),Object(k.jsxs)(kr.Text,{style:[Lr.amountRow,{borderRightColor:ge?null===ge||void 0===ge||null===(Oe=ge.fideicomisos[0])||void 0===Oe?void 0:Oe.color:"#ffffff"}],children:[" ",(null===ye||void 0===ye?void 0:ye.item[4])?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===ye||void 0===ye||null===(xe=ye.item[4])||void 0===xe?void 0:xe.montoTotal)):""]})]})]})},qr=kr.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},col1:{width:"11%",textAlign:"left",paddingLeft:8},col2:{width:"55%",textAlign:"left",paddingLeft:8},col3:{width:"33%",textAlign:"center",paddingLeft:8}}),Wr=function(e){var t,n,r,i,o,a=e.dataOP;return Object(k.jsxs)(kr.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:a?null===a||void 0===a||null===(t=a.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(k.jsxs)(kr.View,{style:qr.espacio,children:[Object(k.jsx)(kr.Text,{style:qr.col1,children:" "}),Object(k.jsx)(kr.Text,{style:qr.col1,children:" "}),Object(k.jsx)(kr.Text,{style:qr.col1,children:" "})]}),Object(k.jsxs)(kr.View,{style:qr.row,children:[Object(k.jsx)(kr.Text,{style:qr.col1,children:"Detalles:"}),Object(k.jsx)(kr.Text,{style:qr.col2,children:null===a||void 0===a||null===(n=a.descripcion)||void 0===n?void 0:n.slice(0,44)}),Object(k.jsx)(kr.Text,{style:qr.col3})]}),Object(k.jsxs)(kr.View,{style:qr.row,children:[Object(k.jsx)(kr.Text,{style:qr.col1}),Object(k.jsx)(kr.Text,{style:qr.col2,children:null===a||void 0===a||null===(r=a.descripcion)||void 0===r?void 0:r.slice(45,99)}),Object(k.jsxs)(kr.Text,{style:qr.col3,children:["Aprobado por ",null===a||void 0===a||null===(i=a.auth_obra[0])||void 0===i||null===(o=i.usuarios[0])||void 0===o?void 0:o.user]})]})]})},Hr=kr.StyleSheet.create({espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:21,fontSize:10,fontStyle:"bold"},rowbis:{flexDirection:"row",alignItems:"left",height:24,fontSize:10,fontStyle:"bold"},col1:{width:"33%",textAlign:"right",paddingLeft:8},col1bis:{width:"33%",textAlign:"right",paddingTop:5,paddingLeft:8},col2bis:{width:"33%",textAlign:"center",backgroundColor:"#B4B4B4",paddingTop:5,paddingLeft:8},col3:{width:"33%",textAlign:"left",paddingLeft:8},col3bis:{width:"33%",textAlign:"center",paddingTop:5,paddingLeft:8}}),Gr=function(e){var t,n,r,i,o,a,c=e.dataOP;return Object(k.jsxs)(kr.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:c?null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(k.jsxs)(kr.View,{style:Hr.espacio,children:[Object(k.jsx)(kr.Text,{style:Hr.col1,children:" "}),Object(k.jsx)(kr.Text,{style:Hr.col1,children:" "}),Object(k.jsx)(kr.Text,{style:Hr.col1,children:" "})]}),Object(k.jsxs)(kr.View,{style:Hr.row,children:[Object(k.jsx)(kr.Text,{style:Hr.col1,children:"FACTURAS:"}),Object(k.jsx)(kr.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.monto)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.monto)):""}),Object(k.jsx)(kr.Text,{style:Hr.col3})]}),Object(k.jsxs)(kr.View,{style:Hr.row,children:[Object(k.jsx)(kr.Text,{style:Hr.col1,children:"RET GAN:"}),Object(k.jsx)(kr.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_GAN)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_GAN)):""}),Object(k.jsxs)(kr.Text,{style:Hr.col3,children:[" ",Object(k.jsx)(kr.Link,{src:null===c||void 0===c?void 0:c.COMP_GAN,children:(null===c||void 0===c?void 0:c.COMP_GAN)?" cert..":""}),"   "]})]}),Object(k.jsxs)(kr.View,{style:Hr.row,children:[Object(k.jsx)(kr.Text,{style:Hr.col1,children:"RET IVA:"}),Object(k.jsx)(kr.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_IVA)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_IVA)):""}),Object(k.jsxs)(kr.Text,{style:Hr.col3,children:[" ",Object(k.jsx)(kr.Link,{src:null===c||void 0===c?void 0:c.COMP_IVA,children:(null===c||void 0===c?void 0:c.COMP_IVA)?" cert..":""})," "]})]}),Object(k.jsxs)(kr.View,{style:Hr.row,children:[Object(k.jsx)(kr.Text,{style:Hr.col1,children:"RET SUSS:"}),Object(k.jsx)(kr.Text,{style:{width:"33%",textAlign:"center",borderBottomColor:c?null===c||void 0===c||null===(o=c.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff",borderBottomWidth:1,paddingLeft:8},children:(null===c||void 0===c?void 0:c.RET_SUSS)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.RET_SUSS)):""}),Object(k.jsxs)(kr.Text,{style:Hr.col3,children:[" ",Object(k.jsx)(kr.Link,{src:null===c||void 0===c?void 0:c.COMP_SUSS,children:(null===c||void 0===c?void 0:c.COMP_SUSS)?" cert..":""})]})]}),Object(k.jsxs)(kr.View,{style:Hr.rowbis,children:[Object(k.jsx)(kr.Text,{style:Hr.col1bis,children:"Monto a Abonar:"}),Object(k.jsxs)(kr.Text,{style:Hr.col2bis,children:["$",(null===c||void 0===c?void 0:c.monto_a_pagar)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===c||void 0===c?void 0:c.monto_a_pagar)):""]}),Object(k.jsxs)(kr.Text,{style:Hr.col3bis,children:["Aprobado por ",(null===c||void 0===c?void 0:c.auth_adm[0])?null===(a=c.auth_adm[0].usuarios[0])||void 0===a?void 0:a.user:""]})]})]})},$r=kr.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"16%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col2:{width:"20%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col3:{width:"20%",borderRightWidth:1,textAlign:"left",paddingLeft:5},col4:{width:"12%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col5:{width:"12%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"88%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),Yr=function(e){var t,n,r,i,o,a,c,l,d,s,u,b,f,j,m,v,h,p,O,x,g,y,w,C,S,P,A,I,F,D,R,T,N,Q,z,U,M,E,_,V,L,B,q,W,H,G,$,Y,K,Z,J,X,ee,te,ne,re,ie,oe,ae,ce,le,de,se,ue,be,fe,je,me,ve,he,pe,Oe,xe,ge,ye,we,Ce,Se,Pe=e.dataOP,Ae=e.bancos,Ie=e.cuentasBanco;return Object(k.jsxs)(kr.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:Pe?null===Pe||void 0===Pe||null===(t=Pe.fideicomisos[0])||void 0===t?void 0:t.color:"#ffffff"},children:[Object(k.jsxs)(kr.View,{style:[$r.container,{borderBottomColor:Pe?null===Pe||void 0===Pe||null===(n=Pe.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff",backgroundColor:Pe?null===Pe||void 0===Pe||null===(r=Pe.fideicomisos[0])||void 0===r?void 0:r.color2:"#ffffff"}],children:[Object(k.jsx)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(i=Pe.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff"}],children:"Modo"}),Object(k.jsx)(kr.Text,{style:[$r.col1,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(o=Pe.fideicomisos[0])||void 0===o?void 0:o.color:"#ffffff"}],children:"Banco"}),Object(k.jsx)(kr.Text,{style:[$r.col2,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(a=Pe.fideicomisos[0])||void 0===a?void 0:a.color:"#ffffff"}],children:"Cuenta Nro"}),Object(k.jsx)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(c=Pe.fideicomisos[0])||void 0===c?void 0:c.color:"#ffffff"}],children:"Comprobante"}),Object(k.jsx)(kr.Text,{style:[$r.col4,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(l=Pe.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Fecha"}),Object(k.jsx)(kr.Text,{style:$r.col5,children:"Monto"})]}),Object(k.jsxs)(kr.View,{style:[$r.row,{borderBottomColor:Pe?null===Pe||void 0===Pe||null===(d=Pe.fideicomisos[0])||void 0===d?void 0:d.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(s=Pe.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:[" ",null===Pe||void 0===Pe||null===(u=Pe.OPpago)||void 0===u?void 0:u.modo1]}),Object(k.jsxs)(kr.Text,{style:[$r.col1,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(b=Pe.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(f=Pe.OPpago)||void 0===f?void 0:f.banco1)>0&&Ae?null===Ae||void 0===Ae?void 0:Ae.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.banco1)})).banco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col2,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(j=Pe.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(m=Pe.OPpago)||void 0===m?void 0:m.nro1)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.nro1)})).cuentaBanco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(v=Pe.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff"}],children:[" ",Object(k.jsx)(kr.Link,{src:null===Pe||void 0===Pe||null===(h=Pe.OPpago)||void 0===h?void 0:h.descri1,children:(null===Pe||void 0===Pe||null===(p=Pe.OPpago)||void 0===p?void 0:p.descri1)?" ver.. -":""}),null===Pe||void 0===Pe||null===(O=Pe.OPpago)||void 0===O?void 0:O.descri12]}),Object(k.jsxs)(kr.Text,{style:[$r.col4,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(x=Pe.fideicomisos[0])||void 0===x?void 0:x.color:"#ffffff"}],children:[" ",dt(null===Pe||void 0===Pe||null===(g=Pe.OPpago)||void 0===g?void 0:g.fecha1)]}),Object(k.jsx)(kr.Text,{style:$r.col5,children:(null===Pe||void 0===Pe||null===(y=Pe.OPpago)||void 0===y?void 0:y.monto1)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Pe||void 0===Pe||null===(w=Pe.OPpago)||void 0===w?void 0:w.monto1)):""})]}),Object(k.jsxs)(kr.View,{style:[$r.row,{borderBottomColor:Pe?null===Pe||void 0===Pe||null===(C=Pe.fideicomisos[0])||void 0===C?void 0:C.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(S=Pe.fideicomisos[0])||void 0===S?void 0:S.color:"#ffffff"}],children:[" ",null===Pe||void 0===Pe||null===(P=Pe.OPpago)||void 0===P?void 0:P.modo2]}),Object(k.jsxs)(kr.Text,{style:[$r.col1,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(A=Pe.fideicomisos[0])||void 0===A?void 0:A.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(I=Pe.OPpago)||void 0===I?void 0:I.banco2)>0&&Ae?null===Ae||void 0===Ae?void 0:Ae.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.banco2)})).banco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col2,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(F=Pe.fideicomisos[0])||void 0===F?void 0:F.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(D=Pe.OPpago)||void 0===D?void 0:D.nro2)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.nro2)})).cuentaBanco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(R=Pe.fideicomisos[0])||void 0===R?void 0:R.color:"#ffffff"}],children:[" ",Object(k.jsx)(kr.Link,{src:null===Pe||void 0===Pe||null===(T=Pe.OPpago)||void 0===T?void 0:T.descri2,children:(null===Pe||void 0===Pe||null===(N=Pe.OPpago)||void 0===N?void 0:N.descri2)?" ver.. -":""}),null===Pe||void 0===Pe||null===(Q=Pe.OPpago)||void 0===Q?void 0:Q.descri22]}),Object(k.jsxs)(kr.Text,{style:[$r.col4,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(z=Pe.fideicomisos[0])||void 0===z?void 0:z.color:"#ffffff"}],children:[" ",dt(null===Pe||void 0===Pe||null===(U=Pe.OPpago)||void 0===U?void 0:U.fecha2)]}),Object(k.jsx)(kr.Text,{style:$r.col5,children:(null===Pe||void 0===Pe||null===(M=Pe.OPpago)||void 0===M?void 0:M.monto2)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Pe||void 0===Pe||null===(E=Pe.OPpago)||void 0===E?void 0:E.monto2)):""})]}),Object(k.jsxs)(kr.View,{style:[$r.row,{borderBottomColor:Pe?null===Pe||void 0===Pe||null===(_=Pe.fideicomisos[0])||void 0===_?void 0:_.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(V=Pe.fideicomisos[0])||void 0===V?void 0:V.color:"#ffffff"}],children:[" ",null===Pe||void 0===Pe||null===(L=Pe.OPpago)||void 0===L?void 0:L.modo3]}),Object(k.jsxs)(kr.Text,{style:[$r.col1,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(B=Pe.fideicomisos[0])||void 0===B?void 0:B.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(q=Pe.OPpago)||void 0===q?void 0:q.banco3)>0&&Ae?null===Ae||void 0===Ae?void 0:Ae.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.banco3)})).banco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col2,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(W=Pe.fideicomisos[0])||void 0===W?void 0:W.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(H=Pe.OPpago)||void 0===H?void 0:H.nro3)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.nro3)})).cuentaBanco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(G=Pe.fideicomisos[0])||void 0===G?void 0:G.color:"#ffffff"}],children:[" ",Object(k.jsx)(kr.Link,{src:null===Pe||void 0===Pe||null===($=Pe.OPpago)||void 0===$?void 0:$.descri3,children:(null===Pe||void 0===Pe||null===(Y=Pe.OPpago)||void 0===Y?void 0:Y.descri3)?" ver.. -":""}),null===Pe||void 0===Pe||null===(K=Pe.OPpago)||void 0===K?void 0:K.descri32]}),Object(k.jsxs)(kr.Text,{style:[$r.col4,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(Z=Pe.fideicomisos[0])||void 0===Z?void 0:Z.color:"#ffffff"}],children:[" ",dt(null===Pe||void 0===Pe||null===(J=Pe.OPpago)||void 0===J?void 0:J.fecha3)]}),Object(k.jsx)(kr.Text,{style:$r.col5,children:(null===Pe||void 0===Pe||null===(X=Pe.OPpago)||void 0===X?void 0:X.monto3)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Pe||void 0===Pe||null===(ee=Pe.OPpago)||void 0===ee?void 0:ee.monto3)):""})]}),Object(k.jsxs)(kr.View,{style:[$r.row,{borderBottomColor:Pe?null===Pe||void 0===Pe||null===(te=Pe.fideicomisos[0])||void 0===te?void 0:te.color:"#ffffff"}],children:[Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(ne=Pe.fideicomisos[0])||void 0===ne?void 0:ne.color:"#ffffff"}],children:[" ",null===Pe||void 0===Pe||null===(re=Pe.OPpago)||void 0===re?void 0:re.modo4]}),Object(k.jsxs)(kr.Text,{style:[$r.col1,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(ie=Pe.fideicomisos[0])||void 0===ie?void 0:ie.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(oe=Pe.OPpago)||void 0===oe?void 0:oe.banco4)>0&&Ae?null===Ae||void 0===Ae?void 0:Ae.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.banco4)})).banco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col2,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(ae=Pe.fideicomisos[0])||void 0===ae?void 0:ae.color:"#ffffff"}],children:[" ",(null===Pe||void 0===Pe||null===(ce=Pe.OPpago)||void 0===ce?void 0:ce.nro4)>0&&Ie?null===Ie||void 0===Ie?void 0:Ie.find((function(e){var t;return e.id===parseInt(null===Pe||void 0===Pe||null===(t=Pe.OPpago)||void 0===t?void 0:t.nro4)})).cuentaBanco:""]}),Object(k.jsxs)(kr.Text,{style:[$r.col3,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(le=Pe.fideicomisos[0])||void 0===le?void 0:le.color:"#ffffff"}],children:[" ",Object(k.jsx)(kr.Link,{src:null===Pe||void 0===Pe||null===(de=Pe.OPpago)||void 0===de?void 0:de.descri4,children:(null===Pe||void 0===Pe||null===(se=Pe.OPpago)||void 0===se?void 0:se.descri4)?" ver.. -":""}),null===Pe||void 0===Pe||null===(ue=Pe.OPpago)||void 0===ue?void 0:ue.descri42]}),Object(k.jsxs)(kr.Text,{style:[$r.col4,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(be=Pe.fideicomisos[0])||void 0===be?void 0:be.color:"#ffffff"}],children:[" ",dt(null===Pe||void 0===Pe||null===(fe=Pe.OPpago)||void 0===fe?void 0:fe.fecha4)]}),Object(k.jsx)(kr.Text,{style:$r.col5,children:(null===Pe||void 0===Pe||null===(je=Pe.OPpago)||void 0===je?void 0:je.monto4)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===Pe||void 0===Pe||null===(me=Pe.OPpago)||void 0===me?void 0:me.monto4)):""})]}),Object(k.jsxs)(kr.View,{style:$r.rowf,children:[Object(k.jsx)(kr.Text,{style:[$r.descriptionf,{borderRightColor:Pe?null===Pe||void 0===Pe||null===(ve=Pe.fideicomisos[0])||void 0===ve?void 0:ve.color:"#ffffff"}],children:"TOTAL"}),Object(k.jsx)(kr.Text,{style:$r.col5,children:(null===Pe||void 0===Pe||null===(he=Pe.OPpago)||void 0===he?void 0:he.monto1)?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(parseFloat((null===Pe||void 0===Pe||null===(pe=Pe.OPpago)||void 0===pe?void 0:pe.monto1)?null===Pe||void 0===Pe||null===(Oe=Pe.OPpago)||void 0===Oe?void 0:Oe.monto1:0)+parseFloat((null===Pe||void 0===Pe||null===(xe=Pe.OPpago)||void 0===xe?void 0:xe.monto2)?null===Pe||void 0===Pe||null===(ge=Pe.OPpago)||void 0===ge?void 0:ge.monto2:0)+parseFloat((null===Pe||void 0===Pe||null===(ye=Pe.OPpago)||void 0===ye?void 0:ye.monto3)?null===Pe||void 0===Pe||null===(we=Pe.OPpago)||void 0===we?void 0:we.monto3:0)+parseFloat((null===Pe||void 0===Pe||null===(Ce=Pe.OPpago)||void 0===Ce?void 0:Ce.monto4)?null===Pe||void 0===Pe||null===(Se=Pe.OPpago)||void 0===Se?void 0:Se.monto4:0))):""})]})]})},Kr="#90e5fc",Zr=kr.StyleSheet.create({tableContainer:{flexDirection:"row",flexWrap:"wrap",marginTop:8},container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,textAlign:"center",fontStyle:"bold",flexGrow:1},description:{width:"60%",borderRightColor:Kr,borderRightWidth:1},qty:{width:"10%",borderRightColor:Kr,borderRightWidth:1},rate:{width:"15%",borderRightColor:Kr,borderRightWidth:1},amount:{width:"15%"},espacio:{height:8},row:{flexDirection:"row",alignItems:"center",height:15,fontSize:7,fontStyle:"bold"},col1:{width:"30%",textAlign:"right",paddingLeft:8},col2:{width:"30%",textAlign:"left",paddingLeft:8},col3:{width:"40%",textAlign:"left",paddingLeft:8}}),Jr=function(e){var t,n,r,i,o=e.dataOP;return Object(k.jsxs)(kr.View,{style:Zr.tableContainer,children:[Object(k.jsxs)(kr.View,{style:Zr.row,children:[Object(k.jsx)(kr.Text,{style:Zr.col1,children:"CBU:"}),Object(k.jsx)(kr.Text,{style:Zr.col2,children:null===o||void 0===o||null===(t=o.empresas[0])||void 0===t?void 0:t.CBU}),Object(k.jsxs)(kr.Text,{style:Zr.col3,children:["Cuenta Bancaria: ",null===o||void 0===o||null===(n=o.empresas[0])||void 0===n?void 0:n.nroCuenta]})]}),Object(k.jsxs)(kr.View,{style:Zr.row,children:[Object(k.jsx)(kr.Text,{style:Zr.col1,children:"CUIT:"}),Object(k.jsx)(kr.Text,{style:Zr.col2,children:null===o||void 0===o||null===(r=o.empresas[0])||void 0===r?void 0:r.CUIT}),Object(k.jsxs)(kr.Text,{style:Zr.col3,children:["Email:   ",null===o||void 0===o||null===(i=o.empresas[0])||void 0===i?void 0:i.mail]})]})]})},Xr=kr.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:18,textAlign:"center",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),ei=function(e){var t,n,r,i,o,a,c=e.dataOP,l=e.bancos,d=e.cuentasBanco,s=e.dataFacturas,u=e.apiServerUrl,b=e.idSociedad;return Object(k.jsx)(kr.Document,{children:Object(k.jsxs)(kr.Page,{size:"A4",style:Xr.page,children:[Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.saltolinea,children:" "})}),Object(k.jsxs)(kr.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"},children:[Object(k.jsx)(kr.Text,{style:[Xr.reportTitleFide,{width:c?100-(null===c||void 0===c||null===(t=c.fideicomisos[0])||void 0===t?void 0:t.ancho_logo)+"%":"75%",color:null===c||void 0===c||null===(n=c.fideicomisos[0])||void 0===n?void 0:n.color}],children:null===c||void 0===c||null===(r=c.fideicomisos[0])||void 0===r?void 0:r.titulo}),Object(k.jsx)(kr.View,{style:{width:c?(null===c||void 0===c||null===(i=c.fideicomisos[0])||void 0===i?void 0:i.ancho_logo)+"%":"25%"},children:Object(k.jsx)(kr.Image,{style:[Xr.logo,{backgroundColor:c?null===c||void 0===c||null===(o=c.fideicomisos[0])||void 0===o?void 0:o.color3:"#FFFFFF"}],src:{uri:"".concat(u,"/sociedades/").concat(b,"/").concat(c?null===c||void 0===c||null===(a=c.fideicomisos[0])||void 0===a?void 0:a.logo:"logo.png"),method:"GET",body:""}})})]}),Object(k.jsx)(kr.View,{style:Xr.titleContainer,children:Object(k.jsxs)(kr.Text,{style:Xr.reportTitle,children:["SOLICITUD DE PAGO     N\xba ",null===c||void 0===c?void 0:c.numero]})}),Object(k.jsxs)(kr.View,{style:Xr.invoiceDateContainer,children:[Object(k.jsx)(kr.Text,{style:Xr.label,children:"Fecha: "}),Object(k.jsx)(kr.Text,{children:dt(null===c||void 0===c?void 0:c.createdAt)})]}),Object(k.jsx)(Br,{dataOP:c,dataFacturas:s}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.saltolinea,children:" "})}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.subreportTitle,children:"APROBACI\xd3N T\xc9CNICA"})}),Object(k.jsx)(Wr,{dataOP:c}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.saltolinea,children:" "})}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.subreportTitle,children:"APROBACI\xd3N ADMINISTRATIVA"})}),Object(k.jsx)(Gr,{dataOP:c}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.saltolinea,children:" "})}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:Xr.subreportTitle,children:"PAGO"})}),Object(k.jsx)(Yr,{dataOP:c,bancos:l,cuentasBanco:d}),Object(k.jsx)(Jr,{dataOP:c})]})})},ti=n(1035),ni=function(e,t){return"dark"===t?Object(ti.b)(e,.6):Object(ti.d)(e,.6)},ri=function(e,t){return"dark"===t?Object(ti.b)(e,.5):Object(ti.d)(e,.5)},ii={},oi={},ai=0,ci=function(e,t,n,r,i,o,a,c,l,d){return[{field:"id",headerName:"Id",width:55,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"id"===e.c})).h,headerAlign:"center",align:"center",renderCell:vi},{field:"blue",headerName:"Blue",width:70,editable:!1,hide:!i&&(null===e||void 0===e?void 0:e.find((function(e){return"blue"===e.c})).h),headerAlign:"center",renderCell:function(e){return 0===e.value?"":Object(k.jsx)(D.a,{sx:{bgcolor:"#3944BC"},children:"B"})}},{field:"createdAt",headerName:"Fecha",width:120,type:"date",editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"createdAt"===e.c})).h,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{timeZone:"UTC"})}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"fideicomiso"===e.c})).h,headerAlign:"center",align:"center",renderCell:hi},{field:"numero",headerName:"Numero",width:130,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"numero"===e.c})).h,headerAlign:"center",align:"right",renderCell:pi},{field:"empresa",headerName:"Raz\xf3n Social",width:170,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"empresa"===e.c})).h,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",width:130,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"monto"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"neto",headerName:"Neto",width:130,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"neto"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:70,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"moneda"===e.c})).h,headerAlign:"center",align:"left"},{field:"estadoOP",headerName:"Estado",width:150,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"estadoOP"===e.c})).h,renderEditCell:function(e){return Object(k.jsx)(yi,{estados:t,props:e})},headerAlign:"center"},{field:"estadoRET",headerName:"Retenciones",width:150,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"estadoRET"===e.c})).h,renderEditCell:function(e){return Object(k.jsx)(gi,{retenciones:n,props:e})},headerAlign:"center"},{field:"facturas",headerName:"Facturas",width:140,sortable:!1,filterable:!1,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"facturas"===e.c})).h,headerAlign:"center",align:"center",renderCell:function(e){var t,n=e.row.misFacturas;return null===n||void 0===n||null===(t=n.map((function(e){return e.numero})))||void 0===t?void 0:t.join(", ")}},{field:"RET_GAN",headerName:"GAN",width:120,hide:null===e||void 0===e?void 0:e.find((function(e){return"RET_GAN"===e.c})).h,editable:o,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_IVA",headerName:"IVA",width:120,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"RET_IVA"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"RET_SUSS",headerName:"SUSS",width:120,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"RET_SUSS"===e.c})).h,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"apr_obra",headerName:"Ap. Obra",width:140,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"apr_obra"===e.c})).h,align:"center",renderCell:Ci},{field:"apr_adm",headerName:"Ap. ADM",width:140,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"apr_adm"===e.c})).h,align:"center",renderCell:Si},{field:"formaPago",headerName:"Forma Pago",width:160,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"formaPago"===e.c})).h},{field:"fondos",headerName:"Fondos",width:150,type:"singleSelect",editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"fondos"===e.c})).h,renderEditCell:function(e){return Object(k.jsx)(wi,{fondos_s:r,props:e})},headerAlign:"center"},{field:"rubroId",headerName:"Rubro",width:140,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"rubroId"===e.c})).h,headerAlign:"center",renderEditCell:function(e){return Object(k.jsx)(Oi,{rubros:a,props:e})}},{field:"subrubroId",headerName:"Sub Rubro",width:140,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"subrubroId"===e.c})).h,headerAlign:"center",renderEditCell:function(e){return Object(k.jsx)(xi,{subRubros:c,props:e})}},{field:"descripcion",headerName:"Detalle",width:140,editable:o,hide:null===e||void 0===e?void 0:e.find((function(e){return"descripcion"===e.c})).h,headerAlign:"center",align:"center"},{field:"archivada",headerName:"Generar",width:140,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"archivada"===e.c})).h,align:"center",renderCell:Pi},{field:"enviada",headerName:"Enviar",width:90,headerAlign:"center",hide:null===e||void 0===e?void 0:e.find((function(e){return"enviada"===e.c})).h,align:"center",renderCell:Ai},{field:"confirmada",headerName:"Conf",type:"boolean",width:120,editable:!1,hide:null===e||void 0===e?void 0:e.find((function(e){return"confirmada"===e.c})).h,headerAlign:"center"},{field:"deleteIcon",headerName:" ",hide:!o&&(null===e||void 0===e?void 0:e.find((function(e){return"deleteIcon"===e.c})).h),width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,n=t.deleteId;return t.confirmada?"":Object(k.jsx)(Pt.a,{onClick:function(e){d(n),l(!0)}})}}]},li="http://104.131.28.211:3000/";function di(e){var t=e.filtFide,n=e.filtRS,r=e.filtEst,i=e.filtTerm,o=e.idSociety,d=e.loggedUser,u=e.opInformation,b=e.isLoading,f=e.error;ai=o.id;var j={},m=Object(l.useContext)(Xo),v=Object(l.useContext)(ta),h=Object(l.useContext)(na),p=!0,O=null===d||void 0===d?void 0:d["rol.op"];"vista"===O&&(p=!1);var x=0,g=!1;"total"!==(null===d||void 0===d?void 0:d["rol.op"])&&"blue"!==(null===d||void 0===d?void 0:d["rol.op"])||(x=-1,g=!0);var y=!1;"blue"===(null===d||void 0===d?void 0:d["rol.descripcion"])&&(y=!0);var C=Object(s.i)(),S=gt(),P=S.Prompt,D=S.setIsPromptOpen,R=Object(l.useState)(),T=Object(c.a)(R,2),N=T[0],Q=T[1],z=Object(a.useQueryClient)(),U=Object(a.useQuery)(["rubros",o],(function(){return Ge("rubro/listar/".concat(o.id))})).data,M=Object(a.useQuery)(["subrubros",o],(function(){return Ge("subrubro/listar/".concat(o.id,"/0"))})).data,E=Object(a.useQuery)(["grfacturas",o.id],Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("factura/listar/".concat(o.id,"/todas/nada/").concat(x));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).data,_=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("op/mostrar/".concat(o.id,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSettled:function(e){var t,n,r,i,o;C("./".concat(e.id,"/").concat(e.createdAt,"/").concat(e.empresaId,"/").concat(e.numero,"/").concat(null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre,"/").concat(e.estadoOP,"/").concat(null===e||void 0===e||null===(n=e.auth_adm[0])||void 0===n||null===(r=n.usuarios[0])||void 0===r?void 0:r.user,"/").concat(null===e||void 0===e||null===(i=e.auth_obra[0])||void 0===i||null===(o=i.usuarios[0])||void 0===o?void 0:o.user,"/").concat(e.confirmada,"/").concat(e.blue,"/OP Detalle"))}}),V=_.mutate,L=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OP/eliminar/".concat(o.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.cancelQueries(["OP",o]);case 2:return n=z.getQueryData(["OP",o]),r=n.filter((function(e){return e.id!==t})),z.setQueryData(["OP",o],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return z.setQueryData(["OP",o],n)},onSettled:function(){return z.invalidateQueries(["OP",o])}}),B=L.mutate,q=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("op/mostrarConFacturas/".concat(o.id,"/").concat(t.id));case 2:return e.abrupt("return",j=e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){var t,n,r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ii=j.op,oi={item:j.item},H(null===(t=ii)||void 0===t?void 0:t.id,null===(n=ii)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.nombre,null===(i=ii)||void 0===i?void 0:i.numero,null===(o=ii)||void 0===o||null===(a=o.empresas[0])||void 0===a?void 0:a.razonSocial);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),W=q.mutate;function H(e,t,n,r){return G.apply(this,arguments)}function G(){return(G=Object(_e.a)(Ee.a.mark((function e(t,n,r,i){var a,c,l;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kr.pdf)($()).toBlob();case 2:return a=e.sent,c=new FormData,l=r+" OP-"+n+"-"+i+".pdf",c.append("logo",a),c.append("id",t),c.append("fideicomiso",n),c.append("numero",r),c.append("nombreArchivo",l),c.append("archivada",1),e.next=13,$e("op/modificar/".concat(o.id),c);case 13:return e.next=15,z.refetchQueries(["OP",o]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $=function(){return Object(k.jsx)(ei,{dataOP:ii,dataFacturas:oi,apiServerUrl:li,idSociedad:o.id})},Y=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("autorizacion/eliminar/".concat(null===o||void 0===o?void 0:o.id),{id:t.authOBRA,tipoAutorizacion:"obra",opid:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.refetchQueries(["OP",o]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),K=Y.mutate,Z=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("autorizacion/eliminar/".concat(null===o||void 0===o?void 0:o.id),{id:t.authADM,tipoAutorizacion:"adm",opid:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.refetchQueries(["OP",o]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),J=Z.mutate,X=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("OP/enviarMail/".concat(null===o||void 0===o?void 0:o.id),{mailTo:null===(n=t.fideicomisos[0])||void 0===n?void 0:n.mailOP,mailaccount:null===o||void 0===o?void 0:o.mailaccount,mailfromname:null===o||void 0===o?void 0:o.mailfromname,mailConstructora:null===o||void 0===o?void 0:o.mailConstructora,fideicomiso:null===(r=t.fideicomisos[0])||void 0===r?void 0:r.nombre,razonSocial:null===(i=t.empresas[0])||void 0===i?void 0:i.razonSocial,enviar_OP_auto:null===(a=t.empresas[0])||void 0===a?void 0:a.enviar_OP_auto,numero:t.numero,id:t.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.refetchQueries(["OP",o]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),ee=X.mutate,te=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,$e("OP/modificar/".concat(o.id),Object(w.a)({id:r},n,i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,z.cancelQueries(["OP",o]);case 3:return a=z.getQueryData(["OP",o]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,i))]),z.setQueryData(["OP",o],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return z.setQueryData(["OP",o],n)},onSettled:function(){return z.invalidateQueries(["OP",o])}}),ne=te.mutate,ie=Object(l.useState)([]),oe=Object(c.a)(ie,2),ce=oe[0],le=oe[1],de=Object(l.useState)(!1),se=Object(c.a)(de,2),ue=se[0],be=se[1];var fe=Object(l.useState)([{c:"id",h:!1},{c:"blue",h:!1},{c:"createdAt",h:!1},{c:"fideicomiso",h:!1},{c:"numero",h:!1},{c:"empresa",h:!1},{c:"monto",h:!1},{c:"neto",h:!1},{c:"moneda",h:!1},{c:"estadoOP",h:!1},{c:"estadoRET",h:!1},{c:"facturas",h:!1},{c:"RET_GAN",h:!0},{c:"RET_IVA",h:!0},{c:"RET_SUSS",h:!0},{c:"apr_obra",h:!1},{c:"apr_adm",h:!1},{c:"formaPago",h:!1},{c:"fondos",h:!1},{c:"rubroId",h:!0},{c:"subrubroId",h:!0},{c:"descripcion",h:!1},{c:"archivada",h:!1},{c:"enviada",h:!1},{c:"confirmada",h:!1},{c:"deleteIcon",h:!1}]),je=Object(c.a)(fe,2),me=je[0],ve=je[1],he=l.useState([{field:"createdAt",sort:"desc"}]),pe=Object(c.a)(he,2),Oe=pe[0],xe=pe[1],ge=Object(l.useState)(25),ye=Object(c.a)(ge,2),we=ye[0],Ce=ye[1];return b?"Cargando...":f?"Hubo un error: ".concat(f.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(P,{message:"\xbfEliminar fila?",action:function(){return B(N)}}),Object(k.jsx)(Vr.a,{}),Object(k.jsxs)(I.a,{sx:{height:400,width:1,"& .color_x_estado-conf":{bgcolor:function(e){return ni(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return ri(e.palette.success.main,e.palette.mode)}}},"& .color_x_estado-auth":{bgcolor:function(e){return ni(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return ri(e.palette.error.main,e.palette.mode)}}},"& .color_x_estado-anulado":{bgcolor:function(e){return ni(e.palette.text.primary,e.palette.mode)},"&:hover":{bgcolor:function(e){return ri(e.palette.text.primary,e.palette.mode)}}},"& .color_x_estado-parap":{bgcolor:function(e){return ni(e.palette.warning.light,e.palette.mode)},"&:hover":{bgcolor:function(e){return ri(e.palette.warning.light,e.palette.mode)}}}},children:[Object(k.jsx)(A.a,{align:"left",color:"textSecondary",variant:"h6",children:"Rojo: Para autorizar,\xa0 Amarilla: Para pagar,\xa0 Verde: Pagada y confirmada,\xa0 Blanca: ..Otros estados\xa0 | Ocultas: Pagada, confirmada, generada y enviada"}),Object(k.jsx)(St.a,{rows:u.filter((function(e){return function(e,t,n,r,i,o){var a=!1;return-1===t&&-1===n&&-1===r&&(a=!0),t>-1&&-1===n&&-1===r&&e.fideicomisoId===t&&(a=!0),-1===t&&n>-1&&-1===r&&e.empresaId===n&&(a=!0),-1===t&&-1===n&&r>-1&&e.estadoOP===r&&(a=!0),t>-1&&n>-1&&-1===r&&e.fideicomisoId===t&&e.empresaId===n&&(a=!0),t>-1&&-1===n&&r>-1&&e.fideicomisoId===t&&e.estadoOP===r&&(a=!0),-1===t&&n>-1&&r>-1&&e.empresaId===n&&e.estadoOP===r&&(a=!0),t>-1&&n>-1&&r>-1&&e.fideicomisoId===t&&e.empresaId===n&&e.estadoOP===r&&(a=!0),o&&1!==e.blue&&(a=!1),1===e.confirmada&&e.archivada&&e.enviada&&i&&(a=!1),a}(e,t,n,r,i,y)})).map((function(e){var t,n,r,i,o,a,c;return{id:null===e||void 0===e?void 0:e.id,blue:null===e||void 0===e?void 0:e.blue,createdAt:null===e||void 0===e?void 0:e.createdAt,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",numero:null===e||void 0===e?void 0:e.numero,empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(n=e.empresas[0])||void 0===n?void 0:n.razonSocial:"",monto:null===e||void 0===e?void 0:e.monto,neto:null===e||void 0===e?void 0:e.neto,moneda:null===e||void 0===e?void 0:e.moneda,estadoOP:null===m||void 0===m||null===(r=m.find((function(t){return t.id===e.estadoOP})))||void 0===r?void 0:r.descripcion,estadoRET:null===v||void 0===v||null===(i=v.find((function(t){return t.id===e.estadoRET})))||void 0===i?void 0:i.descripcion,misFacturas:null===E||void 0===E?void 0:E.filter((function(t){return(null===t||void 0===t?void 0:t.OPId)===e.id})),fondos:null===h||void 0===h||null===(o=h.find((function(t){return(null===t||void 0===t?void 0:t.id)===e.fondos})))||void 0===o?void 0:o.descripcion,descripcion:null===e||void 0===e?void 0:e.descripcion,archivada:null===e||void 0===e?void 0:e.archivada,enviada:null===e||void 0===e?void 0:e.enviada,confirmada:0!==(null===e||void 0===e?void 0:e.confirmada),RET_SUSS:null===e||void 0===e?void 0:e.RET_SUSS,RET_GAN:null===e||void 0===e?void 0:e.RET_GAN,RET_IVA:null===e||void 0===e?void 0:e.RET_IVA,apr_obra:(null===e||void 0===e?void 0:e.auth_obra)&&e.auth_obra[0]&&e.auth_obra[0].usuarios?e.auth_obra[0].usuarios[0].user:"",apr_adm:(null===e||void 0===e?void 0:e.auth_adm)&&e.auth_adm[0]&&e.auth_adm[0].usuarios?e.auth_adm[0].usuarios[0].user:"",filtroRubroID:null===e||void 0===e?void 0:e.rubroId,acceso:O,deleteId:null===e||void 0===e?void 0:e.id,aprobado_obra:(null===e||void 0===e?void 0:e.auth_obra)&&e.auth_obra[0]&&e.auth_obra[0].usuarios?e.auth_obra[0].usuarios[0].user:"",aprobado_adm:(null===e||void 0===e?void 0:e.auth_adm)&&e.auth_adm[0]&&e.auth_adm[0].usuarios?e.auth_adm[0].usuarios[0].user:"",formaPago:null===e||void 0===e?void 0:e.formaPago,rubroId:null===U||void 0===U||null===(a=U.find((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.rubroId)})))||void 0===a?void 0:a.rubro,subrubroId:null===M||void 0===M||null===(c=M.find((function(t){return(null===t||void 0===t?void 0:t.id)===(null===e||void 0===e?void 0:e.subRubroId)})))||void 0===c?void 0:c.subRubro,Color_estadoOP:null===e||void 0===e?void 0:e.estadoOP,onAuthObra:function(){return K(e)},onAuthAdm:function(){return J(e)},onEnviar:function(){return ee(e)},cargarOP:function(){return W(e)},esEditable:function(){return e},onIrDetalle:function(){return V(e)}}})),onCellEditCommit:ne,columns:ci(me,m,v,h,g,p,U,M,D,Q),sortModel:Oe,onSortModelChange:function(e){return e[0]!==Oe[0]&&function(e){var t;0===e.length&&(e.push(Oe[0]),"asc"===(null===(t=Oe[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),xe(e)}(e)},onColumnVisibilityChange:function(e){return function(e){var t=me,n=null===t||void 0===t?void 0:t.findIndex((function(t){return t.c===e.field}));n>-1&&(t[n]={c:e.field,h:!e.isVisible},ve(t))}(e)},pageSize:we,onPageSizeChange:function(e){return Ce(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,isCellEditable:function(e){return!e.row.confirmada||"total"===O},checkboxSelection:!0,onSelectionModelChange:le,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:mi},getRowClassName:function(e){return"color_x_estado-".concat(e.row.confirmada?"conf":6===e.row.Color_estadoOP?"anulado":2===e.row.Color_estadoOP?"parap":1===e.row.Color_estadoOP||4===e.row.Color_estadoOP?"auth":"regular")}}),Object(k.jsx)(xn.a,{smUp:"vista"===d["rol.op"],children:Object(k.jsx)(ae.a,{onClick:function(){return function(e,t,n){!function(e,t,n){si.apply(this,arguments)}(e,t,n)}(ce,o,be)},children:"Generar y Enviar OPs Seleccionadas"})}),Object(k.jsx)(lr.a,{in:ue,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){be(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function si(){return(si=Object(_e.a)(Ee.a.mark((function e(t,n,r){var i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=0;case 1:if(!(i<t.length)){e.next=12;break}return e.prev=2,e.delegateYield(Ee.a.mark((function e(){var o,a,c,l,d,s,u,b,f,j,m;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("op/mostrarConFacturas/".concat(n.id,"/").concat(t[i]));case 2:if(o=e.sent,a=o.op,c={item:o.item},3!==a.estadoOP||0!==a.blue){e.next=13;break}return console.log("AAi=",i,"res: ",a.numero),s=function(){return Object(k.jsx)(ei,{dataOP:a,dataFacturas:c,apiServerUrl:li,idSociedad:n.id})},e.next=10,ui(s,a.id,null===a||void 0===a||null===(l=a.fideicomisos[0])||void 0===l?void 0:l.nombre,a.numero,null===a||void 0===a||null===(d=a.empresas[0])||void 0===d?void 0:d.razonSocial,n);case 10:u=e.sent,console.log(u),u&&(fi(a.id,null===a||void 0===a||null===(b=a.fideicomisos[0])||void 0===b?void 0:b.nombre,a.numero,null===(f=a.empresas[0])||void 0===f?void 0:f.razonSocial,null===(j=a.empresas[0])||void 0===j?void 0:j.enviar_OP_auto,n,null===a||void 0===a||null===(m=a.fideicomisos[0])||void 0===m?void 0:m.mailOP),r(!0));case 13:case"end":return e.stop()}}),e)}))(),"t0",4);case 4:e.next=9;break;case 6:e.prev=6,e.t1=e.catch(2),console.log(e.t1);case 9:i++,e.next=1;break;case 12:case"end":return e.stop()}}),e,null,[[2,6]])})))).apply(this,arguments)}function ui(e,t,n,r,i,o){return bi.apply(this,arguments)}function bi(){return(bi=Object(_e.a)(Ee.a.mark((function e(t,n,r,i,o,a){var c,l,d,s;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i+" OP-"+r+"-"+o+".pdf",e.next=3,Object(kr.pdf)(t()).toBlob();case 3:return l=e.sent,(d=new FormData).append("logo",l),d.append("id",n),d.append("fideicomiso",r),d.append("numero",i),d.append("nombreArchivo",c),d.append("archivada",1),e.next=13,$e("op/modificar/".concat(a.id),d);case 13:return s=e.sent,e.abrupt("return",!!s);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fi(e,t,n,r,i,o,a){return ji.apply(this,arguments)}function ji(){return(ji=Object(_e.a)(Ee.a.mark((function e(t,n,r,i,o,a,c){var l;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("OP/enviarMail/".concat(null===a||void 0===a?void 0:a.id),{mailTo:c,mailaccount:null===a||void 0===a?void 0:a.mailaccount,mailfromname:null===a||void 0===a?void 0:a.mailfromname,mailConstructora:null===a||void 0===a?void 0:a.mailConstructora,fideicomiso:n,razonSocial:i,enviar_OP_auto:o,numero:r,id:t});case 2:return l=e.sent,e.abrupt("return",!!l);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mi(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.b,{}),Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["id","createdAt","fideicomiso","numero","empresa","monto","moneda","RET_SUSS","RET_GAN","RET_IVA","fondos","estadoRET","estadoOP","apr_obra","apr_adm","rubroId","subrubroId","descripcion"]}})]})}function vi(e){var t="".concat(e.row.id,"/").concat(e.row.createdAt,"/").concat(e.row.empresaId,"/").concat(e.row.numero,"/").concat(e.row.fideicomiso,"/").concat(e.row.Color_estadoOP,"/").concat(""===e.row.apr_adm?"null":e.row.apr_adm,"/").concat(""===e.row.apr_obra?"null":e.row.apr_obra,"/").concat(e.row.confirmada?1:0,"/").concat(e.row.blue,"/OP Detalle");return Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:e.row.id})})}function hi(e){var t=e.row.onIrDetalle,n=e.row.fideicomiso;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function pi(e){var t=e.row.onIrDetalle,n=e.row.numero;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function Oi(e){var t=e.rubros,n=e.props,r=n.id,i=n.api,o=n.field;t=[].concat(Object(Fe.a)(t),[{rubro:""}]);var a=Object(l.useState)({rubro:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(k.jsx)(bn.a,{value:s,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,a){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return i.setEditCellValue({id:r,field:o,value:a.id},t),e.next=5,n.api.commitCellChange({id:r,field:o});case 5:i.setCellMode(r,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.rubro===t.rubro},getOptionLabel:function(e){return e.rubro},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Rubro"}))}})}function xi(e,t){var n=e.subRubros,r=e.props,i=r.id,o=r.api,a=r.field;n=[].concat(Object(Fe.a)(n.filter((function(e){var t;return e.rubroId===parseInt(null===r||void 0===r||null===(t=r.row)||void 0===t?void 0:t.filtroRubroID)}))),[{subRubro:""}]);var d=Object(l.useState)({subRubro:""}),s=Object(c.a)(d,2),u=s[0],b=s[1];return Object(k.jsx)(bn.a,{value:u,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(n),o.setEditCellValue({id:i,field:a,value:n.id},t),e.next=4,r.api.commitCellChange({id:i,field:a});case 4:o.setCellMode(i,a,"view");case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:n,isOptionEqualToValue:function(e,t){return e.subRubro===t.subRubro},getOptionLabel:function(e){return e.subRubro},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"subRubro"}))}})}function gi(e){var t=e.retenciones,n=e.props,r=n.id,i=n.api,o=n.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var a=Object(l.useState)({descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return Object(k.jsx)(bn.a,{value:s,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,a){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return i.setEditCellValue({id:r,field:o,value:a.id},t),e.next=5,n.api.commitCellChange({id:r,field:o});case 5:i.setCellMode(r,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Retencion"}))}})}function yi(e){var t=e.estados,n=e.props,r=n.id,i=n.api,o=n.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var a=Object(l.useState)({descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return n.row.confirmada?Object(k.jsx)(Ve.a,{defaultValue:n.row.estadoOP.descripcion,InputProps:{readOnly:!0}}):Object(k.jsx)(bn.a,{value:s,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,a){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!(null===a||void 0===a?void 0:a.id)){e.next=6;break}return i.setEditCellValue({id:r,field:o,value:a.id},t),e.next=5,n.api.commitCellChange({id:r,field:o});case 5:i.setCellMode(r,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Estado"}))}})}function wi(e){var t=e.fondos_s,n=e.props,r=n.id,i=n.api,o=n.field;t=[].concat(Object(Fe.a)(t),[{descripcion:""}]);var a=Object(l.useState)({descripcion:""}),d=Object(c.a)(a,2),s=d[0],u=d[1];return n.row.confirmada?Object(k.jsx)(Ve.a,{defaultValue:n.row.fondos.descripcion,InputProps:{readOnly:!0}}):Object(k.jsx)(bn.a,{value:s,onChange:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,a){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u(a),!((null===a||void 0===a?void 0:a.id)>0)){e.next=6;break}return i.setEditCellValue({id:r,field:o,value:a.id},t),e.next=5,n.api.commitCellChange({id:r,field:o});case 5:i.setCellMode(r,o,"view");case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),id:"combo-box-demo",options:t,isOptionEqualToValue:function(e,t){return e.descripcion===t.descripcion},getOptionLabel:function(e){return e.descripcion},sx:{width:300},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Fondos"}))}})}function Ci(e){var t=e.row.onAuthObra,n=e.row.apr_obra;return""!==n?"total"===e.row.acceso?Object(k.jsxs)(ae.a,{onClick:function(){return Object(Vr.b)((function(e){var n=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"Cancelar"}),Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"Desaprobar Obra"})]})}))},children:[n,"  "]}):""+(""+n).toUpperCase():""}function Si(e){var t=e.row.onAuthAdm,n=e.row.apr_adm;return""!==n?"total"===e.row.acceso?Object(k.jsxs)(ae.a,{onClick:function(){return Object(Vr.b)((function(e){var n=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"Cancelar"}),Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"Desaprobar Adm"})]})}))},children:[n,"  "]}):""+(""+n).toUpperCase():""}function Pi(e){var t=e.row.cargarOP,n=e.row.fideicomiso,r=e.row.empresa,i=e.row.numero+" OP-"+n+"-"+r+".pdf",o=e.row.archivada,a=function(){t(),setTimeout((function(){Object(Vr.b)((function(e){var t=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(k.jsx)(kr.PDFDownloadLink,{document:Object(k.jsx)(ei,{dataOP:ii,dataFacturas:oi,apiServerUrl:"http://104.131.28.211:3000/",idSociedad:ai}),fileName:i,children:function(e){e.blob,e.url;var t=e.loading;e.error;return t?"Loading document...":"Descargar"}})]})}))}),800)};return 0===o?Object(k.jsx)(ae.a,{onClick:a,children:"Para Generar"}):Object(k.jsx)(ae.a,{onClick:a,children:"Generada"})}function Ai(e){var t=e.row.onEnviar,n=e.row.enviada,r=function(){return Object(Vr.b)((function(e){var n=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"Cancelar"}),Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"Enviar"})]})}))};return 0===e.row.archivada?"":0===n?Object(k.jsx)(ae.a,{onClick:r,children:"Enviar"}):Object(k.jsx)(ae.a,{onClick:r,children:"Re enviar"})}function Ii(e){var t=e.loggedUser,n=Object(l.useContext)(Jo),r=0;"total"!==(null===t||void 0===t?void 0:t["rol.op"])&&"blue"!==(null===t||void 0===t?void 0:t["rol.op"])||(r=-1);var i=Object(a.useQuery)(["OP",n],(function(){return Ge("OP/listar/".concat(n.id,"/todas/nulo/").concat(r,"/0/0/0"))})),o=i.data,d=i.isLoading,s=i.error,u=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(n.id))})).data,b=Object(a.useQuery)(["proveedores"],(function(){return Ge("empresa/listar/".concat(n.id,"/0"))})).data,f=Object(a.useQuery)(["ddfacturas"],(function(){return Ge("factura/listar/".concat(n.id,"/opid/0/0"))})).data,j=Object(a.useQuery)(["ddfacturasBlue"],(function(){return Ge("factura/listar/".concat(n.id,"/opid/0/1"))})).data,m=Object(l.useState)(-1),v=Object(c.a)(m,2),h=v[0],p=v[1],O=Object(l.useState)(-1),x=Object(c.a)(O,2),g=x[0],y=x[1],w=Object(l.useState)(-1),C=Object(c.a)(w,2),S=C[0],P=C[1],A=Object(l.useState)(!0),F=Object(c.a)(A,2),D=F[0],R=F[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(xn.a,{smUp:"vista"===(null===t||void 0===t?void 0:t["rol.op"]),children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Mr,{idSociety:n,loggedUser:t,fideicomisos:u,proveedores:b,ddfacturas:f,ddfacturasBlue:j})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(_r,{idSociety:n,loggedUser:t,fideicomisos:u,setFiltFide:p,setFiltRS:y,setFiltEst:P,filtTerm:D,setFiltTerm:R,proveedores:b,ddfacturas:f,ddfacturasBlue:j})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(di,{idSociety:n,loggedUser:t,opInformation:o,filtTerm:D,filtFide:h,filtRS:g,filtEst:S,isLoading:d,error:s})})]})})]})}var Fi=n(642),Di=n.n(Fi),Ri=function(e,t){return"dark"===t?Object(ti.b)(e,.6):Object(ti.d)(e,.6)},Ti=function(e,t){return"dark"===t?Object(ti.b)(e,.5):Object(ti.d)(e,.5)},ki=function(e,t,n){return[{field:"estadoId",headerName:"Requiere autorizar en Obra",width:70,filterable:!1,sortable:!1,hide:"obra"===e,editable:!1,headerAlign:"center",renderCell:function(e){return 1!==e.value?"":Object(k.jsx)(D.a,{sx:{bgcolor:"#39BC44"},children:"Ob"})}},{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center",align:"center",renderCell:zi},{field:"createdAt",headerName:"Fecha",editable:!1,width:115,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return dt(e.value)}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:Ui},{field:"numero",headerName:"Nro",width:110,editable:!1,headerAlign:"center",align:"right",renderCell:Mi},{field:"empresa",headerName:"Raz\xf3n Social",editable:!1,width:160,headerAlign:"center",align:"center"},{field:"monto",headerName:"Monto",editable:!1,width:120,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"Moneda",editable:!1,width:50,headerAlign:"center",align:"left"},{field:"formaPago",headerName:"Forma Pago",width:155,editable:!0},{field:"estadoOP",headerName:"Estado",width:150,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"PriceCheckIcon",headerName:"Autorizar",width:155,filterable:!1,sortable:!1,headerAlign:"center",align:"center",renderCell:function(e){var r=e.row.authId;return Object(k.jsx)(Di.a,{onClick:function(e){n(r),t(!0)}})}}]};function Ni(e){var t=e.idSociety,n=e.loggedUser,r=e.tipo,i=gt(),o=i.Prompt,d=i.setIsPromptOpen,u=Object(l.useState)(),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(s.i)(),v="";v="adm"===r?"OP/listar/".concat(t.id,"/authADM/nulo/").concat(0,"/0/0/0"):"OP/listar/".concat(t.id,"/authObra/nulo/").concat(0,"/0/0/0");var h=Object(a.useQuery)(["OP"+r,t],(function(){return Ge(v)})),p=h.data,O=h.isLoading,x=h.error,g=Object(a.useQueryClient)(),y=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.rowIdToDelete,i=n.tipo,o=n.loggedUser,e.next=3,$e("autorizacion/agregar/".concat(null===t||void 0===t?void 0:t.id),{opid:r,documento:"op",tipoAutorizacion:i,creador:o.id});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.refetchQueries(["OP"+r,t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),C=y.mutate,S=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m("./".concat(t.id,"/").concat(t.createdAt,"/").concat(t.empresaId,"/").concat(t.numero,"/").concat(null===(n=t.fideicomisos[0])||void 0===n?void 0:n.nombre,"/").concat(t.estadoOP,"/").concat(null===t||void 0===t||null===(r=t.auth_adm[0])||void 0===r||null===(i=r.usuarios[0])||void 0===i?void 0:i.user,"/").concat(null===t||void 0===t||null===(o=t.auth_obra[0])||void 0===o||null===(a=o.usuarios[0])||void 0===a?void 0:a.user,"/").concat(t.confirmada,"/").concat(t.blue,"/OP Detalle")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P=S.mutate,A=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.field,i=n.id,o=n.value,e.next=3,$e("OP/modificar/".concat(t.id),Object(w.a)({id:i},r,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var i,o,a,c,l;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.field,o=n.id,a=n.value,e.next=3,g.cancelQueries(["OP"+r,t]);case 3:return c=g.getQueryData(["OP"+r,t]),l=[].concat(Object(Fe.a)(c.filter((function(e){return e.id!==o}))),[Object(re.a)(Object(re.a)({},c.find((function(e){return e.id===o}))),{},Object(w.a)({},i,a))]),g.setQueryData(["OP"+r,t],l),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,i){return g.setQueryData(["OP"+r,t],i)},onSettled:function(){return g.invalidateQueries(["OP"+r,t])}}),D=A.mutate,R=Object(l.useContext)(Xo),T=Object(l.useState)([]),N=Object(c.a)(T,2),Q=N[0],z=N[1],U=Object(l.useState)(!1),M=Object(c.a)(U,2),E=M[0],_=M[1];var V=l.useState([{field:"createdAt",sort:"desc"}]),L=Object(c.a)(V,2),B=L[0],q=L[1],W=Object(l.useState)(25),H=Object(c.a)(W,2),G=H[0],$=H[1];return O?"Cargando...":x?"Hubo un error: ".concat(x.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(o,{message:"\xbfAutorizar fila?",action:function(){return C({rowIdToDelete:f,tipo:r,loggedUser:n})}}),Object(k.jsxs)(I.a,{sx:{height:400,width:1,"& .color_x_estado-conf":{bgcolor:function(e){return Ri(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return Ti(e.palette.success.main,e.palette.mode)}}},"& .color_x_estado-auth":{bgcolor:function(e){return Ri(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return Ti(e.palette.error.main,e.palette.mode)}}},"& .color_x_estado-anulado":{bgcolor:function(e){return Ri(e.palette.text.primary,e.palette.mode)},"&:hover":{bgcolor:function(e){return Ti(e.palette.text.primary,e.palette.mode)}}},"& .color_x_estado-parap":{bgcolor:function(e){return Ri(e.palette.warning.light,e.palette.mode)},"&:hover":{bgcolor:function(e){return Ti(e.palette.warning.light,e.palette.mode)}}}},children:[Object(k.jsx)(St.a,{rows:p.filter((function(e){return function(e,t){return"adm"===t||1===e.estadoOP}(e,r)})).map((function(e){var t;return{estadoId:e.estadoOP,id:e.id,createdAt:e.createdAt,fideicomiso:e.fideicomisos[0].nombre,numero:e.numero,empresa:e.empresas[0].razonSocial,monto:e.monto,moneda:e.moneda,formaPago:e.formaPago,estadoOP:null===R||void 0===R||null===(t=R.find((function(t){return t.id===e.estadoOP})))||void 0===t?void 0:t.descripcion,Color_estadoOP:e.estadoOP,empresaId:e.empresaId,apr_obra:e.auth_obra[0]?e.auth_obra[0].usuarios[0].user:"",apr_adm:e.auth_adm[0]?e.auth_adm[0].usuarios[0].user:"",authOBRA:!!e.authOBRA,authId:e.id,blue:e.blue,confirmada:0!==e.confirmada,onIrDetalle:function(){return P(e)}}})),onCellEditCommit:D,columns:ki(r,d,j),sortModel:B,onSortModelChange:function(e){return e[0]!==B[0]&&function(e){var t;0===e.length&&(e.push(B[0]),"asc"===(null===(t=B[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),q(e)}(e)},pageSize:G,onPageSizeChange:function(e){return $(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,checkboxSelection:!0,onSelectionModelChange:z,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:Qi},getRowClassName:function(e){return"color_x_estado-".concat(e.row.confirmada?"conf":6===e.row.Color_estadoOP?"anulado":2===e.row.Color_estadoOP?"parap":1===e.row.Color_estadoOP||4===e.row.Color_estadoOP?"auth":"regular")}}),Object(k.jsx)(ae.a,{onClick:function(){return function(e,t,n,r,i,o){for(var a=!1,c=0;c<e.length;c++)try{i({rowIdToDelete:e[c],tipo:n,loggedUser:r})}catch(x){a=!0,console.log(x)}a||o(!0)}(Q,0,r,n,C,_)},children:"Autorizar filas Seleccionadas"}),Object(k.jsx)(lr.a,{in:E,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){_(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function Qi(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["id","createdAt","fideicomiso","numero","empresa","monto","moneda","formaPago","estadoOP"]}})]})}function zi(e){var t="".concat(e.row.id,"/").concat(e.row.createdAt,"/").concat(e.row.empresaId,"/").concat(e.row.numero,"/").concat(e.row.fideicomiso,"/").concat(e.row.Color_estadoOP,"/").concat(""===e.row.apr_adm?"null":e.row.apr_adm,"/").concat(""===e.row.apr_obra?"null":e.row.apr_obra,"/").concat(e.row.confirmada?1:0,"/").concat(e.row.blue,"/OP Detalle");return Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:e.row.id})})}function Ui(e){var t=e.row.onIrDetalle,n=e.row.fideicomiso;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function Mi(e){var t=e.row.onIrDetalle,n=e.row.numero;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function Ei(e){var t=e.idSociety,n=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsx)(we.a,{children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ni,{idSociety:t,loggedUser:n,tipo:"adm"})})})})]})}function _i(e){var t=e.idSociety,n=e.loggedUser;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsx)(we.a,{children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ni,{idSociety:t,loggedUser:n,tipo:"obra"})})})})]})}function Vi(e){var t=e.idSociety,n=e.fideicomisoId,r=e.empresaId,i=e.OPId,o=e.refetch,d=Object(s.j)().blue,u=gt().Prompt,b=Object(a.useQueryClient)(),f=Object(a.useQuery)(["facturas"],(function(){return Ge("factura/listarCombo/".concat(t.id,"/opid/0/").concat(d))})).data,j=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("factura/modificar/".concat(t.id),{id:null===n||void 0===n||null===(r=n.factura)||void 0===r?void 0:r.id,OPId:i});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.refetchQueries(["facturas",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),m=j.mutate,v=Object(l.useState)(null),h=Object(c.a)(v,2),p=h[0],O=h[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{factura:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,m(t),setTimeout((function(){o(),console.log("refetch")}),750),i(),r(!1);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,i=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"N\xfamero Factura",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){O(t),i("factura",t)},value:p,getOptionLabel:function(e){return e.numero},isOptionEqualToValue:function(e,t){return e.id===t.id},options:f?null===f||void 0===f?void 0:f.filter((function(e){return(null===e||void 0===e?void 0:e.fideicomisoId)===parseInt(n)&&(null===e||void 0===e?void 0:e.empresaId)===parseInt(r)})):[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"N\xfamero Factura"}))}}),Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar Factura"})]})}}),Object(k.jsx)(u,{message:"...error",ok:!0})]})}var Li=n(1200);function Bi(e){var t=e.idSociety,n=e._bancos,r=e._cuentasbanco,i=e.OPId,d=e.loggedUser,s=e.estadoOP,u=e.confirmada,b=e.formOP,f=e.isLoading,j=e.error,m=e.refetch,v=e.empresaId,h=(e.fideicomiso,gt().Prompt),p=Object(a.useQueryClient)(),O=!0;"vista"===(null===d||void 0===d?void 0:d["rol.op"])&&(O=!1);var x=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("op/modificar/".concat(t.id),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.refetchQueries(["formOP",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),g=x.mutate;console.log(222,Object(l.useContext)(Xo));var y=Object(l.useContext)(Xo),w=Object(l.useContext)(ta),C=Object(l.useContext)(na),S=Object(l.useContext)(ea);if(void 0===Object(l.useContext)(Xo)){y=[{id:0,descripcion:"-"},{id:1,descripcion:"Para autorizar en Obra"},{id:2,descripcion:"Para pagar"},{id:3,descripcion:"Pagada"},{id:4,descripcion:"Para autorizar Admin. Central"},{id:5,descripcion:"Pagado Parcial"},{id:6,descripcion:"Anulado"},{id:7,descripcion:"Cargada en Banco"}]}if(void 0===Object(l.useContext)(ta)){w=[{id:0,descripcion:"-"},{id:1,descripcion:"No aplican"},{id:2,descripcion:"OK"},{id:3,descripcion:"Pendiente"}]}if(void 0===Object(l.useContext)(na)){w=[{id:0,descripcion:"-"},{id:1,descripcion:"No aplican"},{id:2,descripcion:"OK"},{id:3,descripcion:"Pendiente"}]}if(void 0===Object(l.useContext)(na)){C=[{id:0,descripcion:"-"},{id:1,descripcion:"No cargado"},{id:2,descripcion:"OK cargado"}]}var P=Object(l.useState)(parseInt(u)),I=Object(c.a)(P,2),F=I[0],D=I[1],R=Object(l.useState)(y[parseInt(s)]),T=Object(c.a)(R,2),N=T[0],Q=T[1],z=Object(l.useState)(w[parseInt(null===b||void 0===b?void 0:b.estadoRET)]),U=Object(c.a)(z,2),M=U[0],E=U[1],_=Object(l.useState)(C[parseInt(null===b||void 0===b?void 0:b.fondos)]),V=Object(c.a)(_,2),L=V[0],B=V[1],q=Object(l.useState)(""),W=Object(c.a)(q,2),H=W[0],G=W[1],$=Object(l.useState)(null===b||void 0===b?void 0:b.OC_moneda),Y=Object(c.a)($,2),K=Y[0],Z=Y[1],J=Object(Fe.a)(n),X=Object(Fe.a)(r),ee="total"!==d["rol.op"]||1!==F,te="no"===d["rol.oc"];return f?"Cargando...":j?"Hubo un error: ".concat(j.message):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{id:i,flagPago:1},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,g(t),r(!1);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting;var n,r,c,l,s=e.setFieldValue;return Object(k.jsx)(Be.b,{children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n T\xe9cnica"})})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:6,children:Object(k.jsx)(Ve.a,{sx:{width:"64ch"},label:"Detalle",defaultValue:null===b||void 0===b?void 0:b.descripcion,type:"float",name:"descripcion",onChange:function(e){return Gi(e,s,m,"descripcion",t.id,i,0,0)},InputProps:{maxLength:90,readOnly:!O||1===F}},null===b||void 0===b?void 0:b.descripcion)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===b||void 0===b?void 0:b.auth_obra)?null===(n=b.auth_obra[0])||void 0===n||null===(r=n.usuarios[0])||void 0===r?void 0:r.user:""})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Orden de Compra:\xa0\xa0\xa0"})}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(Yi,{useQuery:a.useQuery,setFieldValue:s,OCId:null===b||void 0===b?void 0:b.OCId,OPId:i,idSociety:t,empresaId:v,fideicomisoId:null===b||void 0===b?void 0:b.fideicomisoId})}),Object(k.jsx)(Ce.a,{item:!0,md:6,children:Object(k.jsx)(xn.a,{smUp:te||(null===b||void 0===b?void 0:b.OCId)<1,children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:2,sm:4,md:6},children:[Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h4",children:Object(k.jsx)(ae.a,{component:o.c,to:"../../oc/".concat(null===b||void 0===b?void 0:b.OCId,"/OC Detalle"),children:"ver compra"})})}),Object(k.jsx)(Ce.a,{item:!0,md:1}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsxs)(or.a,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",defaultValue:null===b||void 0===b?void 0:b.OC_moneda,onChange:function(e){return function(e,t,n,r,i,o,a,c,l,d){var s=e.target.value;n(s),Gi(e,t,r,i,o,a,c,l,d)}(e,s,Z,m,"OC_moneda",t.id,i,1,0)},name:"row-radio-buttons-group",children:[Object(k.jsx)(ar.a,{value:"ARS",control:Object(k.jsx)(cr.a,{}),label:"ARS"}),Object(k.jsx)(ar.a,{value:"USD",control:Object(k.jsx)(cr.a,{}),label:"USD"})]},null===b||void 0===b?void 0:b.OC_moneda)}),Object(k.jsx)(Ce.a,{item:!0,md:1,children:Object(k.jsx)(xn.a,{smUp:"ARS"===K,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"14ch"},label:"Tipo de cambio",type:"number",defaultValue:null===b||void 0===b?void 0:b.cotizacion_usd,name:"cotizacion_usd",onChange:function(e){return G("cotizacion_usd")},onBlur:function(e){return Wi(e,s,m,"cotizacion_usd",t.id,i,0,0,null,H)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.cotizacion_usd)})})]})})})]}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"Aprobaci\xf3n Administrativa"})})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Estado:\xa0\xa0\xa0"})}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Estado",disabled:!O||1===F,disablePortal:!0,style:{width:"325px",display:"inline-flex"},onChange:function(e,n){qi(e,s,Q,m,"estadoOP",t.id,i,0,n)},value:N,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:y,renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Estado"}))}})}),Object(k.jsxs)(Ce.a,{item:!0,md:2,children:[Object(k.jsx)(xn.a,{smUp:"total"===d["rol.op"]||1!==F,children:Object(k.jsx)(A.a,{align:"right",color:"green",variant:"h5",children:1===F?"Confirmada!":""})}),Object(k.jsx)(xn.a,{smUp:!O||3!==(null===N||void 0===N?void 0:N.id)||1===F,children:Object(k.jsxs)(A.a,{align:"right",color:"blue",variant:"h5",children:[Object(k.jsx)(Li.a,{onChange:function(e){return $i(e,D,"confirmada",t.id,i,0,1)}})," Confirmar"]})}),Object(k.jsx)(xn.a,{smUp:ee,children:Object(k.jsxs)(A.a,{align:"right",color:"blue",variant:"h5",children:[Object(k.jsx)(Li.a,{defaultChecked:!0,onChange:function(e){return $i(e,D,"confirmada",t.id,i,0,0)}})," Desconfirmar"]})})]}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Retenci\xf3n, Fondos:\xa0\xa0\xa0"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Estado Retenci\xf3n",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){qi(e,s,E,m,"estadoRET",t.id,i,0,n)},value:M,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:w,renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Estado Retenci\xf3n"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Fondos",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){qi(e,s,B,m,"fondos",t.id,i,0,n)},value:L,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:C,renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Fondos"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Forma de Pago:"})}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:null===b||void 0===b?void 0:b.formaPago})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Sumatoria Facturas:\xa0\xa0\xa0"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===b||void 0===b?void 0:b.monto))]})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Aprobado por:"})}),Object(k.jsx)(Ce.a,{item:!0,md:4,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:(null===b||void 0===b?void 0:b.auth_adm)?null===(c=b.auth_adm[0])||void 0===c||null===(l=c.usuarios[0])||void 0===l?void 0:l.user:""})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"RET GAN",type:"number",defaultValue:null===b||void 0===b?void 0:b.RET_GAN,name:"RET_GAN",onChange:function(e){return G("RET_GAN")},onBlur:function(e){return Wi(e,s,m,"RET_GAN",t.id,i,0,0,null,H)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.RET_GAN)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Certificado GAN",defaultValue:null===b||void 0===b?void 0:b.COMP_GAN,name:"COMP_GAN",onChange:function(e){return Gi(e,s,m,"COMP_GAN",t.id,i,0,0,null)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.COMP_GAN)}),Object(k.jsx)(Ce.a,{item:!0,md:6}),Object(k.jsx)(Ce.a,{item:!0,md:2}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"RET IVA",type:"number",defaultValue:null===b||void 0===b?void 0:b.RET_IVA,name:"RET_IVA",onChange:function(e){return G("RET_IVA")},onBlur:function(e){return Wi(e,s,m,"RET_IVA",t.id,i,0,0,null,H)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.RET_IVA)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Certificado IVA",defaultValue:null===b||void 0===b?void 0:b.COMP_IVA,name:"COMP_IVA",onChange:function(e){return Gi(e,s,m,"COMP_IVA",t.id,i,0,0)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.COMP_IVA)}),Object(k.jsx)(Ce.a,{item:!0,md:6}),Object(k.jsx)(Ce.a,{item:!0,md:2}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"RET SUSS",type:"number",defaultValue:null===b||void 0===b?void 0:b.RET_SUSS,name:"RET_SUSS",onChange:function(e){return G("RET_SUSS")},onBlur:function(e){return Wi(e,s,m,"RET_SUSS",t.id,i,0,0,null,H)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.RET_SUSS)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Certificado SUSS",defaultValue:null===b||void 0===b?void 0:b.COMP_SUSS,name:"COMP_SUSS",onChange:function(e){return Gi(e,s,m,"COMP_SUSS",t.id,i,0,0)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.COMP_SUSS)}),Object(k.jsx)(Ce.a,{item:!0,md:6}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:"Monto a Abonar:\xa0\xa0\xa0"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsxs)(A.a,{style:{textDecorationLine:"underline"},align:"left",color:"green",variant:"h4",children:["\xa0",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(null===b||void 0===b?void 0:b.monto_a_pagar))+" "+(null===b||void 0===b?void 0:b.moneda)]})}),Object(k.jsx)(Ce.a,{item:!0,md:6,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"Pago"})})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Modo"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Banco"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Nro Cuenta"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Comprobante"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Fecha"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Monto"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Modo",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){Hi(e,s,m,"modo1",t.id,i,1,n,b)},value:null===b||void 0===b?void 0:b.OPpago.modo1,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:S||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Modo"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Banco",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){s("banco1",n),Hi(e,s,m,"banco1",t.id,i,1,n.id,null)},value:J.find((function(e){var t;return e.id===parseInt((null===b||void 0===b||null===(t=b.OPpago)||void 0===t?void 0:t.banco1)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:J||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"banco"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"NRO",disabled:!O||1===F,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,n){s("nro1",n),Hi(e,s,m,"nro1",t.id,i,1,n.id,null)},value:X.find((function(e){return e.id===((null===b||void 0===b?void 0:b.OPpago.nro1)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:X.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===b||void 0===b?void 0:b.OPpago.banco1)})),renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Cuenta"}))}})}),Object(k.jsxs)(Ce.a,{item:!0,md:2,children:[Object(k.jsx)(Ve.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri12,name:"descri12",onChange:function(e){return Gi(e,s,m,"descri12",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.OPpago.descri12),Object(k.jsx)(Ve.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri1,name:"descri1",onChange:function(e){return Gi(e,s,m,"descri1",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},(null===b||void 0===b?void 0:b.OPpago.descri1)+"1")]}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:ct(null===b||void 0===b?void 0:b.OPpago.fecha1)?null===b||void 0===b?void 0:b.OPpago.fecha1:null,name:"fecha1",InputProps:{readOnly:!O||1===F},onChange:function(e){return Gi(e,s,m,"fecha1",t.id,i,2,0)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.monto1,name:"monto1",onChange:function(e){return G("monto1")},onBlur:function(e){return Wi(e,s,m,"monto1",t.id,i,1,0,null,H)},inputProps:{readOnly:!O||1===F,min:0,style:{textAlign:"center"}}},null===b||void 0===b?void 0:b.OPpago.monto1)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Modo",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){Hi(e,s,m,"modo2",t.id,i,1,n,b)},value:null===b||void 0===b?void 0:b.OPpago.modo2,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:S||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Modo"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Banco",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){s("banco2",n),Hi(e,s,m,"banco2",t.id,i,1,n.id,null)},value:J.find((function(e){var t;return e.id===parseInt((null===b||void 0===b||null===(t=b.OPpago)||void 0===t?void 0:t.banco2)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:J||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"banco"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"NRO",disabled:!O||1===F,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,n){s("nro2",n),Hi(e,s,m,"nro2",t.id,i,1,n.id,null)},value:X.find((function(e){return e.id===parseInt((null===b||void 0===b?void 0:b.OPpago.nro2)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:X.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===b||void 0===b?void 0:b.OPpago.banco2)})),renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Cuenta"}))}})}),Object(k.jsxs)(Ce.a,{item:!0,md:2,children:[Object(k.jsx)(Ve.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri22,name:"descri22",onChange:function(e){return Gi(e,s,m,"descri22",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.OPpago.descri22),Object(k.jsx)(Ve.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri2,name:"descri2",onChange:function(e){return Gi(e,s,m,"descri2",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},(null===b||void 0===b?void 0:b.OPpago.descri2)+"2")]}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:ct(null===b||void 0===b?void 0:b.OPpago.fecha2)?null===b||void 0===b?void 0:b.OPpago.fecha2:null,name:"fecha2",InputProps:{readOnly:!O||1===F},onChange:function(e){return Gi(e,s,m,"fecha2",t.id,i,2,0)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.monto2,name:"monto2",onChange:function(e){return G("monto2")},onBlur:function(e){return Wi(e,s,m,"monto2",t.id,i,1,0,null,H)},inputProps:{readOnly:!O||1===F,min:0,style:{textAlign:"center"}}},null===b||void 0===b?void 0:b.OPpago.monto2)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Modo",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){Hi(e,s,m,"modo3",t.id,i,1,n,b)},value:null===b||void 0===b?void 0:b.OPpago.modo3,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:S||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Modo"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Banco",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){s("banco3",n),Hi(e,s,m,"banco3",t.id,i,1,n.id,null)},value:J.find((function(e){var t;return e.id===parseInt((null===b||void 0===b||null===(t=b.OPpago)||void 0===t?void 0:t.banco3)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return e.id===t.id},options:J,renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"banco"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"NRO",disabled:!O||1===F,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,n){s("nro3",n),Hi(e,s,m,"nro3",t.id,i,1,n.id,null)},value:X.find((function(e){return e.id===parseInt((null===b||void 0===b?void 0:b.OPpago.nro3)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:X.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===b||void 0===b?void 0:b.OPpago.banco3)})),renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Cuenta"}))}})}),Object(k.jsxs)(Ce.a,{item:!0,md:2,children:[Object(k.jsx)(Ve.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri32,name:"descri32",onChange:function(e){return Gi(e,s,m,"descri32",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.OPpago.descri32),Object(k.jsx)(Ve.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri3,name:"descri3",onChange:function(e){return Gi(e,s,m,"descri3",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},(null===b||void 0===b?void 0:b.OPpago.descri3)+"3")]}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:ct(null===b||void 0===b?void 0:b.OPpago.fecha3)?null===b||void 0===b?void 0:b.OPpago.fecha3:null,name:"fecha3",InputProps:{readOnly:!O||1===F},onChange:function(e){return Gi(e,s,m,"fecha3",t.id,i,2,0)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.monto3,name:"monto3",onChange:function(e){return G("monto3")},onBlur:function(e){return Wi(e,s,m,"monto3",t.id,i,1,0,null,H)},inputProps:{readOnly:!O||1===F,min:0,style:{textAlign:"center"}}},null===b||void 0===b?void 0:b.OPpago.monto3)}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Modo",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){Hi(e,s,m,"modo4",t.id,i,1,n,b)},value:null===b||void 0===b?void 0:b.OPpago.modo4,getOptionLabel:function(e){return e},isOptionEqualToValue:function(e,t){return e===t},options:S||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Modo"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Banco",disabled:!O||1===F,disablePortal:!0,style:{width:"160px",display:"inline-flex"},onChange:function(e,n){s("banco4",n),Hi(e,s,m,"banco4",t.id,i,1,n.id,null)},value:J.find((function(e){var t;return e.id===parseInt((null===b||void 0===b||null===(t=b.OPpago)||void 0===t?void 0:t.banco4)||0)})),getOptionLabel:function(e){return e.banco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:J,renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"banco"}))}})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"NRO",disabled:!O||1===F,disablePortal:!0,style:{width:"165px",display:"inline-flex"},onChange:function(e,n){s("nro4",n),Hi(e,s,m,"nro4",t.id,i,1,n.id,null)},value:X.find((function(e){return e.id===parseInt((null===b||void 0===b?void 0:b.OPpago.nro4)||0)})),getOptionLabel:function(e){return e.cuentaBanco},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:X.filter((function(e){return 0===e.bancoId||e.bancoId===parseInt(null===b||void 0===b?void 0:b.OPpago.banco4)})),renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Cuenta"}))}})}),Object(k.jsxs)(Ce.a,{item:!0,md:2,children:[Object(k.jsx)(Ve.a,{size:"small",sx:{width:"11ch"},label:"Nro",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri42,name:"descri42",onChange:function(e){return Gi(e,s,m,"descri42",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},null===b||void 0===b?void 0:b.OPpago.descri42),Object(k.jsx)(Ve.a,{size:"small",sx:{width:"8ch"},label:"Link",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.descri4,name:"descri4",onChange:function(e){return Gi(e,s,m,"descri4",t.id,i,1,0)},InputProps:{readOnly:!O||1===F}},(null===b||void 0===b?void 0:b.OPpago.descri4)+"4")]}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(rt.b,{dateAdapter:ot.a,children:Object(k.jsx)(it.a,{label:"Fecha",inputFormat:"dd/MM/yyyy",value:ct(null===b||void 0===b?void 0:b.OPpago.fecha4)?null===b||void 0===b?void 0:b.OPpago.fecha4:null,name:"fecha4",InputProps:{readOnly:!O||1===F},onChange:function(e){return Gi(e,s,m,"fecha4",t.id,i,2,0)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Monto",type:"float",defaultValue:null===b||void 0===b?void 0:b.OPpago.monto4,name:"monto4",onChange:function(e){return G("monto4")},onBlur:function(e){return Wi(e,s,m,"monto4",t.id,i,1,0,null,H)},inputProps:{readOnly:!O||1===F,min:0,style:{textAlign:"center"}}},null===b||void 0===b?void 0:b.OPpago.monto4)}),Object(k.jsx)(Ce.a,{item:!0,md:10}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsxs)(A.a,{align:"center",color:"textPrimary",variant:"h5",children:[Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Math.round(100*(null===b||void 0===b?void 0:b.OPpago.monto1))/100+Math.round(100*(null===b||void 0===b?void 0:b.OPpago.monto2))/100+Math.round(100*(null===b||void 0===b?void 0:b.OPpago.monto3))/100+Math.round(100*(null===b||void 0===b?void 0:b.OPpago.monto4))/100)),"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"]})})]})})}}),Object(k.jsx)(h,{message:"Ya existe un tipo de cambio en esa fecha, por favor editar u eliminar el registro",ok:!0})]})}function qi(e,t,n,r,i,o,a,c,l){var d=e.target.value;if(console.log(d,null===l||void 0===l?void 0:l.id),0===d){console.log(11),e.preventDefault();if(!/^\d{0,7}(\.\d{0,2})?$/.test(d.toString()))return!1;console.log(22,i),n(l),t(i,d.toString()),Gi(e,t,r,i,o,a,c,null===l||void 0===l?void 0:l.id,null)}}function Wi(e,t,n,r,i,o,a,c,l,d){if(r!==d)return!1;e.preventDefault();var s=e.target.value;return void 0!==s&&(!!/^\d{0,9}(\.\d{0,2})?$/.test(s.toString())&&(t(r,s.toString()),void Gi(e,t,n,r,i,o,a,c,l)))}function Hi(e,t,n,r,i,o,a,c,l){e.preventDefault();var d=e.target.value;return void 0!==d&&(!!/^\d{0,9}(\.\d{0,2})?$/.test(d.toString())&&(t(r,d.toString()),void Gi(e,t,n,r,i,o,a,c,l)))}function Gi(e,t,n,r,i,o,a,c,l){var d=null;if(2===a)d=ut(e)+" 03:00:00";else{e.preventDefault();var s=e.target.value;t(r,s.toString()),d=s,"OCId"!==r&&"estadoOP"!==r&&"estadoRET"!==r&&"fondos"!==r||(d=c),"banco"===r.toString().substring(0,5)&&(d=c),"nro"===r.toString().substring(0,3)&&(d=c),"modo"===r.toString().substring(0,4)&&(d=c)}var u=Object(w.a)({id:o},r,d);if(a>0&&(u.flagPago=1),"Retenciones"===c){var b=parseFloat(null===l||void 0===l?void 0:l.RET_GAN)+parseFloat(null===l||void 0===l?void 0:l.RET_IVA)+parseFloat(null===l||void 0===l?void 0:l.RET_SUSS);"modo1"===r&&(u.monto1=b),"modo2"===r&&(u.monto2=b),"modo3"===r&&(u.monto3=b),"modo4"===r&&(u.monto4=b),"modo5"===r&&(u.monto5=b),"modo6"===r&&(u.monto6=b),"modo7"===r&&(u.monto7=b)}$e("op/modificar/".concat(i),u),setTimeout((function(){n&&(n(),console.log("refetch"))}),2e3)}function $i(e,t,n,r,i,o,a){e.preventDefault(),t(a);var c=Object(w.a)({id:i},n,a);1===o&&(c.flagPago=1),$e("op/modificar/".concat(r),c)}function Yi(e){var t=e.idSociety,n=e.setFieldValue,r=e.empresaId,i=e.fideicomisoId,o=e.OPId,a=e.OCId,d={id:0,fideicomisoId:0,empresaId:0,descripcion1:"-"},s=(0,e.useQuery)(["ordenes",t.id],(function(){return Ge("oc/listarCombo/".concat(t.id,"/0/0"))})),u=s.data,b=s.isLoading,f=s.error,j=s.refetch,m=Object(l.useState)(d),v=Object(c.a)(m,2),h=v[0],p=v[1];if(b)return"Cargando...";if(f)return"Hubo un error: ".concat(f.message);var O=[].concat(Object(Fe.a)(u.filter((function(e){return e.fideicomisoId===parseInt(i)&&e.empresaId===parseInt(r)}))),[d]);return O.length>1&&(parseInt(a)>0&&0===(null===h||void 0===h?void 0:h.id)||0===parseInt(a)&&(null===h||void 0===h?void 0:h.id)>0)&&p(O.find((function(e){return e.id===parseInt(a)}))),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Orden de Compra",disablePortal:!0,style:{width:"325px",display:"inline-flex"},onChange:function(e,r){qi(e,n,p,j,"OCId",t.id,o,0,r)},value:h,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.descripcion1},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===(null===t||void 0===t?void 0:t.id)},options:O,renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Orden de Compra"}))}})}var Ki=function(e,t){return[{field:"tipo",headerName:"Tipo de Comp.",width:170,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"empresa",headerName:"Proveedor",width:170,editable:!1,headerAlign:"center"},{field:"detalle",headerName:"Detalle",width:175,editable:e,headerAlign:"center"},{field:"numero",headerName:"Nro Factura",width:185,editable:!1,headerAlign:"center",align:"center"},{field:"txtOC",headerName:"Nro OC",width:130,editable:e,headerAlign:"center",align:"center"},{field:"montoTotal",headerName:"Importe",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"es_ajuste",headerName:"M. Costo",type:"boolean",width:150,editable:!1,headerAlign:"center"},{field:"link2",headerName:"",width:20,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(k.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"deleteIcon",headerName:"",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:Ji}]};function Zi(e){var t=e.idSociety,n=(e.OPId,e.loggedUser),r=e.selectedFacturaData,i=e.facturas,o=e.isLoading,c=e.error,d=e.refetch,s=Object(a.useQueryClient)(),u=Object(l.useContext)(ra),b=!0;"vista"===(null===n||void 0===n?void 0:n["rol.op"])&&(b=!1);var f=!0;"parcial"!==(null===n||void 0===n?void 0:n["rol.op"])&&"vista"!==(null===n||void 0===n?void 0:n["rol.op"])||(f=!1);var j=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(n){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),{id:n,OPId:null});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.id>0)){e.next=3;break}return e.next=3,s.refetchQueries(["facturas",t,r]);case 3:d();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),m=j.mutate;return o?"Cargando...":c?"Hubo un error: ".concat(c.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(Vr.a,{}),Object(k.jsx)(St.a,{rows:i.map((function(e){var t;return{id:e.id,empresa:e.empresas[0]?e.empresas[0].razonSocial:"",numero:e.numero,tipo:{id:e.tipo,descripcion:null===u||void 0===u||null===(t=u.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion},link:e.link,link2:e.link,montoTotal:e.montoTotal,moneda:e.moneda,es_ajuste:e.es_ajuste,detalle:e.detalle,txtOC:e.txtOC,fechaIngreso:e.fechaIngreso,fechaVTO:e.fechaVTO,onDelete:function(){return m(e.id)}}})),columns:Ki(b,f),disableSelectionOnClick:!0,autoHeight:!0,onCellEditCommit:function(e){var n=Object(w.a)({id:e.id},e.field,e.value);$e("factura/modificar/".concat(null===t||void 0===t?void 0:t.id),n)}})]})}function Ji(e){var t=e.row.onDelete;return Object(k.jsx)(Pt.a,{onClick:function(){return Object(Vr.b)((function(e){var n=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:n,children:"No quiero borrar"}),Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){t(),n()},children:"S\xed quiero borrar"})]})}))}})}function Xi(e){var t=e.idSociety,n=(e.OPId,e.fecha),r=e.fideicomiso,i=e.formOP,o=e.categorias,a=(e.empresaId,e.facturas,e.isLoading),c=e.error,d=(e.refetch,e.loggedUser,Object(l.useContext)(ia));if(a)return"Cargando...";if(c)return"Hubo un error: ".concat(c.message);var s=null===o||void 0===o?void 0:o.find((function(e){return e.id===(null===i||void 0===i?void 0:i.empresas[0].categoria)})),u=parseInt(i?null===i||void 0===i?void 0:i.empresas[0].condIVA:0),b=null===d||void 0===d?void 0:d.find((function(e){return e.id===u})).descripcion;return Object(k.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["op:","numero"," | ",null===t||void 0===t?void 0:t.nombre]})}),Object(k.jsx)(k.Fragment,{children:Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsx)(we.a,{children:Object(k.jsxs)(I.a,{sx:{pt:3},children:[Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"Solicitud de Pago:"})}),Object(k.jsx)(Ce.a,{item:!0,md:5,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:[null===i||void 0===i?void 0:i.numero,"\xa0\xa0\xa0\xa0 ",r]})}),Object(k.jsx)(Ce.a,{item:!0,md:5,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:st(n)})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"})]}),Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"RETENCIONES IMPUESTO A LAS GANANCIAS:"})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:["R\xe9gimen:\xa0",null===s||void 0===s?void 0:s.regimen]})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:[b," \xa0\xa0\xa0\xa0\xa0\xa0\xa0C\xf3digo de R\xe9gimen:\xa0",null===s||void 0===s?void 0:s.codigo]})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Tipo de Persona:"})}),Object(k.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:11,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Neto gravado acumulado mensual:\xa0... calcular ..."})}),Object(k.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:11,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Retenciones acumuladas del mes:\xa0... calcular ..."})}),Object(k.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:11,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:["M\xednimo no sujeto a retenci\xf3n:\xa0",null===s||void 0===s?void 0:s.inscriptosNoRet,"$"]})}),Object(k.jsx)(Ce.a,{item:!0,md:1,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:11,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:["Tasa aplicable:\xa0",null===s||void 0===s?void 0:s.inscriptos,"%"]})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:"Retenci\xf3n a practicar:\xa0... calcular ..."})})]})]})})})})]})}var eo="http://104.131.28.211:3000/";function to(e){var t,n,r,i,o,u=e.idSociety,b=e.loggedUser,f=d.a.useState(!1),j=Object(c.a)(f,2),m=j[0],v=j[1],h=d.a.useState(!1),p=Object(c.a)(h,2),O=p[0],x=p[1],g=Object(s.j)(),y=g.idOP,w=g.fecha,C=g.empresaId,S=g.numero,P=g.fideicomiso,F=g.estadoOP,D=g.auth_adm,R=g.auth_obra,T=g.confirmada,N=g.blue,Q=u.id,z=Object(l.useRef)(),U=Object(a.useQuery)(["categoria",u],(function(){return Ge("categoria/listar/".concat(u.id))})).data,M=Object(a.useQuery)(["formOP",u.id],(function(){return Ge("op/mostrarConFacturas/".concat(u.id,"/").concat(y))})),E=M.data,_=M.isLoading,V=M.error,L=M.refetch,B=function(){var e=Object(_e.a)(Ee.a.mark((function e(){var t,n;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(kr.pdf)(W()).toBlob();case 2:t=e.sent,(n=new FormData).append("logo",t),n.append("id",y),n.append("fideicomiso",P),n.append("numero",S),$e("op/modificar/".concat(u.id),n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function q(e,t){return e&&"op"===t?e:e&&"f"===t?{item:e}:e&&"b"===t?{bancos:e}:e&&"c"===t?{cuentasBanco:e}:null}var W=function(){return Object(k.jsx)(ei,{dataOP:q(null===E||void 0===E?void 0:E.op,"op"),bancos:null===E||void 0===E?void 0:E.bancos,cuentasBanco:null===E||void 0===E?void 0:E.cuentasBanco,dataFacturas:q(null===E||void 0===E?void 0:E.item,"f"),apiServerUrl:eo,idSociedad:Q})},H=Object(a.useQueryClient)(),G=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("autorizacion/agregar/".concat(null===u||void 0===u?void 0:u.id),{opid:t,documento:"op",tipoAutorizacion:"obra",creador:b.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.id>0)){e.next=3;break}return e.next=3,H.refetchQueries(["formOP",u]);case 3:L();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),$=G.mutate,Y=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$e("autorizacion/agregar/".concat(null===u||void 0===u?void 0:u.id),{opid:t,documento:"op",tipoAutorizacion:"adm",creador:b.id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(u.id>0)){e.next=3;break}return e.next=3,H.refetchQueries(["formOP",u]);case 3:L();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),K=Y.mutate,Z="vista"===(null===b||void 0===b?void 0:b["rol.op"]);Z||!!E&&1===(null===E||void 0===E?void 0:E.confirmada)&&(Z="total"!==(null===b||void 0===b?void 0:b["rol.op"]));return _?"Cargando...":V?"Hubo un error: ".concat(V.message):Object(k.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(k.jsxs)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:[Object(k.jsx)(xn.a,{smUp:"vista"===(null===b||void 0===b?void 0:b["rol.op"]),children:Object(k.jsx)(I.a,{mt:2,sx:{pt:1},children:Object(k.jsx)(ae.a,{onClick:function(){x(!O)},children:O?"Ocultar Retenciones":"Retenciones"})})}),Object(k.jsx)(xn.a,{smUp:no("obra",(null===E||void 0===E?void 0:E.auth_obra)&&(null===E||void 0===E||null===(t=E.auth_obra[0])||void 0===t?void 0:t.usuarios)?null===E||void 0===E||null===(n=E.auth_obra[0])||void 0===n?void 0:n.usuarios:R,null===b||void 0===b?void 0:b["rol.descripcion"]),children:Object(k.jsx)(I.a,{mt:2,sx:{pt:1},children:Object(k.jsx)(ae.a,{onClick:function(){Object(Vr.b)((function(e){var t=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){$(y),t()},children:"Autorizar"})]})}))},children:"Autorizar en Obra"})})}),Object(k.jsx)(xn.a,{smUp:no("adm",(null===E||void 0===E?void 0:E.auth_adm)&&(null===E||void 0===E||null===(r=E.auth_adm[0])||void 0===r?void 0:r.usuarios)?null===E||void 0===E||null===(i=E.auth_adm[0])||void 0===i?void 0:i.usuarios:D,null===b||void 0===b?void 0:b["rol.descripcion"]),children:Object(k.jsx)(I.a,{mt:2,sx:{pt:1},children:Object(k.jsx)(ae.a,{ref:z,onClick:function(){Object(Vr.b)((function(e){var t=e.closeToast;return Object(k.jsxs)(I.a,{children:[Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:t,children:"Cancelar"}),Object(k.jsx)(ae.a,{sx:{p:1,m:1},variant:"contained",color:"secondary",size:"small",onClick:function(){K(y),t()},children:"Autorizar"})]})}))},children:"Autorizar ADM"})})}),Object(k.jsxs)(I.a,{mt:2,sx:{pt:1},children:[Object(k.jsx)(ae.a,{onClick:function(){v(!m)},children:m?"Ocultar PDF":"Ver PDF"}),Object(k.jsx)(kr.PDFDownloadLink,{document:!1===_?Object(k.jsx)(ei,{dataOP:q(null===E||void 0===E?void 0:E.op,"op"),bancos:null===E||void 0===E?void 0:E.bancos,cuentasBanco:null===E||void 0===E?void 0:E.cuentasBanco,dataFacturas:q(null===E||void 0===E?void 0:E.item,"f"),apiServerUrl:eo,idSociedad:Q}):null,fileName:function(e,t,n){var r;return e&&e.empresas[0]?t+" OP-"+n+"-"+(null===e||void 0===e||null===(r=e.empresas[0])||void 0===r?void 0:r.razonSocial)+".pdf":"-"}(null===E||void 0===E?void 0:E.op,S,P),children:Object(k.jsx)(ae.a,{variant:"info",onClick:function(){setTimeout((function(){B()}),300)},children:"Descargar"})})]})]}),Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["op:",S.replace("OP_","")," | ",null===u||void 0===u?void 0:u.nombre]})}),Object(k.jsx)(k.Fragment,{children:m?Object(k.jsx)(kr.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(k.jsx)(ei,{dataOP:q(null===E||void 0===E?void 0:E.op,"op"),bancos:null===E||void 0===E?void 0:E.bancos,cuentasBanco:null===E||void 0===E?void 0:E.cuentasBanco,dataFacturas:q(null===E||void 0===E?void 0:E.item,"f"),apiServerUrl:eo,idSociedad:Q})}):O?Object(k.jsx)(Xi,{idSociety:u,OPId:y,fecha:w,fideicomiso:P,formOP:null===E||void 0===E?void 0:E.op,empresaId:C,facturas:null===E||void 0===E?void 0:E.item,categorias:U,error:V,refetch:L,loggedUser:b}):Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"Solicitud de Pago:"})}),Object(k.jsxs)(Ce.a,{item:!0,md:5,children:[Object(k.jsx)(xn.a,{smUp:!(1===parseInt(N)),children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:[S.replace("OP_","")," (Blue) \xa0\xa0 ",P]})}),Object(k.jsx)(xn.a,{smUp:!(0===parseInt(N)),children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:[S.replace("OP_",""),"\xa0\xa0\xa0\xa0 ",P]})})]}),Object(k.jsx)(Ce.a,{item:!0,md:5,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:st(w)})})]})}),Object(k.jsx)(xn.a,{smUp:Z,children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Vi,{OPId:y,fecha:w,fideicomisoId:null===E||void 0===E||null===(o=E.op)||void 0===o?void 0:o.fideicomisoId,empresaId:C,idSociety:u,refetch:L,loggedUser:b})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Zi,{OPId:y,fecha:w,empresaId:C,idSociety:u,facturas:null===E||void 0===E?void 0:E.item,isLoading:_,error:V,refetch:L,loggedUser:b})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Bi,{OPId:y,estadoOP:F,confirmada:T,idSociety:u,loggedUser:b,formOP:null===E||void 0===E?void 0:E.op,isLoading:_,error:V,empresaId:C,fideicomiso:P,_bancos:null===E||void 0===E?void 0:E.bancos,_cuentasbanco:null===E||void 0===E?void 0:E.cuentasBanco,refetch:L})})]})})})]})}function no(e,t,n){var r=!0;return"manager"===n&&"adm"===e&&(null!==t&&"null"!==t&&void 0!==t&&"undefined"!==t||(r=!1)),"manager"!==n&&"obra"!==n||"obra"!==e||null!==t&&"null"!==t&&void 0!==t&&"undefined"!==t||(r=!1),r}function ro(e){var t=e.idSociety,n=e.loggedUser,r=e.fideicomisos,i=e.proveedores,o=gt(),d=o.setIsPromptOpen,s=o.Prompt,u=Object(a.useQueryClient)(),b=!1;"total"===(null===n||void 0===n?void 0:n["rol.factura"])&&(b=!0);var f=Object(a.useMutation)((function(e){return $e("factura/agregar/".concat(t.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(r){var i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.creador=n.id,e.next=3,u.invalidateQueries(["factura",t]);case 3:return e.next=5,u.getQueryData(["factura",t]);case 5:return i=e.sent,o=[].concat(Object(Fe.a)(i),[Object(re.a)(Object(re.a)({},r),{},{id:(new Date).getTime()})]),u.setQueryData(["factura",t],o),e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,n,r){return u.setQueryData(["factura",t],r)},onSettled:function(){return u.invalidateQueries(["factura",t])}}),j=f.mutate,m=Object(l.useContext)(ra),v=Object(l.useState)({id:0,descripcion:"Factura"}),h=Object(c.a)(v,2),p=h[0],O=h[1],x=Object(l.useState)(null),g=Object(c.a)(x,2),y=g[0],w=g[1],C=Object(l.useState)(null),S=Object(c.a)(C,2),P=S[0],A=S[1],D=Object(l.useState)(!1),R=Object(c.a)(D,2),T=R[0],N=R[1],Q=!1,z="",U=!0,M=!1,E=bt(new Date)+"01";"blue"===(null===n||void 0===n?void 0:n["rol.factura"])&&(z=E,U=!1,Q=!0,b=!1,M=!0);var _=Object(l.useState)(U),V=Object(c.a)(_,2),L=V[0],B=V[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{numero:z,montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(r,i){var o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.setSubmitting,i.resetForm,void 0===(null===r||void 0===r?void 0:r.tipo)&&(r.tipo=p),e.next=4,ft("factura",t.id,r.empresa.id,r.numero);case 4:e.sent||""===r.numero?d(!0):(a=parseFloat(r.neto),r.iva&&(a+=parseFloat(r.iva)),r.percepciones&&(a+=parseFloat(r.percepciones)),j({numero:r.numero,neto:r.neto,iva:r.iva,percepciones:r.percepciones,montoTotal:2===r.tipo.id?-1*a:a,fechaIngreso:r.fechaIngreso,tipo:r.tipo.id,empresaId:r.empresa.id,fideicomisoId:r.fideicomiso.id,moneda:"ARS",blue:"on"===r.blue||M?1:0,creador:n.id}),o(!1));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsxs)(Ce.a,{item:!0,md:12,children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Tipo",title:"Tipo de comprobante",disablePortal:!0,required:!0,style:{width:"180px",display:"inline-flex"},onChange:function(e,t){O(t),n("tipo",t),oo(3===(null===t||void 0===t?void 0:t.id),n)},value:p,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:m||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Tipo de comprobante"}))}}),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Fideicomiso",title:"Seleccione un fideicomiso.",disablePortal:!0,required:!0,style:{width:"180px",display:"inline-flex"},onChange:function(e,t){w(t),n("fideicomiso",t)},value:y,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Fideicomiso"}))}}),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Razon Social",title:"Seleccione un proveedor.",disablePortal:!0,required:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){A(t),n("empresa",t)},value:P,getOptionLabel:function(e){return null===e||void 0===e?void 0:e.razonSocial},isOptionEqualToValue:function(e,t){return(null===e||void 0===e?void 0:e.id)===t.id},options:i||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Razon Social"}))}}),Object(k.jsx)(Be.a,{as:Ve.a,title:"Cargar n\xfamero completo de la factura.",label:"Numero",type:"float",required:!0,maxLength:11,size:"small",sx:{width:"20ch"},name:"numero",onChange:function(e){return io(e,n,"numero")}}),"\xa0\xa0",Object(k.jsx)(xn.a,{smUp:!b,children:Object(k.jsx)(ar.a,{control:Object(k.jsx)(ir.a,{id:"blue",name:"blue",onChange:function(e){return function(e,t,n,r,i,o){e.preventDefault(),i(!r),r?(oo(!0,t),t(n,"on")):(t(n,"off"),oo(!1,t))}(e,n,"blue",L,B)}}),label:"Blue"})}),Object(k.jsx)(xn.a,{smUp:!Q,children:Object(k.jsx)(ar.a,{control:Object(k.jsx)(ir.a,{disabled:!0,defaultChecked:!0,id:"blue",name:"blue2"}),label:"Blue"})}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]}),Object(k.jsxs)(Ce.a,{item:!0,md:12,children:[Object(k.jsx)(Be.a,{as:Ve.a,label:"Neto",title:"Monto , solo numeros.",required:!0,maxLength:9,type:"float",size:"small",style:{width:"180px",display:"inline-flex"},name:"neto",onChange:function(e){return io(e,n,"neto")}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Iva",title:"Iva, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"180px",display:"inline-flex"},name:"iva",onChange:function(e){return io(e,n,"iva")}}),Object(k.jsx)(Be.a,{as:Ve.a,label:"Percepciones",title:"Percepciones, solo numeros.",maxLength:9,type:"float",size:"small",style:{width:"230px",display:"inline-flex"},name:"percepciones",onChange:function(e){return io(e,n,"percepciones")}})]})]}),Object(k.jsx)(I.a,{sx:{width:"100%"},children:Object(k.jsx)(lr.a,{in:T,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){N(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}}),Object(k.jsx)(s,{message:"Ya existe ese n\xfamero de factura para esa razon social.",ok:!0})]})}function io(e,t,n){e.preventDefault();var r=e.target.value,i=e.which||e.keyCode,o=e.ctrlKey?e.ctrlKey:17===i;(/^\d{0,11}(\.\d{0,2})?$/.test(r.toString())||o)&&t(n,r.toString())}function oo(e,t){if(e){var n=bt(new Date)+"01";t("numero",parseInt(n))}else t("numero","")}function ao(e){var t=e.setFiltComp,n=e.setFiltFide,r=e.setFiltRS,i=(e.idSociety,e.fideicomisos),o=e.proveedores,a=Object(l.useContext)(ra),d=Object(l.useState)(null),s=Object(c.a)(d,2),u=s[0],b=s[1],f=Object(l.useState)(null),j=Object(c.a)(f,2),m=j[0],v=j[1],h=Object(l.useState)(null),p=Object(c.a)(h,2),O=p[0],x=p[1];function g(e,i){var o=-1;(null===i||void 0===i?void 0:i.id)&&(o=i.id),"comp"===e&&t(o),"fide"===e&&n(o),"rs"===e&&r(o)}return Object(k.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Tipo Comprobante",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){x(t),g("comp",t)},value:O,getOptionLabel:function(e){return e.descripcion},isOptionEqualToValue:function(e,t){return e.id===t.id},options:a||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Tipo Comprobante"}))}}),"\xa0",Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){b(t),g("fide",t)},value:u,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){v(t),g("rs",t)},value:m,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:o||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0"]})}})}var co=function(e,t,n,r){return[{field:"id",headerName:"Id",width:55,editable:!1,headerAlign:"center"},{field:"blue",headerName:"Blue",hide:!e,width:55,editable:!1,headerAlign:"center",renderCell:function(e){return 0===e.value?"":Object(k.jsx)(D.a,{sx:{bgcolor:"#3944BC"},children:"B"})}},{field:"tipo",headerName:"Tipo de Comp.",width:170,editable:!1,renderCell:function(e){return e.value.descripcion},headerAlign:"center"},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"left"},{field:"empresa",headerName:"Razon Social",width:170,editable:!1,headerAlign:"center"},{field:"numero",headerName:"N\xfamero",width:155,editable:!1,headerAlign:"center"},{field:"montoTotal",headerName:"Monto",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"neto",headerName:"Neto",width:120,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"iva",headerName:"IVA",width:110,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"percepciones",headerName:"Percepciones",width:110,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:t,headerAlign:"center"},{field:"es_ajuste",headerName:"Mayor Costo",type:"boolean",width:160,editable:!0,headerAlign:"center"},{field:"link",headerName:"Link",width:110,editable:t,headerAlign:"center"},{field:"ver",headerName:"",width:20,sortable:!1,editable:!1,headerAlign:"center",renderCell:function(e){var t=e.row.link;return Object(k.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",children:"ver"})}},{field:"fechaIngreso",headerName:"Fecha",width:155,type:"date",editable:t,headerAlign:"center",align:"center",renderCell:bo},{field:"diasVTO",headerName:"D\xedas VTO",width:140,filterable:!1,editable:t,type:"singleSelect",valueOptions:[0,1,2,3,4,5,6,7,10,14,15,20,21,28,30,40,50,60,70,80,90,100,120,150]},{field:"fechaIngreso_mas_diasVTO",headerName:"VTO",width:155,type:"date",sortable:!1,filterable:!1,editable:!1,headerAlign:"center",align:"center",renderCell:uo},{field:"OPnumero",headerName:"OP",width:100,editable:!1,headerAlign:"center",renderCell:fo},{field:"estadoOP",headerName:"Estado OP",width:160,editable:!1,headerAlign:"center"},{field:"deleteIcon",headerName:" ",hide:!t,width:50,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row,i=t.deleteId;return t.OPnumero>0?"":Object(k.jsx)(Pt.a,{onClick:function(e){r(i),n(!0)}})}}]};function lo(e){var t=e.filtComp,n=e.filtFide,r=e.filtRS,i=e.idSociety,o=e.loggedUser,d=Object(s.i)(),u=gt(),b=u.Prompt,f=u.setIsPromptOpen,j=Object(l.useState)(),m=Object(c.a)(j,2),v=m[0],h=m[1],p=Object(l.useContext)(Xo),O=Object(l.useContext)(ra),x=0,g=!1,y=!1;"total"===(null===o||void 0===o?void 0:o["rol.factura"])&&(x=-1,y=!0),"blue"===(null===o||void 0===o?void 0:o["rol.descripcion"])&&(x=-1,y=!0,g=!0);var C=!0;"vista"===(null===o||void 0===o?void 0:o["rol.factura"])&&(C=!1);var S=Object(a.useQuery)(["factura",i],(function(){return Ge("factura/listar/".concat(i.id,"/todas/nada/").concat(x))})),P=S.data,A=S.isLoading,I=S.error,F=Object(a.useQueryClient)(),D=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("factura/eliminar/".concat(i.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.cancelQueries(["factura",i]);case 2:return n=F.getQueryData(["factura",i]),r=n.filter((function(e){return e.id!==t})),F.setQueryData(["factura",i],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return F.setQueryData(["factura",i],n)},onSettled:function(){return F.invalidateQueries(["factura",i])}}),R=D.mutate,T=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,o=t.value,e.next=3,$e("factura/modificar/".concat(i.id),Object(w.a)({id:r},n,"es_ajuste"===n?o?1:0:o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,o=t.value,e.next=3,F.cancelQueries(["factura",i]);case 3:return a=F.getQueryData(["factura",i]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==r}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===r}))),{},Object(w.a)({},n,o))]),F.setQueryData(["factura",i],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return F.setQueryData(["factura",i],n)},onSettled:function(){return F.invalidateQueries(["factura",i])}}),N=T.mutate,Q=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,o,a,c,l;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d("./".concat(null===t||void 0===t||null===(n=t.OP)||void 0===n?void 0:n.id,"/").concat(null===t||void 0===t||null===(r=t.OP)||void 0===r?void 0:r.createdAt,"/").concat(t.empresaId,"/").concat(null===t||void 0===t||null===(i=t.OP)||void 0===i?void 0:i.numero,"/").concat(null===(o=t.fideicomisos)||void 0===o?void 0:o.nombre,"/").concat(null===t||void 0===t?void 0:t.OP.estadoOP,"/").concat(null===t||void 0===t||null===(a=t.OP)||void 0===a?void 0:a.authADM,"/").concat(null===t||void 0===t?void 0:t.OP.authOBRA,"/").concat(null===t||void 0===t||null===(c=t.OP)||void 0===c?void 0:c.confirmada,"/").concat(null===t||void 0===t||null===(l=t.OPs)||void 0===l?void 0:l.blue,"/OP Detalle")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),z=Q.mutate;var U=l.useState([{field:"id",sort:"desc"}]),M=Object(c.a)(U,2),E=M[0],_=M[1],V=Object(l.useState)(25),L=Object(c.a)(V,2),B=L[0],q=L[1];return A?"Cargando...":I?"Hubo un error: ".concat(I.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(b,{message:"\xbfEliminar fila?",action:function(){return R(v)}}),Object(k.jsx)(St.a,{rows:P.filter((function(e){return function(e,t,n,r,i){return(!i||1===e.blue)&&(-1===n&&-1===r&&-1===t||(n>-1&&-1===r&&-1===t?e.fideicomisoId===n:-1===n&&r>-1&&-1===t?e.empresaId===r:-1===n&&-1===r&&t>-1?e.tipo===t:n>-1&&r>-1&&-1===t?e.fideicomisoId===n&&e.empresaId===r:n>-1&&-1===r&&t>-1?e.fideicomisoId===n&&e.tipo===t:-1===n&&r>-1&&t>-1?e.empresaId===r&&e.tipo===t:n>-1&&r>-1&&t>-1?e.fideicomisoId===n&&e.empresaId===r&&e.tipo===t:void 0))}(e,t,n,r,g)})).map((function(e){var t,n,r,i,o,a;return{id:null===e||void 0===e?void 0:e.id,blue:null===e||void 0===e?void 0:e.blue,tipo:null===O||void 0===O||null===(t=O.find((function(t){return t.id===e.tipo})))||void 0===t?void 0:t.descripcion,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(n=e.fideicomisos[0])||void 0===n?void 0:n.nombre:"",empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(r=e.empresas[0])||void 0===r?void 0:r.razonSocial:"",numero:null===e||void 0===e?void 0:e.numero,montoTotal:2===parseInt(e.tipo)?-1*e.montoTotal:e.montoTotal,neto:2===parseInt(e.tipo)?-1*e.neto:e.neto,iva:2===parseInt(e.tipo)?-1*e.iva:e.iva,percepciones:2===parseInt(e.tipo)?-1*e.percepciones:e.percepciones,moneda:null===e||void 0===e?void 0:e.moneda,es_ajuste:null===e||void 0===e?void 0:e.es_ajuste,fechaIngreso:null===e||void 0===e?void 0:e.fechaIngreso,diasVTO:null===e||void 0===e?void 0:e.diasVTO,fechaVTO:null===e||void 0===e?void 0:e.fechaVTO,OPnumero:(null===e||void 0===e?void 0:e.OP)?null===e||void 0===e||null===(i=e.OP)||void 0===i?void 0:i.numero:"",estadoOP:(null===e||void 0===e?void 0:e.OP)?null===(o=p[null===e||void 0===e||null===(a=e.OP)||void 0===a?void 0:a.estado])||void 0===o?void 0:o.descripcion:"",link:null===e||void 0===e?void 0:e.link,ver:null===e||void 0===e?void 0:e.link,empresaId:null===e||void 0===e?void 0:e.empresaId,deleteId:null===e||void 0===e?void 0:e.id,onIrDetalle:function(){return z(e)}}})),OPs:!0,onCellEditCommit:N,columns:co(y,C,f,h),sortModel:E,onSortModelChange:function(e){return e[0]!==E[0]&&function(e){var t;0===e.length&&(e.push(E[0]),"asc"===(null===(t=E[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),_(e)}(e)},pageSize:B,onPageSizeChange:function(e){return q(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:so}})]})}function so(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["id","tipo","fideicomiso","empresa","numero","montoTotal","neto","iva","percepciones","moneda","es_ajuste","fechaIngreso","diasVTO","fechaVTO","OPnumero","estadoOP"]}})]})}function uo(e){var t=new Date(e.row.fechaIngreso),n=0;return e.row.diasVTO&&e.row.diasVTO>0&&(n=e.row.diasVTO),t.setDate(t.getDate()+n),dt(t)}function bo(e){return e.row.fechaIngreso?dt(e.row.fechaIngreso):""}function fo(e){var t=e.row.onIrDetalle,n=e.row.OPnumero;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function jo(e){var t,n=e.idSociety,r=e.loggedUser,i=Object(l.useState)(-1),o=Object(c.a)(i,2),d=o[0],s=o[1],u=Object(l.useState)(-1),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(l.useState)(-1),v=Object(c.a)(m,2),h=v[0],p=v[1],O=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(n.id))})).data,x=Object(a.useQuery)(["proveedores"],(function(){return Ge("empresa/listar/".concat(n.id,"/0"))})).data;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsxs)("title",{children:["Facturas | ",null!==(t=null===n||void 0===n?void 0:n.nombre)&&void 0!==t?t:""]})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(xn.a,{smUp:"vista"===(null===r||void 0===r?void 0:r["rol.factura"]),children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(ro,{idSociety:n,loggedUser:r,fideicomisos:O,proveedores:x})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(ao,{idSociety:n,fideicomisos:O,setFiltComp:s,setFiltFide:j,setFiltRS:p,proveedores:x})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(lo,{idSociety:n,loggedUser:r,filtComp:d,filtFide:f,filtRS:h})})]})})]})}function mo(e){var t=e.idSociety,n=e.loggedUser,r=e.fideicomisos,i=e.proveedores,o=Object(a.useQueryClient)(),d=Object(a.useMutation)((function(e){return $e("OC/agregar/".concat(t.id),e)}),{onSuccess:function(){var e=Object(_e.a)(Ee.a.mark((function e(){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.refetchQueries(["OC",t]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}),s=d.mutate,u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1],m=Object(l.useState)(null),v=Object(c.a)(m,2),h=v[0],p=v[1],O=Object(l.useState)(!1),x=Object(c.a)(O,2),g=x[0],y=x[1];return Object(k.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,r){var i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.setSubmitting,r.resetForm,s({fideicomisoId:t.fideicomiso.id,empresaId:t.empresa.id,descripcion1:t.descripcion,creador:n.id}),y(!0),i(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),n("fideicomiso",t)},value:f,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Fideicomiso"}))}}),Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){p(t),n("empresa",t)},value:h,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({},e),{},{label:"Razon Social"}))}}),Object(k.jsx)(Be.a,{as:Ve.a,required:!0,size:"small",label:"Descripci\xf3n",type:"string",name:"descripcion"}),Object(k.jsx)(ae.a,{id:"bagregar",variant:"text",type:"submit",disabled:t,children:"Agregar"}),Object(k.jsx)(I.a,{sx:{width:"100%"},children:Object(k.jsx)(lr.a,{in:g,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){y(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})})]})}})}function vo(e){var t=e.setFiltFide,n=e.setFiltRS,r=(e.setFiltEst,e.idSociety,e.loggedUser,e.fideicomisos),i=e.proveedores,o=(e.ddfacturas,e.ddfacturasBlue,Object(l.useState)(null)),a=Object(c.a)(o,2),d=a[0],s=a[1],u=Object(l.useState)(null),b=Object(c.a)(u,2),f=b[0],j=b[1];function m(e,r){var i=-1;(null===r||void 0===r?void 0:r.id)&&(i=r.id),"fide"===e&&t(i),"rs"===e&&n(i)}return Object(k.jsx)(Be.c,{initialValues:{numero:"",montoTotal:"",fechaIngreso:new Date},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,n.resetForm,r(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){e.isSubmitting,e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Fideicomiso",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){s(t),m("fide",t)},value:d,getOptionLabel:function(e){return e.nombre},isOptionEqualToValue:function(e,t){return e.id===t.id},options:r||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Fideicomiso"}))}}),"\xa0",Object(k.jsx)(Be.a,{as:bn.a,size:"small",label:"Filtrar por Razon Social",disablePortal:!0,style:{width:"230px",display:"inline-flex"},onChange:function(e,t){j(t),m("rs",t)},value:f,getOptionLabel:function(e){return e.razonSocial},isOptionEqualToValue:function(e,t){return e.id===t.id},options:i||[],renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)(Object(re.a)({variant:"standard"},e),{},{label:"Filtrar por Razon Social"}))}}),"\xa0"]})}})}var ho=function(e,t){return"dark"===t?Object(ti.b)(e,.6):Object(ti.d)(e,.6)},po=function(e,t){return"dark"===t?Object(ti.b)(e,.5):Object(ti.d)(e,.5)},Oo=function(e,t,n){return[{field:"id",width:120,headerName:"Id",renderCell:yo},{field:"createdAt",headerName:"Fecha",width:120,type:"date",editable:!1,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Date(t).toLocaleDateString("es-AR",{timeZone:"UTC"})}},{field:"fideicomiso",headerName:"Fideicomiso",width:160,editable:!1,headerAlign:"center",align:"center",renderCell:wo},{field:"empresa",headerName:"Raz\xf3n Social",width:170,editable:!1,headerAlign:"center",align:"center"},{field:"descripcion1",width:160,editable:e,headerName:"Descripci\xf3n"},{field:"monto_ARS",headerName:"Tot ARS",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"monto_USD",headerName:"Tot USD",width:130,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"deleteIcon",headerName:" ",hide:!e,width:50,headerAlign:"center",align:"center",renderCell:function(e){var r=e.row,i=r.deleteId;return r.confirmada?"":Object(k.jsx)(Pt.a,{onClick:function(e){n(i),t(!0)}})}}]};function xo(e){var t=e.filtFide,n=e.filtRS,r=(e.filtEst,e.idSociety),i=e.loggedUser,o=e.ocInformation,d=e.isLoading,u=e.error,b=!0;"vista"===(null===i||void 0===i?void 0:i["rol.oc"])&&(b=!1);var f=Object(s.i)(),j=gt(),m=j.Prompt,v=j.setIsPromptOpen,h=Object(l.useState)(),p=Object(c.a)(h,2),O=p[0],x=p[1],g=Object(a.useQueryClient)(),y=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ge("oc/mostrar/".concat(r.id,"/").concat(t.id));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onSettled:function(e){f("./".concat(e.id,"/OC Detalle"))}}),C=y.mutate,S=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OC/eliminar/".concat(r.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.cancelQueries(["OC",r]);case 2:return n=g.getQueryData(["OC",r]),i=n.filter((function(e){return e.id!==t})),g.setQueryData(["OC",r],i),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return g.setQueryData(["OC",r],n)},onSettled:function(){return g.invalidateQueries(["OC",r])}}),P=S.mutate,A=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,i,o;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,i=t.id,o=t.value,e.next=3,$e("OC/modificar/".concat(r.id),Object(w.a)({id:i},n,o));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,i,o,a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,i=t.id,o=t.value,e.next=3,g.cancelQueries(["OC",r]);case 3:return a=g.getQueryData(["OC",r]),c=[].concat(Object(Fe.a)(a.filter((function(e){return e.id!==i}))),[Object(re.a)(Object(re.a)({},a.find((function(e){return e.id===i}))),{},Object(w.a)({},n,o))]),g.setQueryData(["OC",r],c),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return g.setQueryData(["OC",r],n)},onSettled:function(){return g.invalidateQueries(["OC",r])}}),D=A.mutate,R=Object(l.useState)(!1),T=Object(c.a)(R,2),N=T[0],Q=T[1];var z=l.useState([{field:"createdAt",sort:"desc"}]),U=Object(c.a)(z,2),M=U[0],E=U[1],_=Object(l.useState)(25),V=Object(c.a)(_,2),L=V[0],B=V[1];return d?"Cargando...":u?"Hubo un error: ".concat(u.message):Object(k.jsxs)("div",{style:{width:"100%"},children:[Object(k.jsx)(m,{message:"\xbfEliminar fila?",action:function(){return P(O)}}),Object(k.jsx)(Vr.a,{}),Object(k.jsxs)(I.a,{sx:{height:400,width:1,"& .super-app-theme--true":{bgcolor:function(e){return ho(e.palette.success.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return po(e.palette.success.main,e.palette.mode)}}},"& .super-app-theme--otra":{bgcolor:function(e){return ho(e.palette.error.main,e.palette.mode)},"&:hover":{bgcolor:function(e){return po(e.palette.error.main,e.palette.mode)}}}},children:[Object(k.jsx)(St.a,{rows:o.filter((function(e){return function(e,t,n){return e.id>0&&e.empresaId>0&&e.fideicomisoId>0&&(-1===t&&-1===n||(t>-1&&-1===n?e.fideicomisoId===t:-1===t&&n>-1?e.empresaId===n:t>-1&&n>-1?e.fideicomisoId===t&&e.empresaId===n:void 0))}(e,t,n)})).map((function(e){var t,n;return{id:null===e||void 0===e?void 0:e.id,createdAt:null===e||void 0===e?void 0:e.createdAt,fideicomiso:(null===e||void 0===e?void 0:e.fideicomisos)?null===e||void 0===e||null===(t=e.fideicomisos[0])||void 0===t?void 0:t.nombre:"",empresa:(null===e||void 0===e?void 0:e.empresas)?null===e||void 0===e||null===(n=e.empresas[0])||void 0===n?void 0:n.razonSocial:"",descripcion1:null===e||void 0===e?void 0:e.descripcion1,monto_ARS:null===e||void 0===e?void 0:e.monto_ARS,monto_USD:null===e||void 0===e?void 0:e.monto_USD,fideicomisoId:null===e||void 0===e?void 0:e.fideicomisoId,empresaId:null===e||void 0===e?void 0:e.empresaId,deleteId:null===e||void 0===e?void 0:e.id,esEditable:function(){return e},onIrDetalle:function(){return C(e)}}})),onCellEditCommit:D,columns:Oo(b,v,x),sortModel:M,onSortModelChange:function(e){return e[0]!==M[0]&&function(e){var t;0===e.length&&(e.push(M[0]),"asc"===(null===(t=M[0])||void 0===t?void 0:t.sort)?e[0].sort="desc":e[0].sort="asc"),E(e)}(e)},pageSize:L,onPageSizeChange:function(e){return B(e)},rowsPerPageOptions:[10,25,50,100],pagination:!0,disableSelectionOnClick:!0,autoHeight:!0,scrollbarSize:!0,components:{Toolbar:go},getRowClassName:function(e){return"super-app-theme--false"}}),Object(k.jsx)(lr.a,{in:N,children:Object(k.jsx)(Le.a,{action:Object(k.jsx)(F.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){Q(!1)},children:Object(k.jsx)(sr.a,{fontSize:"inherit"})}),sx:{mb:2},children:"Acci\xf3n realizada!"})})]})]})}function go(){return Object(k.jsxs)(St.c,{children:[Object(k.jsx)(St.f,{}),Object(k.jsx)(St.d,{}),Object(k.jsx)(St.e,{csvOptions:{fields:["id","createdAt","fideicomiso","empresa","descripcion1","monto_ARS","monto_USD"]}})]})}function yo(e){var t="".concat(e.row.id,"/OC Detalle");return Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:e.row.id})})}function wo(e){var t=e.row.onIrDetalle,n=e.row.fideicomiso;return Object(k.jsxs)(ae.a,{onClick:t,children:[n,"  "]})}function Co(e){var t=e.idSociety,n=e.loggedUser,r=Object(a.useQuery)(["OC",t],(function(){return Ge("OC/listar/".concat(t.id,"/0/0"))})),i=r.data,o=r.isLoading,d=r.error,s=Object(a.useQuery)(["fideicomisos"],(function(){return Ge("fideicomiso/listar/".concat(t.id))})).data,u=Object(a.useQuery)(["proveedores"],(function(){return Ge("empresa/listar/".concat(t.id,"/0"))})).data,b=Object(l.useState)(-1),f=Object(c.a)(b,2),j=f[0],m=f[1],v=Object(l.useState)(-1),h=Object(c.a)(v,2),p=h[0],O=h[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(ye.a,{children:Object(k.jsx)("title",{children:"OP's | TSF Desarrollos"})}),Object(k.jsx)(I.a,{sx:{backgroundColor:"background.default",minHeight:"100%",py:3},children:Object(k.jsxs)(we.a,{maxWidth:!1,children:[Object(k.jsx)(xn.a,{smUp:"vista"===(null===n||void 0===n?void 0:n["rol.oc"]),children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(mo,{idSociety:t,loggedUser:n,fideicomisos:s,proveedores:u})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(vo,{idSociety:t,loggedUser:n,fideicomisos:s,setFiltFide:m,setFiltRS:O,proveedores:u})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(xo,{idSociety:t,loggedUser:n,ocInformation:i,filtFide:j,filtRS:p,isLoading:o,error:d})})]})})]})}var So=n(1201);function Po(e){var t,n=e.OCId,r=e.formOC,i=e.loggedUser,o=e.refetch,s=!0;"vista"===(null===i||void 0===i?void 0:i["rol.oc"])&&(s=!1);var u=Object(l.useContext)(Jo),b=gt().Prompt,f=Object(a.useQueryClient)(),j=Object(l.useState)(""),m=Object(c.a)(j,2),v=m[0],h=m[1],p=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,$e("OC/modificar/".concat(u.id),Object(w.a)({id:r},n,i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,f.cancelQueries(["OC",u]);case 3:return e.next=5,f.getQueryData(["OC",u]);case 5:if(!(o=e.sent)){e.next=10;break}return a=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==r}))),[Object(re.a)(Object(re.a)({},o.find((function(e){return e.id===r}))),{},Object(w.a)({},n,i))]),f.setQueryData(["OC",u],a),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return f.setQueryData(["OC",u],n)},onSettled:function(){u.id>0&&f.invalidateQueries(["OCdetalle",u]),o()}}),O=p.mutate;function x(e,t,n,r,i){if(r)!function(e,t,n){var r;e.preventDefault();var i=e.target.value,o=/^\d{0,5}(\.\d{0,2})?$/,a=e.which||e.keyCode,c=e.ctrlKey?e.ctrlKey:17===a;(null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.name)===t&&(o.test(i.toString())||c)&&O({field:t,id:n,value:i})}(e,t,n);else if(i){D(e);var o=ht(e)+" 03:00";O({field:t,id:n,value:o})}else{var a=e.target.value;O({field:t,id:n,value:a})}}var g,y=[{value:"Construci\xf3n",label:"Construci\xf3n"},{value:"Materiales",label:"Materiales"},{value:"Mano de Obra",label:"Mano de Obra"}],C={es:nr.a},S={es:"__/__/____"},P=void 0===(g=null===r||void 0===r||null===(t=r.oc)||void 0===t?void 0:t.fechaIni)||null===g?null:new Date(g);console.log(2222,P);var A=d.a.useState(P),I=Object(c.a)(A,2),F=I[0],D=I[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{children:function(e){var t,i,o,a;e.isSubmitting;return Object(k.jsx)(Be.b,{children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsxs)(Ce.a,{item:!0,md:5,children:[Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"Tipo de CAC",style:{width:"215px",display:"inline-flex"},select:!0,disabled:!s,defaultValue:null===(i=r.oc)||void 0===i?void 0:i.CACtipo,name:"CACtipo",onChange:function(e){return x(e,"CACtipo",n,!1,!1)},children:y.map((function(e){return Object(k.jsx)(So.a,{value:e.value,children:e.label},e.value)}))},null===r||void 0===r||null===(t=r.oc)||void 0===t?void 0:t.CACtipo),Object(k.jsx)(Ve.a,{size:"small",sx:{width:"20ch"},label:"CAC Base",type:"number",disabled:!s,style:{width:"215px",display:"inline-flex"},defaultValue:null===(a=r.oc)||void 0===a?void 0:a.CACbase,name:"CACbase",onChange:function(e){return h("CACbase")},onBlur:function(e){return x(e,v,n,!0,!1)}},null===r||void 0===r||null===(o=r.oc)||void 0===o?void 0:o.CACbase)]}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(rt.b,{dateAdapter:ot.a,locale:C.es,children:Object(k.jsx)(rr.a,{mask:S.es,value:F,disabled:!s,label:"Fecha",onChange:function(e){return x(e,"fechaIni",n,!1,!0)},renderInput:function(e){return Object(k.jsx)(Ve.a,Object(re.a)({required:!0,size:"small"},e))}})})})]})})}}),Object(k.jsx)(b,{message:"Tarea y monto no puede estar en blanco",ok:!0})]})}function Ao(e){var t=e.OCId,n=e.loggedUser,r=e.moneda,i=e.refetch,o=Object(l.useContext)(Jo),c=gt().Prompt,d=Object(a.useQueryClient)(),s=Object(a.useMutation)((function(e){return $e("OCdetalle/agregar/".concat(o.id),e)}),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(i){var a,c;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.creador=parseInt(n.id),i.OCId=parseInt(t),i.moneda=r,e.next=5,d.invalidateQueries(["OCdetalle",o]);case 5:return e.next=7,d.getQueryData(["OCdetalle",o]);case 7:return a=e.sent,c=[].concat(Object(Fe.a)(a),[Object(re.a)(Object(re.a)({},i),{},{id:(new Date).getTime()})]),d.setQueryData(["OCdetalle",o],c),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return d.setQueryData(["OCdetalle",o],n)},onSettled:function(){o.id>0&&d.invalidateQueries(["OCdetalle",o]),i()}}),u=s.mutate;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(Be.c,{initialValues:{descripcion:"",monto:""},onSubmit:function(){var e=Object(_e.a)(Ee.a.mark((function e(t,n){var r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.setSubmitting,i=n.resetForm,u(t),i(),r(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),children:function(e){var t=e.isSubmitting,n=e.setFieldValue;return Object(k.jsxs)(Be.b,{children:[Object(k.jsx)(Be.a,{as:Ve.a,required:!0,size:"small",style:{width:"215px",display:"inline-flex"},label:"Tarea",type:"string",name:"descripcion"}),Object(k.jsx)(Be.a,{as:Ve.a,required:!0,label:"Monto",style:{width:"215px",display:"inline-flex"},size:"small",type:"float",name:"monto",onChange:function(e){return function(e,t,n){e.preventDefault();var r=e.target.value;/^\d{0,11}$/.test(r.toString())&&t(n,r.toString())}(e,n,"monto")}}),"\xa0\xa0\xa0\xa0\xa0\xa0",Object(k.jsx)(ae.a,{type:"submit",disabled:t,children:"Agregar"})]})}}),Object(k.jsx)(c,{message:"Tarea y monto no puede estar en blanco",ok:!0})]})}var Io=n(7),Fo=Object(p.a)(),Do=Object(j.a)((function(e){return Object(m.a)({root:{border:"1px solid ".concat(e.palette.divider),position:"relative",overflow:"hidden",width:"100%",height:26,borderRadius:2},value:{position:"absolute",lineHeight:"24px",width:"100%",display:"flex",justifyContent:"center"},bar:{height:"100%","&.low":{backgroundColor:"#f44336"},"&.medium":{backgroundColor:"#efbb5aa3"},"&.high":{backgroundColor:"#088208a3"}}})}),{defaultTheme:Fo}),Ro=l.memo((function(e){var t=100*e.value,n=Do();return Object(k.jsxs)("div",{className:n.root,children:[Object(k.jsx)("div",{className:n.value,children:"".concat(t.toLocaleString()," %")}),Object(k.jsx)("div",{className:Object(Io.a)(n.bar,{low:t<30,medium:t>=30&&t<=70,high:t>70}),style:{maxWidth:"".concat(t,"%")}})]})}));function To(e){var t=e.value;return Object(k.jsx)(Ro,{value:t})}var ko=function(e,t,n,r){return[{field:"numero",headerName:"",width:50,editable:e,headerAlign:"center"},{field:"descripcion",headerName:"Tarea",width:400,editable:e,headerAlign:"left"},{field:"monto",preProcessEditCellProps:Qo,headerName:"Monto",width:130,editable:e,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:e,headerAlign:"center"},{field:"porcentaje",preProcessEditCellProps:Qo,headerName:"%",width:65,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var n=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:1}).format(Math.round(1e3*n/t)/10)+"%"}},{field:"createdAt",headerName:"Fecha",width:150,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return dt(e.value)}},{field:"deleteIcon",headerName:"",width:50,hide:!e,headerAlign:"center",align:"center",renderCell:function(e){var t=e.row.deleteId;return Object(k.jsx)(Pt.a,{onClick:function(e){r(t),n(!0)}})}}]};function No(e){var t,n,r,i,o,d,s,u=e.OCId,b=e.loggedUser,f=e.formOC,j=e.refetch,m=e.moneda,v=e.totPagos,h=e.totAjuste,p=e.CACs,O=Object(l.useContext)(Jo),x=gt(),g=x.Prompt,y=x.setIsPromptOpen,C=Object(l.useState)(),S=Object(c.a)(C,2),P=S[0],I=S[1],F=!0;"vista"===(null===b||void 0===b?void 0:b["rol.oc"])&&(F=!1);var D=Object(a.useQuery)(["OCdetalle",O],(function(){return Ge("OCdetalle/listar/".concat(O.id,"/").concat(u))})),R=D.data,T=D.isLoading,N=D.error,Q=Object(a.useQueryClient)(),z=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye("OCdetalle/eliminar/".concat(O.id),{id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.cancelQueries(["OCdetalle",O]);case 2:return n=Q.getQueryData(["OCdetalle",O]),r=n.filter((function(e){return e.id!==t})),Q.setQueryData(["OCdetalle",O],r),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return Q.setQueryData(["OCdetalle",O],n)},onSettled:function(){O.id>0&&Q.invalidateQueries(["OCdetalle",O]),j()}}),U=z.mutate;var M=Object(a.useMutation)(function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,$e("OCdetalle/modificar/".concat(O.id),Object(w.a)({id:r},n,i));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{onMutate:function(){var e=Object(_e.a)(Ee.a.mark((function e(t){var n,r,i,o,a;return Ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.field,r=t.id,i=t.value,e.next=3,Q.cancelQueries(["OCdetalle",O]);case 3:return o=Q.getQueryData(["OCdetalle",O]),a=[].concat(Object(Fe.a)(o.filter((function(e){return e.id!==r}))),[Object(re.a)(Object(re.a)({},o.find((function(e){return e.id===r}))),{},Object(w.a)({},n,i))]),Q.setQueryData(["OCdetalle",O],a),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),onError:function(e,t,n){return Q.setQueryData(["OCdetalle",O],n)},onSettled:function(){O.id>0&&Q.invalidateQueries(["OCdetalle",O]),j()}}),E=M.mutate;if(T)return"Cargando...";if(N)return"Hubo un error: ".concat(N.message);var _="ARS"===m?null===f||void 0===f||null===(t=f.oc)||void 0===t?void 0:t.monto_ARS:null===f||void 0===f||null===(n=f.oc)||void 0===n?void 0:n.monto_USD,V=_+h-v,L=(v-h)/_,B=(1-(null===f||void 0===f||null===(r=f.oc)||void 0===r?void 0:r.CACbase)/function(e,t){var n,r=0;if("Construci\xf3n"===t)r=null===p||void 0===p||null===(n=p.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===n?void 0:n.definitivo;else if("Materiales"===t){var i;r=null===p||void 0===p||null===(i=p.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===i?void 0:i.materiales}else if("Mano de Obra"===t){var o;r=null===p||void 0===p||null===(o=p.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===o?void 0:o.manodeobra}if(!r){var a,c,l=new Date(e.slice(0,10)+" "+e.slice(12,5));if(l.setMonth(l.getMonth()-1),"Construci\xf3n"===t)r=null===p||void 0===p||null===(a=p.find((function(e){return e.fecha.slice(0,7)===ht(l).slice(0,7)})))||void 0===a?void 0:a.definitivo;else if("Materiales"===t){var d;r=null===p||void 0===p||null===(d=p.find((function(e){return e.fecha.slice(0,7)===ht(l).slice(0,7)})))||void 0===d?void 0:d.materiales}else if("Mano de Obra"===t){var s;r=null===p||void 0===p||null===(s=p.find((function(e){return e.fecha.slice(0,7)===ht(l).slice(0,7)})))||void 0===s?void 0:s.manodeobra}if(!r)if(l.setMonth(l.getMonth()-1),"Construci\xf3n"===t)r=null===p||void 0===p||null===(c=p.find((function(e){return e.fecha.slice(0,7)===ht(l).slice(0,7)})))||void 0===c?void 0:c.definitivo;else if("Materiales"===t){var u;r=null===p||void 0===p||null===(u=p.find((function(e){return e.fecha.slice(0,7)===ht(l).slice(0,7)})))||void 0===u?void 0:u.materiales}else if("Mano de Obra"===t){var b;r=null===p||void 0===p||null===(b=p.find((function(e){return e.fecha.slice(0,7)===ht(l).slice(0,7)})))||void 0===b?void 0:b.manodeobra}}return r}(null===(i=f.oc)||void 0===i?void 0:i.fechaIni,null===(o=f.oc)||void 0===o?void 0:o.CACtipo))*V;return L||(L=0),Object(k.jsx)("div",{style:{width:"100%"},children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:8,children:Object(k.jsx)(A.a,{align:"right",color:"textWarning",variant:"h5",children:"Total Contrato:"})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textWarning",variant:"h5",children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(_))+" "+m})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(To,{value:L})}),Object(k.jsx)(Ce.a,{item:!0,md:8,children:Object(k.jsxs)(A.a,{align:"right",color:"textWarning",variant:"h5",children:["Saldo","ARS"===m?" + Ajuste CAC":"",":"]})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"right",color:"textWarning",variant:"h5",children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Math.round(100*Number(V))/100)+" "+m})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:["\xa0\xa0","ARS"===m?"+":"","\xa0\xa0","ARS"===m?Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Math.round(100*Number(B))/100)+" "+m:""]})}),Object(k.jsxs)(Ce.a,{item:!0,md:12,children:[Object(k.jsx)(g,{message:"\xbfEliminar fila?",action:function(){return U(P)}}),Object(k.jsx)(St.a,{rows:R.filter((function(e){return e.moneda===m})).map((function(e){return{id:e.id,OCId:e.OCId,numero:e.numero,avance:e.numero/100,descripcion:e.descripcion,monto:e.monto,porcentaje:e.monto,moneda:e.moneda,createdAt:e.createdAt,deleteId:e.id}})),onCellEditCommit:E,columns:ko(F,"ARS"===m?null===f||void 0===f||null===(d=f.oc)||void 0===d?void 0:d.monto_ARS:null===f||void 0===f||null===(s=f.oc)||void 0===s?void 0:s.monto_USD,y,I),disableSelectionOnClick:!0,autoHeight:!0})]})]})})}function Qo(e){var t=!/^\d{0,3}(\.\d{0,2})?$/.test(e.props.value.toString());return Object(re.a)(Object(re.a)({},e.props),{},{error:t})}var zo=function(e,t){return[{field:"numero",headerName:"OP",width:95,editable:!1,headerAlign:"center",align:"center"},{field:"avanceARS",headerName:"Monto Contrato",width:170,hide:"USD"===t,editable:!1,sortable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"avanceUSD",headerName:"Monto Contrato",width:170,hide:"ARS"===t,sortable:!1,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"ajuste",headerName:"Mayor Costo",width:170,editable:!1,sortable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"montoOP",headerName:"Monto OP",width:140,hide:"ARS"===t,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"moneda",headerName:"",width:50,editable:!1,headerAlign:"center"},{field:"cotizacion_usd",headerName:"Cambio",width:130,hide:"ARS"===t,editable:!1,headerAlign:"center",align:"right",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(t))}},{field:"estado",headerName:"Estado",width:145,hide:!1,editable:!1,headerAlign:"center",align:"center"},{field:"createdAt",headerName:"Fecha",width:140,editable:!1,type:"date",headerAlign:"center",align:"center",valueFormatter:function(e){return dt(e.value)}},{field:"CACop",headerName:"CAC",width:110,hide:"USD"===t,editable:!1,headerAlign:"center",align:"center"},{field:"teorico",headerName:"Costo Te\xf3rico",width:170,editable:!1,hide:"USD"===t,headerAlign:"center",align:"center",valueFormatter:function(e){var t=e.value;return new Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(Math.trunc(100*t)/100))}},{field:"id",headerName:"",hide:!e,width:70,editable:!1,headerAlign:"center",align:"center",renderCell:Mo}]};function Uo(e){e.OCId;var t,n,r=e.loggedUser,i=e.formOC,o=e.isLoading,a=e.error,c=e.moneda,d=e.totPagos,s=e.totAjuste,u=e.CACs,b=null===i||void 0===i?void 0:i.pago,f=Object(l.useContext)(Xo),j=!1;function m(e,t){var n,r=0;if("Construci\xf3n"===t)r=null===u||void 0===u||null===(n=u.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===n?void 0:n.definitivo;else if("Materiales"===t){var i;r=null===u||void 0===u||null===(i=u.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===i?void 0:i.materiales}else if("Mano de Obra"===t){var o;r=null===u||void 0===u||null===(o=u.find((function(t){return t.fecha.slice(0,7)===(null===e||void 0===e?void 0:e.slice(0,7))})))||void 0===o?void 0:o.manodeobra}if(!r){var a,c,l=new Date(e.slice(0,10)+" "+e.slice(12,5));if(l.setMonth(l.getMonth()-1),"Construci\xf3n"===t)r=null===u||void 0===u||null===(a=u.find((function(e){return e.fecha.slice(0,7)===ut(l).slice(0,7)})))||void 0===a?void 0:a.definitivo;else if("Materiales"===t){var d;r=null===u||void 0===u||null===(d=u.find((function(e){return e.fecha.slice(0,7)===ut(l).slice(0,7)})))||void 0===d?void 0:d.materiales}else if("Mano de Obra"===t){var s;r=null===u||void 0===u||null===(s=u.find((function(e){return e.fecha.slice(0,7)===ut(l).slice(0,7)})))||void 0===s?void 0:s.manodeobra}if(!r)if(l.setMonth(l.getMonth()-1),"Construci\xf3n"===t)r=null===u||void 0===u||null===(c=u.find((function(e){return e.fecha.slice(0,7)===ut(l).slice(0,7)})))||void 0===c?void 0:c.definitivo;else if("Materiales"===t){var b;r=null===u||void 0===u||null===(b=u.find((function(e){return e.fecha.slice(0,7)===ut(l).slice(0,7)})))||void 0===b?void 0:b.materiales}else if("Mano de Obra"===t){var f;r=null===u||void 0===u||null===(f=u.find((function(e){return e.fecha.slice(0,7)===ut(l).slice(0,7)})))||void 0===f?void 0:f.manodeobra}}return r}if("no"!==(null===r||void 0===r?void 0:r["rol.op"])&&(j=!0),o)return"Cargando...";if(a)return"Hubo un error: ".concat(a.message);var v=s/("ARS"===c?null===i||void 0===i||null===(t=i.oc)||void 0===t?void 0:t.monto_ARS:null===i||void 0===i||null===(n=i.oc)||void 0===n?void 0:n.monto_USD);return v||(v=0),Object(k.jsx)("div",{style:{width:"100%"},children:Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h6"})}),Object(k.jsx)(Ce.a,{item:!0,md:7,children:Object(k.jsxs)(A.a,{align:"right",color:"textWarning",variant:"h5",children:["Monto Contrato (netos):\xa0\xa0\xa0\xa0\xa0\xa0 ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(d-s))+" "+c]})}),Object(k.jsx)(Ce.a,{item:!0,md:3,children:Object(k.jsxs)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:["Mayores Costos:\xa0\xa0\xa0\xa0\xa0\xa0 ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(s))+" "+c]})}),Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(To,{value:v})}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(St.a,{rows:b.filter((function(e){return e.OC_moneda===c})).map((function(e){var t,n,o,a,c,l,d;return{id:e.id,numero:e.numero,montoOP:e.monto-e.ajuste,cotizacion_usd:e.cotizacion_usd,avanceARS:e.monto-e.ajuste,avanceUSD:"ARS"===e.moneda?(e.monto-e.ajuste)/e.cotizacion_usd:e.monto-e.ajuste,moneda:e.moneda,ajuste:e.ajuste,estadoOP:e.estadoOP,estado:null===f||void 0===f||null===(t=f.find((function(t){return t.id===e.estadoOP})))||void 0===t?void 0:t.descripcion,createdAt:e.createdAt,CACop:m(null===e||void 0===e?void 0:e.createdAt,null===(n=i.oc)||void 0===n?void 0:n.CACtipo),teorico:(1-(null===i||void 0===i||null===(o=i.oc)||void 0===o?void 0:o.CACbase)/m(null===e||void 0===e?void 0:e.createdAt,null===(a=i.oc)||void 0===a?void 0:a.CACtipo))*(e.monto-e.ajuste),confirmada:e.confirmada,blue:e.blue,authADM:e.authADM,authOBRA:e.authOBRA,rol:null===r||void 0===r?void 0:r["rol.descripcion"],empresaId:null===i||void 0===i||null===(c=i.oc)||void 0===c?void 0:c.empresaId,fideicomiso:null===i||void 0===i||null===(l=i.oc)||void 0===l||null===(d=l.fideicomisos[0])||void 0===d?void 0:d.nombre}})),columns:zo(j,c),disableSelectionOnClick:!0,autoHeight:!0})})]})})}function Mo(e){var t="../../op/".concat(e.row.id,"/").concat(e.row.createdAt,"/").concat(e.row.empresaId,"/").concat(e.row.numero,"/").concat(e.row.fideicomiso,"/").concat(e.row.estadoOP,"/").concat(e.row.authADM,"/").concat(e.row.authOBRA,"/").concat(e.row.confirmada,"/").concat(e.row.blue,"/OP Detalle");return 0===e.row.blue||"manager"===e.row.rol?Object(k.jsx)(ae.a,{component:o.c,sx:{color:"primary.main"},to:t,children:Object(k.jsx)("span",{children:"ver"})}):""}function Eo(e){var t=e.OCId,n=e.idSociety,r=e.loggedUser,i=e.formOC,o=e.isLoading,a=e.error,c=e.refetch,l=e.totPagosARS,d=e.totPagosUSD,s=e.totAjusteARS,u=e.totAjusteUSD,b=e.moneda,f=e.setMoneda,j=e.CACs,m="vista"===(null===r||void 0===r?void 0:r["rol.oc"]);return o?"Cargando...":a?"Hubo un error: ".concat(a.message):Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(Fn.a,{value:b,children:[Object(k.jsx)(I.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(k.jsxs)(Dn.a,{onChange:function(e,t){f(t)},"aria-label":"lab API tabs example",children:[Object(k.jsx)(Tn.a,{label:"Pesos",value:"ARS"}),Object(k.jsx)(Tn.a,{label:"Dolares",value:"USD"})]})}),Object(k.jsxs)(Rn.a,{value:"ARS",children:[Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Po,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,moneda:"ARS"})}),Object(k.jsx)(xn.a,{smUp:m,children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ao,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,moneda:"ARS"})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(No,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,totPagos:l,totAjuste:s,moneda:"ARS",CACs:j})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Uo,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,totPagos:l,totAjuste:s,moneda:"ARS",CACs:j})})]}),Object(k.jsxs)(Rn.a,{value:"USD",children:[Object(k.jsx)(xn.a,{smUp:m,children:Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Ao,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,moneda:"USD"})})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(No,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,totPagos:d,totAjuste:u,moneda:"USD",CACs:j})}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Uo,{OCId:t,idSociety:n,loggedUser:r,formOC:i,isLoading:o,error:a,refetch:c,totPagos:d,totAjuste:u,moneda:"USD"})})]})]})})}var _o=kr.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"10%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"60%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col3:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),Vo=function(e){var t=e.dataOC,n=e.color,r=e.moneda;return t.item.filter((function(e){return e.moneda===r})).map((function(e,t){return Object(k.jsxs)(kr.View,{style:[_o.row,{borderBottomColor:n}],children:[Object(k.jsxs)(kr.Text,{style:[_o.col1,{borderRightColor:n}],children:[" ",e.numero]},"col_x"+t),Object(k.jsxs)(kr.Text,{style:[_o.col2,{borderRightColor:n}],children:[" ",e.descripcion]},"col_y"+t),Object(k.jsxs)(kr.Text,{style:[_o.col3,{borderRightColor:n}],children:[" ",dt(e.createdAt)]},"col_z"+t),Object(k.jsx)(kr.Text,{style:_o.col4,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.monto))},"col_w"+t)]},"row"+e.numero+t)}))},Lo=kr.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"10%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"60%",textAlign:"left",borderRightWidth:1,paddingLeft:5},col3:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),Bo=function(e){var t,n,r,i,o,a,c,l,d,s,u,b,f,j,m,v,h,p,O,x,g=e.dataOC,y=e.moneda;return Object(k.jsxs)(kr.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:g?null===g||void 0===g||null===(t=g.oc)||void 0===t||null===(n=t.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff"},children:[Object(k.jsxs)(kr.View,{style:[Lo.container,{borderBottomColor:g?null===g||void 0===g||null===(r=g.oc)||void 0===r||null===(i=r.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",backgroundColor:(null===g||void 0===g?void 0:g.oc)?null===g||void 0===g||null===(o=g.oc)||void 0===o||null===(a=o.fideicomisos[0])||void 0===a?void 0:a.color2:"#ffffff"}],children:[Object(k.jsx)(kr.Text,{style:[Lo.col1,{borderRightColor:g?null===g||void 0===g||null===(c=g.oc)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Num"}),Object(k.jsx)(kr.Text,{style:[Lo.col2,{borderRightColor:g?null===g||void 0===g||null===(d=g.oc)||void 0===d||null===(s=d.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:"Tarea"}),Object(k.jsx)(kr.Text,{style:[Lo.col3,{borderRightColor:g?null===g||void 0===g||null===(u=g.oc)||void 0===u||null===(b=u.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:"Fecha"}),Object(k.jsx)(kr.Text,{style:[Lo.col4,{borderRightColor:g?null===g||void 0===g||null===(f=g.oc)||void 0===f||null===(j=f.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:"Monto"})]}),Object(k.jsx)(Vo,{dataOC:g,color:g?null===g||void 0===g||null===(m=g.oc)||void 0===m||null===(v=m.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff",moneda:y}),Object(k.jsxs)(kr.View,{style:Lo.rowf,children:[Object(k.jsx)(kr.Text,{style:[Lo.descriptionf,{borderRightColor:(null===g||void 0===g?void 0:g.oc)?null===g||void 0===g||null===(h=g.oc)||void 0===h||null===(p=h.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:"TOTAL"}),Object(k.jsx)(kr.Text,{style:Lo.col4,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===y?null===g||void 0===g||null===(O=g.oc)||void 0===O?void 0:O.monto_ARS:null===g||void 0===g||null===(x=g.oc)||void 0===x?void 0:x.monto_USD))})]})]})},qo=kr.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"35%",textAlign:"right",borderRightWidth:1,paddingRight:5},col3:{width:"35%",borderRightWidth:1,textAlign:"right",paddingRight:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"85%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"12%",textAlign:"right",paddingRight:8}}),Wo=function(e){var t=e.dataOC,n=e.color,r=e.moneda;return t.pago.filter((function(e){return e.OC_moneda===r})).map((function(e,t){return Object(k.jsxs)(kr.View,{style:[qo.row,{borderBottomColor:n}],children:[Object(k.jsxs)(kr.Text,{style:[qo.col1,{borderRightColor:n}],children:[" ",e.numero]},"col_a"+t),Object(k.jsxs)(kr.Text,{style:[qo.col2,{borderRightColor:n}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===r?e.monto-e.ajuste:"ARS"===e.moneda?(e.monto-e.ajuste)/e.cotizacion_usd:e.monto-e.ajuste))]},"col_b"+t),Object(k.jsxs)(kr.Text,{style:[qo.col3,{borderRightColor:n}],children:[" ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number(e.ajuste))]},"col_c"+t),Object(k.jsx)(kr.Text,{style:qo.col4,children:dt(e.createdAt)},"col_d"+t)]},"row"+e.numero+t)}))},Ho=kr.StyleSheet.create({container:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:10,textAlign:"center",fontStyle:"bold",flexGrow:1},row:{flexDirection:"row",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},col1:{width:"15%",borderRightWidth:1,textAlign:"center",paddingLeft:5},col2:{width:"35%",textAlign:"right",borderRightWidth:1,paddingRight:5},col3:{width:"35%",borderRightWidth:1,textAlign:"right",paddingRight:5},col4:{width:"15%",textAlign:"right",paddingRight:5},rowf:{flexDirection:"row",borderBottomColor:"#ffffff",borderBottomWidth:1,alignItems:"center",height:21,fontSize:8,fontStyle:"bold"},descriptionf:{width:"15%",textAlign:"right",borderRightWidth:1,paddingRight:8},totalf:{width:"35%",textAlign:"right",paddingRight:8}}),Go=function(e){var t,n,r,i,o,a,c,l,d,s,u,b,f,j,m,v,h,p,O=e.dataOC,x=e.moneda,g=e.totARS,y=e.totUSD,w=e.ajARS,C=e.ajUSD;return Object(k.jsxs)(kr.View,{style:{flexDirection:"row",flexWrap:"wrap",marginTop:8,borderWidth:1,borderColor:O?null===O||void 0===O||null===(t=O.oc)||void 0===t||null===(n=t.fideicomisos[0])||void 0===n?void 0:n.color:"#ffffff"},children:[Object(k.jsxs)(kr.View,{style:[Ho.container,{borderBottomColor:O?null===O||void 0===O||null===(r=O.oc)||void 0===r||null===(i=r.fideicomisos[0])||void 0===i?void 0:i.color:"#ffffff",backgroundColor:(null===O||void 0===O?void 0:O.oc)?null===O||void 0===O||null===(o=O.oc)||void 0===o||null===(a=o.fideicomisos[0])||void 0===a?void 0:a.color2:"#ffffff"}],children:[Object(k.jsx)(kr.Text,{style:[Ho.col1,{borderRightColor:O?null===O||void 0===O||null===(c=O.oc)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l?void 0:l.color:"#ffffff"}],children:"Num"}),Object(k.jsx)(kr.Text,{style:[Ho.col2,{borderRightColor:O?null===O||void 0===O||null===(d=O.oc)||void 0===d||null===(s=d.fideicomisos[0])||void 0===s?void 0:s.color:"#ffffff"}],children:"Monto Contrato"}),Object(k.jsx)(kr.Text,{style:[Ho.col3,{borderRightColor:O?null===O||void 0===O||null===(u=O.oc)||void 0===u||null===(b=u.fideicomisos[0])||void 0===b?void 0:b.color:"#ffffff"}],children:"Mayor Costo"}),Object(k.jsx)(kr.Text,{style:[Ho.col4,{borderRightColor:O?null===O||void 0===O||null===(f=O.oc)||void 0===f||null===(j=f.fideicomisos[0])||void 0===j?void 0:j.color:"#ffffff"}],children:"Fecha"})]}),Object(k.jsx)(Wo,{dataOC:O,color:O?null===O||void 0===O||null===(m=O.oc)||void 0===m||null===(v=m.fideicomisos[0])||void 0===v?void 0:v.color:"#ffffff",moneda:x}),Object(k.jsxs)(kr.View,{style:Ho.rowf,children:[Object(k.jsx)(kr.Text,{style:[Ho.col1,{borderRightColor:(null===O||void 0===O?void 0:O.oc)?null===O||void 0===O||null===(h=O.oc)||void 0===h||null===(p=h.fideicomisos[0])||void 0===p?void 0:p.color:"#ffffff"}],children:"TOTALES"}),Object(k.jsx)(kr.Text,{style:Ho.col2,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===x?g-w:y-C))}),Object(k.jsx)(kr.Text,{style:Ho.col3,children:Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===x?w:C))}),Object(k.jsx)(kr.Text,{style:Ho.col4,children:" "})]})]})},$o=kr.StyleSheet.create({page:{fontFamily:"Helvetica",fontSize:11,paddingTop:10,paddingLeft:60,paddingRight:60,lineHeight:1.5,flexDirection:"column"},logo:{height:43,marginLeft:"auto",marginRight:"auto"},titleContainer:{flexDirection:"row",marginTop:24},reportTitle:{color:"#101010",letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},reportTitleFide:{letterSpacing:4,fontSize:22,textAlign:"center",textTransform:"uppercase"},subreportTitle:{color:"#101010",letterSpacing:4,fontSize:14,textAlign:"left",textTransform:"uppercase"},saltolinea:{fontSize:8},invoiceNoContainer:{flexDirection:"row",marginTop:36,justifyContent:"flex-end"},invoiceDateContainer:{flexDirection:"row",justifyContent:"flex-end"},invoiceDate:{fontSize:12,fontStyle:"bold"}}),Yo=function(e){var t,n,r,i,o,a,c,l,d,s,u,b,f,j,m,v,h=e.dataOC,p=e.apiServerUrl,O=e.idSociedad,x=e.moneda,g=e.totARS,y=e.totUSD,w=e.ajARS,C=e.ajUSD;return Object(k.jsx)(kr.Document,{children:Object(k.jsxs)(kr.Page,{size:"A4",style:$o.page,children:[Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:$o.saltolinea,children:" "})}),Object(k.jsxs)(kr.View,{style:{flexDirection:"row",marginLeft:"0",marginRight:"0"},children:[Object(k.jsx)(kr.Text,{style:[$o.reportTitleFide,{width:(null===h||void 0===h?void 0:h.oc)?100-(null===h||void 0===h||null===(t=h.oc)||void 0===t||null===(n=t.fideicomisos[0])||void 0===n?void 0:n.ancho_logo)+"%":"75%",color:null===h||void 0===h||null===(r=h.oc)||void 0===r||null===(i=r.fideicomisos[0])||void 0===i?void 0:i.color}],children:null===h||void 0===h||null===(o=h.oc)||void 0===o||null===(a=o.fideicomisos[0])||void 0===a?void 0:a.titulo}),Object(k.jsx)(kr.View,{style:{width:h?"80%":"25%"},children:Object(k.jsx)(kr.Image,{style:[$o.logo,{backgroundColor:(null===h||void 0===h?void 0:h.oc)?null===h||void 0===h||null===(c=h.oc)||void 0===c||null===(l=c.fideicomisos[0])||void 0===l?void 0:l.color3:"#FFFFFF"}],src:{uri:"".concat(p,"/sociedades/").concat(O,"/").concat((null===h||void 0===h?void 0:h.oc)?null===h||void 0===h||null===(d=h.oc)||void 0===d||null===(s=d.fideicomisos[0])||void 0===s?void 0:s.logo:"logo.png"),method:"GET",body:""}})})]}),Object(k.jsxs)(kr.View,{style:$o.invoiceDateContainer,children:[Object(k.jsx)(kr.Text,{style:$o.label,children:"Fecha: "}),Object(k.jsx)(kr.Text,{children:dt(null===h||void 0===h||null===(u=h.oc)||void 0===u?void 0:u.createdAt)})]}),Object(k.jsx)(kr.View,{style:$o.titleContainer,children:Object(k.jsxs)(kr.Text,{style:$o.reportTitle,children:["ORDEN DE COMPRA N\xba ",null===h||void 0===h||null===(b=h.oc)||void 0===b?void 0:b.id]})}),Object(k.jsx)(kr.View,{style:$o.titleContainer,children:Object(k.jsxs)(kr.Text,{style:$o.subreportTitle,children:["Raz\xf3n social: ",null===h||void 0===h||null===(f=h.oc)||void 0===f||null===(j=f.empresas[0])||void 0===j?void 0:j.razonSocial]})}),Object(k.jsx)(kr.View,{style:$o.titleContainer,children:Object(k.jsxs)(kr.Text,{style:$o.subreportTitle,children:["Monto total: ",Intl.NumberFormat("es-AR",{minimumFractionDigits:2}).format(Number("ARS"===x?null===h||void 0===h||null===(m=h.oc)||void 0===m?void 0:m.monto_ARS:null===h||void 0===h||null===(v=h.oc)||void 0===v?void 0:v.monto_USD)),"  ","ARS"===x?"pesos":"dolares"]})}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:$o.saltolinea,children:" "})}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:$o.subreportTitle,children:"TAREAS"})}),Object(k.jsx)(Bo,{dataOC:h,moneda:x}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:$o.saltolinea,children:" "})}),Object(k.jsx)(kr.View,{children:Object(k.jsx)(kr.Text,{style:$o.subreportTitle,children:"PAGOS"})}),Object(k.jsx)(Go,{dataOC:h,moneda:x,totARS:g,totUSD:y,ajARS:w,ajUSD:C})]})})},Ko="http://104.131.28.211:3000/";function Zo(e){var t,n,r,i,o,l,u,b=e.idSociety,f=e.loggedUser,j=Object(s.j)().idOC,m=d.a.useState(!1),v=Object(c.a)(m,2),h=v[0],p=v[1];var O=Object(a.useQuery)(["formOC",b.id],(function(){return Ge("oc/mostrarConDetalle/".concat(b.id,"/").concat(j))})),x=O.data,g=O.isLoading,y=O.error,w=O.refetch,C=Object(a.useQuery)(["CACs",b],(function(){return Ge("CAC/listar/".concat(b.id))})).data,S=d.a.useState("ARS"),P=Object(c.a)(S,2),F=P[0],D=P[1];if(g)return"Cargando...";if(y)return"Hubo un error: ".concat(y.message);for(var R=0,T=0,N=0,Q=0,z=0;z<(null===x||void 0===x?void 0:x.pago.length);z++)"ARS"===(null===x||void 0===x?void 0:x.pago[z].OC_moneda)?(R+=parseFloat(null===x||void 0===x?void 0:x.pago[z].monto),N+=parseFloat((null===x||void 0===x?void 0:x.pago[z].ajuste)?null===x||void 0===x?void 0:x.pago[z].ajuste:0)):"ARS"===(null===x||void 0===x?void 0:x.pago[z].moneda)?(T+=parseFloat(null===x||void 0===x?void 0:x.pago[z].monto)/parseFloat(null===x||void 0===x?void 0:x.pago[z].cotizacion_usd),Q+=parseFloat((null===x||void 0===x?void 0:x.pago[z].ajuste)?null===x||void 0===x?void 0:x.pago[z].ajuste:0)/parseFloat(null===x||void 0===x?void 0:x.pago[z].cotizacion_usd)):(T+=parseFloat(null===x||void 0===x?void 0:x.pago[z].monto),Q+=parseFloat((null===x||void 0===x?void 0:x.pago[z].ajuste)?null===x||void 0===x?void 0:x.pago[z].ajuste:0));return console.log(R,N),Object(k.jsxs)("div",{id:"MENU",style:{minHeight:"100vh"},children:[Object(k.jsx)("nav",{style:{display:"flex",borderBottom:"1px solid black",paddingBottom:"5px",justifyContent:"flex-end"},children:Object(k.jsxs)(I.a,{mt:2,sx:{pt:1},children:[Object(k.jsx)(ae.a,{onClick:function(){p(!h)},children:h?"Ocultar PDF":"Ver PDF"}),Object(k.jsx)(kr.PDFDownloadLink,{document:!1===g?Object(k.jsx)(Yo,{dataOC:x,moneda:F,totARS:R,totUSD:T,ajARS:N,ajUSD:Q,idSociedad:b.id,apiServerUrl:Ko}):null,fileName:function(e){var t,n,r,i,o;return(null===e||void 0===e||null===(t=e.oc)||void 0===t?void 0:t.id)+" OP -"+(null===e||void 0===e||null===(n=e.oc)||void 0===n||null===(r=n.fideicomisos[0])||void 0===r?void 0:r.nombre)+"-"+(null===e||void 0===e||null===(i=e.oc)||void 0===i||null===(o=i.empresas[0])||void 0===o?void 0:o.razonSocial)+".pdf"}(x),children:Object(k.jsx)(ae.a,{variant:"info",children:"Descargar"})})]})}),Object(k.jsx)(k.Fragment,{children:h?Object(k.jsx)(kr.PDFViewer,{style:{width:"100%",height:"90vh"},children:Object(k.jsx)(Yo,{dataOC:x,moneda:F,totARS:R,totUSD:T,ajARS:N,ajUSD:Q,idSociedad:b.id,apiServerUrl:Ko})}):Object(k.jsxs)(we.a,{children:[Object(k.jsxs)(I.a,{sx:{pt:3},children:[Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:.5,md:1},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:2,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:"Orden de Compra:"})}),Object(k.jsx)(Ce.a,{item:!0,md:7,children:Object(k.jsxs)(A.a,{align:"left",color:"textPrimary",variant:"h4",children:[null===x||void 0===x||null===(t=x.oc)||void 0===t?void 0:t.id,"\xa0\xa0\xa0|\xa0\xa0\xa0Razon Social: ",null===x||void 0===x||null===(n=x.oc)||void 0===n||null===(r=n.empresas[0])||void 0===r?void 0:r.razonSocial,"\xa0\xa0\xa0-\xa0\xa0\xa0",null===x||void 0===x||null===(i=x.oc)||void 0===i||null===(o=i.fideicomisos[0])||void 0===o?void 0:o.nombre]})}),Object(k.jsx)(Ce.a,{item:!0,md:3,children:Object(k.jsx)(A.a,{align:"right",color:"textPrimary",variant:"h5",children:st(null===x||void 0===x||null===(l=x.oc)||void 0===l?void 0:l.createdAt)})})]}),Object(k.jsxs)(Ce.a,{container:!0,spacing:{xs:1.5,md:2},columns:{xs:4,sm:8,md:12},children:[Object(k.jsx)(Ce.a,{item:!0,md:12,children:"\xa0"}),Object(k.jsx)(Ce.a,{item:!0,md:12,children:Object(k.jsx)(A.a,{align:"left",color:"textPrimary",variant:"h5",children:null===x||void 0===x||null===(u=x.oc)||void 0===u?void 0:u.descripcion1})})]})]}),Object(k.jsx)(I.a,{sx:{pt:3},children:Object(k.jsx)(Eo,{OCId:j,idSociety:b,loggedUser:f,formOC:x,isLoading:g,error:y,totPagosARS:R,totPagosUSD:T,totAjusteARS:N,totAjusteUSD:Q,moneda:F,setMoneda:D,CACs:C,refetch:w})})]})})]})}var Jo=Object(l.createContext)({}),Xo=Object(l.createContext)({}),ea=Object(l.createContext)({}),ta=Object(l.createContext)({}),na=Object(l.createContext)({}),ra=Object(l.createContext)({}),ia=Object(l.createContext)({}),oa=Object(l.createContext)({}),aa=Object(l.createContext)({});function ca(){var e=function(){var e=Object(l.useState)((function(){var e=localStorage.getItem("loggedUserInfo");return e?JSON.parse(e):null})),t=Object(c.a)(e,2),n=t[0],r=t[1];return Object(l.useEffect)((function(){localStorage.setItem("loggedUserInfo",JSON.stringify(n))}),[n]),{loggedUser:n,setLoggedUser:r}}(),t=e.loggedUser,n=e.setLoggedUser,r=Object(l.useState)((function(){var e=localStorage.getItem("idSociety");return e?JSON.parse(e):null})),i=Object(c.a)(r,2),o=i[0],d=i[1],u=Object(a.useQuery)(["estados",o],(function(){return Ge("listasOP/listarEstados/".concat(o.id))})).data,b=Object(a.useQuery)(["formaPagos",o],(function(){return Ge("listasOP/listarFormaPagos/".concat(o.id))})).data,j=Object(a.useQuery)(["retenciones",o],(function(){return Ge("listasOP/listarRetenciones/".concat(o.id))})).data,m=Object(a.useQuery)(["fondos",o],(function(){return Ge("listasOP/listarFondos/".concat(o.id))})).data,v=Object(a.useQuery)(["tipos",o],(function(){return Ge("listasOP/listarTipos/".concat(o.id))})).data,p=Object(a.useQuery)(["condicion_de_IVA",o],(function(){return Ge("listasOP/listarCondicion_de_IVA/".concat(o.id))})).data,O=Object(a.useQuery)(["tipoProductos",o],(function(){return Ge("listasFidu/listarTipoProductos/".concat(o.id))})).data,x=Object(a.useQuery)(["categoriaCombo",o],(function(){return Ge("categoria/listarCombo/".concat(o.id))})).data;return Object(k.jsx)(Jo.Provider,{value:o,children:Object(k.jsx)(Xo.Provider,{value:u,children:Object(k.jsx)(ea.Provider,{value:b,children:Object(k.jsx)(ta.Provider,{value:j,children:Object(k.jsx)(na.Provider,{value:m,children:Object(k.jsx)(ra.Provider,{value:v,children:Object(k.jsx)(ia.Provider,{value:p,children:Object(k.jsx)(oa.Provider,{value:O,children:Object(k.jsx)(aa.Provider,{value:x,children:Object(k.jsxs)(f.a,{theme:y,children:[Object(k.jsx)(h,{}),Object(k.jsx)(s.e,{children:t?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(s.c,{path:"/",element:Object(k.jsx)(s.a,{to:"".concat(null===o||void 0===o?void 0:o.nombre)})}),Object(k.jsxs)(s.c,{path:":societyName",element:Object(k.jsx)(me,{setLoggedUser:n,idSociety:o,loggedUser:t}),children:[Object(k.jsx)(s.c,{path:"dashboard",element:Object(k.jsx)(Ue,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:"dolar",element:Object(k.jsx)(Rt,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:"cac",element:Object(k.jsx)(zt,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:"usuarios",element:Object(k.jsx)(On,{idSociety:o,loggedUser:t})}),Object(k.jsxs)(s.c,{path:"rubro",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(Lt,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idRubro/:rubro",element:Object(k.jsx)(Jt,{idSociety:o,loggedUser:t})})]}),Object(k.jsxs)(s.c,{path:"contrato",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(Sr,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":contratoId/:page",element:Object(k.jsx)(Ur,{idSociety:o,loggedUser:t})})]}),Object(k.jsx)(s.c,{path:"cobros",element:Object(k.jsx)(Pr,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:"cuotas",element:Object(k.jsx)(Ar,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:"categoria",element:Object(k.jsx)(Gt,{idSociety:o,loggedUser:t})}),Object(k.jsxs)(s.c,{path:"OC",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(Co,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idOC/:page",element:Object(k.jsx)(Zo,{idSociety:o,loggedUser:t})})]}),Object(k.jsx)(s.c,{path:"fiduciantes",element:Object(k.jsx)(Mn,{idSociety:o,loggedUser:t})}),Object(k.jsxs)(s.c,{path:"fideicomiso",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(Hn,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":fideicomisoId/:nombre",element:Object(k.jsx)(Jn,{idSociety:o,loggedUser:t})})]}),Object(k.jsxs)(s.c,{path:"factura",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(jo,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(k.jsx)(to,{idSociety:o,formaPagos:b,loggedUser:t})})]}),Object(k.jsxs)(s.c,{path:"OP",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(Ii,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(k.jsx)(to,{idSociety:o,formaPagos:b,loggedUser:t})})]}),Object(k.jsxs)(s.c,{path:"AuthAdmOP",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(Ei,{idSociety:o,formaPagos:b,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(k.jsx)(to,{idSociety:o,loggedUser:t})})]}),Object(k.jsxs)(s.c,{path:"AuthObraOP",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(_i,{idSociety:o,formaPagos:b,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idOP/:fecha/:empresaId/:numero/:fideicomiso/:estadoOP/:auth_adm/:auth_obra/:confirmada/:blue/:page",element:Object(k.jsx)(to,{idSociety:o,loggedUser:t})})]}),Object(k.jsx)(s.c,{path:"proveedores",element:Object(k.jsx)(In,{idSociety:o,loggedUser:t})}),Object(k.jsxs)(s.c,{path:"banco",children:[Object(k.jsx)(s.c,{path:"",element:Object(k.jsx)(on,{idSociety:o,loggedUser:t})}),Object(k.jsx)(s.c,{path:":idBanco/:banco",element:Object(k.jsx)(sn,{idSociety:o,loggedUser:t})})]}),Object(k.jsx)(s.c,{path:"*",element:Object(k.jsx)(nt,{})})]})]}):Object(k.jsxs)(ge,{children:[Object(k.jsx)(s.c,{path:":societyName/login",element:Object(k.jsx)(Ke,{setLoggedUser:n,setIdSociety:d})}),Object(k.jsx)(s.c,{path:":societyName",element:Object(k.jsx)(s.a,{to:"login"})}),Object(k.jsx)(s.c,{path:"*",element:Object(k.jsx)(s.a,{to:"/"})})]})})]})})})})})})})})})})}b.a.config();var la=new a.QueryClient;i.a.render(Object(k.jsx)(o.a,{children:Object(k.jsx)(a.QueryClientProvider,{client:la,children:Object(k.jsx)(ca,{})})}),document.getElementById("root"))},718:function(e,t){},720:function(e,t){},750:function(e,t){},751:function(e,t){},862:function(e,t){}},[[1031,1,2]]]);
//# sourceMappingURL=main.bb47dd64.chunk.js.map